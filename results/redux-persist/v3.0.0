[
	{
		"reproduceVersion": "0.0.0-local",
		"timestamp": "2026-01-09T00:21:42.330Z",
		"os": "linux",
		"arch": "x64",
		"strategy": "npm:11.7.0",
		"reproduced": false,
		"attested": false,
		"package": {
			"spec": "redux-persist@3.0.0",
			"name": "redux-persist",
			"version": "3.0.0",
			"location": "https://registry.npmjs.org/redux-persist/-/redux-persist-3.0.0.tgz",
			"integrity": "sha512-54aTIWB0ocjgdicLno/oPjztFYMKxKw5pIZ3e7Ou0hL4jmDkd0s2l0z9jVPlZCieNwBN87VLkCeoTo/VPhFGkw==",
			"publishedAt": "2016-04-27T03:22:29.444Z",
			"publishedWith": {
				"node": "5.1.0",
				"npm": "3.8.2"
			},
			"dependencies": {
				"lodash": "^4.11.1",
				"json-stringify-safe": "^5.0.1"
			}
		},
		"source": {
			"integrity": "sha512-Hfj6RKCz/RP3pWf5zqq5Ds/DtuQwkQKVyIUhK8Lsit9Sd0034BqraWcGHnHLXk3eirgJiTTA8iTPoDOgoAgZ0g==",
			"location": "git+https://github.com/rt2zz/redux-persist.git",
			"spec": "github:rt2zz/redux-persist#1be6291eb8f419c435f1225ef9729b4e655c2e68"
		},
		"comparisonHash": "9ef46a5bd31291e57cbab41e2f17c57bd6da0b5b",
		"diff": {
			"files": {
				"README.md": {
					"diff": "--- published/README.md\n+++ rebuilt/README.md\n@@ -1,127 +1,312 @@\n # Redux Persist\n Persist and rehydrate a redux store.\n \n-Redux Persist is [performant](#performance), easy to [implement](#basic-usage), and easy to [extend](#extend-and-customize).\n+[![build status](https://img.shields.io/travis/rt2zz/redux-persist/master.svg?style=flat-square)](https://travis-ci.org/rt2zz/redux-persist) [![npm version](https://img.shields.io/npm/v/redux-persist.svg?style=flat-square)](https://www.npmjs.com/package/redux-persist) [![npm downloads](https://img.shields.io/npm/dm/redux-persist.svg?style=flat-square)](https://www.npmjs.com/package/redux-persist)\n \n-**[V3 changelog](https://github.com/rt2zz/redux-persist/issues/72)**\n-These docs are for redux-persist v3 which is installable via the next tag. This version removes the automatic action buffer, if you relied on this functionality you can now [implement it explicitly](#action-buffer).\n-`npm i --save redux-persist@next`\n+## October 15th, 2021 - Move to TypeScript (Thanks [@smellman](https://github.com/smellman))\n \n-[![build status](https://img.shields.io/travis/rt2zz/redux-persist/master.svg?style=flat-square)](https://travis-ci.org/rt2zz/redux-persist)\n-[![npm version](https://img.shields.io/npm/v/redux-persist.svg?style=flat-square)](https://www.npmjs.com/package/redux-persist)\n-[![npm downloads](https://img.shields.io/npm/dm/redux-persist.svg?style=flat-square)](https://www.npmjs.com/package/redux-persist)\n+As part of the work to upgrade the infrastructure used to build redux-persist, we're moving from Flow to TypeScript.\n \n-## Basic Usage\n-Basic usage requires adding three lines to a traditional redux application:\n-```js\n-import {persistStore, autoRehydrate} from 'redux-persist'\n-const store = createStore(reducer, null, autoRehydrate())\n-persistStore(store)\n-```\n-For per reducer rehydration logic, you can opt-in by adding a handler to your reducer:\n+- Move from Flow to TypeScript\n+- Move from TravisCI to GitHub Actions ([.github/workflows/ci.yml](.github/workflows/ci.yml))\n+- Version updates for some dependencies\n+\n+## September 22nd, 2021 - Under New Management\n+\n+Redux Persist is a staple project for Redux developers, both on mobile and on the web. If you're here, it's likely because you need it now or have used it before and need to debug something, and like me have possibly struggled with making it work (especially with newer versions of things) and making it work with _your_ code because the examples you'll find around the internet are inconsistent.\n+\n+I ([@ckalika](https://github.com/ckalika)) spoke with [@rt2zz](https://github.com/rt2zz) about taking over maintenance of the project, and we agreed to give it a shot and see how we go. My priorities are as follows:\n+\n+1. Go through and triage the existing issues\n+    - Separate them into bugs, feature requests, basic questions/requests for code samples, and issues that are either not project-specific or don't fall within the remit of the project (specific definitions and criteria will be posted in the future)\n+    - Determine the severity/urgency of each bug or feature request\n+    - Guestimate the size of them\n+    - Determine which are actionable immediately or in the short term\n+    - Establish some semblance of test criteria for each\n+\n+\n+2. Upgrade dependencies (where possible) so that we've got something building with modern versions\n+    * Note:  Right now, it's about modernising the project infrastructure and build process without making breaking API changes\n+\n+\n+3. Go through the existing pull requests\n+    - Merge the ones that deal with documentation, code samples, etc.\n+    - Review and merge the ones that deal with open issues\n+    - Review and merge the ones that will require breaking changes and consult authors about `redux-persist@v7` (feature set and requirements to be defined)\n+\n+\n+4. Update the documentation\n+    - Split it out for both web and mobile\n+    - Providing code samples and test coverage for how to use the library\n+    - Provide or link to working examples that integrate with additional libraries (e.g. [RTK Query](https://redux-toolkit.js.org/rtk-query/overview)).\n+\n+\n+5. Improve testing and automation\n+    - [x] Move to GitHub Actions\n+    - [ ] Move from Ava to Jest\n+\n+There's a lot to do here, so I'll ask your patience and understanding as I work through it. If you have ideas for how to improve the library, the documentation, or the community, I'd love to hear them, and if you're submitting pull requests (or have submitted some previously), please reach out and help me understand what you're aiming to do with it.\n+\n+I'll try to get some discussions up to pull together ideas, so we can properly work out what the next version is likely to look like.\n+\n+\n+## v6 upgrade\n+**Web**: no breaking changes\n+**React Native**: Users must now explicitly pass their storage engine in. e.g.\n ```js\n-import {REHYDRATE} from 'redux-persist/constants'\n-//...\n-case REHYDRATE:\n-  var incoming = action.payload.myReducer\n-  if (incoming) return {...state, ...incoming, specialKey: processSpecial(incoming.specialKey)}\n-  return state\n+import AsyncStorage from '@react-native-async-storage/async-storage';\n+\n+const persistConfig = {\n+  //...\n+  storage: AsyncStorage\n+}\n ```\n-You may also need to configure the persistence layer, or take action after rehydration has completed:\n+\n+## Quickstart\n+`npm install redux-persist`\n+\n+Usage Examples:\n+1. [Basic Usage](#basic-usage)\n+2. [Nested Persists](#nested-persists)\n+3. [Hot Module Replacement](./docs/hot-module-replacement.md)\n+4. Code Splitting [coming soon]\n+\n+#### Basic Usage\n+Basic usage involves adding `persistReducer` and `persistStore` to your setup. **IMPORTANT** Every app needs to decide how many levels of state they want to \"merge\". The default is 1 level. Please read through the [state reconciler docs](#state-reconciler) for more information.\n",
					"match": false,
					"packageHash": "5610c9696071b52536657c92d4700dace751bc5ba6f97c19734385260faf266c",
					"size": 6509,
					"sourceHash": "b53da15e3cf93d120c48f0834812b2216152999936a7f8b1808e67012be21a29",
					"status": "content"
				},
				"constants.js": {
					"match": false,
					"packageHash": "c2c8fc9ec76230573365544f75d4ab5403974dd27ce9001e3b8aa0dd657263ce",
					"size": 45,
					"status": "missing-in-source"
				},
				"lib/autoRehydrate.js": {
					"match": false,
					"packageHash": "8140c29db7afa4965add4a6763823261893995f82d9a2d0b01092978aeffdddb",
					"size": 3498,
					"status": "missing-in-source"
				},
				"lib/constants.js": {
					"diff": "--- published/lib/constants.js\n+++ rebuilt/lib/constants.js\n@@ -1,8 +1,11 @@\n-'use strict';\n-\n-Object.defineProperty(exports, \"__esModule\", {\n-  value: true\n-});\n-var keyPrefix = exports.keyPrefix = 'reduxPersist:';\n-var REHYDRATE = exports.REHYDRATE = 'persist/REHYDRATE';\n-var REHYDRATE_ERROR = exports.REHYDRATE_ERROR = 'persist/REHYDRATE_ERROR';\n\\ No newline at end of file\n+\"use strict\";\n+Object.defineProperty(exports, \"__esModule\", { value: true });\n+exports.DEFAULT_VERSION = exports.REGISTER = exports.PURGE = exports.PERSIST = exports.PAUSE = exports.REHYDRATE = exports.FLUSH = exports.KEY_PREFIX = void 0;\n+exports.KEY_PREFIX = 'persist:';\n+exports.FLUSH = 'persist/FLUSH';\n+exports.REHYDRATE = 'persist/REHYDRATE';\n+exports.PAUSE = 'persist/PAUSE';\n+exports.PERSIST = 'persist/PERSIST';\n+exports.PURGE = 'persist/PURGE';\n+exports.REGISTER = 'persist/REGISTER';\n+exports.DEFAULT_VERSION = -1;\n",
					"match": false,
					"packageHash": "62a4a90fb2038aeb9ca264a28c411150239abcb378f78ac6f8196162bc08767c",
					"size": 264,
					"sourceHash": "db15c6f4322498ce9991d61baffce5837524cfb78862e27b64250aaa9f42731a",
					"status": "content"
				},
				"lib/createPersistor.js": {
					"match": false,
					"packageHash": "b953aecce713e07737b829558f30a3069af53982e9438f0353b59b4906443130",
					"size": 5895,
					"status": "missing-in-source"
				},
				"lib/createTransform.js": {
					"diff": "--- published/lib/createTransform.js\n+++ rebuilt/lib/createTransform.js\n@@ -1,28 +1,28 @@\n \"use strict\";\n-\n-Object.defineProperty(exports, \"__esModule\", {\n-  value: true\n-});\n-function createTransform(inbound, outbound) {\n-  var config = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n-\n-  var whitelist = config.whitelist || null;\n-  var blacklist = config.blacklist || null;\n-\n-  function whitelistBlacklistCheck(key) {\n-    if (whitelist && whitelist.indexOf(key) === -1) return true;\n-    if (blacklist && blacklist.indexOf(key) !== -1) return true;\n-    return false;\n-  }\n-\n-  return {\n-    in: function _in(state, key) {\n-      return !whitelistBlacklistCheck(key) ? inbound(state, key) : state;\n-    },\n-    out: function out(state, key) {\n-      return !whitelistBlacklistCheck(key) ? outbound(state, key) : state;\n+Object.defineProperty(exports, \"__esModule\", { value: true });\n+function createTransform(\n+// @NOTE inbound: transform state coming from redux on its way to being serialized and stored\n+// eslint-disable-next-line @typescript-eslint/ban-types\n+inbound, \n+// @NOTE outbound: transform state coming from storage, on its way to be rehydrated into redux\n+// eslint-disable-next-line @typescript-eslint/ban-types\n+outbound, config = {}) {\n+    const whitelist = config.whitelist || null;\n+    const blacklist = config.blacklist || null;\n+    function whitelistBlacklistCheck(key) {\n+        if (whitelist && whitelist.indexOf(key) === -1)\n+            return true;\n+        if (blacklist && blacklist.indexOf(key) !== -1)\n+            return true;\n+        return false;\n     }\n-  };\n+    return {\n+        in: (state, key, fullState) => !whitelistBlacklistCheck(key) && inbound\n+            ? inbound(state, key, fullState)\n+            : state,\n+        out: (state, key, fullState) => !whitelistBlacklistCheck(key) && outbound\n+            ? outbound(state, key, fullState)\n+            : state,\n+    };\n }\n-\n-exports.default = createTransform;\n\\ No newline at end of file\n+exports.default = createTransform;\n",
					"match": false,
					"packageHash": "41508229c7509f33e028a34a75a4c69536794006a585f62460ac59bd55e645ee",
					"size": 785,
					"sourceHash": "1e5ab9416701b2a4b6dc4488615cbab7ef581b437845a1966cdd8fcb169715f6",
					"status": "content"
				},
				"lib/defaults/asyncLocalStorage.js": {
					"match": false,
					"packageHash": "2dd4d1f22f85e56a2de58521212e83ebf97acead5bbc4a1f681c08ed6181e177",
					"size": 2762,
					"status": "missing-in-source"
				},
				"lib/getStoredState.js": {
					"diff": "--- published/lib/getStoredState.js\n+++ rebuilt/lib/getStoredState.js\n@@ -1,95 +1,44 @@\n-'use strict';\n-\n-Object.defineProperty(exports, \"__esModule\", {\n-  value: true\n-});\n-\n-var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n-\n-exports.default = getStoredState;\n-\n-var _lodash = require('lodash');\n-\n-var _constants = require('./constants');\n-\n-var constants = _interopRequireWildcard(_constants);\n-\n-var _asyncLocalStorage = require('./defaults/asyncLocalStorage');\n-\n-var _asyncLocalStorage2 = _interopRequireDefault(_asyncLocalStorage);\n-\n-function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n-\n-function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n-\n-function getStoredState(config, onComplete) {\n-  var storage = config.storage || (0, _asyncLocalStorage2.default)('local');\n-  var deserialize = config.deserialize || defaultDeserialize;\n-  var transforms = config.transforms || [];\n-  var purgeMode = config.purgeMode || false;\n-\n-  // fallback getAllKeys to `keys` if present (LocalForage compatability)\n-  if (storage.keys && !storage.getAllKeys) storage = _extends({}, storage, { getAllKeys: storage.keys });\n-\n-  var restoredState = {};\n-  var completionCount = 0;\n-\n-  storage.getAllKeys(function (err, allKeys) {\n-    if (err && process.env.NODE_ENV !== 'production') {\n-      console.warn('Error in storage.getAllKeys');\n+\"use strict\";\n+Object.defineProperty(exports, \"__esModule\", { value: true });\n+const constants_1 = require(\"./constants\");\n+function getStoredState(config) {\n+    const transforms = config.transforms || [];\n+    const storageKey = `${config.keyPrefix !== undefined ? config.keyPrefix : constants_1.KEY_PREFIX}${config.key}`;\n+    const storage = config.storage;\n+    const debug = config.debug;\n+    let deserialize;\n+    if (config.deserialize === false) {\n+        deserialize = (x) => x;\n     }\n-    var persistKeys = allKeys.filter(function (key) {\n-      return key.indexOf(constants.keyPrefix) === 0;\n-    }).map(function (key) {\n-      return key.slice(constants.keyPrefix.length);\n-    });\n-    var keysToRestore = Array.isArray(purgeMode) ? persistKeys.filter(function (key) {\n-      return purgeMode.indexOf(key) === -1;\n-    }) : purgeMode === '*' ? [] : persistKeys;\n-\n-    var restoreCount = keysToRestore.length;\n-    if (restoreCount === 0) complete(null, restoredState);\n-    (0, _lodash.forEach)(keysToRestore, function (key) {\n-      storage.getItem(createStorageKey(key), function (err, serialized) {\n-        if (err && process.env.NODE_ENV !== 'production') console.warn('Error restoring data for key:', key, err);else restoredState[key] = rehydrate(key, serialized);\n-        completionCount += 1;\n-        if (completionCount === restoreCount) complete(null, restoredState);\n-      });\n-    });\n-  });\n-\n-  function rehydrate(key, serialized) {\n-    var state = null;\n-\n-    try {\n-      var data = deserialize(serialized);\n-      state = transforms.reduceRight(function (subState, transformer) {\n-        return transformer.out(subState, key);\n-      }, data);\n-    } catch (err) {\n-      if (process.env.NODE_ENV !== 'production') console.warn('Error restoring data for key:', key, err);\n+    else if (typeof config.deserialize === 'function') {\n+        deserialize = config.deserialize;\n     }\n-\n-    return state;\n-  }\n-\n-  function complete(err, restoredState) {\n-    onComplete(err, restoredState);\n-  }\n-\n-  if (typeof onComplete !== 'function' && !!Promise) {\n-    return new Promise(function (resolve, reject) {\n-      onComplete = function onComplete(err, restoredState) {\n-        if (err) reject(err);else resolve(restoredState);\n-      };\n",
					"match": false,
					"packageHash": "72f157fe9ae804df2170621e7cd9e777e693dbdb1ec7937e1da9bef64b07c6f0",
					"size": 3469,
					"sourceHash": "f45c65167fc5ba40efd6e82c11b7287c2c907f6a9492379f6c6e361d557ad9f3",
					"status": "content"
				},
				"lib/index.js": {
					"diff": "--- published/lib/index.js\n+++ rebuilt/lib/index.js\n@@ -1,44 +1,33 @@\n-'use strict';\n-\n-Object.defineProperty(exports, \"__esModule\", {\n-  value: true\n-});\n-exports.storages = exports.persistStore = exports.getStoredState = exports.createTransform = exports.createPersistor = exports.autoRehydrate = undefined;\n-\n-var _autoRehydrate = require('./autoRehydrate');\n-\n-var _autoRehydrate2 = _interopRequireDefault(_autoRehydrate);\n-\n-var _createPersistor = require('./createPersistor');\n-\n-var _createPersistor2 = _interopRequireDefault(_createPersistor);\n-\n-var _createTransform = require('./createTransform');\n-\n-var _createTransform2 = _interopRequireDefault(_createTransform);\n-\n-var _getStoredState = require('./getStoredState');\n-\n-var _getStoredState2 = _interopRequireDefault(_getStoredState);\n-\n-var _persistStore = require('./persistStore');\n-\n-var _persistStore2 = _interopRequireDefault(_persistStore);\n-\n-var _asyncLocalStorage = require('./defaults/asyncLocalStorage');\n-\n-var _asyncLocalStorage2 = _interopRequireDefault(_asyncLocalStorage);\n-\n-function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n-\n-var storages = {\n-  asyncLocalStorage: (0, _asyncLocalStorage2.default)('local'),\n-  asyncSessionStorage: (0, _asyncLocalStorage2.default)('session')\n+\"use strict\";\n+var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n+    if (k2 === undefined) k2 = k;\n+    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n+}) : (function(o, m, k, k2) {\n+    if (k2 === undefined) k2 = k;\n+    o[k2] = m[k];\n+}));\n+var __exportStar = (this && this.__exportStar) || function(m, exports) {\n+    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n };\n-\n-exports.autoRehydrate = _autoRehydrate2.default;\n-exports.createPersistor = _createPersistor2.default;\n-exports.createTransform = _createTransform2.default;\n-exports.getStoredState = _getStoredState2.default;\n-exports.persistStore = _persistStore2.default;\n-exports.storages = storages;\n\\ No newline at end of file\n+var __importDefault = (this && this.__importDefault) || function (mod) {\n+    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n+};\n+Object.defineProperty(exports, \"__esModule\", { value: true });\n+exports.purgeStoredState = exports.createPersistoid = exports.getStoredState = exports.createTransform = exports.createMigrate = exports.persistStore = exports.persistCombineReducers = exports.persistReducer = void 0;\n+var persistReducer_1 = require(\"./persistReducer\");\n+Object.defineProperty(exports, \"persistReducer\", { enumerable: true, get: function () { return __importDefault(persistReducer_1).default; } });\n+var persistCombineReducers_1 = require(\"./persistCombineReducers\");\n+Object.defineProperty(exports, \"persistCombineReducers\", { enumerable: true, get: function () { return __importDefault(persistCombineReducers_1).default; } });\n+var persistStore_1 = require(\"./persistStore\");\n+Object.defineProperty(exports, \"persistStore\", { enumerable: true, get: function () { return __importDefault(persistStore_1).default; } });\n+var createMigrate_1 = require(\"./createMigrate\");\n+Object.defineProperty(exports, \"createMigrate\", { enumerable: true, get: function () { return __importDefault(createMigrate_1).default; } });\n+var createTransform_1 = require(\"./createTransform\");\n+Object.defineProperty(exports, \"createTransform\", { enumerable: true, get: function () { return __importDefault(createTransform_1).default; } });\n+var getStoredState_1 = require(\"./getStoredState\");\n+Object.defineProperty(exports, \"getStoredState\", { enumerable: true, get: function () { return __importDefault(getStoredState_1).default; } });\n+var createPersistoid_1 = require(\"./createPersistoid\");\n+Object.defineProperty(exports, \"createPersistoid\", { enumerable: true, get: function () { return __importDefault(createPersistoid_1).default; } });\n+var purgeStoredState_1 = require(\"./purgeStoredState\");\n+Object.defineProperty(exports, \"purgeStoredState\", { enumerable: true, get: function () { return __importDefault(purgeStoredState_1).default; } });\n+__exportStar(require(\"./constants\"), exports);\n",
					"match": false,
					"packageHash": "4f82bb55688b5a5493613a4a1b96faecc938f74d0a9c8363a10fdb57ef6c3d7c",
					"size": 1484,
					"sourceHash": "84af1bc3e5b6652907860dfa484b4ee2f1e5fa05cf2ec4a52679270398381420",
					"status": "content"
				},
				"lib/persistStore.js": {
					"diff": "--- published/lib/persistStore.js\n+++ rebuilt/lib/persistStore.js\n@@ -1,72 +1,92 @@\n-'use strict';\n-\n-Object.defineProperty(exports, \"__esModule\", {\n-  value: true\n-});\n-\n-var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n-\n-exports.default = persistStore;\n-\n-var _constants = require('./constants');\n-\n-var constants = _interopRequireWildcard(_constants);\n-\n-var _getStoredState = require('./getStoredState');\n-\n-var _getStoredState2 = _interopRequireDefault(_getStoredState);\n-\n-var _createPersistor = require('./createPersistor');\n-\n-var _createPersistor2 = _interopRequireDefault(_createPersistor);\n-\n-function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n-\n-function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n-\n-var genericSetImmediate = typeof setImmediate === 'undefined' ? global.setImmediate : setImmediate;\n-\n-function persistStore(store) {\n-  var config = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n-  var onComplete = arguments[2];\n-\n-  // defaults\n-  var shouldRestore = !config.skipRestore;\n-  if (process.env.NODE_ENV !== 'production' && config.skipRestore) console.warn('redux-persist: config.skipRestore has been deprecated. If you want to skip restoration use `createPersistor` instead');\n-\n-  // create and pause persistor\n-  var persistor = (0, _createPersistor2.default)(store, config);\n-  persistor.pause();\n-\n-  // restore\n-  if (shouldRestore) {\n-    genericSetImmediate(function () {\n-      (0, _getStoredState2.default)(_extends({}, config, { purgeMode: persistor._getPurgeMode() }), function (err, restoredState) {\n-        if (restoredState) store.dispatch(rehydrateAction(restoredState));\n-        if (err) store.dispatch(rehydrateErrorAction(err));\n-        complete(err, restoredState);\n-      });\n-    });\n-  } else genericSetImmediate(complete);\n-\n-  function complete(err, restoredState) {\n-    persistor.resume();\n-    onComplete && onComplete(err, restoredState);\n-  }\n-\n-  return persistor;\n-}\n-\n-function rehydrateAction(data) {\n-  return {\n-    type: constants.REHYDRATE,\n-    payload: data\n-  };\n+\"use strict\";\n+Object.defineProperty(exports, \"__esModule\", { value: true });\n+const redux_1 = require(\"redux\");\n+const constants_1 = require(\"./constants\");\n+const initialState = {\n+    registry: [],\n+    bootstrapped: false,\n+};\n+const persistorReducer = (state = initialState, action) => {\n+    const firstIndex = state.registry.indexOf(action.key);\n+    const registry = [...state.registry];\n+    switch (action.type) {\n+        case constants_1.REGISTER:\n+            return Object.assign(Object.assign({}, state), { registry: [...state.registry, action.key] });\n+        case constants_1.REHYDRATE:\n+            registry.splice(firstIndex, 1);\n+            return Object.assign(Object.assign({}, state), { registry, bootstrapped: registry.length === 0 });\n+        default:\n+            return state;\n+    }\n+};\n+function persistStore(store, options, cb) {\n+    // help catch incorrect usage of passing PersistConfig in as PersistorOptions\n+    if (process.env.NODE_ENV !== 'production') {\n+        const optionsToTest = options || {};\n+        const bannedKeys = [\n+            'blacklist',\n+            'whitelist',\n+            'transforms',\n+            'storage',\n+            'keyPrefix',\n+            'migrate',\n+        ];\n",
					"match": false,
					"packageHash": "05a758d59734d67a67e403f4269afbc15ef21870c1c26126e2a4c7344a4a3705",
					"size": 2498,
					"sourceHash": "94465175c0f6766ae6bd97327b8c2bdfc2d1c98ca708e090b9f23579e9b14db6",
					"status": "content"
				},
				"package.json": {
					"diff": "--- published/package.json\n+++ rebuilt/package.json\n@@ -1,59 +1,80 @@\n {\n   \"name\": \"redux-persist\",\n-  \"version\": \"3.0.0\",\n+  \"version\": \"6.1.0\",\n   \"description\": \"persist and rehydrate redux stores\",\n   \"main\": \"lib/index.js\",\n+  \"module\": \"es/index.js\",\n+  \"types\": \"lib/index.d.ts\",\n+  \"repository\": \"rt2zz/redux-persist\",\n+  \"files\": [\n+    \"src\",\n+    \"es\",\n+    \"lib\",\n+    \"dist\",\n+    \"integration\",\n+    \"README.md\"\n+  ],\n   \"scripts\": {\n-    \"test\": \"standard && ava\",\n-    \"test:watch\": \"npm test -- --watch\",\n-    \"clean\": \"rimraf lib dist\",\n-    \"build\": \"babel src --out-dir lib\",\n-    \"build:watch\": \"npm run build ./src -- -watch\",\n-    \"prepublish\": \"npm run clean && npm run build\"\n+    \"ava\": \"ava\",\n+    \"build\": \"npm run build:commonjs && npm run build:es && npm run build:umd\",\n+    \"build:commonjs\": \"tsc --module commonjs --outDir lib\",\n+    \"build:es\": \"tsc --module es2015 --outDir es\",\n+    \"build:umd\": \"rollup -c\",\n+    \"clean\": \"rimraf dist && rimraf es && rimraf lib\",\n+    \"prepare\": \"npm run build\",\n+    \"precommit\": \"lint-staged\",\n+    \"stats:size\": \"node ./scripts/size-estimator.js\",\n+    \"test\": \"ava\",\n+    \"version\": \"npm run clean && npm run build && npm run stats:size | tail -1 >> LIBSIZE.md && git add LIBSIZE.md\"\n   },\n-  \"ava\": {\n-    \"require\": [\n-      \"babel-register\"\n-    ],\n-    \"babel\": \"inherit\"\n+  \"lint-staged\": {\n+    \"src/**/*.ts\": [\n+      \"prettier --write\",\n+      \"git add\"\n+    ]\n   },\n-  \"repository\": {\n-    \"type\": \"git\",\n-    \"url\": \"https://github.com/rt2zz/redux-persist.git\"\n-  },\n-  \"homepage\": \"https://github.com/rt2zz/redux-persist\",\n-  \"keywords\": [\n-    \"redux\",\n-    \"redux-middleware\",\n-    \"localstorage\",\n-    \"redux-persist\",\n-    \"redux-storage\",\n-    \"redux-rehydrate\"\n-  ],\n-  \"author\": \"rt2zz <zack@root-two.com>\",\n+  \"author\": \"\",\n   \"license\": \"MIT\",\n-  \"dependencies\": {\n-    \"json-stringify-safe\": \"^5.0.1\",\n-    \"lodash\": \"^4.11.1\"\n+  \"homepage\": \"https://github.com/rt2zz/redux-persist#readme\",\n+  \"ava\": {\n+    \"files\": [\n+      \"tests/**/*.spec.ts\"\n+    ],\n+    \"extensions\": [\n+      \"ts\"\n+    ],\n+    \"require\": [\n+      \"ts-node/register\"\n+    ]\n   },\n   \"devDependencies\": {\n-    \"ava\": \"^0.14.0\",\n-    \"babel-cli\": \"^6.6.5\",\n-    \"babel-eslint\": \"^6.0.0\",\n-    \"babel-preset-es2015\": \"^6.6.0\",\n-    \"babel-preset-stage-2\": \"^6.5.0\",\n-    \"babel-register\": \"^6.7.2\",\n-    \"immutable\": \"^3.7.6\",\n-    \"redux\": \"~3.3.1\",\n-    \"rimraf\": \"~2.5.2\",\n-    \"standard\": \"^6.0.8\"\n+    \"@babel/core\": \"^7.15.0\",\n+    \"@babel/preset-env\": \"^7.15.0\",\n+    \"@rollup/plugin-babel\": \"^5.3.0\",\n+    \"@rollup/plugin-commonjs\": \"^20.0.0\",\n+    \"@rollup/plugin-node-resolve\": \"^13.0.4\",\n+    \"@rollup/plugin-typescript\": \"^8.2.5\",\n+    \"@types/react\": \"^17.0.16\",\n+    \"@types/redux-mock-store\": \"^1.0.3\",\n",
					"match": false,
					"packageHash": "258adf8e5fe5bfb283be73d67dc0912982e4aa05a197688d9492cf833fc9805a",
					"size": 1351,
					"sourceHash": "efcf7883bceb3a6feb60b9075c8552d9e65a498e623756af25f3c4d88b538633",
					"status": "content"
				},
				"src/autoRehydrate.js": {
					"match": false,
					"packageHash": "c37d729d4bfe7c521ecef96b547caea11b8ff64015bf137a01472c4d5f0f8b5b",
					"size": 2396,
					"status": "missing-in-source"
				},
				"src/constants.js": {
					"match": false,
					"packageHash": "4f2be3cd9f5859b7eb4e89c88a546cac519c28d257eeab360ae6c1f65d8401a1",
					"size": 143,
					"status": "missing-in-source"
				},
				"src/createPersistor.js": {
					"match": false,
					"packageHash": "9a83af274822e0782df95b634ba1427ca1b5bab0ddc76f4c6afa2a151830b2b7",
					"size": 4453,
					"status": "missing-in-source"
				},
				"src/createTransform.js": {
					"match": false,
					"packageHash": "3bfcbe48f51774f876ee82640802e5e7b56bfed937cd2b689a6fb50425704fae",
					"size": 560,
					"status": "missing-in-source"
				},
				"src/defaults/asyncLocalStorage.js": {
					"match": false,
					"packageHash": "b8fe7d9379217ffdad7145399574023f3b819e6afe95afa11a15900f877a1e34",
					"size": 2263,
					"status": "missing-in-source"
				},
				"src/getStoredState.js": {
					"match": false,
					"packageHash": "e17777d8622f0e4f10ec41d30bef98e5801a7635792783beb268ba6c9ddc32e9",
					"size": 2450,
					"status": "missing-in-source"
				},
				"src/index.js": {
					"match": false,
					"packageHash": "1b508430869a296a916c80bbe4e3d93716e687031e4988da2145e44d1a3a3a7b",
					"size": 530,
					"status": "missing-in-source"
				},
				"src/persistStore.js": {
					"match": false,
					"packageHash": "60a40621c9614d932bb4c7139e78bb4c27acb90667f95d9c6b1c5d4e13479519",
					"size": 1417,
					"status": "missing-in-source"
				},
				"LICENSE": {
					"match": false,
					"status": "missing-in-package"
				},
				"dist/redux-persist.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"dist/redux-persist.js.map": {
					"match": false,
					"status": "missing-in-package"
				},
				"dist/redux-persist.min.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"dist/redux-persist.min.js.map": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/constants.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/constants.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/createMigrate.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/createMigrate.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/createPersistoid.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/createPersistoid.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/createTransform.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/createTransform.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/getStoredState.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/getStoredState.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/index.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/index.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/integration/getStoredStateMigrateV4.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/integration/getStoredStateMigrateV4.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/integration/react.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/integration/react.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/persistCombineReducers.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/persistCombineReducers.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/persistReducer.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/persistReducer.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/persistStore.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/persistStore.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/purgeStoredState.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/purgeStoredState.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/stateReconciler/autoMergeLevel1.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/stateReconciler/autoMergeLevel1.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/stateReconciler/autoMergeLevel2.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/stateReconciler/autoMergeLevel2.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/stateReconciler/hardSet.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/stateReconciler/hardSet.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/storage/createWebStorage.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/storage/createWebStorage.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/storage/getStorage.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/storage/getStorage.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/storage/index.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/storage/index.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/storage/session.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/storage/session.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/types.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"es/types.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"integration/README.md": {
					"match": false,
					"status": "missing-in-package"
				},
				"integration/react/package.json": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/constants.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/createMigrate.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/createMigrate.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/createPersistoid.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/createPersistoid.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/createTransform.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/getStoredState.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/index.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/integration/getStoredStateMigrateV4.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/integration/getStoredStateMigrateV4.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/integration/react.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/integration/react.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/persistCombineReducers.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/persistCombineReducers.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/persistReducer.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/persistReducer.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/persistStore.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/purgeStoredState.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/purgeStoredState.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/stateReconciler/autoMergeLevel1.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/stateReconciler/autoMergeLevel1.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/stateReconciler/autoMergeLevel2.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/stateReconciler/autoMergeLevel2.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/stateReconciler/hardSet.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/stateReconciler/hardSet.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/storage/createWebStorage.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/storage/createWebStorage.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/storage/getStorage.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/storage/getStorage.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/storage/index.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/storage/index.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/storage/session.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/storage/session.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/types.d.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/types.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/constants.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/createMigrate.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/createPersistoid.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/createTransform.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/getStoredState.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/index.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/integration/getStoredStateMigrateV4.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/integration/react.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/persistCombineReducers.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/persistReducer.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/persistStore.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/purgeStoredState.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/stateReconciler/autoMergeLevel1.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/stateReconciler/autoMergeLevel2.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/stateReconciler/hardSet.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/storage/createWebStorage.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/storage/getStorage.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/storage/index.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/storage/session.ts": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/types.ts": {
					"match": false,
					"status": "missing-in-package"
				}
			},
			"summary": {
				"differentFiles": 7,
				"matchingFiles": 0,
				"missingInPackage": 102,
				"missingInSource": 12,
				"score": 0,
				"totalFiles": 121
			}
		},
		"prodDependencies": []
	}
]
