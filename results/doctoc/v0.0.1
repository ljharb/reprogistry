[
	{
		"reproduceVersion": "0.0.0-local",
		"timestamp": "2026-01-06T05:19:08.930Z",
		"os": "linux",
		"arch": "x64",
		"strategy": "npm:11.7.0",
		"reproduced": false,
		"attested": false,
		"package": {
			"spec": "doctoc@0.0.1",
			"name": "doctoc",
			"version": "0.0.1",
			"location": "https://registry.npmjs.org/doctoc/-/doctoc-0.0.1.tgz",
			"integrity": "sha512-Oug/ZI7yYXsNqYyrQ8BqCwdBhAnSN+zz8XptIHfZsyCPogxFZRxAkoTDXdOAS+oAngjdZqw0vDCr1OuqrQhoHg==",
			"publishedAt": "2012-05-28T16:16:49.719Z",
			"publishedWith": {
				"node": "v0.6.6",
				"npm": "1.1.23"
			}
		},
		"source": {
			"integrity": "sha512-uHUPPVnNOe4Iou8GPh/OSKywautMiwAzJwDHgn3ZdsTtI5C3w0R0KUSKICbkAVdCM+wrmPTIxn6WU93BTQ80WQ==",
			"location": "git://github.com/thlorenz/doctoc.git",
			"spec": "github:thlorenz/doctoc#HEAD"
		},
		"comparisonHash": "9ef46a5bd31291e57cbab41e2f17c57bd6da0b5b",
		"diff": {
			"files": {
				".npmignore": {
					"match": false,
					"packageHash": "2609e421226f4a5cd66b9124ebb20a8851676142cf3ecb127e0e36af79a2a7a5",
					"size": 117,
					"status": "missing-in-source"
				},
				"LICENSE": {
					"diff": "--- published/LICENSE\n+++ rebuilt/LICENSE\n@@ -1,21 +1,23 @@\n-Copyright 2012 Thorsten Lorenz (thlorenz@gmx.de)\n+Copyright 2013 Thorsten Lorenz. \n+All rights reserved.\n \n-This project is free software released under the MIT/X11 license:\n+Permission is hereby granted, free of charge, to any person\n+obtaining a copy of this software and associated documentation\n+files (the \"Software\"), to deal in the Software without\n+restriction, including without limitation the rights to use,\n+copy, modify, merge, publish, distribute, sublicense, and/or sell\n+copies of the Software, and to permit persons to whom the\n+Software is furnished to do so, subject to the following\n+conditions:\n \n-Permission is hereby granted, free of charge, to any person obtaining a copy\n-of this software and associated documentation files (the \"Software\"), to deal\n-in the Software without restriction, including without limitation the rights\n-to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n-copies of the Software, and to permit persons to whom the Software is\n-furnished to do so, subject to the following conditions:\n+The above copyright notice and this permission notice shall be\n+included in all copies or substantial portions of the Software.\n \n-The above copyright notice and this permission notice shall be included in\n-all copies or substantial portions of the Software.\n-\n-THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n-IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n-FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n-AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n-LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n-OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n-THE SOFTWARE.\n+THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n+EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n+OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n+NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n+HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n+WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n+FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n+OTHER DEALINGS IN THE SOFTWARE.\n",
					"match": false,
					"packageHash": "44b19d9494ff8b7b11a26814eb41210cfab9b61cafbfd0b547ee16ee0bccc17c",
					"size": 1140,
					"sourceHash": "1fa6ee8bb95a81ae3d73a5bd074a3ac380ffec13697051063ca1a601921b91db",
					"status": "content"
				},
				"README.md": {
					"diff": "--- published/README.md\n+++ rebuilt/README.md\n@@ -1,8 +1,205 @@\n-**Table of Contents**  *generated with [DocToc](http://doctoc.herokuapp.com/)*\n+# DocToc [![Node.js CI](https://github.com/thlorenz/doctoc/actions/workflows/node.js.yml/badge.svg)](https://github.com/thlorenz/doctoc/actions/workflows/node.js.yml)\n \n-- [doc-toc](#doc-toc)\n+Generates table of contents for markdown files inside local git repository. Links are compatible with anchors generated\n+by github or other sites via a command line flag.\n \n-doc-toc\n-=======\n+<!-- START doctoc generated TOC please keep comment here to allow auto update -->\n+<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->\n+**Table of Contents**  *generated with [DocToc](https://github.com/thlorenz/doctoc)*\n \n-Generates table of contents for markdown files inside local git repository. Links are compatible with anchors generated by github\n\\ No newline at end of file\n+- [Installation](#installation)\n+- [Configuring Table of Contents](#configuring-table-of-contents)\n+  - [TOC title text](#toc-title-text)\n+  - [Min. heading level](#min-heading-level)\n+  - [Max. heading level](#max-heading-level)\n+  - [Include all headings](#include-all-headings)\n+- [Usage](#usage)\n+  - [Adding toc to all files in a directory and sub directories](#adding-toc-to-all-files-in-a-directory-and-sub-directories)\n+  - [Ignoring individual files](#ignoring-individual-files)\n+  - [Update existing doctoc TOCs effortlessly](#update-existing-doctoc-tocs-effortlessly)\n+  - [Adding toc to individual files](#adding-toc-to-individual-files)\n+    - [Examples](#examples)\n+  - [Using doctoc to generate links compatible with other sites](#using-doctoc-to-generate-links-compatible-with-other-sites)\n+    - [Example](#example)\n+  - [Specifying location of toc](#specifying-location-of-toc)\n+  - [Performing a dry run](#performing-a-dry-run)\n+  - [Printing to stdout](#printing-to-stdout)\n+  - [Only update existing ToC](#only-update-existing-toc)\n+  - [Usage as a `git` hook](#usage-as-a-git-hook)\n+  - [Docker image](#docker-image)\n+\n+<!-- END doctoc generated TOC please keep comment here to allow auto update -->\n+\n+## Installation\n+\n+    npm install -g doctoc\n+\n+## Configuring Table of Contents\n+\n+### TOC title text\n+\n+Use the `--title` option to specify a (Markdown-formatted) custom TOC title; e.g., `doctoc --title '**Contents**' .` From then on, you can simply run `doctoc <file>` and doctoc will keep the title you specified.\n+\n+Alternatively, to blank out the title, use the `--notitle` option. This will simply remove the title from the TOC.\n+\n+### Min. heading level\n+\n+Use the `--minlevel` option to limit TOC entries to headings only at or above the specified level; e.g., `doctoc --minlevel 2 .`\n+\n+By default,\n+\n+- the min level used is 1 if it is not set\n+\n+Note: Currently supported values are only 1 and 2.\n+\n+### Max. heading level\n+\n+Use the `--maxlevel` option to limit TOC entries to headings only up to the specified level; e.g., `doctoc --maxlevel 3 .`\n+\n+By default,\n+\n+- no limit is placed on Markdown-formatted headings,\n+- whereas headings from embedded HTML are limited to 4 levels.\n+\n+### Include all headings\n+\n+Use the `--all` option to include all headings in the TOC regardless of their location\n+\n+By default,\n+\n+- Only headings below the TOC will be included\n+\n+## Usage\n+\n+In its simplest usage, you can pass one or more files or folders to the\n+`doctoc` command. This will update the TOCs of each file specified as well as of\n+each markdown file found by recursively searching each folder. Below are some\n+examples.\n+\n+### Adding toc to all files in a directory and sub directories\n+\n+Go into the directory that contains your local git project and type:\n+\n+    doctoc .\n+\n+This will update all markdown files in the current directory and all its\n+subdirectories with a table of content that will point at the anchors generated\n+by the markdown parser. Doctoc defaults to using the GitHub parser, but other\n+[modes can be\n+specified](#using-doctoc-to-generate-links-compatible-with-other-sites).\n+\n+### Ignoring individual files\n",
					"match": false,
					"packageHash": "0233e2b6eac6dcee392c8fae4cd4a54f5779de94a38f7443d20d60eee593d278",
					"size": 249,
					"sourceHash": "f783f752c986bdda13d322dd6d52c779c2b50dc235fe356c92505fc973595f93",
					"status": "content"
				},
				"doctoc.js": {
					"diff": "--- published/doctoc.js\n+++ rebuilt/doctoc.js\n@@ -1,147 +1,151 @@\n #!/usr/bin/env node\n \n-var path =  require('path'),\n-    fs   =  require('fs'),\n-    _    =  require('underscore'),\n-    file =  require('./lib/file'),\n-    argv =  process.argv;\n+'use strict';\n \n+var path      =  require('path')\n+  , fs        =  require('fs')\n+  , minimist  =  require('minimist')\n+  , file      =  require('./lib/file')\n+  , transform =  require('./lib/transform')\n+  , files;\n \n-if (argv.length !== 3) {\n-    console.log('Usage: %s path (where path is some path e.g., \".\")', argv[0] + ' ' + argv[1]);\n-    process.exit(0);\n-}\n-\n-var target = cleanPath(argv[2]);\n+function cleanPath(path) {\n+  var homeExpanded = (path.indexOf('~') === 0) ? process.env.HOME + path.substr(1) : path;\n \n-console.log ('\\nDocToccing \"%s\" and its sub directories.', target);\n+  return homeExpanded;\n+}\n \n-var files = file.findMarkdownFiles(target);\n+function transformAndSave(files, mode, maxHeaderLevel, minHeaderLevel, title, notitle, entryPrefix, processAll, stdOut, updateOnly, dryRun) {\n+  if (processAll) {\n+    console.log('--all flag is enabled. Including headers before the TOC location.')\n+  }\n+\n+  if (updateOnly) {\n+    console.log('--update-only flag is enabled. Only updating files that already have a TOC.')\n+  }\n+  \n+  console.log('\\n==================\\n');\n+\n+  var transformed = files\n+    .map(function (x) {\n+      var content = fs.readFileSync(x.path, 'utf8')\n+        , result = transform(content, mode, maxHeaderLevel, minHeaderLevel, title, notitle, entryPrefix, processAll, updateOnly);\n+      result.path = x.path;\n+      return result;\n+    });\n+  var changed = transformed.filter(function (x) { return x.transformed; })\n+    , unchanged = transformed.filter(function (x) { return !x.transformed; })\n+    , toc = transformed.filter(function (x) { return x.toc; })\n+\n+  if (stdOut) {\n+    toc.forEach(function (x) {\n+      console.log(x.toc)\n+    })\n+  }\n+\n+  unchanged.forEach(function (x) {\n+    if (stdOut) {\n+      console.log('==================\\n\\n\"%s\" is up to date', x.path)\n+    }\n+    else {\n+      console.log('\"%s\" is up to date', x.path);\n+    }\n+  });\n \n-transformAndSave(files);\n+  changed.forEach(function (x) { \n+    if (stdOut) {\n+      console.log('==================\\n\\n\"%s\" should be updated', x.path)\n+    } else if (dryRun) {\n+      console.log('\"%s\" should be updated but wasn\\'t due to dry run.', x.path);\n+    }\n+    else {\n+      console.log('\"%s\" will be updated', x.path);\n+      fs.writeFileSync(x.path, x.data, 'utf8');\n+    }\n+  });\n+  if (dryRun && changed.length > 0) {\n+    process.exitCode = 1;\n+  }\n+}\n \n-console.log('\\nEverything is OK.');\n+function printUsageAndExit(isErr) {\n \n-// ------ Supporting functions ----------\n+  var outputFunc = isErr ? console.error : console.info;\n \n-function cleanPath(path) {\n+  outputFunc('Usage: doctoc [mode] [--entryprefix prefix] [--notitle | --title title] [--maxlevel level] [--minlevel level] [--all] [--update-only] <path> (where path is some path to a directory (e.g., .) or a file (e.g., README.md))');\n+  outputFunc('\\nAvailable modes are:');\n+  for (var key in modes) {\n+    outputFunc('  --%s\\t%s', key, modes[key]);\n+  }\n+  outputFunc('Defaults to \\'' + mode + '\\'.');\n",
					"match": false,
					"packageHash": "8c0687effb042f6c42ce646f896572de274eeb5c2d20bbcb4a7b7d97c83ea0ec",
					"size": 4047,
					"sourceHash": "b676f190d2aeade284a13aafe11860444d0bb1f05b21681bdfe9fddc9e1c9cc5",
					"status": "content"
				},
				"lib/file.js": {
					"diff": "--- published/lib/file.js\n+++ rebuilt/lib/file.js\n@@ -1,59 +1,59 @@\n-var path  =  require('path'),\n-    fs    =  require('fs'),\n-    _     =  require('underscore');\n+var path  =  require('path')\n+ ,  fs  =  require('fs')\n+ ,  _   =  require('underscore');\n \n var markdownExts = ['.md', '.markdown'];\n var ignoredDirs  = ['.', '..', '.git', 'node_modules'];\n \n function separateFilesAndDirs(fileInfos) {\n-    return {\n-        directories :  _(fileInfos).filter(function (x) {\n-            return x.isDirectory() && !_(ignoredDirs).include(x.name);\n-        }),\n-        markdownFiles :  _(fileInfos).filter(function (x) { \n-            return x.isFile() && _(markdownExts).include(path.extname(x.name)); \n-        })\n-    };\n+  return {\n+    directories :  _(fileInfos).filter(function (x) {\n+      return x.isDirectory() && !_(ignoredDirs).include(x.name);\n+    }),\n+    markdownFiles :  _(fileInfos).filter(function (x) { \n+      return x.isFile() && _(markdownExts).include(path.extname(x.name)); \n+    })\n+  };\n }\n \n function findRec(currentPath) {\n-    function getStat (entry) {\n-        var target = path.join(currentPath, entry),\n-            stat = fs.statSync(target);\n-\n-        return  _(stat).extend({ \n-            name: entry,\n-            path: target\n-        });\n-    }\n-    \n-    function process (fileInfos) {\n-        var res = separateFilesAndDirs(fileInfos);\n-        var tgts = _(res.directories).pluck('path');\n-\n-        if (res.markdownFiles.length > 0) \n-            console.log('\\nFound %s in \"%s\"', _(res.markdownFiles).pluck('name').join(', '), currentPath);\n-        else \n-            console.log('\\nFound nothing in \"%s\"', currentPath);\n-\n-        return { \n-            markdownFiles :  res.markdownFiles,\n-            subdirs       :  tgts\n-        };\n-    }\n-\n-    var stats                  =  _(fs.readdirSync(currentPath)).map(getStat),\n-        res                    =  process(stats),\n-        markdownsInSubdirs     =  _(res.subdirs).map(findRec),\n-        allMarkdownsHereAndSub =  res.markdownFiles.concat(markdownsInSubdirs);\n+  function getStat (entry) {\n+    var target = path.join(currentPath, entry),\n+      stat = fs.statSync(target);\n+\n+    return  _(stat).extend({ \n+      name: entry,\n+      path: target\n+    });\n+  }\n+  \n+  function process (fileInfos) {\n+    var res = separateFilesAndDirs(fileInfos);\n+    var tgts = _(res.directories).pluck('path');\n+\n+    if (res.markdownFiles.length > 0) \n+      console.log('\\nFound %s in \"%s\"', _(res.markdownFiles).pluck('name').join(', '), currentPath);\n+    else \n+      console.log('\\nFound nothing in \"%s\"', currentPath);\n+\n+    return { \n+      markdownFiles :  res.markdownFiles,\n+      subdirs     :  tgts\n+    };\n+  }\n+\n+  var stats                  =  _(fs.readdirSync(currentPath)).map(getStat)\n+    , res                    =  process(stats)\n+    , markdownsInSubdirs     =  _(res.subdirs).map(findRec)\n+    , allMarkdownsHereAndSub =  res.markdownFiles.concat(markdownsInSubdirs);\n \n-    return _(allMarkdownsHereAndSub).flatten();\n+  return _(allMarkdownsHereAndSub).flatten();\n }\n \n // Finds all markdown files in given directory and its sub-directories\n // @param {String  } dir - the absolute directory to search in \n exports.findMarkdownFiles = function(dir) {\n-    return findRec(dir);\n",
					"match": false,
					"packageHash": "9e6dcc2c7331a38abe24e8dd98e4dfe008436a2ada86f21a74b5909463fca924",
					"size": 1981,
					"sourceHash": "abd49136b63893842b93069cc3a0c309d0da47b820c5a9ef56cfab49b8e6199c",
					"status": "content"
				},
				"package.json": {
					"diff": "--- published/package.json\n+++ rebuilt/package.json\n@@ -1,26 +1,41 @@\n {\n-  \"author\": \"Thorsten Lorenz <thlorenz@gmx.de> (thorstenlorenz.wordpress.com)\",\n+  \"author\": \"Thorsten Lorenz <thlorenz@gmx.de> (thlorenz.com)\",\n   \"name\": \"doctoc\",\n   \"description\": \"Generates TOC for markdown files of local git repo.\",\n-  \"version\": \"0.0.1\",\n+  \"version\": \"2.2.0\",\n   \"repository\": {\n     \"type\": \"git\",\n     \"url\": \"git://github.com/thlorenz/doctoc.git\"\n   },\n-  \"main\": \"doctoc.js\",\n-  \"bin\" : \"doctoc.js\",\n-  \"engines\": {\n-    \"node\": \"~0.6.6\"\n+  \"scripts\": {\n+    \"test\": \"set -e; for t in test/*.js; do node $t; done\",\n+    \"doctoc\": \"node doctoc.js README.md --update-only\"\n   },\n+  \"files\": [\n+    \"lib\"\n+  ],\n+  \"main\": \"doctoc.js\",\n+  \"bin\": \"doctoc.js\",\n   \"dependencies\": {\n-      \"underscore\": \">=1.3.3\"\n+    \"@textlint/markdown-to-ast\": \"^12.1.1\",\n+    \"anchor-markdown-header\": \"^0.7.0\",\n+    \"htmlparser2\": \"^7.2.0\",\n+    \"minimist\": \"^1.2.6\",\n+    \"underscore\": \"^1.13.2\",\n+    \"update-section\": \"^0.3.3\"\n+  },\n+  \"devDependencies\": {\n+    \"tap\": \"^16.0.1\"\n   },\n-  \"devDependencies\": {},\n-  \"license\" : \"MIT/X11\",\n+  \"license\": \"MIT\",\n   \"keywords\": [\n-      \"github\", \n-      \"markdown\", \n-      \"documentation\", \n-      \"parser\"\n+    \"github\",\n+    \"markdown\",\n+    \"documentation\",\n+    \"readme\",\n+    \"parser\",\n+    \"bitbucket\",\n+    \"gitlab\",\n+    \"ghost\"\n   ]\n }\n",
					"match": false,
					"packageHash": "582ca0db1a8dc31a4cabf5b12a0e84d03127e24d2fd932c1618ea3588695f483",
					"size": 577,
					"sourceHash": "cdb16ecfdcae59b9da6de65a47ee2735bed9d1e3d38dee07c1ec08a8a53174ba",
					"status": "content"
				},
				"lib/get-html-headers.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/transform.js": {
					"match": false,
					"status": "missing-in-package"
				}
			},
			"summary": {
				"differentFiles": 5,
				"matchingFiles": 0,
				"missingInPackage": 2,
				"missingInSource": 1,
				"score": 0,
				"totalFiles": 8
			}
		}
	}
]
