[
	{
		"reproduceVersion": "0.0.0-local",
		"timestamp": "2026-01-05T09:59:53.726Z",
		"os": "linux",
		"arch": "x64",
		"strategy": "npm:11.7.0",
		"reproduced": false,
		"attested": false,
		"package": {
			"spec": "require-directory@1.1.1",
			"name": "require-directory",
			"version": "1.1.1",
			"location": "https://registry.npmjs.org/require-directory/-/require-directory-1.1.1.tgz",
			"integrity": "sha512-G99S4zD/A4+ZpicEQrYihQwzcGvHISMd9RGUu2vEzniz8DnBjL95zPa34Mk/60JQ3M0E5EW36vTPa0gPVPInjA==",
			"publishedAt": "2013-09-01T15:10:33.473Z",
			"publishedWith": {
				"node": null,
				"npm": "1.3.8"
			}
		},
		"source": {
			"integrity": null,
			"location": "git://github.com/troygoode/node-require-directory.git",
			"spec": "github:troygoode/node-require-directory#HEAD"
		},
		"comparisonHash": "8a2a8dcbb729bf3ee9216e490c955701f0ddebe1",
		"diff": {
			"files": {
				".npmignore": {
					"match": false,
					"packageHash": "17d3035a74abeaaf2ac3156d1388eaa1efad46a68717edf4fa3bcb4d0c5554b7",
					"size": 8,
					"status": "missing-in-source"
				},
				".travis.yml": {
					"diff": "--- published/.travis.yml\n+++ rebuilt/.travis.yml\n@@ -1,4 +1,10 @@\n language: node_js\n+\n node_js:\n-  - 0.6\n-  - 0.8\n\\ No newline at end of file\n+  - 6\n+  - 4\n+  - 0.10\n+\n+cache:\n+  directories:\n+    - node_modules\n",
					"match": false,
					"packageHash": "c67f7646b0035c279dd353b66dcf4ddb8043cfbfd4cf5d65a10ae4f04bbe79f8",
					"size": 42,
					"sourceHash": "436d5fafb5b2aed7213f8e3a1f8d715c1a06d4d3fca5d1e68f27c6a6d6e7b2fa",
					"status": "content"
				},
				"README.markdown": {
					"diff": "--- published/README.markdown\n+++ rebuilt/README.markdown\n@@ -1,10 +1,12 @@\n # require-directory\n \n-Recursively iterates over specified directory, requiring each file, and returning a nested hash structure containing those libraries.\n+Recursively iterates over specified directory, `require()`'ing each file, and returning a nested hash structure containing those modules.\n+\n+**[Follow me (@troygoode) on Twitter!](https://twitter.com/intent/user?screen_name=troygoode)**\n \n [![NPM](https://nodei.co/npm/require-directory.png?downloads=true&stars=true)](https://nodei.co/npm/require-directory/)\n \n-[![build status](https://secure.travis-ci.org/TroyGoode/node-require-directory.png)](http://travis-ci.org/TroyGoode/node-require-directory)\n+[![build status](https://secure.travis-ci.org/troygoode/node-require-directory.png)](http://travis-ci.org/troygoode/node-require-directory)\n \n ## How To Use\n \n@@ -19,11 +21,13 @@\n A common pattern in node.js is to include an index file which creates a hash of the files in its current directory. Given a directory structure like so:\n \n * app.js\n-* routes/index.js\n-* routes/home.js\n-* routes/auth/login.js\n-* routes/auth/logout.js\n-* routes/auth/register.js\n+* routes/\n+  * index.js\n+  * home.js\n+  * auth/\n+    * login.js\n+    * logout.js\n+    * register.js\n \n `routes/index.js` uses `require-directory` to build the hash (rather than doing so manually) like so:\n \n@@ -66,54 +70,107 @@\n \n ```javascript\n var requireDirectory = require('require-directory');\n-module.exports = requireDirectory(module, __dirname + '/some/subdirectory');\n+module.exports = requireDirectory(module, './some/subdirectory');\n ```\n \n For example, in the [example in the Usage section](#usage) we could have avoided creating `routes/index.js` and instead changed the first lines of `app.js` to:\n \n ```javascript\n var requireDirectory = require('require-directory');\n-var routes = requireDirectory(module, __dirname + '/routes');\n+var routes = requireDirectory(module, './routes');\n ```\n \n-### Blacklisting/Whitelisting\n+## Options\n+\n+You can pass an options hash to `require-directory` as the 2nd parameter (or 3rd if you're passing the path to another directory as the 2nd parameter already). Here are the available options:\n \n-`require-directory` takes an optional third parameter that defines which files that should not be included in the hash/tree via either a RegExp or a function. If you pass a function in, it should take a single argument (the path to a file) and return true if that file should be included in the tree. If you pass a RegExp it will be considered a blacklist - files that match that RegExp will **not** be included in the tree:\n+### Whitelisting\n+\n+Whitelisting (either via RegExp or function) allows you to specify that only certain files be loaded.\n \n ```javascript\n-var blacklist = /dontinclude.js$/;\n-var requireDirectory = require('require-directory');\n-var hash = requireDirectory(module, __dirname, blacklist);\n+var requireDirectory = require('require-directory'),\n+  whitelist = /onlyinclude.js$/,\n+  hash = requireDirectory(module, {include: whitelist});\n ```\n \n ```javascript\n-var check = function(path){\n-  if(/dontinclude.js$/.test(path)){\n-    return false; // don't include\n-  }else{\n-    return true; // go ahead and include\n-  }\n-};\n-var requireDirectory = require('require-directory');\n-var hash = requireDirectory(module, __dirname, check);\n+var requireDirectory = require('require-directory'),\n+  check = function(path){\n+    if(/onlyinclude.js$/.test(path)){\n+      return true; // go ahead and include\n+    }else{\n+      return false; // don't include\n+    }\n+  },\n+  hash = requireDirectory(module, {include: check});\n ```\n \n-### Callback\n+### Blacklisting\n \n-`require-directory` takes a function as an optional fourth parameter that will be called for each module that is added to module.exports. The function has two arguments, `err` and the module.\n+Blacklisting (either via RegExp or function) allows you to specify that all but certain files should be loaded.\n \n ```javascript\n-var callback = function(err, mod) {\n",
					"match": false,
					"packageHash": "7341663b4f5dc1c599f6863587c2bd8c2f2727152f7d80b096c847291ff77d2f",
					"size": 4080,
					"sourceHash": "d7a4d16775302382833c28178effa3388c1df46b7302193c3d6d6ce5c5eecb81",
					"status": "content"
				},
				"index.js": {
					"diff": "--- published/index.js\n+++ rebuilt/index.js\n@@ -1,52 +1,86 @@\n-var fs = require('fs');\n-var join = require('path').join;\n-var resolve = require('path').resolve;\n-var dirname = require('path').dirname;\n-\n-var requireDirectory = module.exports = function(m, path, exclude, callback){\n-  var defaultDelegate = function(path, filename){\n-    return filename[0] !== '.' && /\\.(js|coffee)$/i.test(filename);\n+'use strict';\n+\n+var fs = require('fs'),\n+  join = require('path').join,\n+  resolve = require('path').resolve,\n+  dirname = require('path').dirname,\n+  defaultOptions = {\n+    extensions: ['js', 'json', 'coffee'],\n+    recurse: true,\n+    rename: function (name) {\n+      return name;\n+    },\n+    visit: function (obj) {\n+      return obj;\n+    }\n   };\n-  var delegate = defaultDelegate;\n+\n+function checkFileInclusion(path, filename, options) {\n+  return (\n+    // verify file has valid extension\n+    (new RegExp('\\\\.(' + options.extensions.join('|') + ')$', 'i').test(filename)) &&\n+\n+    // if options.include is a RegExp, evaluate it and make sure the path passes\n+    !(options.include && options.include instanceof RegExp && !options.include.test(path)) &&\n+\n+    // if options.include is a function, evaluate it and make sure the path passes\n+    !(options.include && typeof options.include === 'function' && !options.include(path, filename)) &&\n+\n+    // if options.exclude is a RegExp, evaluate it and make sure the path doesn't pass\n+    !(options.exclude && options.exclude instanceof RegExp && options.exclude.test(path)) &&\n+\n+    // if options.exclude is a function, evaluate it and make sure the path doesn't pass\n+    !(options.exclude && typeof options.exclude === 'function' && options.exclude(path, filename))\n+  );\n+}\n+\n+function requireDirectory(m, path, options) {\n   var retval = {};\n \n-  // if no path was passed in, assume the equivelant of __dirname from caller\n-  if(!path){\n-    path = dirname(m.filename);\n+  // path is optional\n+  if (path && !options && typeof path !== 'string') {\n+    options = path;\n+    path = null;\n   }\n \n-  // if a RegExp was passed in as exclude, create a delegate that blacklists that RegExp\n-  // if a function was passed in as exclude, use that function as the delegate\n-  // default to an always-yes delegate\n-  if(exclude instanceof RegExp){\n-    delegate = function(path, filename){\n-      if(!defaultDelegate(path, filename)){\n-        return false;\n-      }else if(exclude.test(path)){\n-        return false;\n-      }else{\n-        return true;\n-      }\n-    };\n-  }else if(exclude && {}.toString.call(exclude) === '[object Function]'){\n-    delegate = exclude;\n+  // default options\n+  options = options || {};\n+  for (var prop in defaultOptions) {\n+    if (typeof options[prop] === 'undefined') {\n+      options[prop] = defaultOptions[prop];\n+    }\n   }\n \n+  // if no path was passed in, assume the equivelant of __dirname from caller\n+  // otherwise, resolve path relative to the equivalent of __dirname\n+  path = !path ? dirname(m.filename) : resolve(dirname(m.filename), path);\n+\n   // get the path of each file in specified directory, append to current tree node, recurse\n-  path = resolve(path);\n-  fs.readdirSync(path).forEach(function(filename){\n-    var joined = join(path, filename);\n-    if(fs.statSync(joined).isDirectory()){\n-      retval[filename] = requireDirectory(m, joined, delegate, callback); // this node is a directory; recurse\n-    }else{\n-      if(joined !== m.filename && delegate(joined, filename)){\n-        var name = filename.substring(0, filename.lastIndexOf('.')); // hash node shouldn't include file extension\n-        retval[name] = m.require(joined);\n-        if (callback && typeof(callback) == 'function') {\n-        \tcallback(null, retval[name]);\n-        }\n",
					"match": false,
					"packageHash": "cc8683585aaecc2393db0f1858706a08a73bb04ccc106872789e7c55c5d1e5b3",
					"size": 1814,
					"sourceHash": "65eaf8b7b519d6ae7be7ea20382d91a117d9c689897897ce4c2ee798e128a2d3",
					"status": "content"
				},
				"package.json": {
					"diff": "--- published/package.json\n+++ rebuilt/package.json\n@@ -1,9 +1,14 @@\n {\n   \"author\": \"Troy Goode <troygoode@gmail.com> (http://github.com/troygoode/)\",\n   \"name\": \"require-directory\",\n-  \"version\": \"1.1.1\",\n-  \"description\": \"Recursively iterates over specified directory, requiring each file, and returning a nested hash structure containing those libraries.\",\n-  \"keywords\": [\"require\", \"directory\", \"library\", \"recursive\"],\n+  \"version\": \"2.1.1\",\n+  \"description\": \"Recursively iterates over specified directory, require()'ing each file, and returning a nested hash structure containing those modules.\",\n+  \"keywords\": [\n+    \"require\",\n+    \"directory\",\n+    \"library\",\n+    \"recursive\"\n+  ],\n   \"homepage\": \"https://github.com/troygoode/node-require-directory/\",\n   \"main\": \"index.js\",\n   \"repository\": {\n@@ -17,24 +22,19 @@\n       \"web\": \"http://github.com/troygoode/\"\n     }\n   ],\n-  \"licenses\": [\n-    {\n-      \"type\": \"MIT\",\n-      \"url\": \"http://www.opensource.org/licenses/mit-license.php\"\n-    }\n-  ],\n+  \"license\": \"MIT\",\n   \"bugs\": {\n     \"url\": \"http://github.com/troygoode/node-require-directory/issues/\"\n   },\n   \"engines\": {\n-    \"node\": \">=0.6.0\"\n+    \"node\": \">=0.10.0\"\n   },\n-  \"dependencies\": {},\n   \"devDependencies\": {\n-    \"mocha\": \"latest\"\n+    \"jshint\": \"^2.6.0\",\n+    \"mocha\": \"^2.1.0\"\n   },\n   \"scripts\": {\n-    \"test\": \"./node_modules/mocha/bin/mocha\"\n-  },\n-  \"bin\": {}\n+    \"test\": \"mocha\",\n+    \"lint\": \"jshint index.js test/test.js\"\n+  }\n }\n",
					"match": false,
					"packageHash": "641128d1e21567029cab8bbd3aab0b268917b84495f43179032080aa881b6406",
					"size": 1102,
					"sourceHash": "5690bdddd6eb4abd795fa5319df7552279508df9d562d571e3132ddff3045a71",
					"status": "content"
				},
				".jshintrc": {
					"match": false,
					"status": "missing-in-package"
				}
			},
			"summary": {
				"differentFiles": 4,
				"matchingFiles": 1,
				"missingInPackage": 1,
				"missingInSource": 1,
				"score": 0.14285714285714285,
				"totalFiles": 7
			}
		}
	}
]
