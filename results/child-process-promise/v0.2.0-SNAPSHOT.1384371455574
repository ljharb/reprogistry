[
	{
		"reproduceVersion": "0.0.0-local",
		"timestamp": "2026-01-08T03:53:03.277Z",
		"os": "linux",
		"arch": "x64",
		"strategy": "npm:11.7.0",
		"reproduced": false,
		"attested": false,
		"package": {
			"spec": "child-process-promise@0.2.0-SNAPSHOT.1384371455574",
			"name": "child-process-promise",
			"version": "0.2.0-SNAPSHOT.1384371455574",
			"location": "https://registry.npmjs.org/child-process-promise/-/child-process-promise-0.2.0-SNAPSHOT.1384371455574.tgz",
			"integrity": "sha512-0fBRYTySAzkzRJoaaY8QRVBGeHgu9NSOzoZ/tflIl4MY5M0Y4PO5cFfMhL3hfZhahIpd+SK+ncDWYZrtUHw/2A==",
			"publishedAt": "2013-11-13T19:37:39.392Z",
			"publishedWith": {
				"node": null,
				"npm": "1.3.11"
			},
			"dependencies": {
				"q": "~0.9.6"
			}
		},
		"source": {
			"integrity": null,
			"location": "https://github.com/patrick-steele-idem/child-process-promise.git",
			"spec": "github:patrick-steele-idem/child-process-promise#HEAD"
		},
		"comparisonHash": "9ef46a5bd31291e57cbab41e2f17c57bd6da0b5b",
		"diff": {
			"files": {
				".npmignore": {
					"match": false,
					"packageHash": "126c0e355bec21aa9b65a33775ee1ce61c6f5c512eb967a5718893138db41d86",
					"size": 35,
					"status": "missing-in-source"
				},
				"README.md": {
					"diff": "--- published/README.md\n+++ rebuilt/README.md\n@@ -1,7 +1,11 @@\n child-process-promise\n =====================\n \n-Simple wrapper around the \"child_process\" module that makes use of promises\n+[![Build Status](https://travis-ci.org/patrick-steele-idem/child-process-promise.svg?branch=master)](https://travis-ci.org/patrick-steele-idem/child-process-promise)\n+[![NPM](https://img.shields.io/npm/v/child-process-promise.svg)](https://www.npmjs.com/package/child-process-promise)\n+[![Downloads](https://img.shields.io/npm/dm/child-process-promise.svg)](http://npm-stat.com/charts.html?package=child-process-promise)\n+\n+Simple wrapper around the `child_process` module that makes use of promises\n \n # Installation\n ```\n@@ -9,20 +13,62 @@\n ```\n \n # Usage\n+\n+## exec\n ```javascript\n var exec = require('child-process-promise').exec;\n \n exec('echo hello')\n-    .then(function(result) {\n+    .then(function (result) {\n         var stdout = result.stdout;\n         var stderr = result.stderr;\n         console.log('stdout: ', stdout);\n         console.log('stderr: ', stderr);\n     })\n-    .fail(function(err) {\n-        console.error(\"ERROR: \", err);\n+    .catch(function (err) {\n+        console.error('ERROR: ', err);\n+    });\n+```\n+\n+## spawn\n+```javascript\n+var spawn = require('child-process-promise').spawn;\n+\n+var promise = spawn('echo', ['hello']);\n+\n+var childProcess = promise.childProcess;\n+\n+console.log('[spawn] childProcess.pid: ', childProcess.pid);\n+childProcess.stdout.on('data', function (data) {\n+    console.log('[spawn] stdout: ', data.toString());\n+});\n+childProcess.stderr.on('data', function (data) {\n+    console.log('[spawn] stderr: ', data.toString());\n+});\n+\n+promise.then(function () {\n+        console.log('[spawn] done!');\n     })\n-    .progress(function(childProcess) {\n-        console.log('childProcess.pid: ', childProcess.pid);\n+    .catch(function (err) {\n+        console.error('[spawn] ERROR: ', err);\n     });\n-```\n\\ No newline at end of file\n+```\n+### Options\n+\n+#### capture\n+Type: `Array`  \n+Default: `[]`\n+\n+Pass an additional `capture` option to buffer the result of `stdout` and/or `stderr`\n+\n+```javascript\n+var spawn = require('child-process-promise').spawn;\n+\n+spawn('echo', ['hello'], { capture: [ 'stdout', 'stderr' ]})\n+    .then(function (result) {\n+        console.log('[spawn] stdout: ', result.stdout.toString());\n+    })\n+    .catch(function (err) {\n+        console.error('[spawn] stderr: ', err.stderr);\n+    });\n+```\n",
					"match": false,
					"packageHash": "f51e0ec7e4fd3a535936f6a02064dd77909f718b773a7ff146d8d29b47c555ff",
					"size": 652,
					"sourceHash": "52c8ae610d77f77d7539bdc2ece146fd73ecf27426289eea19168465fa8fa740",
					"status": "content"
				},
				"lib/index.js": {
					"diff": "--- published/lib/index.js\n+++ rebuilt/lib/index.js\n@@ -1,52 +1,165 @@\n+'use strict';\n var child_process = require('child_process');\n+var crossSpawn = require('cross-spawn');\n+var ChildProcessPromise = require('./ChildProcessPromise');\n+var ChildProcessError = require('./ChildProcessError');\n+\n+var slice = Array.prototype.slice;\n+\n+/**\n+ * Promise wrapper for exec, execFile\n+ *\n+ * @param {String} method\n+ * @param {...*} args\n+ * @return {Promise}\n+ */\n+function doExec(method, args) {\n+    var cp;\n+    var cpPromise = new ChildProcessPromise();\n+    var reject = cpPromise._cpReject;\n+    var resolve = cpPromise._cpResolve;\n \n-var q = require('q');\n-function exec(command, options) {\n+    var finalArgs = slice.call(args, 0);\n+    finalArgs.push(callback);\n \n-    var deferred = q.defer();\n-    var childProcess;\n+    cp = child_process[method].apply(child_process, finalArgs);\n \n-    var args = Array.prototype.slice.call(arguments, 0);\n-    args.push(function(err, stdout, stderr) {\n+    function callback(err, stdout, stderr) {\n         if (err) {\n-            err.message += command + ' (exited with error code ' + err.code + ')';\n+            var commandStr = args[0] + (Array.isArray(args[1]) ? (' ' + args[1].join(' ')) : '');\n+            err.message += ' `' + commandStr + '` (exited with error code ' + err.code + ')';\n             err.stdout = stdout;\n             err.stderr = stderr;\n-            deferred.reject(err);\n-        }\n-        else {\n-            deferred.resolve({\n-                childProcess: childProcess,\n+            var cpError = new ChildProcessError(err.message, err.code, child_process, stdout, stderr);\n+            reject(cpError);\n+        } else {\n+            resolve({\n+                childProcess: cp,\n                 stdout: stdout,\n                 stderr: stderr\n             });\n         }\n-    });\n+    }\n \n-    childProcess = child_process.exec.apply(child_process, args);\n-    setImmediate(function() {\n-        deferred.notify(childProcess);\n-    });\n+    cpPromise.childProcess = cp;\n \n-    return deferred.promise;\n+    return cpPromise;\n }\n \n-function spawn(command, args, options) {\n-    var deferred = Q.defer();\n+/**\n+ * `exec` as Promised\n+ *\n+ * @param {String} command\n+ * @param {Object} options\n+ * @return {Promise}\n+ */\n+function exec() {\n+    return doExec('exec', arguments);\n+}\n \n-    var p = childProcess.spawn(command, args, options);\n-    deferred.notify(p);\n-    p.on('close', function (code) {\n-        if (code !== 0) {\n-            var commandStr = command + (args.length ? (' ' + args.join(' ')) : '');\n-            deferred.reject('\"' + commandStr + '\" failed with code ' + code);\n+/**\n+ * `execFile` as Promised\n+ *\n+ * @param {String} command\n+ * @param {Array} args\n+ * @param {Object} options\n+ * @return {Promise}\n+ */\n+function execFile() {\n+    return doExec('execFile', arguments);\n+}\n+\n",
					"match": false,
					"packageHash": "f8a7860f32cd1238e5ef09806d31d860568bd9568c604f0b8268df7faf910831",
					"size": 1362,
					"sourceHash": "427c7972bc3fd7fbeb62aa96fbcc182fe43eaf5701cfc168d9ecb30013b00e79",
					"status": "content"
				},
				"package.json": {
					"diff": "--- published/package.json\n+++ rebuilt/package.json\n@@ -1,10 +1,17 @@\n {\n   \"name\": \"child-process-promise\",\n-  \"version\": \"0.2.0-SNAPSHOT.1384371455574\",\n   \"description\": \"Simple wrapper around the \\\"child_process\\\" module that makes use of promises\",\n-  \"main\": \"lib/index.js\",\n+  \"main\": \"./index.js\",\n+  \"files\": [\n+    \"lib\",\n+    \"lib-es5\",\n+    \"Readme.md\"\n+  ],\n   \"scripts\": {\n-    \"test\": \"node test/test.js\"\n+    \"lint\": \"eslint lib/*js test/*js\",\n+    \"test\": \"npm run mocha\",\n+    \"mocha\": \"mocha --ui bdd --reporter spec ./test/\",\n+    \"prepublish\": \"babel lib --out-dir lib-es5\"\n   },\n   \"repository\": {\n     \"type\": \"git\",\n@@ -16,7 +23,7 @@\n     \"promises\"\n   ],\n   \"author\": \"Patrick Steele-Idem <pnidem@gmail.com>\",\n-  \"license\": \"BSD\",\n+  \"license\": \"MIT\",\n   \"bugs\": {\n     \"url\": \"https://github.com/patrick-steele-idem/child-process-promise/issues\"\n   },\n@@ -24,7 +31,28 @@\n     \"registry\": \"http://registry.npmjs.org/\"\n   },\n   \"dependencies\": {\n-    \"q\": \"~0.9.6\"\n+    \"cross-spawn\": \"^4.0.2\",\n+    \"node-version\": \"^1.0.0\",\n+    \"promise-polyfill\": \"^6.0.1\"\n+  },\n+  \"devDependencies\": {\n+    \"babel-cli\": \"^6.11.4\",\n+    \"babel-plugin-check-es2015-constants\": \"^6.8.0\",\n+    \"babel-plugin-transform-es2015-block-scoping\": \"^6.10.1\",\n+    \"babel-preset-es2015\": \"^6.13.2\",\n+    \"chai\": \"^3.5.0\",\n+    \"eslint\": \"^0.10.2\",\n+    \"jshint\": \"^2.9.1\",\n+    \"mocha\": \"^2.4.5\"\n   },\n-  \"ebay\": {}\n-}\n\\ No newline at end of file\n+  \"version\": \"2.2.0\",\n+  \"babel\": {\n+    \"presets\": [\n+      \"es2015\"\n+    ],\n+    \"plugins\": [\n+      \"check-es2015-constants\",\n+      \"transform-es2015-block-scoping\"\n+    ]\n+  }\n+}\n",
					"match": false,
					"packageHash": "f9962cace0a94aadd4ede61a5ea33fb66d395551ce3463660f413adb0a9cdd3f",
					"size": 742,
					"sourceHash": "623b4f1cd269182caade46e698c02aa5ae49e0648e8b94fa17466227415c83d3",
					"status": "content"
				},
				"LICENSE": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/ChildProcessError.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/ChildProcessPromise.js": {
					"match": false,
					"status": "missing-in-package"
				}
			},
			"summary": {
				"differentFiles": 3,
				"matchingFiles": 0,
				"missingInPackage": 3,
				"missingInSource": 1,
				"score": 0,
				"totalFiles": 7
			}
		},
		"prodDependencies": [
			{
				"name": "cross-spawn",
				"version": "4.0.2"
			},
			{
				"name": "isexe",
				"version": "2.0.0"
			},
			{
				"name": "lru-cache",
				"version": "4.1.5"
			},
			{
				"name": "node-version",
				"version": "1.2.0"
			},
			{
				"name": "promise-polyfill",
				"version": "6.1.0"
			},
			{
				"name": "pseudomap",
				"version": "1.0.2"
			},
			{
				"name": "which",
				"version": "1.3.1"
			},
			{
				"name": "yallist",
				"version": "2.1.2"
			}
		]
	}
]
