[
	{
		"reproduceVersion": "0.0.0-local",
		"timestamp": "2025-12-31T14:44:11.915Z",
		"os": "linux",
		"arch": "x64",
		"strategy": "npm:11.7.0",
		"reproduced": false,
		"attested": false,
		"package": {
			"spec": "rollup-plugin-vue@2.2.15",
			"name": "rollup-plugin-vue",
			"version": "2.2.15",
			"location": "https://registry.npmjs.org/rollup-plugin-vue/-/rollup-plugin-vue-2.2.15.tgz",
			"integrity": "sha512-9vg0IJMDCOsTU4l2o1a25jUNnntyvdfNBnV5JTOMMFy9YbpmgEXPTpr0fehgxFKuQmhw4riPNmlm3yKs0Gx9ug==",
			"publishedAt": "2017-01-10T06:30:26.440Z",
			"publishedWith": {
				"node": "7.1.0",
				"npm": "3.10.9"
			}
		},
		"source": {
			"integrity": null,
			"location": "git+https://github.com/znck/rollup-plugin-vue.git",
			"spec": "github:znck/rollup-plugin-vue#5dca488dc59c7c2f050648c87ff60f6a5255eb80"
		},
		"comparisonHash": "8a2a8dcbb729bf3ee9216e490c955701f0ddebe1",
		"diff": {
			"files": {
				"README.md": {
					"diff": "--- published/README.md\n+++ rebuilt/README.md\n@@ -1,15 +1,17 @@\n-# Rollup Plugin for Vue\n+<div class=\"text-xs-center\" align=\"center\" style=\"margin: 20px\">\n+  <img src=\"docs/assets/images/logo.png\">\n+</div>\n+\n+## Introduction\n As vue-loader is for webpack and vueify is for browserify, similarly its for rollup. As we know, webpack and browserify concat stuff and make it runnable in browser. Its difficult to share .vue components. **Now roll your [Vue](http://vuejs.org/) components.**\n \n With rollup you can break your application into reusable modules.\n \n->  See [docs](http://znck.me/rollup-plugin-vue/installation) for installing, using and contributing.\n-\n-![Rollup Plugin for Vue](http://znck.me/rollup-plugin-vue/assets/images/cover.png)\n+>  See [docs](http://vuejs.github.io/rollup-plugin-vue) for installing, using and contributing.\n \n <p align=\"center\">\n-  <a href=\"https://circleci.com/gh/znck/rollup-plugin-vue\">\n-    <img src=\"https://circleci.com/gh/znck/rollup-plugin-vue.svg?style=svg\" alt=\"Build Status\" />\n+  <a href=\"https://circleci.com/gh/vuejs/rollup-plugin-vue\">\n+    <img src=\"https://circleci.com/gh/vuejs/rollup-plugin-vue.svg?style=svg\" alt=\"Build Status\" />\n   </a>\n   <a href=\"http://standardjs.com\">\n     <img src=\"https://img.shields.io/badge/code%20style-standard-brightgreen.svg\" alt=\"Code Style\" />\n@@ -17,7 +19,7 @@\n   <a href=\"https://coveralls.io/github/znck/rollup-plugin-vue?branch=master\">\n     <img src=\"https://coveralls.io/repos/github/znck/rollup-plugin-vue/badge.svg?branch=master&style=flat-square\" alt=\"Coverage Status\" />\n   </a>\n-  <a href=\"https://www.codacy.com/app/znck/rollup-plugin-vue\">\n+  <a href=\"https://www.codacy.com/app/vuejs/rollup-plugin-vue\">\n     <img src=\"https://api.codacy.com/project/badge/grade/e3402df0135240c29a1d25bab93932a0\"/>\n   </a>\n   <a href=\"LICENSE\">\n@@ -26,12 +28,12 @@\n   <a href=\"https://npmjs.org/package/rollup-plugin-vue\">\n     <img src=\"https://img.shields.io/npm/v/rollup-plugin-vue.svg?style=flat-square\" alt=\"NPM\" />\n   </a>\n-  <a href=\"https://github.com/znck/rollup-plugin-vue/releases\">\n-    <img src=\"https://img.shields.io/github/release/znck/rollup-plugin-vue.svg?style=flat-square\" alt=\"Latest Version\" />\n+  <a href=\"https://github.com/vuejs/rollup-plugin-vue/releases\">\n+    <img src=\"https://img.shields.io/github/release/vuejs/rollup-plugin-vue.svg?style=flat-square\" alt=\"Latest Version\" />\n   </a>\n \n-  <a href=\"https://github.com/znck/rollup-plugin-vue/issues\">\n-    <img src=\"https://img.shields.io/github/issues/znck/rollup-plugin-vue.svg?style=flat-square\" alt=\"Issues\" />\n+  <a href=\"https://github.com/vuejs/rollup-plugin-vue/issues\">\n+    <img src=\"https://img.shields.io/github/issues/vuejs/rollup-plugin-vue.svg?style=flat-square\" alt=\"Issues\" />\n   </a>\n </p>\n \n",
					"match": false,
					"packageHash": "04dbedd83f4a8a3fa521a1912cf937980972eec69a066094f0574dc636d3774e",
					"size": 2464,
					"sourceHash": "c79cccfefb2d87c6045c2603bfc70ea708060af63fca33950ff37dcfb8481354",
					"status": "content"
				},
				"dist/rollup-plugin-vue.common.js": {
					"match": false,
					"packageHash": "d69a60d64b17e9bba962aab95d4940b0a6260d7f85fd0c44cde65a7e8b615cfb",
					"size": 11296,
					"status": "missing-in-source"
				},
				"dist/rollup-plugin-vue.js": {
					"match": false,
					"packageHash": "c7da26625eab0e3d5298017af73e936341853f8a0c504d9a1bbb0de64ff41b10",
					"size": 11006,
					"status": "missing-in-source"
				},
				"package.json": {
					"diff": "--- published/package.json\n+++ rebuilt/package.json\n@@ -1,9 +1,9 @@\n {\n   \"name\": \"rollup-plugin-vue\",\n-  \"version\": \"2.2.15\",\n+  \"version\": \"2.4.0\",\n   \"description\": \"Roll .vue files\",\n   \"main\": \"dist/rollup-plugin-vue.common.js\",\n-  \"jsnext\": \"dist/rollup-plugin-vue.js\",\n+  \"module\": \"dist/rollup-plugin-vue.js\",\n   \"scripts\": {\n     \"test\": \"npm run lint && npm run build && npm run unit\",\n     \"build\": \"node config/build.js\",\n@@ -13,10 +13,7 @@\n     \"lint:fix\": \"eslint --fix src/**\",\n     \"coveralls\": \"NODE_ENV=production istanbul cover --default-excludes -x 'dist/**' -x 'config/**' ./node_modules/mocha/bin/_mocha --report lcovonly  --  --slow=5000 --timeout=10000 test/test.js && cat ./coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js && rm -rf ./coverage\",\n     \"prepublish\": \"npm run build\",\n-    \"docs\": \"php -S localhost:8080 -t .github/sereno/public\",\n-    \"sereno\": \"gulp --gulpfile .github/sereno/gulpfile.js watch\",\n-    \"sereno:build\": \"gulp --gulpfile .github/sereno/gulpfile.js --env default\",\n-    \"sereno:deploy\": \"sereno deploy\"\n+    \"docs\": \"php -S localhost:8080 -t .github/sereno/public\"\n   },\n   \"repository\": {\n     \"type\": \"git\",\n@@ -37,37 +34,55 @@\n   },\n   \"homepage\": \"https://github.com/znck/rollup-plugin-vue#readme\",\n   \"dependencies\": {\n+    \"babel-runtime\": \"^6.22.0\",\n+    \"camelcase\": \"^4.0.0\",\n     \"de-indent\": \"^1.0.2\",\n-    \"debug\": \"^2.2.0\",\n-    \"html-minifier\": \"^3.1.0\",\n+    \"debug\": \"^2.6.0\",\n+    \"hash-sum\": \"^1.0.2\",\n+    \"html-minifier\": \"^3.2.3\",\n     \"magic-string\": \"^0.19.0\",\n-    \"parse5\": \"^3.0.0\",\n-    \"rollup-pluginutils\": \"^1.5.2\",\n-    \"vue-template-compiler\": \"^2.0.3\",\n-    \"vue-template-es2015-compiler\": \"^1.2.4\",\n+    \"merge-options\": \"0.0.64\",\n+    \"parse5\": \"^2.1.0\",\n+    \"postcss\": \"^5.2.11\",\n+    \"postcss-modules\": \"^0.6.4\",\n+    \"postcss-selector-parser\": \"^2.2.3\",\n+    \"posthtml\": \"^0.9.2\",\n+    \"posthtml-attrs-parser\": \"^0.1.1\",\n+    \"rollup-pluginutils\": \"^2.0.1\",\n+    \"vue-template-compiler\": \"*\",\n+    \"vue-template-es2015-compiler\": \"^1.5.0\",\n     \"vue-template-validator\": \"^1.1.5\"\n   },\n   \"devDependencies\": {\n-    \"babel-eslint\": \"^7.0.0\",\n-    \"clean-css\": \"^3.4.20\",\n-    \"coveralls\": \"^2.11.14\",\n-    \"eslint\": \"^3.7.1\",\n+    \"babel-eslint\": \"^7.1.1\",\n+    \"babel-plugin-transform-runtime\": \"^6.22.0\",\n+    \"babel-preset-es2015\": \"^6.22.0\",\n+    \"babel-preset-stage-2\": \"^6.22.0\",\n+    \"clean-css\": \"^3.4.24\",\n+    \"coveralls\": \"^2.11.15\",\n+    \"eslint\": \"^3.14.0\",\n     \"eslint-config-standard\": \"^6.2.1\",\n-    \"eslint-plugin-html\": \"^1.5.3\",\n-    \"eslint-plugin-import\": \"^2.2.0\",\n+    \"eslint-plugin-html\": \"^1.7.0\",\n     \"eslint-plugin-promise\": \"^3.4.0\",\n     \"eslint-plugin-standard\": \"^2.0.1\",\n-    \"gulp\": \"^3.9.1\",\n     \"istanbul\": \"^0.4.5\",\n-    \"laravel-elixir\": \"^5.0.0\",\n-    \"mocha\": \"^3.1.2\",\n-    \"mocha-lcov-reporter\": \"^1.2.0\",\n-    \"rollup\": \"^0.37.0\",\n-    \"rollup-plugin-buble\": \"^0.14.0\",\n-    \"rollup-plugin-css-only\": \"^0.1.0\",\n+    \"mocha\": \"^3.2.0\",\n+    \"rollup\": \"^0.41.4\",\n+    \"rollup-plugin-babel\": \"^2.7.1\",\n+    \"rollup-plugin-buble\": \"^0.15.0\",\n+    \"rollup-plugin-css-only\": \"^0.2.0\",\n     \"rollup-plugin-replace\": \"^1.1.1\",\n-    \"uglify-js\": \"^2.7.3\",\n-    \"vue-hot-reload-api\": \"^2.0.6\",\n-    \"yargs\": \"^4.7.0\"\n+    \"uglify-js\": \"^2.7.5\"\n+  },\n+  \"optionalDependencies\": {\n+    \"coffee-script\": \"^1.12.4\",\n+    \"coffeescript-compiler\": \"^0.1.1\",\n+    \"less\": \"^2.7.2\",\n+    \"node-sass\": \"^4.5.0\",\n+    \"pug\": \"^2.0.0-beta11\",\n+    \"stylus\": \"^0.54.5\"\n+  },\n",
					"match": false,
					"packageHash": "32db52e18bc84d0b482f5e1dd9939df4414a9de2a163febb13fc443b1f5a0118",
					"size": 2477,
					"sourceHash": "c5b574a94abf80dfa5603d57399c2b3249cdca1253695cb461ac59509acb8497",
					"status": "content"
				},
				"src/index.js": {
					"diff": "--- published/src/index.js\n+++ rebuilt/src/index.js\n@@ -2,51 +2,36 @@\n \n import vueTransform from './vueTransform'\n import DEFAULT_OPTIONS from './options'\n-import compileStyle from './style'\n+import compileStyle from './style/index'\n import debug from './debug'\n+import mergeOptions from 'merge-options'\n \n-function mergeOptions (options, defaults) {\n-    Object.keys(defaults).forEach((key) => {\n-        const val = defaults[key]\n-\n-        if (key in options) {\n-            if (typeof options[key] === 'object') {\n-                mergeOptions(options[key], val)\n-            }\n-        } else {\n-            options[key] = val\n-        }\n-    })\n-\n-    return options\n-}\n-\n-export default function vue (options = {}) {\n+export default function vue (opts = {}) {\n     debug('Yo! rolling vue!')\n-    const filter = createFilter(options.include, options.exclude)\n+    const filter = createFilter(opts.include, opts.exclude)\n \n-    delete options.include\n-    delete options.exclude\n+    delete opts.include\n+    delete opts.exclude\n \n     /* eslint-disable */\n     try {\n         const vueVersion = require('vue').version;\n         if (parseInt(vueVersion.split('.')[0], 10) >= 2) {\n-            if (!('compileTemplate' in options)) {\n+            if (!('compileTemplate' in config)) {\n                 debug('Vue 2.0 detected. Compiling template.');\n-                options.compileTemplate = true;\n+                opts.compileTemplate = true;\n             }\n         } else {\n-            if (options.compileTemplate === true) {\n+            if (opts.compileTemplate === true) {\n                 console.warn('Vue version < 2.0.0 does not support compiled template.');\n             }\n-            options.compileTemplate = false;\n+            opts.compileTemplate = false;\n         }\n-    } catch (e) {}\n+    } catch (e) {\n+    }\n     /* eslint-enable */\n \n-    options = mergeOptions(options, DEFAULT_OPTIONS)\n-\n+    const config = mergeOptions(DEFAULT_OPTIONS, opts)\n     const styles = {}\n \n     return {\n@@ -60,30 +45,37 @@\n             }\n         },\n         load (id) {\n-            if (id.indexOf('.vue.component.') > -1) {\n-                const parts = id.split('.')\n-                const component = parts.slice(0, parts.length - 4).join('.')\n-                const index = parseInt(parts[parts.length - 4])\n+            if (id.indexOf('.vue.component.') < 0) return null\n \n-                return styles[component][index] || ''\n-            }\n+            const parts = id.split('.')\n+            const component = parts.slice(0, parts.length - 4).join('.')\n+            const index = parseInt(parts[parts.length - 4])\n+\n+            if (index < styles[component].length) return styles[component][index]\n         },\n-        transform (source, id) {\n+\n+        async transform (source, id) {\n             if (!filter(id) || !id.endsWith('.vue')) {\n                 debug(`Ignore: ${id}`)\n                 return null\n             }\n \n-            const { code, css, map } = vueTransform(source, id, options)\n+            debug(`Compile: ${id}`)\n+\n+            const { code, css, map } = await vueTransform(source, id, config)\n+\n             styles[id] = css\n \n",
					"match": false,
					"packageHash": "7e88bfee852382e0abd8de375587f3b3078c6b57e86f9d368da65c86a055fa59",
					"size": 2619,
					"sourceHash": "bc95d83d8057959730d0ee548eaecb348e29c1133fc7c89b989fc579213854ec",
					"status": "content"
				},
				"src/options.js": {
					"diff": "--- published/src/options.js\n+++ rebuilt/src/options.js\n@@ -1,9 +1,26 @@\n+import { templateJs, moduleJs, scopeJs, renderJs } from './injections'\n+import { coffee } from './script/index'\n+\n export default {\n+    // Style compilation options.\n+    styleToImports: false,\n+    autoStyles: true,\n+    disableCssModuleStaticReplacement: false,\n+\n+    // Template compilation options.\n+    compileTemplate: true,\n+\n+    compileOptions: {},\n+\n+    // Config for html-minifier.\n     htmlMinifier: {\n+        caseSensitive: true,\n         customAttrSurround: [[/@/, new RegExp('')], [/:/, new RegExp('')]],\n         collapseWhitespace: true,\n         removeComments: true\n     },\n+\n+    // Handle with(this)\n     vue: {\n         // Remove all transforms added by vue since it's up to the user\n         // to use whatever he wants\n@@ -34,5 +51,50 @@\n             unicodeRegExp: false\n         }\n     },\n-    styleToImports: false\n+\n+    // Config for postcss-modules.\n+    cssModules: {\n+        generateScopedName: '[name]__[local]'\n+    },\n+\n+    // Config for node-sass.\n+    scss: {},\n+\n+    // Config for less.\n+    less: {},\n+\n+    // Config for stylus.\n+    stylus: {},\n+\n+    // Config for pug compiler.\n+    pug: {},\n+\n+    // Custom injectors.\n+    inject: {\n+        template: {\n+            js: templateJs,\n+            babel: templateJs\n+        },\n+\n+        render: {\n+            js: renderJs,\n+            babel: renderJs\n+        },\n+\n+        module: {\n+            js: moduleJs,\n+            babel: moduleJs\n+        },\n+\n+        scoped: {\n+            js: scopeJs,\n+            babel: scopeJs\n+        }\n+    },\n+\n+    // script languages.\n+    script: {\n+        coffee,\n+        coffeescript: coffee\n+    }\n }\n",
					"match": false,
					"packageHash": "ecfc3f61bad29472473b4023366512126fab859f7902e716034331cbde4cb200",
					"size": 1230,
					"sourceHash": "6dc8b70c44fd19eba36aa0963f58077bb5f7f0de3170d466284dfaaf9e40536f",
					"status": "content"
				},
				"src/style.js": {
					"match": false,
					"packageHash": "242972bae6f9f473e4bf0d07dc5e2a19ddc3fe2fcdb17209ca34c321a6052145",
					"size": 815,
					"status": "missing-in-source"
				},
				"src/vueTransform.js": {
					"diff": "--- published/src/vueTransform.js\n+++ rebuilt/src/vueTransform.js\n@@ -1,11 +1,14 @@\n import deIndent from 'de-indent'\n import htmlMinifier from 'html-minifier'\n import parse5 from 'parse5'\n-import validateTemplate from 'vue-template-validator'\n-import transpileVueTemplate from 'vue-template-es2015-compiler'\n+import templateValidator from 'vue-template-validator'\n+import { compile } from './style/index'\n+import templateProcessor from './template/index'\n import { relative } from 'path'\n import MagicString from 'magic-string'\n import debug from './debug'\n+import { injectModule, injectScopeID, injectTemplate, injectRender } from './injections'\n+import genScopeID from './gen-scope-id'\n \n function getNodeAttrs (node) {\n     if (node.attrs) {\n@@ -31,115 +34,117 @@\n           .join('\\n')\n }\n \n+function validateTemplate (code, content, id) {\n+    const warnings = templateValidator(code, content)\n+    if (Array.isArray(warnings)) {\n+        const relativePath = relative(process.cwd(), id)\n+        warnings.forEach((msg) => {\n+            console.warn(`\\n Warning in ${relativePath}:\\n ${msg}`)\n+        })\n+    }\n+}\n /**\n- * Wrap code inside a with statement inside a function\n- * This is necessary for Vue 2 template compilation\n+ * Compile template: DeIndent and minify html.\n  */\n-function wrapRenderFunction (code) {\n-    return `function(){${code}}`\n-}\n-\n-function injectRender (script, render, lang, options) {\n-    if (['js', 'babel'].indexOf(lang.toLowerCase()) > -1) {\n-        const matches = /(export default[^{]*\\{)/g.exec(script)\n-        if (matches) {\n-            let renderScript = 'module.exports={' +\n-                  `render: ${wrapRenderFunction(render.render)},` +\n-                  'staticRenderFns: [' +\n-                  `${render.staticRenderFns.map(wrapRenderFunction).join(',')}],}`\n-\n-            if (options.stripWith !== false) {\n-                renderScript = transpileVueTemplate(renderScript, options.vue)\n-            }\n+async function processTemplate (source, id, content, options, nodes, modules) {\n+    if (source === undefined) return undefined\n \n-            const result = script.split(matches[1])\n-                  .join(renderScript.replace('module.exports={', 'export default {').replace(/\\}$/, ''))\n+    debug(`Process template: ${id}`)\n \n-            return result\n-        }\n+    const extras = { modules, id, lang: source.attrs.lang }\n+    const code = deIndent(source.code)\n+    const template = await (\n+          options.disableCssModuleStaticReplacement !== true\n+                ? templateProcessor(code, extras, options)\n+                : code\n+    )\n \n-        debug(`No injection location found in: \\n${script}\\n`)\n-    } else if (options.inject) {\n-        return options.inject(script, render, lang, options)\n+    if (!options.compileTemplate) {\n+        validateTemplate(code, content, id)\n     }\n-    throw new Error('[rollup-plugin-vue] could not find place to inject template in script.')\n+\n+    return htmlMinifier.minify(template, options.htmlMinifier)\n }\n \n-/**\n- * @param script\n- * @param template\n- * @param lang\n- * @returns {string}\n- */\n-function injectTemplate (script, template, lang, options) {\n-    if (template === undefined) return script\n+async function processScript (source, id, content, options, nodes, modules, scoped) {\n+    const template = await processTemplate(nodes.template[0], id, content, options, nodes, modules)\n \n-    if (['js', 'babel'].indexOf(lang.toLowerCase()) > -1) {\n-        const matches = /(export default[^{]*\\{)/g.exec(script)\n-        if (matches) {\n-            return script.split(matches[1])\n-                  .join(`${matches[1]} template: ${JSON.stringify(template)},`)\n+    debug(`Process script: ${id}`)\n+    const lang = 'js'\n+\n",
					"match": false,
					"packageHash": "b87e3a5688a790d45712ec36a066705ce92e61fb079e86f66ec0a9b724fbed92",
					"size": 5929,
					"sourceHash": "34f284d33db27958036d034a3f2b3651a47e762254aca81d7e5aa0e39a353811",
					"status": "content"
				},
				"src/gen-scope-id.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/injections.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/script/coffee.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/script/index.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/style/css.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/style/index.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/style/less.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/style/scss.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/style/stylus.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/template/html.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/template/index.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/template/pug.js": {
					"match": false,
					"status": "missing-in-package"
				}
			},
			"summary": {
				"differentFiles": 5,
				"matchingFiles": 2,
				"missingInPackage": 12,
				"missingInSource": 3,
				"score": 0.09090909090909091,
				"totalFiles": 22
			}
		}
	}
]
