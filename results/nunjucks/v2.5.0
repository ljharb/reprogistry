[
	{
		"reproduceVersion": "0.0.0-local",
		"timestamp": "2026-01-03T13:18:42.257Z",
		"os": "linux",
		"arch": "x64",
		"strategy": "npm:2.15.8",
		"reproduced": false,
		"attested": false,
		"package": {
			"spec": "nunjucks@2.5.0",
			"name": "nunjucks",
			"version": "2.5.0",
			"location": "https://registry.npmjs.org/nunjucks/-/nunjucks-2.5.0.tgz",
			"integrity": "sha512-IoFGgJJaVb88VKq9KFM7LjROmQz5ArjDp8uIa2dbZrs0PJ8R68cjYHwuE2d3wrOpJgjJqYatcn/Wf42YkcozQA==",
			"publishedAt": "2016-09-07T20:38:32.667Z",
			"publishedWith": {
				"node": "4.4.7",
				"npm": "2.15.8"
			}
		},
		"source": {
			"integrity": null,
			"location": "git+https://github.com/mozilla/nunjucks.git",
			"spec": "github:mozilla/nunjucks#7ea159390fd2a84e75a90782f81790c970cb7e43"
		},
		"comparisonHash": "8a2a8dcbb729bf3ee9216e490c955701f0ddebe1",
		"diff": {
			"files": {
				".idea/compiler.xml": {
					"match": false,
					"packageHash": "cdd71b1f91df5189e1b31f1756dd3e211f20264176996b35155cb7fbf853a2e8",
					"size": 709,
					"status": "missing-in-source"
				},
				".idea/copyright/profiles_settings.xml": {
					"match": false,
					"packageHash": "a854d1ddd0b213c765e1bc63ebd0f720d68a78152c4ac79e42e6e9ad0a57d680",
					"size": 74,
					"status": "missing-in-source"
				},
				".idea/jsLibraryMappings.xml": {
					"match": false,
					"packageHash": "2c4c919735f544574bf439a4dd29374379f20cda943b3d469c8dcdd3e970470c",
					"size": 209,
					"status": "missing-in-source"
				},
				".idea/libraries/nunjucks_node_modules.xml": {
					"match": false,
					"packageHash": "157f1f7a6a54a424602dc881c188e302f29e8c0508a1d01f60aa833aa2caac7e",
					"size": 432,
					"status": "missing-in-source"
				},
				".idea/misc.xml": {
					"match": false,
					"packageHash": "fed97fa968cdbb5d20ffd8c4839fd024a340cef6e691d2854534fc95f9885149",
					"size": 1334,
					"status": "missing-in-source"
				},
				".idea/modules.xml": {
					"match": false,
					"packageHash": "9799c09913abc4c6ce1e6fb579294b4110a55f1c84bf2e13defa77454f26b739",
					"size": 268,
					"status": "missing-in-source"
				},
				".idea/nunjucks.iml": {
					"match": false,
					"packageHash": "c043d376321c9ded0e3264c03be87e50c4fdf1cc125d77435ba40a5373486483",
					"size": 662,
					"status": "missing-in-source"
				},
				".idea/vcs.xml": {
					"match": false,
					"packageHash": "6323e12648862a0a96fc0d7877672817d6cd91e2c2a3c3d78f1090db23c6e88e",
					"size": 167,
					"status": "missing-in-source"
				},
				".idea/workspace.xml": {
					"match": false,
					"packageHash": "b5f229f971ac254b2565579880c82cce0e59d2d09022c2d481a6ab2d510389fa",
					"size": 18288,
					"status": "missing-in-source"
				},
				".jshintignore": {
					"match": false,
					"packageHash": "5c1a971b09650a2a642e96af443b754bbbb21caaf31884f5b46b4d6c002365fe",
					"size": 122,
					"status": "missing-in-source"
				},
				".jshintrc": {
					"match": false,
					"packageHash": "a53340039b8d8666b67afd3a40d9b01f81e157c22af06fa351c1ba8a3f31e372",
					"size": 529,
					"status": "missing-in-source"
				},
				".npmignore": {
					"match": false,
					"packageHash": "5d9d77f3563f63736eff68312cd0131ef623519ea98114531a9474d80f78dcf5",
					"size": 39,
					"status": "missing-in-source"
				},
				".travis.yml": {
					"match": false,
					"packageHash": "650ec555cfed6dff70e8f8cdf96f834af656cf3c690ae3c3a53e1cc37983bc24",
					"size": 92,
					"status": "missing-in-source"
				},
				"CHANGELOG.md": {
					"match": false,
					"packageHash": "94b8a8b6d234f2577d6fa2b505f0e2d1d08ba7b46c5dc38710809bf3c2aa5e4c",
					"size": 21086,
					"status": "missing-in-source"
				},
				"CONTRIBUTING.md": {
					"match": false,
					"packageHash": "76e460faef53376b8edacd051e4d8d274d0a7c5853ec667a2fa19af307365b2e",
					"size": 1125,
					"status": "missing-in-source"
				},
				"MAINTENANCE.md": {
					"match": false,
					"packageHash": "917e5407e0c469804e14559c517591385982c12dee1373a171ec7b2aa69373d8",
					"size": 2376,
					"status": "missing-in-source"
				},
				"README.md": {
					"diff": "--- published/README.md\n+++ rebuilt/README.md\n@@ -1,19 +1,28 @@\n # Nunjucks\n \n-[Nunjucks](http://mozilla.github.io/nunjucks/) is a full featured\n+[![NPM Version][npm-image]][npm-url]\n+[![NPM Downloads][downloads-image]][downloads-url]\n+[![CI][github-actions-image]][github-actions-url]\n+[![Codecov][codecov-image]][codecov-url]\n+\n+[Nunjucks](https://mozilla.github.io/nunjucks/) is a full featured\n templating engine for javascript. It is heavily inspired by\n-[jinja2](http://jinja.pocoo.org/). View the docs\n-[here](http://mozilla.github.io/nunjucks/).\n+[jinja2](https://jinja.palletsprojects.com/). View the docs\n+[here](https://mozilla.github.io/nunjucks/).\n \n ## Installation\n \n `npm install nunjucks`\n \n+To use the file watcher built-in to Nunjucks, Chokidar must be installed separately.\n+\n+`npm install nunjucks chokidar`\n+\n (View the [CHANGELOG](https://github.com/mozilla/nunjucks/releases))\n \n ## Documentation\n \n-See [here](http://mozilla.github.io/nunjucks/).\n+Nunjucks info and documentation source is in [`/docs`](/docs) and publishes to https://mozilla.github.io/nunjucks/\n \n ## Browser Support\n \n@@ -23,13 +32,24 @@\n \n Run the tests with `npm test`.\n \n-Watch `master` branch's tests running at http://mozilla.github.io/nunjucks/files/tests/browser/.\n+## Get in touch\n \n-## Mailing List\n+If you have ideas or questions, or need help, you can reach us in the [#nunjucks:mozilla.org](https://matrix.to/#/#nunjucks:mozilla.org) room on [Matrix](https://wiki.mozilla.org/Matrix).\n \n-Join our mailing list and get help with and issues you have:\n-https://groups.google.com/forum/?fromgroups#!forum/nunjucks\n+## Want to help?\n+\n+Contributions are always welcome! Before you submit an issue or pull request, please read our [contribution guidelines](CONTRIBUTING.md).\n \n ## Contributors\n \n-https://github.com/mozilla/nunjucks/graphs/contributors\n+[![Contributors graph. Avatars provided by https://contrib.rocks](https://contrib.rocks/image?repo=mozilla/nunjucks)](https://github.com/mozilla/nunjucks/graphs/contributors)\n+\n+\n+[npm-image]: https://img.shields.io/npm/v/nunjucks.svg\n+[npm-url]: https://npmjs.org/package/nunjucks\n+[downloads-image]: https://img.shields.io/npm/dm/nunjucks.svg\n+[downloads-url]: https://npmjs.org/package/nunjucks\n+[github-actions-image]: https://github.com/mozilla/nunjucks/actions/workflows/tests.yml/badge.svg\n+[github-actions-url]: https://github.com/mozilla/nunjucks/actions\n+[codecov-image]: https://img.shields.io/codecov/c/gh/mozilla/nunjucks.svg\n+[codecov-url]: https://codecov.io/gh/mozilla/nunjucks/branch/master\n",
					"match": false,
					"packageHash": "54d0c4c6c0292f056dda6ea3abb74c50781733296a0390a49c23a113206d0a58",
					"size": 888,
					"sourceHash": "d159c7edab6f9c43f080f1827aa769b7f5dab407a9ebb1c3f95747c4bd42d38c",
					"status": "content"
				},
				"appveyor.yml": {
					"match": false,
					"packageHash": "fdd15a4f39a7114406aad9544123420593f765718732834c147bd41d762581df",
					"size": 740,
					"status": "missing-in-source"
				},
				"bin/bundle": {
					"match": false,
					"packageHash": "9058be49db44e3a10294a2244544bdf0f1dcca070c15861a09f0793b625cc13f",
					"size": 172,
					"status": "missing-in-source"
				},
				"bin/bundle.js": {
					"match": false,
					"packageHash": "3ad1b9c4bd740015e6f0775d30b2aa3431c4c0002b64a77098a2c1b268265898",
					"size": 2030,
					"status": "missing-in-source"
				},
				"bin/precompile": {
					"diff": "--- published/bin/precompile\n+++ rebuilt/bin/precompile\n@@ -1,70 +1,58 @@\n #!/usr/bin/env node\n-var path = require('path');\n+var {program} = require('commander');\n var precompile = require('../src/precompile').precompile;\n var Environment = require('../src/environment').Environment;\n var lib = require('../src/lib');\n \n-var yargs = require('yargs')\n+var cmdpath = null;\n \n-    .usage('$0 [-f|--force] [-a|--filters <filters>] [-n|--name <name>] [-i|--include <regex>] [-x|--exclude <regex>] [-w|--wrapper <wrapper>] <path>')\n-    .wrap(80)\n+program\n+  .storeOptionsAsProperties(false)\n+  .passCommandToAction(false);\n+\n+program\n+  .name('precompile')\n+  .usage('[-f|--force] [-a|--filters <filters>] [-n|--name <name>] [-i|--include <regex>] [-x|--exclude <regex>] [-w|--wrapper <wrapper>] <path>')\n+  .arguments('<path>')\n+  .helpOption('-?, -h, --help', 'Display this help message')\n+  .option('-f, --force', 'Force compilation to continue on error')\n+  .option('-a, --filters <filters>', 'Give the compiler a comma-delimited list of asynchronous filters, required for correctly generating code')\n+  .option('-n, --name <name>', 'Specify the template name when compiling a single file')\n+  .option('-i, --include <regex>', 'Include a file or folder which match the regex but would otherwise be excluded. You can use this flag multiple times', concat, ['\\\\.html$', '\\\\.jinja$'])\n+  .option('-x, --exclude <regex>', 'Exclude a file or folder which match the regex but would otherwise be included. You can use this flag multiple times', concat, [])\n+  .option('-w, --wrapper <wrapper>', 'Load a external plugin to change the output format of the precompiled templates (for example, \"-w custom\" will load a module named \"nunjucks-custom\")')\n+  .action(function (path) {\n+    cmdpath = path;\n+  })\n+  .parse(process.argv);\n \n-    .describe('help', 'Display this help message')\n-        .boolean('help')\n-        .alias('h', 'help')\n-        .alias('?', 'help')\n-\n-    .describe('force', 'Force compilation to continue on error')\n-        .boolean('force')\n-        .alias('f', 'force')\n-\n-    .describe('filters', 'Give the compiler a comma-delimited list of asynchronous filters, required for correctly generating code')\n-        .string('filters')\n-        .alias('a', 'filters')\n-\n-    .describe('name', 'Specify the template name when compiling a single file')\n-        .string('name')\n-        .alias('n', 'n')\n-\n-    .describe('include', 'Include a file or folder which match the regex but would otherwise be excluded. You can use this flag multiple times')\n-        .string('include' )\n-        .default('include', ['\\\\.html$', '\\\\.jinja$'])\n-        .alias('i', 'include')\n-\n-    .describe('exclude', 'Exclude a file or folder which match the regex but would otherwise be included. You can use this flag multiple times')\n-        .string('exclude' )\n-        .default('exclude', [])\n-        .alias('x', 'exclude')\n-\n-    .describe('wrapper', 'Load a external plugin to change the output format of the precompiled templates (for example, \"-w custom\" will load a module named \"nunjucks-custom\")')\n-        .string('wrapper')\n-        .alias('w', 'wrapper')\n-\n-    .demand(1);\n-\n-var argv = yargs.argv;\n+function concat(value, previous) {\n+  return previous.concat(value);\n+}\n \n-if (argv.help) {\n-    yargs.showHelp();\n-    process.exit(1);\n+if (cmdpath == null) {\n+  program.outputHelp();\n+  console.error('\\nerror: no path given');\n+  process.exit(1);\n }\n \n var env = new Environment([]);\n \n-lib.each([].concat(argv.filters).join(',').split(','), function(name) {\n-    env.addFilter(name.trim(), function() {}, true);\n+const opts = program.opts();\n+\n+lib.each([].concat(opts.filters).join(',').split(','), function (name) {\n+  env.addFilter(name.trim(), function () {}, true);\n });\n \n-if(argv.wrapper) {\n-    argv.wrapper = require('nunjucks-' + argv.wrapper).wrapper;\n+if (opts.wrapper) {\n+  opts.wrapper = require('nunjucks-' + opts.wrapper).wrapper;\n }\n \n-console.log(precompile(argv._[0], {\n-    env : env,\n",
					"match": false,
					"packageHash": "bec6750c5de577173262a751284cf11cb5ea857518b28e00ab35effe5a453f1d",
					"size": 2267,
					"sourceHash": "48f42be5f21b6a127c7fbdafcca07ad8fa4e60ab817060a70dab7af551ee45d9",
					"status": "content"
				},
				"bower.json": {
					"match": false,
					"packageHash": "585673a43f4feeba79a56b70a29d4749c1107b8b5845d59e1194e7f9706e61b5",
					"size": 256,
					"status": "missing-in-source"
				},
				"browser/nunjucks-slim.js": {
					"diff": "--- published/browser/nunjucks-slim.js\n+++ rebuilt/browser/nunjucks-slim.js\n@@ -1,2694 +1,3 @@\n-/*! Browser bundle of nunjucks 2.5.0 (slim, only works with precompiled templates) */\n-(function webpackUniversalModuleDefinition(root, factory) {\n-\tif(typeof exports === 'object' && typeof module === 'object')\n-\t\tmodule.exports = factory();\n-\telse if(typeof define === 'function' && define.amd)\n-\t\tdefine([], factory);\n-\telse if(typeof exports === 'object')\n-\t\texports[\"nunjucks\"] = factory();\n-\telse\n-\t\troot[\"nunjucks\"] = factory();\n-})(this, function() {\n-return /******/ (function(modules) { // webpackBootstrap\n-/******/ \t// The module cache\n-/******/ \tvar installedModules = {};\n-\n-/******/ \t// The require function\n-/******/ \tfunction __webpack_require__(moduleId) {\n-\n-/******/ \t\t// Check if module is in cache\n-/******/ \t\tif(installedModules[moduleId])\n-/******/ \t\t\treturn installedModules[moduleId].exports;\n-\n-/******/ \t\t// Create a new module (and put it into the cache)\n-/******/ \t\tvar module = installedModules[moduleId] = {\n-/******/ \t\t\texports: {},\n-/******/ \t\t\tid: moduleId,\n-/******/ \t\t\tloaded: false\n-/******/ \t\t};\n-\n-/******/ \t\t// Execute the module function\n-/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n-\n-/******/ \t\t// Flag the module as loaded\n-/******/ \t\tmodule.loaded = true;\n-\n-/******/ \t\t// Return the exports of the module\n-/******/ \t\treturn module.exports;\n-/******/ \t}\n-\n-\n-/******/ \t// expose the modules object (__webpack_modules__)\n-/******/ \t__webpack_require__.m = modules;\n-\n-/******/ \t// expose the module cache\n-/******/ \t__webpack_require__.c = installedModules;\n-\n-/******/ \t// __webpack_public_path__\n-/******/ \t__webpack_require__.p = \"\";\n-\n-/******/ \t// Load entry module and return exports\n-/******/ \treturn __webpack_require__(0);\n-/******/ })\n-/************************************************************************/\n-/******/ ([\n-/* 0 */\n-/***/ function(module, exports, __webpack_require__) {\n-\n-\t'use strict';\n-\n-\tvar lib = __webpack_require__(1);\n-\tvar env = __webpack_require__(2);\n-\tvar Loader = __webpack_require__(11);\n-\tvar loaders = __webpack_require__(3);\n-\tvar precompile = __webpack_require__(3);\n-\n-\tmodule.exports = {};\n-\tmodule.exports.Environment = env.Environment;\n-\tmodule.exports.Template = env.Template;\n-\n-\tmodule.exports.Loader = Loader;\n-\tmodule.exports.FileSystemLoader = loaders.FileSystemLoader;\n-\tmodule.exports.PrecompiledLoader = loaders.PrecompiledLoader;\n-\tmodule.exports.WebLoader = loaders.WebLoader;\n-\n-\tmodule.exports.compiler = __webpack_require__(3);\n-\tmodule.exports.parser = __webpack_require__(3);\n-\tmodule.exports.lexer = __webpack_require__(3);\n-\tmodule.exports.runtime = __webpack_require__(8);\n-\tmodule.exports.lib = lib;\n-\tmodule.exports.nodes = __webpack_require__(3);\n-\n-\tmodule.exports.installJinjaCompat = __webpack_require__(12);\n-\n-\t// A single instance of an environment, since this is so commonly used\n-\n-\tvar e;\n-\tmodule.exports.configure = function(templatesPath, opts) {\n-\t    opts = opts || {};\n-\t    if(lib.isObject(templatesPath)) {\n-\t        opts = templatesPath;\n-\t        templatesPath = null;\n-\t    }\n-\n-\t    var TemplateLoader;\n-\t    if(loaders.FileSystemLoader) {\n-\t        TemplateLoader = new loaders.FileSystemLoader(templatesPath, {\n-\t            watch: opts.watch,\n",
					"match": false,
					"packageHash": "ea177535580f8664150afbe5d928a9c543839ade0544568d6fd53201be69983b",
					"size": 76476,
					"sourceHash": "ecb0b349987c016ba52dc364577da2e976b912913c0d82546523fd049fca3914",
					"status": "content"
				},
				"browser/nunjucks-slim.min.js": {
					"diff": "--- published/browser/nunjucks-slim.min.js\n+++ rebuilt/browser/nunjucks-slim.min.js\n@@ -1,2 +1,3 @@\n-/*! Browser bundle of nunjucks 2.5.0 (slim, only works with precompiled templates) */\n-!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.nunjucks=e():t.nunjucks=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p=\"\",e(0)}([function(t,e,r){\"use strict\";var n=r(1),i=r(2),o=r(11),s=r(3),u=r(3);t.exports={},t.exports.Environment=i.Environment,t.exports.Template=i.Template,t.exports.Loader=o,t.exports.FileSystemLoader=s.FileSystemLoader,t.exports.PrecompiledLoader=s.PrecompiledLoader,t.exports.WebLoader=s.WebLoader,t.exports.compiler=r(3),t.exports.parser=r(3),t.exports.lexer=r(3),t.exports.runtime=r(8),t.exports.lib=n,t.exports.nodes=r(3),t.exports.installJinjaCompat=r(12);var a;t.exports.configure=function(t,e){e=e||{},n.isObject(t)&&(e=t,t=null);var r;return s.FileSystemLoader?r=new s.FileSystemLoader(t,{watch:e.watch,noCache:e.noCache}):s.WebLoader&&(r=new s.WebLoader(t,{useCache:e.web&&e.web.useCache,async:e.web&&e.web.async})),a=new i.Environment(r,e),e&&e.express&&a.express(e.express),a},t.exports.compile=function(e,r,n,i){return a||t.exports.configure(),new t.exports.Template(e,r,n,i)},t.exports.render=function(e,r,n){return a||t.exports.configure(),a.render(e,r,n)},t.exports.renderString=function(e,r,n){return a||t.exports.configure(),a.renderString(e,r,n)},u&&(t.exports.precompile=u.precompile,t.exports.precompileString=u.precompileString)},function(t,e){\"use strict\";var r=Array.prototype,n=Object.prototype,i={\"&\":\"&amp;\",'\"':\"&quot;\",\"'\":\"&#39;\",\"<\":\"&lt;\",\">\":\"&gt;\"},o=/[&\"'<>]/g,s=function(t){return i[t]},e=t.exports={};e.prettifyError=function(t,r,n){if(n.Update||(n=new e.TemplateError(n)),n.Update(t),!r){var i=n;n=new Error(i.message),n.name=i.name}return n},e.TemplateError=function(t,e,r){var n=this;if(t instanceof Error){n=t,t=t.name+\": \"+t.message;try{n.name=\"\"}catch(i){n=this}}else Error.captureStackTrace&&Error.captureStackTrace(n);return n.name=\"Template render error\",n.message=t,n.lineno=e,n.colno=r,n.firstUpdate=!0,n.Update=function(t){var e=\"(\"+(t||\"unknown path\")+\")\";return this.firstUpdate&&(this.lineno&&this.colno?e+=\" [Line \"+this.lineno+\", Column \"+this.colno+\"]\":this.lineno&&(e+=\" [Line \"+this.lineno+\"]\")),e+=\"\\n \",this.firstUpdate&&(e+=\" \"),this.message=e+(this.message||\"\"),this.firstUpdate=!1,this},n},e.TemplateError.prototype=Error.prototype,e.escape=function(t){return t.replace(o,s)},e.isFunction=function(t){return\"[object Function]\"===n.toString.call(t)},e.isArray=Array.isArray||function(t){return\"[object Array]\"===n.toString.call(t)},e.isString=function(t){return\"[object String]\"===n.toString.call(t)},e.isObject=function(t){return\"[object Object]\"===n.toString.call(t)},e.groupBy=function(t,r){for(var n={},i=e.isFunction(r)?r:function(t){return t[r]},o=0;o<t.length;o++){var s=t[o],u=i(s,o);(n[u]||(n[u]=[])).push(s)}return n},e.toArray=function(t){return Array.prototype.slice.call(t)},e.without=function(t){var r=[];if(!t)return r;for(var n=-1,i=t.length,o=e.toArray(arguments).slice(1);++n<i;)-1===e.indexOf(o,t[n])&&r.push(t[n]);return r},e.extend=function(t,e){for(var r in e)t[r]=e[r];return t},e.repeat=function(t,e){for(var r=\"\",n=0;e>n;n++)r+=t;return r},e.each=function(t,e,n){if(null!=t)if(r.each&&t.each===r.each)t.forEach(e,n);else if(t.length===+t.length)for(var i=0,o=t.length;o>i;i++)e.call(n,t[i],i,t)},e.map=function(t,e){var n=[];if(null==t)return n;if(r.map&&t.map===r.map)return t.map(e);for(var i=0;i<t.length;i++)n[n.length]=e(t[i],i);return t.length===+t.length&&(n.length=t.length),n},e.asyncIter=function(t,e,r){function n(){i++,i<t.length?e(t[i],i,n,r):r()}var i=-1;n()},e.asyncFor=function(t,r,n){function i(){u++;var e=o[u];s>u?r(e,t[e],u,s,i):n()}var o=e.keys(t),s=o.length,u=-1;i()},e.indexOf=Array.prototype.indexOf?function(t,e,r){return Array.prototype.indexOf.call(t,e,r)}:function(t,e,r){var n=this.length>>>0;for(r=+r||0,Math.abs(r)===1/0&&(r=0),0>r&&(r+=n,0>r&&(r=0));n>r;r++)if(t[r]===e)return r;return-1},Array.prototype.map||(Array.prototype.map=function(){throw new Error(\"map is unimplemented for this js engine\")}),e.keys=function(t){if(Object.prototype.keys)return t.keys();var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e},e.inOperator=function(t,r){if(e.isArray(r))return-1!==e.indexOf(r,t);if(e.isObject(r))return t in r;if(e.isString(r))return-1!==r.indexOf(t);throw new Error('Cannot use \"in\" operator to search for \"'+t+'\" in unexpected types.')}},function(t,e,r){\"use strict\";function n(t,e,r){s(function(){t(e,r)})}var i,o=r(3),s=r(4),u=r(1),a=r(6),c=r(3),l=r(7),f=r(3),p=r(8),h=r(9),v=p.Frame;f.PrecompiledLoader=r(10);var d=a.extend({init:function(t,e){e=this.opts=e||{},this.opts.dev=!!e.dev,this.opts.autoescape=null!=e.autoescape?e.autoescape:!0,this.opts.throwOnUndefined=!!e.throwOnUndefined,this.opts.trimBlocks=!!e.trimBlocks,this.opts.lstripBlocks=!!e.lstripBlocks,this.loaders=[],t?this.loaders=u.isArray(t)?t:[t]:f.FileSystemLoader?this.loaders=[new f.FileSystemLoader(\"views\")]:f.WebLoader&&(this.loaders=[new f.WebLoader(\"/views\")]),window.nunjucksPrecompiled&&this.loaders.unshift(new f.PrecompiledLoader(window.nunjucksPrecompiled)),this.initCache(),this.globals=h(),this.filters={},this.asyncFilters=[],this.extensions={},this.extensionsList=[];for(var r in l)this.addFilter(r,l[r])},initCache:function(){u.each(this.loaders,function(t){t.cache={},\"function\"==typeof t.on&&t.on(\"update\",function(e){t.cache[e]=null})})},addExtension:function(t,e){return e._name=t,this.extensions[t]=e,this.extensionsList.push(e),this},removeExtension:function(t){var e=this.getExtension(t);e&&(this.extensionsList=u.without(this.extensionsList,e),delete this.extensions[t])},getExtension:function(t){return this.extensions[t]},hasExtension:function(t){return!!this.extensions[t]},addGlobal:function(t,e){return this.globals[t]=e,this},getGlobal:function(t){if(\"undefined\"==typeof this.globals[t])throw new Error(\"global not found: \"+t);return this.globals[t]},addFilter:function(t,e,r){var n=e;return r&&this.asyncFilters.push(t),this.filters[t]=n,this},getFilter:function(t){if(!this.filters[t])throw new Error(\"filter not found: \"+t);return this.filters[t]},resolveTemplate:function(t,e,r){var n=t.isRelative&&e?t.isRelative(r):!1;return n&&t.resolve?t.resolve(e,r):r},getTemplate:function(t,e,r,n,o){var s=this,a=null;if(t&&t.raw&&(t=t.raw),u.isFunction(r)&&(o=r,r=null,e=e||!1),u.isFunction(e)&&(o=e,e=!1),t instanceof i)a=t;else{if(\"string\"!=typeof t)throw new Error(\"template names must be a string: \"+t);for(var c=0;c<this.loaders.length;c++){var l=this.resolveTemplate(this.loaders[c],r,t);if(a=this.loaders[c].cache[l])break}}if(!a){var f,p=this,h=function(r,s){if(s||r||n||(r=new Error(\"template not found: \"+t)),r){if(!o)throw r;o(r)}else{var u;s?(u=new i(s.src,p,s.path,e),s.noCache||(s.loader.cache[t]=u)):u=new i(\"\",p,\"\",e),o?o(null,u):f=u}};return u.asyncIter(this.loaders,function(e,n,i,o){function u(t,r){t?o(t):r?(r.loader=e,o(null,r)):i()}t=s.resolveTemplate(e,r,t),e.async?e.getSource(t,u):u(null,e.getSource(t))},h),f}return e&&a.compile(),o?void o(null,a):a},express:function(t){function e(t,e){if(this.name=t,this.path=t,this.defaultEngine=e.defaultEngine,this.ext=o.extname(t),!this.ext&&!this.defaultEngine)throw new Error(\"No default engine was specified and no extension was provided.\");this.ext||(this.name+=this.ext=(\".\"!==this.defaultEngine[0]?\".\":\"\")+this.defaultEngine)}var r=this;return e.prototype.render=function(t,e){r.render(this.name,t,e)},t.set(\"view\",e),t.set(\"nunjucksEnv\",this),this},render:function(t,e,r){u.isFunction(e)&&(r=e,e=null);var i=null;return this.getTemplate(t,function(t,o){if(t&&r)n(r,t);else{if(t)throw t;i=o.render(e,r)}}),i},renderString:function(t,e,r,n){u.isFunction(r)&&(n=r,r={}),r=r||{};var o=new i(t,this,r.path);return o.render(e,n)}}),g=a.extend({init:function(t,e,r){this.env=r||new d,this.ctx={};for(var n in t)t.hasOwnProperty(n)&&(this.ctx[n]=t[n]);this.blocks={},this.exported=[];for(var i in e)this.addBlock(i,e[i])},lookup:function(t){return t in this.env.globals&&!(t in this.ctx)?this.env.globals[t]:this.ctx[t]},setVariable:function(t,e){this.ctx[t]=e},getVariables:function(){return this.ctx},addBlock:function(t,e){return this.blocks[t]=this.blocks[t]||[],this.blocks[t].push(e),this},getBlock:function(t){if(!this.blocks[t])throw new Error('unknown block \"'+t+'\"');return this.blocks[t][0]},getSuper:function(t,e,r,n,i,o){var s=u.indexOf(this.blocks[e]||[],r),a=this.blocks[e][s+1],c=this;if(-1===s||!a)throw new Error('no super block available for \"'+e+'\"');a(t,c,n,i,o)},addExport:function(t){this.exported.push(t)},getExported:function(){for(var t={},e=0;e<this.exported.length;e++){var r=this.exported[e];t[r]=this.ctx[r]}return t}});i=a.extend({init:function(t,e,r,n){if(this.env=e||new d,u.isObject(t))switch(t.type){case\"code\":this.tmplProps=t.obj;break;case\"string\":this.tmplStr=t.obj}else{if(!u.isString(t))throw new Error(\"src must be a string or an object describing the source\");this.tmplStr=t}if(this.path=r,n){var i=this;try{i._compile()}catch(o){throw u.prettifyError(this.path,this.env.opts.dev,o)}}else this.compiled=!1},render:function(t,e,r){\"function\"==typeof t?(r=t,t={}):\"function\"==typeof e&&(r=e,e=null);var i=!0;e&&(i=!1);var o=this;try{o.compile()}catch(s){var a=u.prettifyError(this.path,this.env.opts.dev,s);if(r)return n(r,a);throw a}var c=new g(t||{},o.blocks,o.env),l=e?e.push(!0):new v;l.topLevel=!0;var f=null;return o.rootRenderFunc(o.env,c,l||new v,p,function(t,e){if(t&&(t=u.prettifyError(o.path,o.env.opts.dev,t)),r)i?n(r,t,e):r(t,e);else{if(t)throw t;f=e}}),f},getExported:function(t,e,r){\"function\"==typeof t&&(r=t,t={}),\"function\"==typeof e&&(r=e,e=null);try{this.compile()}catch(n){if(r)return r(n);throw n}var i=e?e.push():new v;i.topLevel=!0;var o=new g(t||{},this.blocks,this.env);this.rootRenderFunc(this.env,o,i,p,function(t){t?r(t,null):r(null,o.getExported())})},compile:function(){this.compiled||this._compile()},_compile:function(){var t;if(this.tmplProps)t=this.tmplProps;else{var e=c.compile(this.tmplStr,this.env.asyncFilters,this.env.extensionsList,this.path,this.env.opts),r=new Function(e);t=r()}this.blocks=this._getBlocks(t),this.rootRenderFunc=t.root,this.compiled=!0},_getBlocks:function(t){var e={};for(var r in t)\"b_\"===r.slice(0,2)&&(e[r.slice(2)]=t[r]);return e}}),t.exports={Environment:d,Template:i}},function(t,e){},function(t,e,r){\"use strict\";function n(){if(a.length)throw a.shift()}function i(t){var e;e=u.length?u.pop():new o,e.task=t,s(e)}function o(){this.task=null}var s=r(5),u=[],a=[],c=s.makeRequestCallFromTimer(n);t.exports=i,o.prototype.call=function(){try{this.task.call()}catch(t){i.onerror?i.onerror(t):(a.push(t),c())}finally{this.task=null,u[u.length]=this}}},function(t,e){(function(e){\"use strict\";function r(t){u.length||(s(),a=!0),u[u.length]=t}function n(){for(;c<u.length;){var t=c;if(c+=1,u[t].call(),c>l){for(var e=0,r=u.length-c;r>e;e++)u[e]=u[e+c];u.length-=c,c=0}}u.length=0,c=0,a=!1}function i(t){var e=1,r=new f(t),n=document.createTextNode(\"\");return r.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}function o(t){return function(){function e(){clearTimeout(r),clearInterval(n),t()}var r=setTimeout(e,0),n=setInterval(e,50)}}t.exports=r;var s,u=[],a=!1,c=0,l=1024,f=e.MutationObserver||e.WebKitMutationObserver;s=\"function\"==typeof f?i(n):o(n),r.requestFlush=s,r.makeRequestCallFromTimer=o}).call(e,function(){return this}())},function(t,e){\"use strict\";function r(t,e,n){var i=function(){};i.prototype=t.prototype;var o=new i,s=/xyz/.test(function(){xyz})?/\\bparent\\b/:/.*/;n=n||{};for(var u in n){var a=n[u],c=o[u];\"function\"==typeof c&&\"function\"==typeof a&&s.test(a)?o[u]=function(t,e){return function(){var r=this.parent;this.parent=e;var n=t.apply(this,arguments);return this.parent=r,n}}(a,c):o[u]=a}o.typename=e;var l=function(){o.init&&o.init.apply(this,arguments)};return l.prototype=o,l.prototype.constructor=l,l.extend=function(t,e){return\"object\"==typeof t&&(e=t,t=\"anonymous\"),r(l,t,e)},l}t.exports=r(Object,\"Object\",{})},function(t,e,r){\"use strict\";function n(t,e){return null===t||void 0===t||t===!1?e:t}var i=r(1),o=r(8),s={abs:function(t){return Math.abs(t)},batch:function(t,e,r){var n,i=[],o=[];for(n=0;n<t.length;n++)n%e===0&&o.length&&(i.push(o),o=[]),o.push(t[n]);if(o.length){if(r)for(n=o.length;e>n;n++)o.push(r);i.push(o)}return i},capitalize:function(t){t=n(t,\"\");var e=t.toLowerCase();return o.copySafeness(t,e.charAt(0).toUpperCase()+e.slice(1))},center:function(t,e){if(t=n(t,\"\"),e=e||80,t.length>=e)return t;var r=e-t.length,s=i.repeat(\" \",r/2-r%2),u=i.repeat(\" \",r/2);return o.copySafeness(t,s+t+u)},\"default\":function(t,e,r){return r?t?t:e:void 0!==t?t:e},dictsort:function(t,e,r){if(!i.isObject(t))throw new i.TemplateError(\"dictsort filter: val must be an object\");var n=[];for(var o in t)n.push([o,t[o]]);var s;if(void 0===r||\"key\"===r)s=0;else{if(\"value\"!==r)throw new i.TemplateError(\"dictsort filter: You can only sort by either key or value\");s=1}return n.sort(function(t,r){var n=t[s],o=r[s];return e||(i.isString(n)&&(n=n.toUpperCase()),i.isString(o)&&(o=o.toUpperCase())),n>o?1:n===o?0:-1}),n},dump:function(t){return JSON.stringify(t)},escape:function(t){return t instanceof o.SafeString?t:o.markSafe(i.escape(t.toString()))},safe:function(t){return o.markSafe(t)},first:function(t){return t[0]},groupby:function(t,e){return i.groupBy(t,e)},indent:function(t,e,r){if(t=n(t,\"\"),\"\"===t)return\"\";e=e||4;for(var s=\"\",u=t.split(\"\\n\"),a=i.repeat(\" \",e),c=0;c<u.length;c++)s+=0!==c||r?a+u[c]+\"\\n\":u[c]+\"\\n\";return o.copySafeness(t,s)},join:function(t,e,r){return e=e||\"\",r&&(t=i.map(t,function(t){return t[r]})),t.join(e)},last:function(t){return t[t.length-1]},length:function(t){var e=n(t,\"\");return void 0!==e?\"function\"==typeof Map&&e instanceof Map||\"function\"==typeof Set&&e instanceof Set?e.size:!i.isObject(e)||e instanceof o.SafeString?e.length:Object.keys(e).length:0},list:function(t){if(i.isString(t))return t.split(\"\");if(i.isObject(t)){var e=[];if(Object.keys)e=Object.keys(t);else for(var r in t)e.push(r);return i.map(e,function(e){return{key:e,value:t[e]}})}if(i.isArray(t))return t;throw new i.TemplateError(\"list filter: type not iterable\")},lower:function(t){return t=n(t,\"\"),t.toLowerCase()},random:function(t){return t[Math.floor(Math.random()*t.length)]},rejectattr:function(t,e){return t.filter(function(t){return!t[e]})},selectattr:function(t,e){return t.filter(function(t){return!!t[e]})},replace:function(t,e,r,n){var i=t;if(e instanceof RegExp)return t.replace(e,r);\"undefined\"==typeof n&&(n=-1);var s=\"\";if(\"number\"==typeof e)e+=\"\";else if(\"string\"!=typeof e)return t;if(\"number\"==typeof t&&(t+=\"\"),\"string\"!=typeof t&&!(t instanceof o.SafeString))return t;if(\"\"===e)return s=r+t.split(\"\").join(r)+r,o.copySafeness(t,s);var u=t.indexOf(e);if(0===n||-1===u)return t;for(var a=0,c=0;u>-1&&(-1===n||n>c);)s+=t.substring(a,u)+r,a=u+e.length,c++,u=t.indexOf(e,a);return a<t.length&&(s+=t.substring(a)),o.copySafeness(i,s)},reverse:function(t){var e;return e=i.isString(t)?s.list(t):i.map(t,function(t){return t}),e.reverse(),i.isString(t)?o.copySafeness(t,e.join(\"\")):e},round:function(t,e,r){e=e||0;var n,i=Math.pow(10,e);return n=\"ceil\"===r?Math.ceil:\"floor\"===r?Math.floor:Math.round,n(t*i)/i},slice:function(t,e,r){for(var n=Math.floor(t.length/e),i=t.length%e,o=0,s=[],u=0;e>u;u++){var a=o+u*n;i>u&&o++;var c=o+(u+1)*n,l=t.slice(a,c);r&&u>=i&&l.push(r),s.push(l)}return s},sum:function(t,e,r){var n=0;\"number\"==typeof r&&(n+=r),e&&(t=i.map(t,function(t){return t[e]}));for(var o=0;o<t.length;o++)n+=t[o];return n},sort:o.makeMacro([\"value\",\"reverse\",\"case_sensitive\",\"attribute\"],[],function(t,e,r,n){return t=i.map(t,function(t){return t}),t.sort(function(t,o){var s,u;return n?(s=t[n],u=o[n]):(s=t,u=o),!r&&i.isString(s)&&i.isString(u)&&(s=s.toLowerCase(),u=u.toLowerCase()),u>s?e?1:-1:s>u?e?-1:1:0}),t}),string:function(t){return o.copySafeness(t,t)},striptags:function(t,e){t=n(t,\"\"),e=e||!1;var r=/<\\/?([a-z][a-z0-9]*)\\b[^>]*>|<!--[\\s\\S]*?-->/gi,i=s.trim(t.replace(r,\"\")),u=\"\";return u=e?i.replace(/^ +| +$/gm,\"\").replace(/ +/g,\" \").replace(/(\\r\\n)/g,\"\\n\").replace(/\\n\\n\\n+/g,\"\\n\\n\"):i.replace(/\\s+/gi,\" \"),o.copySafeness(t,u)},title:function(t){t=n(t,\"\");for(var e=t.split(\" \"),r=0;r<e.length;r++)e[r]=s.capitalize(e[r]);return o.copySafeness(t,e.join(\" \"))},trim:function(t){return o.copySafeness(t,t.replace(/^\\s*|\\s*$/g,\"\"))},truncate:function(t,e,r,i){var s=t;if(t=n(t,\"\"),e=e||255,t.length<=e)return t;if(r)t=t.substring(0,e);else{var u=t.lastIndexOf(\" \",e);-1===u&&(u=e),t=t.substring(0,u)}return t+=void 0!==i&&null!==i?i:\"...\",o.copySafeness(s,t)},upper:function(t){return t=n(t,\"\"),t.toUpperCase()},urlencode:function(t){var e=encodeURIComponent;if(i.isString(t))return e(t);var r;if(i.isArray(t))r=t.map(function(t){return e(t[0])+\"=\"+e(t[1])});else{r=[];for(var n in t)t.hasOwnProperty(n)&&r.push(e(n)+\"=\"+e(t[n]))}return r.join(\"&\")},urlize:function(t,e,r){isNaN(e)&&(e=1/0);var n=r===!0?' rel=\"nofollow\"':\"\",i=/^(?:\\(|<|&lt;)?(.*?)(?:\\.|,|\\)|\\n|&gt;)?$/,o=/^[\\w.!#$%&'*+\\-\\/=?\\^`{|}~]+@[a-z\\d\\-]+(\\.[a-z\\d\\-]+)+$/i,s=/^https?:\\/\\/.*$/,u=/^www\\./,a=/\\.(?:org|net|com)(?:\\:|\\/|$)/,c=t.split(/(\\s+)/).filter(function(t){return t&&t.length}).map(function(t){var r=t.match(i),c=r&&r[1]||t;return s.test(c)?'<a href=\"'+c+'\"'+n+\">\"+c.substr(0,e)+\"</a>\":u.test(c)?'<a href=\"http://'+c+'\"'+n+\">\"+c.substr(0,e)+\"</a>\":o.test(c)?'<a href=\"mailto:'+c+'\">'+c+\"</a>\":a.test(c)?'<a href=\"http://'+c+'\"'+n+\">\"+c.substr(0,e)+\"</a>\":t});return c.join(\"\")},wordcount:function(t){t=n(t,\"\");var e=t?t.match(/\\w+/g):null;return e?e.length:null},\"float\":function(t,e){var r=parseFloat(t);return isNaN(r)?e:r},\"int\":function(t,e){var r=parseInt(t,10);return isNaN(r)?e:r}};s.d=s[\"default\"],s.e=s.escape,t.exports=s},function(t,e,r){\"use strict\";function n(t,e,r){return function(){var n,i,u=s(arguments),a=o(arguments);if(u>t.length){n=Array.prototype.slice.call(arguments,0,t.length);var c=Array.prototype.slice.call(arguments,n.length,u);for(i=0;i<c.length;i++)i<e.length&&(a[e[i]]=c[i]);n.push(a)}else if(u<t.length){for(n=Array.prototype.slice.call(arguments,0,u),i=u;i<t.length;i++){var l=t[i];n.push(a[l]),delete a[l]}n.push(a)}else n=arguments;return r.apply(this,n)}}function i(t){return t.__keywords=!0,t}function o(t){var e=t.length;if(e){var r=t[e-1];if(r&&r.hasOwnProperty(\"__keywords\"))return r}return{}}function s(t){var e=t.length;if(0===e)return 0;var r=t[e-1];return r&&r.hasOwnProperty(\"__keywords\")?e-1:e}function u(t){return\"string\"!=typeof t?t:(this.val=t,void(this.length=t.length))}function a(t,e){return t instanceof u?new u(e):e.toString()}function c(t){var e=typeof t;return\"string\"===e?new u(t):\"function\"!==e?t:function(){var e=t.apply(this,arguments);return\"string\"==typeof e?new u(e):e}}function l(t,e){return t=void 0!==t&&null!==t?t:\"\",!e||t instanceof u||(t=m.escape(t.toString())),t}function f(t,e,r){if(null===t||void 0===t)throw new m.TemplateError(\"attempted to output null or undefined value\",e+1,r+1);return t}function p(t,e){return t=t||{},\"function\"==typeof t[e]?function(){return t[e].apply(t,arguments)}:t[e]}function h(t,e,r,n){if(!t)throw new Error(\"Unable to call `\"+e+\"`, which is undefined or falsey\");if(\"function\"!=typeof t)throw new Error(\"Unable to call `\"+e+\"`, which is not a function\");return t.apply(r,n)}function v(t,e,r){var n=e.lookup(r);return void 0!==n&&null!==n?n:t.lookup(r)}function d(t,e,r){return t.lineno?t:new m.TemplateError(t,e,r)}function g(t,e,r,n){if(m.isArray(t)){var i=t.length;m.asyncIter(t,function(t,n,o){switch(e){case 1:r(t,n,i,o);break;case 2:r(t[0],t[1],n,i,o);break;case 3:r(t[0],t[1],t[2],n,i,o);break;default:t.push(n,o),r.apply(this,t)}},n)}else m.asyncFor(t,function(t,e,n,i,o){r(t,e,n,i,o)},n)}function y(t,e,r,n){function i(t,e){a++,u[t]=e,a===o&&n(null,u.join(\"\"))}var o,s,u,a=0;if(m.isArray(t))if(o=t.length,u=new Array(o),0===o)n(null,\"\");else for(s=0;s<t.length;s++){var c=t[s];switch(e){case 1:r(c,s,o,i);break;case 2:r(c[0],c[1],s,o,i);break;case 3:r(c[0],c[1],c[2],s,o,i);break;default:c.push(s,i),r.apply(this,c)}}else{var l=m.keys(t);if(o=l.length,u=new Array(o),0===o)n(null,\"\");else for(s=0;s<l.length;s++){var f=l[s];r(f,t[f],s,o,i)}}}var m=r(1),w=r(6),b=w.extend({init:function(t,e){this.variables={},this.parent=t,this.topLevel=!1,this.isolateWrites=e},set:function(t,e,r){var n=t.split(\".\"),i=this.variables,o=this;if(r&&(o=this.resolve(n[0],!0)))return void o.set(t,e);for(var s=0;s<n.length-1;s++){var u=n[s];i[u]||(i[u]={}),i=i[u]}i[n[n.length-1]]=e},get:function(t){var e=this.variables[t];return void 0!==e&&null!==e?e:null},lookup:function(t){var e=this.parent,r=this.variables[t];return void 0!==r&&null!==r?r:e&&e.lookup(t)},resolve:function(t,e){var r=e&&this.isolateWrites?void 0:this.parent,n=this.variables[t];return void 0!==n&&null!==n?this:r&&r.resolve(t)},push:function(t){return new b(this,t)},pop:function(){return this.parent}});u.prototype=Object.create(String.prototype,{length:{writable:!0,configurable:!0,value:0}}),u.prototype.valueOf=function(){return this.val},u.prototype.toString=function(){return this.val},t.exports={Frame:b,makeMacro:n,makeKeywordArgs:i,numArgs:s,suppressValue:l,ensureDefined:f,memberLookup:p,contextOrFrameLookup:v,callWrap:h,handleError:d,isArray:m.isArray,keys:m.keys,SafeString:u,copySafeness:a,markSafe:c,asyncEach:g,asyncAll:y,inOperator:m.inOperator}},function(t,e){\"use strict\";function r(t){var e=-1;return{current:null,reset:function(){e=-1,this.current=null},next:function(){return e++,e>=t.length&&(e=0),this.current=t[e],this.current}}}function n(t){t=t||\",\";var e=!0;return function(){var r=e?\"\":t;return e=!1,r}}function i(){return{range:function(t,e,r){\"undefined\"==typeof e?(e=t,t=0,r=1):r||(r=1);var n,i=[];if(r>0)for(n=t;e>n;n+=r)i.push(n);else for(n=t;n>e;n+=r)i.push(n);return i},cycler:function(){return r(Array.prototype.slice.call(arguments))},joiner:function(t){return n(t)}}}t.exports=i},function(t,e,r){\"use strict\";var n=r(11),i=n.extend({init:function(t){this.precompiled=t||{}},getSource:function(t){return this.precompiled[t]?{src:{type:\"code\",obj:this.precompiled[t]},path:t}:null}});t.exports=i},function(t,e,r){\"use strict\";var n=r(3),i=r(6),o=r(1),s=i.extend({on:function(t,e){this.listeners=this.listeners||{},this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(e)},emit:function(t){var e=Array.prototype.slice.call(arguments,1);this.listeners&&this.listeners[t]&&o.each(this.listeners[t],function(t){t.apply(null,e)})},resolve:function(t,e){return n.resolve(n.dirname(t),e)},isRelative:function(t){return 0===t.indexOf(\"./\")||0===t.indexOf(\"../\")}});t.exports=s},function(t,e){function r(){\"use strict\";var t=this.runtime,e=this.lib,r=t.contextOrFrameLookup;t.contextOrFrameLookup=function(t,e,n){var i=r.apply(this,arguments);if(void 0===i)switch(n){case\"True\":return!0;case\"False\":return!1;case\"None\":return null}return i};var n=t.memberLookup,i={pop:function(t){if(void 0===t)return this.pop();if(t>=this.length||0>t)throw new Error(\"KeyError\");return this.splice(t,1)},remove:function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return this.splice(e,1);throw new Error(\"ValueError\")},count:function(t){for(var e=0,r=0;r<this.length;r++)this[r]===t&&e++;return e},index:function(t){var e;if(-1===(e=this.indexOf(t)))throw new Error(\"ValueError\");return e},find:function(t){return this.indexOf(t)},insert:function(t,e){return this.splice(t,0,e)}},o={items:function(){var t=[];for(var e in this)t.push([e,this[e]]);return t},values:function(){var t=[];for(var e in this)t.push(this[e]);return t},keys:function(){var t=[];for(var e in this)t.push(e);return t},get:function(t,e){var r=this[t];return void 0===r&&(r=e),r},has_key:function(t){return this.hasOwnProperty(t)},pop:function(t,e){var r=this[t];if(void 0===r&&void 0!==e)r=e;else{if(void 0===r)throw new Error(\"KeyError\");delete this[t]}return r},popitem:function(){for(var t in this){var e=this[t];return delete this[t],[t,e]}throw new Error(\"KeyError\")},setdefault:function(t,e){return t in this?this[t]:(void 0===e&&(e=null),this[t]=e)},update:function(t){for(var e in t)this[e]=t[e];return null}};o.iteritems=o.items,o.itervalues=o.values,o.iterkeys=o.keys,t.memberLookup=function(t,r,s){return t=t||{},e.isArray(t)&&i.hasOwnProperty(r)?function(){return i[r].apply(t,arguments)}:e.isObject(t)&&o.hasOwnProperty(r)?function(){return o[r].apply(t,arguments)}:n.apply(this,arguments)}}t.exports=r}])});\n\\ No newline at end of file\n+/*! For license information please see nunjucks-slim.min.js.LICENSE.txt */\n+!function(t,n){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=n():\"function\"==typeof define&&define.amd?define([],n):\"object\"==typeof exports?exports.nunjucks=n():t.nunjucks=n()}(self,function(){return function(){var t={5:function(){},7:function(t){function n(){this.t=this.t||{},this.i=this.i||void 0}function r(t){return\"function\"==typeof t}function i(t){return\"object\"==typeof t&&null!==t}function e(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype.t=void 0,n.prototype.i=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(\"number\"!=typeof t||t<0||isNaN(t))throw TypeError(\"n must be a positive number\");return this.i=t,this},n.prototype.emit=function(t){var n,u,o,f,c,s;if(this.t||(this.t={}),\"error\"===t&&(!this.t.error||i(this.t.error)&&!this.t.error.length)){if((n=arguments[1])instanceof Error)throw n;var a=new Error('Uncaught, unspecified \"error\" event. ('+n+\")\");throw a.context=n,a}if(e(u=this.t[t]))return!1;if(r(u))switch(arguments.length){case 1:u.call(this);break;case 2:u.call(this,arguments[1]);break;case 3:u.call(this,arguments[1],arguments[2]);break;default:f=Array.prototype.slice.call(arguments,1),u.apply(this,f)}else if(i(u))for(f=Array.prototype.slice.call(arguments,1),o=(s=u.slice()).length,c=0;c<o;c++)s[c].apply(this,f);return!0},n.prototype.addListener=function(t,u){var o;if(!r(u))throw TypeError(\"listener must be a function\");return this.t||(this.t={}),this.t.newListener&&this.emit(\"newListener\",t,r(u.listener)?u.listener:u),this.t[t]?i(this.t[t])?this.t[t].push(u):this.t[t]=[this.t[t],u]:this.t[t]=u,i(this.t[t])&&!this.t[t].warned&&(o=e(this.i)?n.defaultMaxListeners:this.i)&&o>0&&this.t[t].length>o&&(this.t[t].warned=!0,console.error(\"(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.\",this.t[t].length),\"function\"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,n){if(!r(n))throw TypeError(\"listener must be a function\");var i=!1;function e(){this.removeListener(t,e),i||(i=!0,n.apply(this,arguments))}return e.listener=n,this.on(t,e),this},n.prototype.removeListener=function(t,n){var e,u,o,f;if(!r(n))throw TypeError(\"listener must be a function\");if(!this.t||!this.t[t])return this;if(o=(e=this.t[t]).length,u=-1,e===n||r(e.listener)&&e.listener===n)delete this.t[t],this.t.removeListener&&this.emit(\"removeListener\",t,n);else if(i(e)){for(f=o;f-- >0;)if(e[f]===n||e[f].listener&&e[f].listener===n){u=f;break}if(u<0)return this;1===e.length?(e.length=0,delete this.t[t]):e.splice(u,1),this.t.removeListener&&this.emit(\"removeListener\",t,n)}return this},n.prototype.removeAllListeners=function(t){var n,i;if(!this.t)return this;if(!this.t.removeListener)return 0===arguments.length?this.t={}:this.t[t]&&delete this.t[t],this;if(0===arguments.length){for(n in this.t)\"removeListener\"!==n&&this.removeAllListeners(n);return this.removeAllListeners(\"removeListener\"),this.t={},this}if(r(i=this.t[t]))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this.t[t],this},n.prototype.listeners=function(t){return this.t&&this.t[t]?r(this.t[t])?[this.t[t]]:this.t[t].slice():[]},n.prototype.listenerCount=function(t){if(this.t){var n=this.t[t];if(r(n))return 1;if(n)return n.length}return 0},n.listenerCount=function(t,n){return t.listenerCount(n)}},153:function(t,n,r){\"use strict\";var i=r(449),e=r(434),u=t.exports={};function o(t,n){return null==t||!1===t?n:t}function f(t){return t!=t}function c(t){var n=(t=o(t,\"\")).toLowerCase();return e.copySafeness(t,n.charAt(0).toUpperCase()+n.slice(1))}function s(t){if(i.isString(t))return t.split(\"\");if(i.isObject(t))return i.u(t||{}).map(function(t){return{key:t[0],value:t[1]}});if(i.isArray(t))return t;throw new i.TemplateError(\"list filter: type not iterable\")}function a(t){return function(n,r,e){void 0===r&&(r=\"truthy\");var u=this,o=u.env.getTest(r);return i.toArray(n).filter(function(n){return o.call(u,n,e)===t})}}function h(t){return e.copySafeness(t,t.replace(/^\\s*|\\s*$/g,\"\"))}u.abs=Math.abs,u.batch=function(t,n,r){var i,e=[],u=[];for(i=0;i<t.length;i++)i%n===0&&u.length&&(e.push(u),u=[]),u.push(t[i]);if(u.length){if(r)for(i=u.length;i<n;i++)u.push(r);e.push(u)}return e},u.capitalize=c,u.center=function(t,n){if(n=n||80,(t=o(t,\"\")).length>=n)return t;var r=n-t.length,u=i.repeat(\" \",r/2-r%2),f=i.repeat(\" \",r/2);return e.copySafeness(t,u+t+f)},u.default=function(t,n,r){return r?t||n:void 0!==t?t:n},u.dictsort=function(t,n,r){if(!i.isObject(t))throw new i.TemplateError(\"dictsort filter: val must be an object\");var e,u=[];for(var o in t)u.push([o,t[o]]);if(void 0===r||\"key\"===r)e=0;else{if(\"value\"!==r)throw new i.TemplateError(\"dictsort filter: You can only sort by either key or value\");e=1}return u.sort(function(t,r){var u=t[e],o=r[e];return n||(i.isString(u)&&(u=u.toUpperCase()),i.isString(o)&&(o=o.toUpperCase())),u>o?1:u===o?0:-1}),u},u.dump=function(t,n){return JSON.stringify(t,null,n)},u.escape=function(t){return t instanceof e.SafeString?t:(t=null==t?\"\":t,e.markSafe(i.escape(t.toString())))},u.safe=function(t){return t instanceof e.SafeString?t:(t=null==t?\"\":t,e.markSafe(t.toString()))},u.first=function(t){return t[0]},u.forceescape=function(t){return t=null==t?\"\":t,e.markSafe(i.escape(t.toString()))},u.groupby=function(t,n){return i.groupBy(t,n,this.env.opts.throwOnUndefined)},u.indent=function(t,n,r){if(\"\"===(t=o(t,\"\")))return\"\";n=n||4;var u=t.split(\"\\n\"),f=i.repeat(\" \",n),c=u.map(function(t,n){return 0!==n||r?\"\"+f+t:t}).join(\"\\n\");return e.copySafeness(t,c)},u.join=function(t,n,r){return n=n||\"\",r&&(t=i.map(t,function(t){return t[r]})),t.join(n)},u.last=function(t){return t[t.length-1]},u.length=function(t){var n=o(t,\"\");return void 0!==n?\"function\"==typeof Map&&n instanceof Map||\"function\"==typeof Set&&n instanceof Set?n.size:!i.isObject(n)||n instanceof e.SafeString?n.length:i.keys(n).length:0},u.list=s,u.lower=function(t){return(t=o(t,\"\")).toLowerCase()},u.nl2br=function(t){return null==t?\"\":e.copySafeness(t,t.replace(/\\r\\n|\\n/g,\"<br />\\n\"))},u.random=function(t){return t[Math.floor(Math.random()*t.length)]},u.reject=a(!1),u.rejectattr=function(t,n){return t.filter(function(t){return!t[n]})},u.select=a(!0),u.selectattr=function(t,n){return t.filter(function(t){return!!t[n]})},u.replace=function(t,n,r,i){var u=t;if(n instanceof RegExp)return t.replace(n,r);void 0===i&&(i=-1);var o=\"\";if(\"number\"==typeof n)n=\"\"+n;else if(\"string\"!=typeof n)return t;if(\"number\"==typeof t&&(t=\"\"+t),\"string\"!=typeof t&&!(t instanceof e.SafeString))return t;if(\"\"===n)return o=r+t.split(\"\").join(r)+r,e.copySafeness(t,o);var f=t.indexOf(n);if(0===i||-1===f)return t;for(var c=0,s=0;f>-1&&(-1===i||s<i);)o+=t.substring(c,f)+r,c=f+n.length,s++,f=t.indexOf(n,c);return c<t.length&&(o+=t.substring(c)),e.copySafeness(u,o)},u.reverse=function(t){var n;return(n=i.isString(t)?s(t):i.map(t,function(t){return t})).reverse(),i.isString(t)?e.copySafeness(t,n.join(\"\")):n},u.round=function(t,n,r){n=n||0;var i=Math.pow(10,n);return(\"ceil\"===r?Math.ceil:\"floor\"===r?Math.floor:Math.round)(t*i)/i},u.slice=function(t,n,r){for(var i=Math.floor(t.length/n),e=t.length%n,u=[],o=0,f=0;f<n;f++){var c=o+f*i;f<e&&o++;var s=o+(f+1)*i,a=t.slice(c,s);r&&f>=e&&a.push(r),u.push(a)}return u},u.sum=function(t,n,r){return void 0===r&&(r=0),n&&(t=i.map(t,function(t){return t[n]})),r+t.reduce(function(t,n){return t+n},0)},u.sort=e.makeMacro([\"value\",\"reverse\",\"case_sensitive\",\"attribute\"],[],function(t,n,r,e){var u=this,o=i.map(t,function(t){return t}),f=i.getAttrGetter(e);return o.sort(function(t,o){var c=e?f(t):t,s=e?f(o):o;if(u.env.opts.throwOnUndefined&&e&&(void 0===c||void 0===s))throw new TypeError('sort: attribute \"'+e+'\" resolved to undefined');return!r&&i.isString(c)&&i.isString(s)&&(c=c.toLowerCase(),s=s.toLowerCase()),c<s?n?1:-1:c>s?n?-1:1:0}),o}),u.string=function(t){return e.copySafeness(t,t)},u.striptags=function(t,n){var r=h((t=o(t,\"\")).replace(/<\\/?([a-z][a-z0-9]*)\\b[^>]*>|<!--[\\s\\S]*?-->/gi,\"\")),i=\"\";return i=n?r.replace(/^ +| +$/gm,\"\").replace(/ +/g,\" \").replace(/(\\r\\n)/g,\"\\n\").replace(/\\n\\n\\n+/g,\"\\n\\n\"):r.replace(/\\s+/gi,\" \"),e.copySafeness(t,i)},u.title=function(t){var n=(t=o(t,\"\")).split(\" \").map(function(t){return c(t)});return e.copySafeness(t,n.join(\" \"))},u.trim=h,u.truncate=function(t,n,r,i){var u=t;if(n=n||255,(t=o(t,\"\")).length<=n)return t;if(r)t=t.substring(0,n);else{var f=t.lastIndexOf(\" \",n);-1===f&&(f=n),t=t.substring(0,f)}return t+=null!=i?i:\"...\",e.copySafeness(u,t)},u.upper=function(t){return(t=o(t,\"\")).toUpperCase()},u.urlencode=function(t){var n=encodeURIComponent;return i.isString(t)?n(t):(i.isArray(t)?t:i.u(t)).map(function(t){var r=t[0],i=t[1];return n(r)+\"=\"+n(i)}).join(\"&\")};var l=/^(?:\\(|<|&lt;)?(.*?)(?:\\.|,|\\)|\\n|&gt;)?$/,v=/^[\\w.!#$%&'*+\\-\\/=?\\^`{|}~]+@[a-z\\d\\-]+(\\.[a-z\\d\\-]+)+$/i,d=/^https?:\\/\\/.*$/,w=/^www\\./,p=/\\.(?:org|net|com)(?:\\:|\\/|$)/;u.urlize=function(t,n,r){f(n)&&(n=1/0);var i=!0===r?' rel=\"nofollow\"':\"\";return t.split(/(\\s+)/).filter(function(t){return t&&t.length}).map(function(t){var r=t.match(l),e=r?r[1]:t,u=e.substr(0,n);return d.test(e)?'<a href=\"'+e+'\"'+i+\">\"+u+\"</a>\":w.test(e)?'<a href=\"http://'+e+'\"'+i+\">\"+u+\"</a>\":v.test(e)?'<a href=\"mailto:'+e+'\">'+e+\"</a>\":p.test(e)?'<a href=\"http://'+e+'\"'+i+\">\"+u+\"</a>\":t}).join(\"\")},u.wordcount=function(t){var n=(t=o(t,\"\"))?t.match(/\\w+/g):null;return n?n.length:null},u.float=function(t,n){var r=parseFloat(t);return f(r)?n:r};var y=e.makeMacro([\"value\",\"default\",\"base\"],[],function(t,n,r){void 0===r&&(r=10);var i=parseInt(t,r);return f(i)?n:i});u.int=y,u.d=u.default,u.e=u.escape},211:function(t,n){var r;!function(){\"use strict\";var i=function(){var t=Array.prototype.slice.call(arguments);\"function\"==typeof t[0]&&t[0].apply(null,t.splice(1))},e=function(t){\"function\"==typeof setImmediate?setImmediate(t):\"undefined\"!=typeof process&&process.nextTick?process.nextTick(t):setTimeout(t,0)},u=Array.isArray||function(t){return\"[object Array]\"===Object.prototype.toString.call(t)},o=function(t,n,r){var o=r?e:i;if(n=n||function(){},!u(t)){var f=new Error(\"First argument to waterfall must be an array of functions\");return n(f)}if(!t.length)return n();var c=function(t){return function(r){if(r)n.apply(null,arguments),n=function(){};else{var i=Array.prototype.slice.call(arguments,1),e=t.next();e?i.push(c(e)):i.push(n),o(function(){t.apply(null,i)})}}};c(function(t){var n=function(r){var i=function(){return t.length&&t[r].apply(null,arguments),i.next()};return i.next=function(){return r<t.length-1?n(r+1):null},i};return n(0)}(t))()};void 0===(r=function(){return o}.apply(n,[]))||(t.exports=r)}()},236:function(t,n,r){\"use strict\";var i=r(795),e=[],u=[],o=i.makeRequestCallFromTimer(function(){if(u.length)throw u.shift()});function f(t){var n;(n=e.length?e.pop():new c).task=t,i(n)}function c(){this.task=null}t.exports=f,c.prototype.call=function(){try{this.task.call()}catch(t){f.onerror?f.onerror(t):(u.push(t),o())}finally{this.task=null,e[e.length]=this}}},423:function(t,n,r){\"use strict\";var i=r(434).SafeString;n.callable=function(t){return\"function\"==typeof t},n.defined=function(t){return void 0!==t},n.divisibleby=function(t,n){return t%n===0},n.escaped=function(t){return t instanceof i},n.equalto=function(t,n){return t===n},n.eq=n.equalto,n.sameas=n.equalto,n.even=function(t){return t%2==0},n.falsy=function(t){return!t},n.ge=function(t,n){return t>=n},n.greaterthan=function(t,n){return t>n},n.gt=n.greaterthan,n.le=function(t,n){return t<=n},n.lessthan=function(t,n){return t<n},n.lt=n.lessthan,n.lower=function(t){return t.toLowerCase()===t},n.ne=function(t,n){return t!==n},n.null=function(t){return null===t},n.number=function(t){return\"number\"==typeof t},n.odd=function(t){return t%2==1},n.string=function(t){return\"string\"==typeof t},n.truthy=function(t){return!!t},n.undefined=function(t){return void 0===t},n.upper=function(t){return t.toUpperCase()===t},n.iterable=function(t){return\"undefined\"!=typeof Symbol?!!t[Symbol.iterator]:Array.isArray(t)||\"string\"==typeof t},n.mapping=function(t){var n=null!=t&&\"object\"==typeof t&&!Array.isArray(t);return Set?n&&!(t instanceof Set):n}},433:function(t){t.exports=function(){\"use strict\";var t,n,r=this.runtime,i=this.lib,e=this.compiler.Compiler,u=this.parser.Parser,o=(this.nodes,this.lexer,r.contextOrFrameLookup),f=r.memberLookup;function c(t,n,i,e){t=t||[],null===n&&(n=e<0?t.length-1:0),null===i?i=e<0?-1:t.length:i<0&&(i+=t.length),n<0&&(n+=t.length);for(var u=[],o=n;!(o<0||o>t.length)&&!(e>0&&o>=i)&&!(e<0&&o<=i);o+=e)u.push(r.memberLookup(t,o));return u}function s(t,n){return Object.prototype.hasOwnProperty.call(t,n)}e&&(t=e.prototype.assertType),u&&(n=u.prototype.parseAggregate),r.contextOrFrameLookup=function(t,n,r){var i=o.apply(this,arguments);if(void 0!==i)return i;switch(r){case\"True\":return!0;case\"False\":return!1;case\"None\":return null;default:return}};var a={pop:function(t){if(void 0===t)return this.pop();if(t>=this.length||t<0)throw new Error(\"KeyError\");return this.splice(t,1)},append:function(t){return this.push(t)},remove:function(t){for(var n=0;n<this.length;n++)if(this[n]===t)return this.splice(n,1);throw new Error(\"ValueError\")},count:function(t){for(var n=0,r=0;r<this.length;r++)this[r]===t&&n++;return n},index:function(t){var n;if(-1===(n=this.indexOf(t)))throw new Error(\"ValueError\");return n},find:function(t){return this.indexOf(t)},insert:function(t,n){return this.splice(t,0,n)}},h={items:function(){return i.u(this)},values:function(){return i.o(this)},keys:function(){return i.keys(this)},get:function(t,n){var r=this[t];return void 0===r&&(r=n),r},has_key:function(t){return s(this,t)},pop:function(t,n){var r=this[t];if(void 0===r&&void 0!==n)r=n;else{if(void 0===r)throw new Error(\"KeyError\");delete this[t]}return r},popitem:function(){var t=i.keys(this);if(!t.length)throw new Error(\"KeyError\");var n=t[0],r=this[n];return delete this[n],[n,r]},setdefault:function(t,n){return void 0===n&&(n=null),t in this||(this[t]=n),this[t]},update:function(t){return i.h(this,t),null}};return h.iteritems=h.items,h.itervalues=h.values,h.iterkeys=h.keys,r.memberLookup=function(t,n,r){return 4===arguments.length?c.apply(this,arguments):(t=t||{},i.isArray(t)&&s(a,n)?a[n].bind(t):i.isObject(t)&&s(h,n)?h[n].bind(t):f.apply(this,arguments))},function(){r.contextOrFrameLookup=o,r.memberLookup=f,e&&(e.prototype.assertType=t),u&&(u.prototype.parseAggregate=n)}}},434:function(t,n,r){\"use strict\";var i=r(449),e=Array.from,u=\"function\"==typeof Symbol&&Symbol.iterator&&\"function\"==typeof e,o=function(){function t(t,n){this.variables=Object.create(null),this.parent=t,this.topLevel=!1,this.isolateWrites=n}var n=t.prototype;return n.set=function(t,n,r){var i=t.split(\".\"),e=this.variables,u=this;if(r&&(u=this.resolve(i[0],!0)))u.set(t,n);else{for(var o=0;o<i.length-1;o++){var f=i[o];e[f]||(e[f]={}),e=e[f]}e[i[i.length-1]]=n}},n.get=function(t){var n=this.variables[t];return void 0!==n?n:null},n.lookup=function(t){var n=this.parent,r=this.variables[t];return void 0!==r?r:n&&n.lookup(t)},n.resolve=function(t,n){var r=n&&this.isolateWrites?void 0:this.parent;return void 0!==this.variables[t]?this:r&&r.resolve(t)},n.push=function(n){return new t(this,n)},n.pop=function(){return this.parent},t}();function f(t){return t&&Object.prototype.hasOwnProperty.call(t,\"__keywords\")}function c(t){var n=t.length;return 0===n?0:f(t[n-1])?n-1:n}function s(t){if(\"string\"!=typeof t)return t;this.val=t,this.length=t.length}s.prototype=Object.create(String.prototype,{length:{writable:!0,configurable:!0,value:0}}),s.prototype.valueOf=function(){return this.val},s.prototype.toString=function(){return this.val},t.exports={Frame:o,makeMacro:function(t,n,r){return function(){for(var i=arguments.length,e=new Array(i),u=0;u<i;u++)e[u]=arguments[u];var o,s=c(e),a=function(t){var n=t.length;if(n){var r=t[n-1];if(f(r))return r}return{}}(e);if(s>t.length)o=e.slice(0,t.length),e.slice(o.length,s).forEach(function(t,r){r<n.length&&(a[n[r]]=t)}),o.push(a);else if(s<t.length){o=e.slice(0,s);for(var h=s;h<t.length;h++){var l=t[h];o.push(a[l]),delete a[l]}o.push(a)}else o=e;return r.apply(this,o)}},makeKeywordArgs:function(t){return t.__keywords=!0,t},numArgs:c,suppressValue:function(t,n){return t=null!=t?t:\"\",!n||t instanceof s||(t=i.escape(t.toString())),t},ensureDefined:function(t,n,r){if(null==t)throw new i.TemplateError(\"attempted to output null or undefined value\",n+1,r+1);return t},memberLookup:function(t,n){if(null!=t)return\"function\"==typeof t[n]?function(){for(var r=arguments.length,i=new Array(r),e=0;e<r;e++)i[e]=arguments[e];return t[n].apply(t,i)}:t[n]},contextOrFrameLookup:function(t,n,r){var i=n.lookup(r);return void 0!==i?i:t.lookup(r)},callWrap:function(t,n,r,i){if(!t)throw new Error(\"Unable to call `\"+n+\"`, which is undefined or falsey\");if(\"function\"!=typeof t)throw new Error(\"Unable to call `\"+n+\"`, which is not a function\");return t.apply(r,i)},handleError:function(t,n,r){return t.lineno?t:new i.TemplateError(t,n,r)},isArray:i.isArray,keys:i.keys,SafeString:s,copySafeness:function(t,n){return t instanceof s?new s(n):n.toString()},markSafe:function(t){var n=typeof t;return\"string\"===n?new s(t):\"function\"!==n?t:function(n){var r=t.apply(this,arguments);return\"string\"==typeof r?new s(r):r}},asyncEach:function(t,n,r,e){if(i.isArray(t)){var u=t.length;i.asyncIter(t,function(t,i,e){switch(n){case 1:r(t,i,u,e);break;case 2:r(t[0],t[1],i,u,e);break;case 3:r(t[0],t[1],t[2],i,u,e);break;default:t.push(i,u,e),r.apply(this,t)}},e)}else i.asyncFor(t,function(t,n,i,e,u){r(t,n,i,e,u)},e)},asyncAll:function(t,n,r,e){var u,o,f=0;function c(t,n){f++,o[t]=n,f===u&&e(null,o.join(\"\"))}if(i.isArray(t))if(u=t.length,o=new Array(u),0===u)e(null,\"\");else for(var s=0;s<t.length;s++){var a=t[s];switch(n){case 1:r(a,s,u,c);break;case 2:r(a[0],a[1],s,u,c);break;case 3:r(a[0],a[1],a[2],s,u,c);break;default:a.push(s,u,c),r.apply(this,a)}}else{var h=i.keys(t||{});if(u=h.length,o=new Array(u),0===u)e(null,\"\");else for(var l=0;l<h.length;l++){var v=h[l];r(v,t[v],l,u,c)}}},inOperator:i.inOperator,fromIterator:function(t){return\"object\"!=typeof t||null===t||i.isArray(t)?t:u&&Symbol.iterator in t?e(t):t}}},449:function(t){\"use strict\";var n=Array.prototype,r=Object.prototype,i={\"&\":\"&amp;\",'\"':\"&quot;\",\"'\":\"&#39;\",\"<\":\"&lt;\",\">\":\"&gt;\",\"\\\\\":\"&#92;\"},e=/[&\"'<>\\\\]/g,u=t.exports={};function o(t,n){return r.hasOwnProperty.call(t,n)}function f(t){return i[t]}function c(t,n,r){var i,e,u;if(t instanceof Error&&(t=(e=t).name+\": \"+e.message),Object.setPrototypeOf?(i=new Error(t),Object.setPrototypeOf(i,c.prototype)):(i=this,Object.defineProperty(i,\"message\",{enumerable:!1,writable:!0,value:t})),Object.defineProperty(i,\"name\",{value:\"Template render error\"}),Error.captureStackTrace&&Error.captureStackTrace(i,this.constructor),e){var o=Object.getOwnPropertyDescriptor(e,\"stack\");(u=o&&(o.get||function(){return o.value}))||(u=function(){return e.stack})}else{var f=new Error(t).stack;u=function(){return f}}return Object.defineProperty(i,\"stack\",{get:function(){return u.call(i)}}),Object.defineProperty(i,\"cause\",{value:e}),i.lineno=n,i.colno=r,i.firstUpdate=!0,i.Update=function(t){var n=\"(\"+(t||\"unknown path\")+\")\";return this.firstUpdate&&(this.lineno&&this.colno?n+=\" [Line \"+this.lineno+\", Column \"+this.colno+\"]\":this.lineno&&(n+=\" [Line \"+this.lineno+\"]\")),n+=\"\\n \",this.firstUpdate&&(n+=\" \"),this.message=n+(this.message||\"\"),this.firstUpdate=!1,this},i}function s(t){return\"[object Function]\"===r.toString.call(t)}function a(t){return\"[object Array]\"===r.toString.call(t)}function h(t){return\"[object String]\"===r.toString.call(t)}function l(t){return\"[object Object]\"===r.toString.call(t)}function v(t){var n,r=(n=t)?\"string\"==typeof n?n.split(\".\"):[n]:[];return function(t){for(var n=t,i=0;i<r.length;i++){var e=r[i];if(!o(n,e))return;n=n[e]}return n}}function d(t){return Array.prototype.slice.call(t)}function w(t,n,r){return Array.prototype.indexOf.call(t||[],n,r)}function p(t){var n=[];for(var r in t)o(t,r)&&n.push(r);return n}u.hasOwnProp=o,u.l=function(t,n,r){if(r.Update||(r=new u.TemplateError(r)),r.Update(t),!n){var i=r;(r=new Error(i.message)).name=i.name}return r},Object.setPrototypeOf?Object.setPrototypeOf(c.prototype,Error.prototype):c.prototype=Object.create(Error.prototype,{constructor:{value:c}}),u.TemplateError=c,u.escape=function(t){return t.replace(e,f)},u.isFunction=s,u.isArray=a,u.isString=h,u.isObject=l,u.getAttrGetter=v,u.groupBy=function(t,n,r){for(var i={},e=s(n)?n:v(n),u=0;u<t.length;u++){var o=t[u],f=e(o,u);if(void 0===f&&!0===r)throw new TypeError('groupby: attribute \"'+n+'\" resolved to undefined');(i[f]||(i[f]=[])).push(o)}return i},u.toArray=d,u.without=function(t){var n=[];if(!t)return n;for(var r=t.length,i=d(arguments).slice(1),e=-1;++e<r;)-1===w(i,t[e])&&n.push(t[e]);return n},u.repeat=function(t,n){for(var r=\"\",i=0;i<n;i++)r+=t;return r},u.each=function(t,r,i){if(null!=t)if(n.forEach&&t.forEach===n.forEach)t.forEach(r,i);else if(t.length===+t.length)for(var e=0,u=t.length;e<u;e++)r.call(i,t[e],e,t)},u.map=function(t,r){var i=[];if(null==t)return i;if(n.map&&t.map===n.map)return t.map(r);for(var e=0;e<t.length;e++)i[i.length]=r(t[e],e);return t.length===+t.length&&(i.length=t.length),i},u.asyncIter=function(t,n,r){var i=-1;!function e(){++i<t.length?n(t[i],i,e,r):r()}()},u.asyncFor=function(t,n,r){var i=p(t||{}),e=i.length,u=-1;!function o(){u++;var f=i[u];u<e?n(f,t[f],u,e,o):r()}()},u.indexOf=w,u.keys=p,u.u=function(t){return p(t).map(function(n){return[n,t[n]]})},u.o=function(t){return p(t).map(function(n){return t[n]})},u.h=u.extend=function(t,n){return t=t||{},p(n).forEach(function(r){t[r]=n[r]}),t},u.inOperator=function(t,n){if(a(n)||h(n))return-1!==n.indexOf(t);if(l(n))return t in n;throw new Error('Cannot use \"in\" operator to search for \"'+t+'\" in unexpected types.')}},491:function(t,n,r){\"use strict\";function i(t,n){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},i(t,n)}var e=r(5),u=r(891).EmitterObj;t.exports=function(t){function n(){return t.apply(this,arguments)||this}var r,u;u=t,(r=n).prototype=Object.create(u.prototype),r.prototype.constructor=r,i(r,u);var o=n.prototype;return o.resolve=function(t,n){return e.resolve(e.dirname(t),n)},o.isRelative=function(t){return 0===t.indexOf(\"./\")||0===t.indexOf(\"../\")},n}(u)},647:function(t,n,r){\"use strict\";var i,e=r(449),u=r(887),o=u.Environment,f=u.Template,c=r(491),s=r(742),a=r(5),h=r(5),l=r(5),v=r(5),d=r(434),w=r(5),p=r(433);function y(t,n){var r;return n=n||{},e.isObject(t)&&(n=t,t=null),s.FileSystemLoader?r=new s.FileSystemLoader(t,{watch:n.watch,noCache:n.noCache}):s.WebLoader&&(r=new s.WebLoader(t,{useCache:n.web&&n.web.useCache,async:n.web&&n.web.async})),i=new o(r,n),n&&n.express&&i.express(n.express),i}t.exports={Environment:o,Template:f,Loader:c,FileSystemLoader:s.FileSystemLoader,NodeResolveLoader:s.NodeResolveLoader,PrecompiledLoader:s.PrecompiledLoader,WebLoader:s.WebLoader,compiler:h,parser:l,lexer:v,runtime:d,lib:e,nodes:w,installJinjaCompat:p,configure:y,reset:function(){i=void 0},compile:function(t,n,r,e){return i||y(),new f(t,n,r,e)},render:function(t,n,r){return i||y(),i.render(t,n,r)},renderString:function(t,n,r){return i||y(),i.renderString(t,n,r)},precompile:a?a.precompile:void 0,precompileString:a?a.precompileString:void 0}},742:function(t,n,r){\"use strict\";function i(t,n){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},i(t,n)}var e=function(t){function n(n){var r;return(r=t.call(this)||this).precompiled=n||{},r}var r,e;return e=t,(r=n).prototype=Object.create(e.prototype),r.prototype.constructor=r,i(r,e),n.prototype.getSource=function(t){return this.precompiled[t]?{src:{type:\"code\",obj:this.precompiled[t]},path:t}:null},n}(r(491));t.exports={PrecompiledLoader:e}},790:function(t){\"use strict\";t.exports=function(){return{range:function(t,n,r){void 0===n?(n=t,t=0,r=1):r||(r=1);var i=[];if(r>0)for(var e=t;e<n;e+=r)i.push(e);else for(var u=t;u>n;u+=r)i.push(u);return i},cycler:function(){return t=Array.prototype.slice.call(arguments),n=-1,{current:null,reset:function(){n=-1,this.current=null},next:function(){return++n>=t.length&&(n=0),this.current=t[n],this.current}};var t,n},joiner:function(t){return function(t){t=t||\",\";var n=!0;return function(){var r=n?\"\":t;return n=!1,r}}(t)}}}},795:function(t,n,r){\"use strict\";function i(t){u.length||(e(),!0),u[u.length]=t}t.exports=i;var e,u=[],o=0;function f(){for(;o<u.length;){var t=o;if(o+=1,u[t].call(),o>1024){for(var n=0,r=u.length-o;n<r;n++)u[n]=u[n+o];u.length-=o,o=0}}u.length=0,o=0}var c,s,a,h=void 0!==r.g?r.g:self,l=h.MutationObserver||h.WebKitMutationObserver;function v(t){return function(){var n=setTimeout(i,0),r=setInterval(i,50);function i(){clearTimeout(n),clearInterval(r),t()}}}\"function\"==typeof l?(c=1,s=new l(f),a=document.createTextNode(\"\"),s.observe(a,{characterData:!0}),e=function(){c=-c,a.data=c}):e=v(f),i.requestFlush=e,i.makeRequestCallFromTimer=v},804:function(t,n,r){var i=r(5);t.exports=function(t,n){function r(t,n){if(this.name=t,this.path=t,this.defaultEngine=n.defaultEngine,this.ext=i.extname(t),!this.ext&&!this.defaultEngine)throw new Error(\"No default engine was specified and no extension was provided.\");this.ext||(this.name+=this.ext=(\".\"!==this.defaultEngine[0]?\".\":\"\")+this.defaultEngine)}return r.prototype.render=function(n,r){t.render(this.name,n,r)},n.set(\"view\",r),n.set(\"nunjucksEnv\",t),t}},887:function(t,n,r){\"use strict\";function i(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,e(t,n)}function e(t,n){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},e(t,n)}var u=r(236),o=r(211),f=r(449),c=r(5),s=r(153),a=r(742),h=a.FileSystemLoader,l=a.WebLoader,v=a.PrecompiledLoader,d=r(423),w=r(790),p=r(891),y=p.Obj,b=p.EmitterObj,m=r(434),j=m.handleError,g=m.Frame,E=r(804);function k(t,n,r){u(function(){t(n,r)})}var O={type:\"code\",obj:{root:function(t,n,r,i,e){try{e(null,\"\")}catch(t){e(j(t,null,null))}}}},A=function(t){function n(){return t.apply(this,arguments)||this}i(n,t);var r=n.prototype;return r.init=function(t,n){var r=this;n=this.opts=n||{},this.opts.dev=!!n.dev,this.opts.autoescape=null==n.autoescape||n.autoescape,this.opts.throwOnUndefined=!!n.throwOnUndefined,this.opts.trimBlocks=!!n.trimBlocks,this.opts.lstripBlocks=!!n.lstripBlocks,this.loaders=[],t?this.loaders=f.isArray(t)?t:[t]:h?this.loaders=[new h(\"views\")]:l&&(this.loaders=[new l(\"/views\")]),\"undefined\"!=typeof window&&window.nunjucksPrecompiled&&this.loaders.unshift(new v(window.nunjucksPrecompiled)),this.v(),this.globals=w(),this.filters={},this.tests={},this.asyncFilters=[],this.extensions={},this.extensionsList=[],f.u(s).forEach(function(t){var n=t[0],i=t[1];return r.addFilter(n,i)}),f.u(d).forEach(function(t){var n=t[0],i=t[1];return r.addTest(n,i)})},r.v=function(){var t=this;this.loaders.forEach(function(n){n.cache={},\"function\"==typeof n.on&&(n.on(\"update\",function(r,i){n.cache[r]=null,t.emit(\"update\",r,i,n)}),n.on(\"load\",function(r,i){t.emit(\"load\",r,i,n)}))})},r.invalidateCache=function(){this.loaders.forEach(function(t){t.cache={}})},r.addExtension=function(t,n){return n.__name=t,this.extensions[t]=n,this.extensionsList.push(n),this},r.removeExtension=function(t){var n=this.getExtension(t);n&&(this.extensionsList=f.without(this.extensionsList,n),delete this.extensions[t])},r.getExtension=function(t){return this.extensions[t]},r.hasExtension=function(t){return!!this.extensions[t]},r.addGlobal=function(t,n){return this.globals[t]=n,this},r.getGlobal=function(t){if(void 0===this.globals[t])throw new Error(\"global not found: \"+t);return this.globals[t]},r.addFilter=function(t,n,r){var i=n;return r&&this.asyncFilters.push(t),this.filters[t]=i,this},r.getFilter=function(t){if(!this.filters[t])throw new Error(\"filter not found: \"+t);return this.filters[t]},r.addTest=function(t,n){return this.tests[t]=n,this},r.getTest=function(t){if(!this.tests[t])throw new Error(\"test not found: \"+t);return this.tests[t]},r.resolveTemplate=function(t,n,r){return!(!t.isRelative||!n)&&t.isRelative(r)&&t.resolve?t.resolve(n,r):r},r.getTemplate=function(t,n,r,i,e){var u,o=this,c=this,s=null;if(t&&t.raw&&(t=t.raw),f.isFunction(r)&&(e=r,r=null,n=n||!1),f.isFunction(n)&&(e=n,n=!1),t instanceof L)s=t;else{if(\"string\"!=typeof t)throw new Error(\"template names must be a string: \"+t);for(var a=0;a<this.loaders.length;a++){var h=this.loaders[a];if(s=h.cache[this.resolveTemplate(h,r,t)])break}}if(s)return n&&s.compile(),e?void e(null,s):s;return f.asyncIter(this.loaders,function(n,i,e,u){function o(t,r){t?u(t):r?(r.loader=n,u(null,r)):e()}t=c.resolveTemplate(n,r,t),n.async?n.getSource(t,o):o(null,n.getSource(t))},function(r,f){if(f||r||i||(r=new Error(\"template not found: \"+t)),r){if(e)return void e(r);throw r}var c;f?(c=new L(f.src,o,f.path,n),f.noCache||(f.loader.cache[t]=c)):c=new L(O,o,\"\",n),e?e(null,c):u=c}),u},r.express=function(t){return E(this,t)},r.render=function(t,n,r){f.isFunction(n)&&(r=n,n=null);var i=null;return this.getTemplate(t,function(t,e){if(t&&r)k(r,t);else{if(t)throw t;i=e.render(n,r)}}),i},r.renderString=function(t,n,r,i){return f.isFunction(r)&&(i=r,r={}),new L(t,this,(r=r||{}).path).render(n,i)},r.waterfall=function(t,n,r){return o(t,n,r)},n}(b),S=function(t){function n(){return t.apply(this,arguments)||this}i(n,t);var r=n.prototype;return r.init=function(t,n,r){var i=this;this.env=r||new A,this.ctx=f.extend({},t),this.blocks={},this.exported=[],f.keys(n).forEach(function(t){i.addBlock(t,n[t])})},r.lookup=function(t){return t in this.env.globals&&!(t in this.ctx)?this.env.globals[t]:this.ctx[t]},r.setVariable=function(t,n){this.ctx[t]=n},r.getVariables=function(){return this.ctx},r.addBlock=function(t,n){return this.blocks[t]=this.blocks[t]||[],this.blocks[t].push(n),this},r.getBlock=function(t){if(!this.blocks[t])throw new Error('unknown block \"'+t+'\"');return this.blocks[t][0]},r.getSuper=function(t,n,r,i,e,u){var o=f.indexOf(this.blocks[n]||[],r),c=this.blocks[n][o+1];if(-1===o||!c)throw new Error('no super block available for \"'+n+'\"');c(t,this,i,e,u)},r.addExport=function(t){this.exported.push(t)},r.getExported=function(){var t=this,n={};return this.exported.forEach(function(r){n[r]=t.ctx[r]}),n},n}(y),L=function(t){function n(){return t.apply(this,arguments)||this}i(n,t);var r=n.prototype;return r.init=function(t,n,r,i){if(this.env=n||new A,f.isObject(t))switch(t.type){case\"code\":this.tmplProps=t.obj;break;case\"string\":this.tmplStr=t.obj;break;default:throw new Error(\"Unexpected template object type \"+t.type+\"; expected 'code', or 'string'\")}else{if(!f.isString(t))throw new Error(\"src must be a string or an object describing the source\");this.tmplStr=t}if(this.path=r,i)try{this.p()}catch(t){throw f.l(this.path,this.env.opts.dev,t)}else this.compiled=!1},r.render=function(t,n,r){var i=this;\"function\"==typeof t?(r=t,t={}):\"function\"==typeof n&&(r=n,n=null);var e=!n;try{this.compile()}catch(t){var u=f.l(this.path,this.env.opts.dev,t);if(r)return k(r,u);throw u}var o=new S(t||{},this.blocks,this.env),c=n?n.push(!0):new g;c.topLevel=!0;var s=null,a=!1;return this.rootRenderFunc(this.env,o,c,m,function(t,n){if(!a||!r||void 0===n)if(t&&(t=f.l(i.path,i.env.opts.dev,t),a=!0),r)e?k(r,t,n):r(t,n);else{if(t)throw t;s=n}}),s},r.getExported=function(t,n,r){\"function\"==typeof t&&(r=t,t={}),\"function\"==typeof n&&(r=n,n=null);try{this.compile()}catch(t){if(r)return r(t);throw t}var i=n?n.push():new g;i.topLevel=!0;var e=new S(t||{},this.blocks,this.env);this.rootRenderFunc(this.env,e,i,m,function(t){t?r(t,null):r(null,e.getExported())})},r.compile=function(){this.compiled||this.p()},r.p=function(){var t;if(this.tmplProps)t=this.tmplProps;else{var n=c.compile(this.tmplStr,this.env.asyncFilters,this.env.extensionsList,this.path,this.env.opts);t=new Function(n)()}this.blocks=this.m(t),this.rootRenderFunc=t.root,this.compiled=!0},r.m=function(t){var n={};return f.keys(t).forEach(function(r){\"b_\"===r.slice(0,2)&&(n[r.slice(2)]=t[r])}),n},n}(y);t.exports={Environment:A,Template:L}},891:function(t,n,r){\"use strict\";function i(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,u(i.key),i)}}function e(t,n,r){return n&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,\"prototype\",{writable:!1}),t}function u(t){var n=function(t,n){if(\"object\"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||\"default\");if(\"object\"!=typeof i)return i;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===n?String:Number)(t)}(t,\"string\");return\"symbol\"==typeof n?n:n+\"\"}function o(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,f(t,n)}function f(t,n){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},f(t,n)}var c=r(7),s=r(449);function a(t,n,r){r=r||{},s.keys(r).forEach(function(n){var i,e;r[n]=(i=t.prototype[n],e=r[n],\"function\"!=typeof i||\"function\"!=typeof e?e:function(){var t=this.parent;this.parent=i;var n=e.apply(this,arguments);return this.parent=t,n})});var i=function(t){function r(){return t.apply(this,arguments)||this}return o(r,t),e(r,[{key:\"typename\",get:function(){return n}}])}(t);return s.h(i.prototype,r),i}var h=function(){function t(){this.init.apply(this,arguments)}return t.prototype.init=function(){},t.extend=function(t,n){return\"object\"==typeof t&&(n=t,t=\"anonymous\"),a(this,t,n)},e(t,[{key:\"typename\",get:function(){return this.constructor.name}}])}(),l=function(t){function n(){var n,r;return(n=r=t.call(this)||this).init.apply(n,arguments),r}return o(n,t),n.prototype.init=function(){},n.extend=function(t,n){return\"object\"==typeof t&&(n=t,t=\"anonymous\"),a(this,t,n)},e(n,[{key:\"typename\",get:function(){return this.constructor.name}}])}(c);t.exports={Obj:h,EmitterObj:l}}},n={};function r(i){var e=n[i];if(void 0!==e)return e.exports;var u=n[i]={exports:{}};return t[i].call(u.exports,u,u.exports,r),u.exports}return r.g=function(){if(\"object\"==typeof globalThis)return globalThis;try{return this||new Function(\"return this\")()}catch(t){if(\"object\"==typeof window)return window}}(),r(647)}()});\n+//# sourceMappingURL=nunjucks-slim.min.js.map\n\\ No newline at end of file\n",
					"match": false,
					"packageHash": "ee36244bbb83dd9a92a6ef3997368332da75c72b9d427647c93609415994dfca",
					"size": 24648,
					"sourceHash": "522adbd2f84c627df06090171a915289cadbd840ba85105b934bb973a4d3e77a",
					"status": "content"
				},
				"browser/nunjucks.js": {
					"diff": "--- published/browser/nunjucks.js\n+++ rebuilt/browser/nunjucks.js\n@@ -1,6355 +1,3 @@\n-/*! Browser bundle of nunjucks 2.5.0  */\n-(function webpackUniversalModuleDefinition(root, factory) {\n-\tif(typeof exports === 'object' && typeof module === 'object')\n-\t\tmodule.exports = factory();\n-\telse if(typeof define === 'function' && define.amd)\n-\t\tdefine([], factory);\n-\telse if(typeof exports === 'object')\n-\t\texports[\"nunjucks\"] = factory();\n-\telse\n-\t\troot[\"nunjucks\"] = factory();\n-})(this, function() {\n-return /******/ (function(modules) { // webpackBootstrap\n-/******/ \t// The module cache\n-/******/ \tvar installedModules = {};\n-\n-/******/ \t// The require function\n-/******/ \tfunction __webpack_require__(moduleId) {\n-\n-/******/ \t\t// Check if module is in cache\n-/******/ \t\tif(installedModules[moduleId])\n-/******/ \t\t\treturn installedModules[moduleId].exports;\n-\n-/******/ \t\t// Create a new module (and put it into the cache)\n-/******/ \t\tvar module = installedModules[moduleId] = {\n-/******/ \t\t\texports: {},\n-/******/ \t\t\tid: moduleId,\n-/******/ \t\t\tloaded: false\n-/******/ \t\t};\n-\n-/******/ \t\t// Execute the module function\n-/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n-\n-/******/ \t\t// Flag the module as loaded\n-/******/ \t\tmodule.loaded = true;\n-\n-/******/ \t\t// Return the exports of the module\n-/******/ \t\treturn module.exports;\n-/******/ \t}\n-\n-\n-/******/ \t// expose the modules object (__webpack_modules__)\n-/******/ \t__webpack_require__.m = modules;\n-\n-/******/ \t// expose the module cache\n-/******/ \t__webpack_require__.c = installedModules;\n-\n-/******/ \t// __webpack_public_path__\n-/******/ \t__webpack_require__.p = \"\";\n-\n-/******/ \t// Load entry module and return exports\n-/******/ \treturn __webpack_require__(0);\n-/******/ })\n-/************************************************************************/\n-/******/ ([\n-/* 0 */\n-/***/ function(module, exports, __webpack_require__) {\n-\n-\t'use strict';\n-\n-\tvar lib = __webpack_require__(1);\n-\tvar env = __webpack_require__(2);\n-\tvar Loader = __webpack_require__(15);\n-\tvar loaders = __webpack_require__(14);\n-\tvar precompile = __webpack_require__(3);\n-\n-\tmodule.exports = {};\n-\tmodule.exports.Environment = env.Environment;\n-\tmodule.exports.Template = env.Template;\n-\n-\tmodule.exports.Loader = Loader;\n-\tmodule.exports.FileSystemLoader = loaders.FileSystemLoader;\n-\tmodule.exports.PrecompiledLoader = loaders.PrecompiledLoader;\n-\tmodule.exports.WebLoader = loaders.WebLoader;\n-\n-\tmodule.exports.compiler = __webpack_require__(7);\n-\tmodule.exports.parser = __webpack_require__(8);\n-\tmodule.exports.lexer = __webpack_require__(9);\n-\tmodule.exports.runtime = __webpack_require__(12);\n-\tmodule.exports.lib = lib;\n-\tmodule.exports.nodes = __webpack_require__(10);\n-\n-\tmodule.exports.installJinjaCompat = __webpack_require__(18);\n-\n-\t// A single instance of an environment, since this is so commonly used\n-\n-\tvar e;\n-\tmodule.exports.configure = function(templatesPath, opts) {\n-\t    opts = opts || {};\n-\t    if(lib.isObject(templatesPath)) {\n-\t        opts = templatesPath;\n-\t        templatesPath = null;\n-\t    }\n-\n-\t    var TemplateLoader;\n-\t    if(loaders.FileSystemLoader) {\n-\t        TemplateLoader = new loaders.FileSystemLoader(templatesPath, {\n-\t            watch: opts.watch,\n",
					"match": false,
					"packageHash": "563580c0da5e230b140daf6e3e1d9bcf20f7e24e7ad94473312840317a58296c",
					"size": 191346,
					"sourceHash": "659fb8ec0c580c5a0fce2a41b14429c46714ee40b2c24f4d5ef97b5d03bc9a56",
					"status": "content"
				},
				"browser/nunjucks.min.js": {
					"diff": "--- published/browser/nunjucks.min.js\n+++ rebuilt/browser/nunjucks.min.js\n@@ -1,4 +1,3 @@\n-/*! Browser bundle of nunjucks 2.5.0  */\n-!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.nunjucks=t():e.nunjucks=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p=\"\",t(0)}([function(e,t,n){\"use strict\";var i=n(1),r=n(2),s=n(15),o=n(14),a=n(3);e.exports={},e.exports.Environment=r.Environment,e.exports.Template=r.Template,e.exports.Loader=s,e.exports.FileSystemLoader=o.FileSystemLoader,e.exports.PrecompiledLoader=o.PrecompiledLoader,e.exports.WebLoader=o.WebLoader,e.exports.compiler=n(7),e.exports.parser=n(8),e.exports.lexer=n(9),e.exports.runtime=n(12),e.exports.lib=i,e.exports.nodes=n(10),e.exports.installJinjaCompat=n(18);var l;e.exports.configure=function(e,t){t=t||{},i.isObject(e)&&(t=e,e=null);var n;return o.FileSystemLoader?n=new o.FileSystemLoader(e,{watch:t.watch,noCache:t.noCache}):o.WebLoader&&(n=new o.WebLoader(e,{useCache:t.web&&t.web.useCache,async:t.web&&t.web.async})),l=new r.Environment(n,t),t&&t.express&&l.express(t.express),l},e.exports.compile=function(t,n,i,r){return l||e.exports.configure(),new e.exports.Template(t,n,i,r)},e.exports.render=function(t,n,i){return l||e.exports.configure(),l.render(t,n,i)},e.exports.renderString=function(t,n,i){return l||e.exports.configure(),l.renderString(t,n,i)},a&&(e.exports.precompile=a.precompile,e.exports.precompileString=a.precompileString)},function(e,t){\"use strict\";var n=Array.prototype,i=Object.prototype,r={\"&\":\"&amp;\",'\"':\"&quot;\",\"'\":\"&#39;\",\"<\":\"&lt;\",\">\":\"&gt;\"},s=/[&\"'<>]/g,o=function(e){return r[e]},t=e.exports={};t.prettifyError=function(e,n,i){if(i.Update||(i=new t.TemplateError(i)),i.Update(e),!n){var r=i;i=new Error(r.message),i.name=r.name}return i},t.TemplateError=function(e,t,n){var i=this;if(e instanceof Error){i=e,e=e.name+\": \"+e.message;try{i.name=\"\"}catch(r){i=this}}else Error.captureStackTrace&&Error.captureStackTrace(i);return i.name=\"Template render error\",i.message=e,i.lineno=t,i.colno=n,i.firstUpdate=!0,i.Update=function(e){var t=\"(\"+(e||\"unknown path\")+\")\";return this.firstUpdate&&(this.lineno&&this.colno?t+=\" [Line \"+this.lineno+\", Column \"+this.colno+\"]\":this.lineno&&(t+=\" [Line \"+this.lineno+\"]\")),t+=\"\\n \",this.firstUpdate&&(t+=\" \"),this.message=t+(this.message||\"\"),this.firstUpdate=!1,this},i},t.TemplateError.prototype=Error.prototype,t.escape=function(e){return e.replace(s,o)},t.isFunction=function(e){return\"[object Function]\"===i.toString.call(e)},t.isArray=Array.isArray||function(e){return\"[object Array]\"===i.toString.call(e)},t.isString=function(e){return\"[object String]\"===i.toString.call(e)},t.isObject=function(e){return\"[object Object]\"===i.toString.call(e)},t.groupBy=function(e,n){for(var i={},r=t.isFunction(n)?n:function(e){return e[n]},s=0;s<e.length;s++){var o=e[s],a=r(o,s);(i[a]||(i[a]=[])).push(o)}return i},t.toArray=function(e){return Array.prototype.slice.call(e)},t.without=function(e){var n=[];if(!e)return n;for(var i=-1,r=e.length,s=t.toArray(arguments).slice(1);++i<r;)-1===t.indexOf(s,e[i])&&n.push(e[i]);return n},t.extend=function(e,t){for(var n in t)e[n]=t[n];return e},t.repeat=function(e,t){for(var n=\"\",i=0;t>i;i++)n+=e;return n},t.each=function(e,t,i){if(null!=e)if(n.each&&e.each===n.each)e.forEach(t,i);else if(e.length===+e.length)for(var r=0,s=e.length;s>r;r++)t.call(i,e[r],r,e)},t.map=function(e,t){var i=[];if(null==e)return i;if(n.map&&e.map===n.map)return e.map(t);for(var r=0;r<e.length;r++)i[i.length]=t(e[r],r);return e.length===+e.length&&(i.length=e.length),i},t.asyncIter=function(e,t,n){function i(){r++,r<e.length?t(e[r],r,i,n):n()}var r=-1;i()},t.asyncFor=function(e,n,i){function r(){a++;var t=s[a];o>a?n(t,e[t],a,o,r):i()}var s=t.keys(e),o=s.length,a=-1;r()},t.indexOf=Array.prototype.indexOf?function(e,t,n){return Array.prototype.indexOf.call(e,t,n)}:function(e,t,n){var i=this.length>>>0;for(n=+n||0,Math.abs(n)===1/0&&(n=0),0>n&&(n+=i,0>n&&(n=0));i>n;n++)if(e[n]===t)return n;return-1},Array.prototype.map||(Array.prototype.map=function(){throw new Error(\"map is unimplemented for this js engine\")}),t.keys=function(e){if(Object.prototype.keys)return e.keys();var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},t.inOperator=function(e,n){if(t.isArray(n))return-1!==t.indexOf(n,e);if(t.isObject(n))return e in n;if(t.isString(n))return-1!==n.indexOf(e);throw new Error('Cannot use \"in\" operator to search for \"'+e+'\" in unexpected types.')}},function(e,t,n){\"use strict\";function i(e,t,n){o(function(){e(t,n)})}var r,s=n(3),o=n(4),a=n(1),l=n(6),c=n(7),h=n(13),u=n(14),p=n(12),f=n(17),m=p.Frame;u.PrecompiledLoader=n(16);var d=l.extend({init:function(e,t){t=this.opts=t||{},this.opts.dev=!!t.dev,this.opts.autoescape=null!=t.autoescape?t.autoescape:!0,this.opts.throwOnUndefined=!!t.throwOnUndefined,this.opts.trimBlocks=!!t.trimBlocks,this.opts.lstripBlocks=!!t.lstripBlocks,this.loaders=[],e?this.loaders=a.isArray(e)?e:[e]:u.FileSystemLoader?this.loaders=[new u.FileSystemLoader(\"views\")]:u.WebLoader&&(this.loaders=[new u.WebLoader(\"/views\")]),window.nunjucksPrecompiled&&this.loaders.unshift(new u.PrecompiledLoader(window.nunjucksPrecompiled)),this.initCache(),this.globals=f(),this.filters={},this.asyncFilters=[],this.extensions={},this.extensionsList=[];for(var n in h)this.addFilter(n,h[n])},initCache:function(){a.each(this.loaders,function(e){e.cache={},\"function\"==typeof e.on&&e.on(\"update\",function(t){e.cache[t]=null})})},addExtension:function(e,t){return t._name=e,this.extensions[e]=t,this.extensionsList.push(t),this},removeExtension:function(e){var t=this.getExtension(e);t&&(this.extensionsList=a.without(this.extensionsList,t),delete this.extensions[e])},getExtension:function(e){return this.extensions[e]},hasExtension:function(e){return!!this.extensions[e]},addGlobal:function(e,t){return this.globals[e]=t,this},getGlobal:function(e){if(\"undefined\"==typeof this.globals[e])throw new Error(\"global not found: \"+e);return this.globals[e]},addFilter:function(e,t,n){var i=t;return n&&this.asyncFilters.push(e),this.filters[e]=i,this},getFilter:function(e){if(!this.filters[e])throw new Error(\"filter not found: \"+e);return this.filters[e]},resolveTemplate:function(e,t,n){var i=e.isRelative&&t?e.isRelative(n):!1;return i&&e.resolve?e.resolve(t,n):n},getTemplate:function(e,t,n,i,s){var o=this,l=null;if(e&&e.raw&&(e=e.raw),a.isFunction(n)&&(s=n,n=null,t=t||!1),a.isFunction(t)&&(s=t,t=!1),e instanceof r)l=e;else{if(\"string\"!=typeof e)throw new Error(\"template names must be a string: \"+e);for(var c=0;c<this.loaders.length;c++){var h=this.resolveTemplate(this.loaders[c],n,e);if(l=this.loaders[c].cache[h])break}}if(!l){var u,p=this,f=function(n,o){if(o||n||i||(n=new Error(\"template not found: \"+e)),n){if(!s)throw n;s(n)}else{var a;o?(a=new r(o.src,p,o.path,t),o.noCache||(o.loader.cache[e]=a)):a=new r(\"\",p,\"\",t),s?s(null,a):u=a}};return a.asyncIter(this.loaders,function(t,i,r,s){function a(e,n){e?s(e):n?(n.loader=t,s(null,n)):r()}e=o.resolveTemplate(t,n,e),t.async?t.getSource(e,a):a(null,t.getSource(e))},f),u}return t&&l.compile(),s?void s(null,l):l},express:function(e){function t(e,t){if(this.name=e,this.path=e,this.defaultEngine=t.defaultEngine,this.ext=s.extname(e),!this.ext&&!this.defaultEngine)throw new Error(\"No default engine was specified and no extension was provided.\");this.ext||(this.name+=this.ext=(\".\"!==this.defaultEngine[0]?\".\":\"\")+this.defaultEngine)}var n=this;return t.prototype.render=function(e,t){n.render(this.name,e,t)},e.set(\"view\",t),e.set(\"nunjucksEnv\",this),this},render:function(e,t,n){a.isFunction(t)&&(n=t,t=null);var r=null;return this.getTemplate(e,function(e,s){if(e&&n)i(n,e);else{if(e)throw e;r=s.render(t,n)}}),r},renderString:function(e,t,n,i){a.isFunction(n)&&(i=n,n={}),n=n||{};var s=new r(e,this,n.path);return s.render(t,i)}}),v=l.extend({init:function(e,t,n){this.env=n||new d,this.ctx={};for(var i in e)e.hasOwnProperty(i)&&(this.ctx[i]=e[i]);this.blocks={},this.exported=[];for(var r in t)this.addBlock(r,t[r])},lookup:function(e){return e in this.env.globals&&!(e in this.ctx)?this.env.globals[e]:this.ctx[e]},setVariable:function(e,t){this.ctx[e]=t},getVariables:function(){return this.ctx},addBlock:function(e,t){return this.blocks[e]=this.blocks[e]||[],this.blocks[e].push(t),this},getBlock:function(e){if(!this.blocks[e])throw new Error('unknown block \"'+e+'\"');return this.blocks[e][0]},getSuper:function(e,t,n,i,r,s){var o=a.indexOf(this.blocks[t]||[],n),l=this.blocks[t][o+1],c=this;if(-1===o||!l)throw new Error('no super block available for \"'+t+'\"');l(e,c,i,r,s)},addExport:function(e){this.exported.push(e)},getExported:function(){for(var e={},t=0;t<this.exported.length;t++){var n=this.exported[t];e[n]=this.ctx[n]}return e}});r=l.extend({init:function(e,t,n,i){if(this.env=t||new d,a.isObject(e))switch(e.type){case\"code\":this.tmplProps=e.obj;break;case\"string\":this.tmplStr=e.obj}else{if(!a.isString(e))throw new Error(\"src must be a string or an object describing the source\");this.tmplStr=e}if(this.path=n,i){var r=this;try{r._compile()}catch(s){throw a.prettifyError(this.path,this.env.opts.dev,s)}}else this.compiled=!1},render:function(e,t,n){\"function\"==typeof e?(n=e,e={}):\"function\"==typeof t&&(n=t,t=null);var r=!0;t&&(r=!1);var s=this;try{s.compile()}catch(o){var l=a.prettifyError(this.path,this.env.opts.dev,o);if(n)return i(n,l);throw l}var c=new v(e||{},s.blocks,s.env),h=t?t.push(!0):new m;h.topLevel=!0;var u=null;return s.rootRenderFunc(s.env,c,h||new m,p,function(e,t){if(e&&(e=a.prettifyError(s.path,s.env.opts.dev,e)),n)r?i(n,e,t):n(e,t);else{if(e)throw e;u=t}}),u},getExported:function(e,t,n){\"function\"==typeof e&&(n=e,e={}),\"function\"==typeof t&&(n=t,t=null);try{this.compile()}catch(i){if(n)return n(i);throw i}var r=t?t.push():new m;r.topLevel=!0;var s=new v(e||{},this.blocks,this.env);this.rootRenderFunc(this.env,s,r,p,function(e){e?n(e,null):n(null,s.getExported())})},compile:function(){this.compiled||this._compile()},_compile:function(){var e;if(this.tmplProps)e=this.tmplProps;else{var t=c.compile(this.tmplStr,this.env.asyncFilters,this.env.extensionsList,this.path,this.env.opts),n=new Function(t);e=n()}this.blocks=this._getBlocks(e),this.rootRenderFunc=e.root,this.compiled=!0},_getBlocks:function(e){var t={};for(var n in e)\"b_\"===n.slice(0,2)&&(t[n.slice(2)]=e[n]);return t}}),e.exports={Environment:d,Template:r}},function(e,t){},function(e,t,n){\"use strict\";function i(){if(l.length)throw l.shift()}function r(e){var t;t=a.length?a.pop():new s,t.task=e,o(t)}function s(){this.task=null}var o=n(5),a=[],l=[],c=o.makeRequestCallFromTimer(i);e.exports=r,s.prototype.call=function(){try{this.task.call()}catch(e){r.onerror?r.onerror(e):(l.push(e),c())}finally{this.task=null,a[a.length]=this}}},function(e,t){(function(t){\"use strict\";function n(e){a.length||(o(),l=!0),a[a.length]=e}function i(){for(;c<a.length;){var e=c;if(c+=1,a[e].call(),c>h){for(var t=0,n=a.length-c;n>t;t++)a[t]=a[t+c];a.length-=c,c=0}}a.length=0,c=0,l=!1}function r(e){var t=1,n=new u(e),i=document.createTextNode(\"\");return n.observe(i,{characterData:!0}),function(){t=-t,i.data=t}}function s(e){return function(){function t(){clearTimeout(n),clearInterval(i),e()}var n=setTimeout(t,0),i=setInterval(t,50)}}e.exports=n;var o,a=[],l=!1,c=0,h=1024,u=t.MutationObserver||t.WebKitMutationObserver;o=\"function\"==typeof u?r(i):s(i),n.requestFlush=o,n.makeRequestCallFromTimer=s}).call(t,function(){return this}())},function(e,t){\"use strict\";function n(e,t,i){var r=function(){};r.prototype=e.prototype;var s=new r,o=/xyz/.test(function(){xyz})?/\\bparent\\b/:/.*/;i=i||{};for(var a in i){var l=i[a],c=s[a];\"function\"==typeof c&&\"function\"==typeof l&&o.test(l)?s[a]=function(e,t){return function(){var n=this.parent;this.parent=t;var i=e.apply(this,arguments);return this.parent=n,i}}(l,c):s[a]=l}s.typename=t;var h=function(){s.init&&s.init.apply(this,arguments)};return h.prototype=s,h.prototype.constructor=h,h.extend=function(e,t){return\"object\"==typeof e&&(t=e,e=\"anonymous\"),n(h,e,t)},h}e.exports=n(Object,\"Object\",{})},function(e,t,n){\"use strict\";function i(e){return function(t,n){this.compile(t.left,n),this.emit(e),this.compile(t.right,n)}}var r=n(1),s=n(8),o=n(11),a=n(10),l=n(6),c=n(12).Frame,h={\"==\":\"==\",\"===\":\"===\",\"!=\":\"!=\",\"!==\":\"!==\",\"<\":\"<\",\">\":\">\",\"<=\":\"<=\",\">=\":\">=\"},u=l.extend({init:function(e,t){this.templateName=e,this.codebuf=[],this.lastId=0,this.buffer=null,this.bufferStack=[],this.scopeClosers=\"\",this.inBlock=!1,this.throwOnUndefined=t},fail:function(e,t,n){throw void 0!==t&&(t+=1),void 0!==n&&(n+=1),new r.TemplateError(e,t,n)},pushBufferId:function(e){this.bufferStack.push(this.buffer),this.buffer=e,this.emit(\"var \"+this.buffer+' = \"\";')},popBufferId:function(){this.buffer=this.bufferStack.pop()},emit:function(e){this.codebuf.push(e)},emitLine:function(e){this.emit(e+\"\\n\")},emitLines:function(){r.each(r.toArray(arguments),function(e){this.emitLine(e)},this)},emitFuncBegin:function(e){this.buffer=\"output\",this.scopeClosers=\"\",this.emitLine(\"function \"+e+\"(env, context, frame, runtime, cb) {\"),this.emitLine(\"var lineno = null;\"),this.emitLine(\"var colno = null;\"),this.emitLine(\"var \"+this.buffer+' = \"\";'),this.emitLine(\"try {\")},emitFuncEnd:function(e){e||this.emitLine(\"cb(null, \"+this.buffer+\");\"),this.closeScopeLevels(),this.emitLine(\"} catch (e) {\"),this.emitLine(\"  cb(runtime.handleError(e, lineno, colno));\"),this.emitLine(\"}\"),this.emitLine(\"}\"),this.buffer=null},addScopeLevel:function(){this.scopeClosers+=\"})\"},closeScopeLevels:function(){this.emitLine(this.scopeClosers+\";\"),this.scopeClosers=\"\"},withScopedSyntax:function(e){var t=this.scopeClosers;this.scopeClosers=\"\",e.call(this),this.closeScopeLevels(),this.scopeClosers=t},makeCallback:function(e){var t=this.tmpid();return\"function(\"+t+(e?\",\"+e:\"\")+\") {\\nif(\"+t+\") { cb(\"+t+\"); return; }\"},tmpid:function(){return this.lastId++,\"t_\"+this.lastId},_templateName:function(){return null==this.templateName?\"undefined\":JSON.stringify(this.templateName)},_compileChildren:function(e,t){for(var n=e.children,i=0,r=n.length;r>i;i++)this.compile(n[i],t)},_compileAggregate:function(e,t,n,i){n&&this.emit(n);for(var r=0;r<e.children.length;r++)r>0&&this.emit(\",\"),this.compile(e.children[r],t);i&&this.emit(i)},_compileExpression:function(e,t){this.assertType(e,a.Literal,a.Symbol,a.Group,a.Array,a.Dict,a.FunCall,a.Caller,a.Filter,a.LookupVal,a.Compare,a.InlineIf,a.In,a.And,a.Or,a.Not,a.Add,a.Concat,a.Sub,a.Mul,a.Div,a.FloorDiv,a.Mod,a.Pow,a.Neg,a.Pos,a.Compare,a.NodeList),this.compile(e,t)},assertType:function(e){for(var t=r.toArray(arguments).slice(1),n=!1,i=0;i<t.length;i++)e instanceof t[i]&&(n=!0);n||this.fail(\"assertType: invalid type: \"+e.typename,e.lineno,e.colno)},compileCallExtension:function(e,t,n){var i=e.args,s=e.contentArgs,o=\"boolean\"==typeof e.autoescape?e.autoescape:!0;if(n||this.emit(this.buffer+\" += runtime.suppressValue(\"),this.emit('env.getExtension(\"'+e.extName+'\")[\"'+e.prop+'\"]('),this.emit(\"context\"),(i||s)&&this.emit(\",\"),i&&(i instanceof a.NodeList||this.fail(\"compileCallExtension: arguments must be a NodeList, use `parser.parseSignature`\"),r.each(i.children,function(e,n){this._compileExpression(e,t),(n!==i.children.length-1||s.length)&&this.emit(\",\")},this)),s.length&&r.each(s,function(e,n){if(n>0&&this.emit(\",\"),e){var i=this.tmpid();this.emitLine(\"function(cb) {\"),this.emitLine(\"if(!cb) { cb = function(err) { if(err) { throw err; }}}\"),this.pushBufferId(i),this.withScopedSyntax(function(){this.compile(e,t),this.emitLine(\"cb(null, \"+i+\");\")}),this.popBufferId(),this.emitLine(\"return \"+i+\";\"),this.emitLine(\"}\")}else this.emit(\"null\")},this),n){var l=this.tmpid();this.emitLine(\", \"+this.makeCallback(l)),this.emitLine(this.buffer+\" += runtime.suppressValue(\"+l+\", \"+o+\" && env.opts.autoescape);\"),this.addScopeLevel()}else this.emit(\")\"),this.emit(\", \"+o+\" && env.opts.autoescape);\\n\")},compileCallExtensionAsync:function(e,t){this.compileCallExtension(e,t,!0)},compileNodeList:function(e,t){this._compileChildren(e,t)},compileLiteral:function(e){if(\"string\"==typeof e.value){var t=e.value.replace(/\\\\/g,\"\\\\\\\\\");t=t.replace(/\"/g,'\\\\\"'),t=t.replace(/\\n/g,\"\\\\n\"),t=t.replace(/\\r/g,\"\\\\r\"),t=t.replace(/\\t/g,\"\\\\t\"),this.emit('\"'+t+'\"')}else null===e.value?this.emit(\"null\"):this.emit(e.value.toString())},compileSymbol:function(e,t){var n,i=e.value;(n=t.lookup(i))?this.emit(n):this.emit('runtime.contextOrFrameLookup(context, frame, \"'+i+'\")')},compileGroup:function(e,t){this._compileAggregate(e,t,\"(\",\")\")},compileArray:function(e,t){this._compileAggregate(e,t,\"[\",\"]\")},compileDict:function(e,t){this._compileAggregate(e,t,\"{\",\"}\")},compilePair:function(e,t){var n=e.key,i=e.value;n instanceof a.Symbol?n=new a.Literal(n.lineno,n.colno,n.value):n instanceof a.Literal&&\"string\"==typeof n.value||this.fail(\"compilePair: Dict keys must be strings or names\",n.lineno,n.colno),this.compile(n,t),this.emit(\": \"),this._compileExpression(i,t)},compileInlineIf:function(e,t){this.emit(\"(\"),this.compile(e.cond,t),this.emit(\"?\"),this.compile(e.body,t),this.emit(\":\"),null!==e.else_?this.compile(e.else_,t):this.emit('\"\"'),this.emit(\")\")},compileIn:function(e,t){this.emit(\"runtime.inOperator(\"),this.compile(e.left,t),this.emit(\",\"),this.compile(e.right,t),this.emit(\")\")},compileOr:i(\" || \"),compileAnd:i(\" && \"),compileAdd:i(\" + \"),compileConcat:i(' + \"\" + '),compileSub:i(\" - \"),compileMul:i(\" * \"),compileDiv:i(\" / \"),compileMod:i(\" % \"),compileNot:function(e,t){this.emit(\"!\"),this.compile(e.target,t)},compileFloorDiv:function(e,t){this.emit(\"Math.floor(\"),this.compile(e.left,t),this.emit(\" / \"),this.compile(e.right,t),this.emit(\")\")},compilePow:function(e,t){this.emit(\"Math.pow(\"),this.compile(e.left,t),this.emit(\", \"),this.compile(e.right,t),this.emit(\")\")},compileNeg:function(e,t){this.emit(\"-\"),this.compile(e.target,t)},compilePos:function(e,t){this.emit(\"+\"),this.compile(e.target,t)},compileCompare:function(e,t){this.compile(e.expr,t);for(var n=0;n<e.ops.length;n++){var i=e.ops[n];this.emit(\" \"+h[i.type]+\" \"),this.compile(i.expr,t)}},compileLookupVal:function(e,t){this.emit(\"runtime.memberLookup((\"),this._compileExpression(e.target,t),this.emit(\"),\"),this._compileExpression(e.val,t),this.emit(\")\")},_getNodeName:function(e){switch(e.typename){case\"Symbol\":return e.value;case\"FunCall\":return\"the return value of (\"+this._getNodeName(e.name)+\")\";case\"LookupVal\":return this._getNodeName(e.target)+'[\"'+this._getNodeName(e.val)+'\"]';case\"Literal\":return e.value.toString();default:return\"--expression--\"}},compileFunCall:function(e,t){this.emit(\"(lineno = \"+e.lineno+\", colno = \"+e.colno+\", \"),this.emit(\"runtime.callWrap(\"),this._compileExpression(e.name,t),this.emit(', \"'+this._getNodeName(e.name).replace(/\"/g,'\\\\\"')+'\", context, '),this._compileAggregate(e.args,t,\"[\",\"])\"),this.emit(\")\")},compileFilter:function(e,t){var n=e.name;this.assertType(n,a.Symbol),this.emit('env.getFilter(\"'+n.value+'\").call(context, '),this._compileAggregate(e.args,t),this.emit(\")\")},compileFilterAsync:function(e,t){var n=e.name;this.assertType(n,a.Symbol);var i=e.symbol.value;t.set(i,i),this.emit('env.getFilter(\"'+n.value+'\").call(context, '),this._compileAggregate(e.args,t),this.emitLine(\", \"+this.makeCallback(i)),this.addScopeLevel()},compileKeywordArgs:function(e,t){var n=[];r.each(e.children,function(e){n.push(e.key.value)}),this.emit(\"runtime.makeKeywordArgs(\"),this.compileDict(e,t),this.emit(\")\")},compileSet:function(e,t){var n=[];r.each(e.targets,function(e){var i=e.value,r=t.lookup(i);(null===r||void 0===r)&&(r=this.tmpid(),this.emitLine(\"var \"+r+\";\")),n.push(r)},this),e.value?(this.emit(n.join(\" = \")+\" = \"),this._compileExpression(e.value,t),this.emitLine(\";\")):(this.emit(n.join(\" = \")+\" = \"),this.compile(e.body,t),this.emitLine(\";\")),r.each(e.targets,function(e,t){var i=n[t],r=e.value;this.emitLine('frame.set(\"'+r+'\", '+i+\", true);\"),this.emitLine(\"if(frame.topLevel) {\"),this.emitLine('context.setVariable(\"'+r+'\", '+i+\");\"),this.emitLine(\"}\"),\"_\"!==r.charAt(0)&&(this.emitLine(\"if(frame.topLevel) {\"),this.emitLine('context.addExport(\"'+r+'\", '+i+\");\"),this.emitLine(\"}\"))},this)},compileIf:function(e,t,n){this.emit(\"if(\"),this._compileExpression(e.cond,t),this.emitLine(\") {\"),this.withScopedSyntax(function(){this.compile(e.body,t),n&&this.emit(\"cb()\")}),e.else_?(this.emitLine(\"}\\nelse {\"),this.withScopedSyntax(function(){this.compile(e.else_,t),n&&this.emit(\"cb()\")})):n&&(this.emitLine(\"}\\nelse {\"),this.emit(\"cb()\")),this.emitLine(\"}\")},compileIfAsync:function(e,t){this.emit(\"(function(cb) {\"),this.compileIf(e,t,!0),this.emit(\"})(\"+this.makeCallback()),this.addScopeLevel()},emitLoopBindings:function(e,t,n,i){var r={index:n+\" + 1\",index0:n,revindex:i+\" - \"+n,revindex0:i+\" - \"+n+\" - 1\",first:n+\" === 0\",last:n+\" === \"+i+\" - 1\",length:i};for(var s in r)this.emitLine('frame.set(\"loop.'+s+'\", '+r[s]+\");\")},compileFor:function(e,t){var n,i=this.tmpid(),r=this.tmpid(),s=this.tmpid();if(t=t.push(),this.emitLine(\"frame = frame.push();\"),this.emit(\"var \"+s+\" = \"),this._compileExpression(e.arr,t),this.emitLine(\";\"),this.emit(\"if(\"+s+\") {\"),e.name instanceof a.Array){this.emitLine(\"var \"+i+\";\"),this.emitLine(\"if(runtime.isArray(\"+s+\")) {\"),this.emitLine(\"var \"+r+\" = \"+s+\".length;\"),this.emitLine(\"for(\"+i+\"=0; \"+i+\" < \"+s+\".length; \"+i+\"++) {\");for(var o=0;o<e.name.children.length;o++){var l=this.tmpid();this.emitLine(\"var \"+l+\" = \"+s+\"[\"+i+\"][\"+o+\"]\"),this.emitLine('frame.set(\"'+e.name.children[o].value+'\", '+s+\"[\"+i+\"][\"+o+\"]);\"),t.set(e.name.children[o].value,l)}this.emitLoopBindings(e,s,i,r),this.withScopedSyntax(function(){this.compile(e.body,t)}),this.emitLine(\"}\"),this.emitLine(\"} else {\");var c=e.name.children[0],h=e.name.children[1],u=this.tmpid();n=this.tmpid(),t.set(c.value,u),t.set(h.value,n),this.emitLine(i+\" = -1;\"),this.emitLine(\"var \"+r+\" = runtime.keys(\"+s+\").length;\"),this.emitLine(\"for(var \"+u+\" in \"+s+\") {\"),this.emitLine(i+\"++;\"),this.emitLine(\"var \"+n+\" = \"+s+\"[\"+u+\"];\"),this.emitLine('frame.set(\"'+c.value+'\", '+u+\");\"),this.emitLine('frame.set(\"'+h.value+'\", '+n+\");\"),this.emitLoopBindings(e,s,i,r),this.withScopedSyntax(function(){this.compile(e.body,t)}),this.emitLine(\"}\"),this.emitLine(\"}\")}else n=this.tmpid(),t.set(e.name.value,n),this.emitLine(\"var \"+r+\" = \"+s+\".length;\"),this.emitLine(\"for(var \"+i+\"=0; \"+i+\" < \"+s+\".length; \"+i+\"++) {\"),this.emitLine(\"var \"+n+\" = \"+s+\"[\"+i+\"];\"),this.emitLine('frame.set(\"'+e.name.value+'\", '+n+\");\"),this.emitLoopBindings(e,s,i,r),this.withScopedSyntax(function(){this.compile(e.body,t)}),this.emitLine(\"}\");this.emitLine(\"}\"),e.else_&&(this.emitLine(\"if (!\"+r+\") {\"),this.compile(e.else_,t),this.emitLine(\"}\")),this.emitLine(\"frame = frame.pop();\")},_compileAsyncLoop:function(e,t,n){var i=this.tmpid(),s=this.tmpid(),o=this.tmpid(),l=n?\"asyncAll\":\"asyncEach\";if(t=t.push(),this.emitLine(\"frame = frame.push();\"),this.emit(\"var \"+o+\" = \"),this._compileExpression(e.arr,t),this.emitLine(\";\"),e.name instanceof a.Array)this.emit(\"runtime.\"+l+\"(\"+o+\", \"+e.name.children.length+\", function(\"),r.each(e.name.children,function(e){this.emit(e.value+\",\")},this),this.emit(i+\",\"+s+\",next) {\"),r.each(e.name.children,function(e){var n=e.value;t.set(n,n),this.emitLine('frame.set(\"'+n+'\", '+n+\");\")},this);else{var c=e.name.value;this.emitLine(\"runtime.\"+l+\"(\"+o+\", 1, function(\"+c+\", \"+i+\", \"+s+\",next) {\"),this.emitLine('frame.set(\"'+c+'\", '+c+\");\"),t.set(c,c)}this.emitLoopBindings(e,o,i,s),this.withScopedSyntax(function(){var r;n&&(r=this.tmpid(),this.pushBufferId(r)),this.compile(e.body,t),this.emitLine(\"next(\"+i+(r?\",\"+r:\"\")+\");\"),n&&this.popBufferId()});var h=this.tmpid();this.emitLine(\"}, \"+this.makeCallback(h)),this.addScopeLevel(),n&&this.emitLine(this.buffer+\" += \"+h+\";\"),e.else_&&(this.emitLine(\"if (!\"+o+\".length) {\"),this.compile(e.else_,t),this.emitLine(\"}\")),this.emitLine(\"frame = frame.pop();\")},compileAsyncEach:function(e,t){this._compileAsyncLoop(e,t)},compileAsyncAll:function(e,t){this._compileAsyncLoop(e,t,!0)},_compileMacro:function(e,t){var n=[],i=null,s=\"macro_\"+this.tmpid();r.each(e.args.children,function(t,r){r===e.args.children.length-1&&t instanceof a.Dict?i=t:(this.assertType(t,a.Symbol),n.push(t))},this);var o=r.map(n,function(e){return\"l_\"+e.value});o.push(\"kwargs\");var l=r.map(n,function(e){return'\"'+e.value+'\"'}),c=r.map(i&&i.children||[],function(e){return'\"'+e.key.value+'\"'});t=t.push(),this.emitLines(\"var \"+s+\" = runtime.makeMacro(\",\"[\"+l.join(\", \")+\"], \",\"[\"+c.join(\", \")+\"], \",\"function (\"+o.join(\", \")+\") {\",\"frame = frame.push(true);\",\"kwargs = kwargs || {};\",'if (kwargs.hasOwnProperty(\"caller\")) {','frame.set(\"caller\", kwargs.caller); }'),r.each(n,function(e){this.emitLine('frame.set(\"'+e.value+'\", l_'+e.value+\");\"),t.set(e.value,\"l_\"+e.value)},this),i&&r.each(i.children,function(e){var n=e.key.value;this.emit('frame.set(\"'+n+'\", kwargs.hasOwnProperty(\"'+n+'\") ? kwargs[\"'+n+'\"] : '),this._compileExpression(e.value,t),this.emitLine(\");\")},this);var h=this.tmpid();return this.pushBufferId(h),this.withScopedSyntax(function(){this.compile(e.body,t)}),t=t.pop(),this.emitLine(\"frame = frame.pop();\"),this.emitLine(\"return new runtime.SafeString(\"+h+\");\"),this.emitLine(\"});\"),this.popBufferId(),s},compileMacro:function(e,t){var n=this._compileMacro(e,t),i=e.name.value;t.set(i,n),t.parent?this.emitLine('frame.set(\"'+i+'\", '+n+\");\"):(\"_\"!==e.name.value.charAt(0)&&this.emitLine('context.addExport(\"'+i+'\");'),this.emitLine('context.setVariable(\"'+i+'\", '+n+\");\"))},compileCaller:function(e,t){this.emit(\"(function (){\");var n=this._compileMacro(e,t);this.emit(\"return \"+n+\";})()\")},compileImport:function(e,t){var n=this.tmpid(),i=e.target.value;this.emit(\"env.getTemplate(\"),this._compileExpression(e.template,t),this.emitLine(\", false, \"+this._templateName()+\", false, \"+this.makeCallback(n)),this.addScopeLevel(),this.emitLine(n+\".getExported(\"+(e.withContext?\"context.getVariables(), frame, \":\"\")+this.makeCallback(n)),this.addScopeLevel(),t.set(i,n),t.parent?this.emitLine('frame.set(\"'+i+'\", '+n+\");\"):this.emitLine('context.setVariable(\"'+i+'\", '+n+\");\")},compileFromImport:function(e,t){var n=this.tmpid();this.emit(\"env.getTemplate(\"),this._compileExpression(e.template,t),this.emitLine(\", false, \"+this._templateName()+\", false, \"+this.makeCallback(n)),this.addScopeLevel(),this.emitLine(n+\".getExported(\"+(e.withContext?\"context.getVariables(), frame, \":\"\")+this.makeCallback(n)),this.addScopeLevel(),r.each(e.names.children,function(e){var i,r,s=this.tmpid();e instanceof a.Pair?(i=e.key.value,r=e.value.value):(i=e.value,r=i),this.emitLine(\"if(\"+n+'.hasOwnProperty(\"'+i+'\")) {'),this.emitLine(\"var \"+s+\" = \"+n+\".\"+i+\";\"),this.emitLine(\"} else {\"),this.emitLine(\"cb(new Error(\\\"cannot import '\"+i+\"'\\\")); return;\"),this.emitLine(\"}\"),t.set(r,s),t.parent?this.emitLine('frame.set(\"'+r+'\", '+s+\");\"):this.emitLine('context.setVariable(\"'+r+'\", '+s+\");\")},this)},compileBlock:function(e){var t=this.tmpid();this.inBlock||this.emit('(parentTemplate ? function(e, c, f, r, cb) { cb(\"\"); } : '),this.emit('context.getBlock(\"'+e.name.value+'\")'),this.inBlock||this.emit(\")\"),this.emitLine(\"(env, context, frame, runtime, \"+this.makeCallback(t)),this.emitLine(this.buffer+\" += \"+t+\";\"),this.addScopeLevel()},compileSuper:function(e,t){var n=e.blockName.value,i=e.symbol.value;this.emitLine('context.getSuper(env, \"'+n+'\", b_'+n+\", frame, runtime, \"+this.makeCallback(i)),this.emitLine(i+\" = runtime.markSafe(\"+i+\");\"),this.addScopeLevel(),t.set(i,i)},compileExtends:function(e,t){var n=this.tmpid();this.emit(\"env.getTemplate(\"),this._compileExpression(e.template,t),this.emitLine(\", true, \"+this._templateName()+\", false, \"+this.makeCallback(\"_parentTemplate\")),this.emitLine(\"parentTemplate = _parentTemplate\"),this.emitLine(\"for(var \"+n+\" in parentTemplate.blocks) {\"),this.emitLine(\"context.addBlock(\"+n+\", parentTemplate.blocks[\"+n+\"]);\"),this.emitLine(\"}\"),this.addScopeLevel()},compileInclude:function(e,t){var n=this.tmpid(),i=this.tmpid();this.emit(\"env.getTemplate(\"),this._compileExpression(e.template,t),this.emitLine(\", false, \"+this._templateName()+\", \"+e.ignoreMissing+\", \"+this.makeCallback(n)),this.addScopeLevel(),this.emitLine(n+\".render(context.getVariables(), frame, \"+this.makeCallback(i)),this.emitLine(this.buffer+\" += \"+i),this.addScopeLevel()},compileTemplateData:function(e,t){this.compileLiteral(e,t)},compileCapture:function(e,t){this.emitLine(\"(function() {\"),this.emitLine('var output = \"\";'),this.withScopedSyntax(function(){this.compile(e.body,t)}),this.emitLine(\"return output;\"),this.emitLine(\"})()\")},compileOutput:function(e,t){for(var n=e.children,i=0,r=n.length;r>i;i++)n[i]instanceof a.TemplateData?n[i].value&&(this.emit(this.buffer+\" += \"),this.compileLiteral(n[i],t),this.emitLine(\";\")):(this.emit(this.buffer+\" += runtime.suppressValue(\"),this.throwOnUndefined&&this.emit(\"runtime.ensureDefined(\"),this.compile(n[i],t),this.throwOnUndefined&&this.emit(\",\"+e.lineno+\",\"+e.colno+\")\"),this.emit(\", env.opts.autoescape);\\n\"))},compileRoot:function(e,t){t&&this.fail(\"compileRoot: root node can't have frame\"),t=new c,this.emitFuncBegin(\"root\"),this.emitLine(\"var parentTemplate = null;\"),this._compileChildren(e,t),this.emitLine(\"if(parentTemplate) {\"),this.emitLine(\"parentTemplate.rootRenderFunc(env, context, frame, runtime, cb);\"),this.emitLine(\"} else {\"),this.emitLine(\"cb(null, \"+this.buffer+\");\"),this.emitLine(\"}\"),this.emitFuncEnd(!0),this.inBlock=!0;var n,i,r,s=[],o=e.findAll(a.Block);for(n=0;n<o.length;n++){if(r=o[n],i=r.name.value,-1!==s.indexOf(i))throw new Error('Block \"'+i+'\" defined more than once.');s.push(i),this.emitFuncBegin(\"b_\"+i);var l=new c;this.compile(r.body,l),this.emitFuncEnd()}for(this.emitLine(\"return {\"),n=0;n<o.length;n++)r=o[n],i=\"b_\"+r.name.value,this.emitLine(i+\": \"+i+\",\");this.emitLine(\"root: root\\n};\")},compile:function(e,t){var n=this[\"compile\"+e.typename];n?n.call(this,e,t):this.fail(\"compile: Cannot compile node: \"+e.typename,e.lineno,e.colno)},getCode:function(){return this.codebuf.join(\"\")}});e.exports={compile:function(e,t,n,i,r){var a=new u(i,r.throwOnUndefined);if(n&&n.length)for(var l=0;l<n.length;l++)\"preprocess\"in n[l]&&(e=n[l].preprocess(e,i));return a.compile(o.transform(s.parse(e,n,r),t,i)),a.getCode()},Compiler:u}},function(e,t,n){\"use strict\";var i=n(9),r=n(10),s=n(6),o=n(1),a=s.extend({init:function(e){this.tokens=e,this.peeked=null,this.breakOnBlocks=null,this.dropLeadingWhitespace=!1,this.extensions=[]},nextToken:function(e){var t;if(this.peeked){if(e||this.peeked.type!==i.TOKEN_WHITESPACE)return t=this.peeked,this.peeked=null,t;this.peeked=null}if(t=this.tokens.nextToken(),!e)for(;t&&t.type===i.TOKEN_WHITESPACE;)t=this.tokens.nextToken();return t},peekToken:function(){return this.peeked=this.peeked||this.nextToken(),this.peeked},pushToken:function(e){if(this.peeked)throw new Error(\"pushToken: can only push one token on between reads\");this.peeked=e},fail:function(e,t,n){if((void 0===t||void 0===n)&&this.peekToken()){var i=this.peekToken();t=i.lineno,n=i.colno}throw void 0!==t&&(t+=1),void 0!==n&&(n+=1),new o.TemplateError(e,t,n)},skip:function(e){var t=this.nextToken();return t&&t.type===e?!0:(this.pushToken(t),!1)},expect:function(e){var t=this.nextToken();return t.type!==e&&this.fail(\"expected \"+e+\", got \"+t.type,t.lineno,t.colno),t},skipValue:function(e,t){var n=this.nextToken();return n&&n.type===e&&n.value===t?!0:(this.pushToken(n),!1)},skipSymbol:function(e){return this.skipValue(i.TOKEN_SYMBOL,e)},advanceAfterBlockEnd:function(e){var t;return e||(t=this.peekToken(),t||this.fail(\"unexpected end of file\"),t.type!==i.TOKEN_SYMBOL&&this.fail(\"advanceAfterBlockEnd: expected symbol token or explicit name to be passed\"),e=this.nextToken().value),t=this.nextToken(),t&&t.type===i.TOKEN_BLOCK_END?\"-\"===t.value.charAt(0)&&(this.dropLeadingWhitespace=!0):this.fail(\"expected block end in \"+e+\" statement\"),t},advanceAfterVariableEnd:function(){this.skip(i.TOKEN_VARIABLE_END)||this.fail(\"expected variable end\");\n-},parseFor:function(){var e,t,n=this.peekToken();this.skipSymbol(\"for\")?(e=new r.For(n.lineno,n.colno),t=\"endfor\"):this.skipSymbol(\"asyncEach\")?(e=new r.AsyncEach(n.lineno,n.colno),t=\"endeach\"):this.skipSymbol(\"asyncAll\")?(e=new r.AsyncAll(n.lineno,n.colno),t=\"endall\"):this.fail(\"parseFor: expected for{Async}\",n.lineno,n.colno),e.name=this.parsePrimary(),e.name instanceof r.Symbol||this.fail(\"parseFor: variable name expected for loop\");var s=this.peekToken().type;if(s===i.TOKEN_COMMA){var o=e.name;for(e.name=new r.Array(o.lineno,o.colno),e.name.addChild(o);this.skip(i.TOKEN_COMMA);){var a=this.parsePrimary();e.name.addChild(a)}}return this.skipSymbol(\"in\")||this.fail('parseFor: expected \"in\" keyword for loop',n.lineno,n.colno),e.arr=this.parseExpression(),this.advanceAfterBlockEnd(n.value),e.body=this.parseUntilBlocks(t,\"else\"),this.skipSymbol(\"else\")&&(this.advanceAfterBlockEnd(\"else\"),e.else_=this.parseUntilBlocks(t)),this.advanceAfterBlockEnd(),e},parseMacro:function(){var e=this.peekToken();this.skipSymbol(\"macro\")||this.fail(\"expected macro\");var t=this.parsePrimary(!0),n=this.parseSignature(),i=new r.Macro(e.lineno,e.colno,t,n);return this.advanceAfterBlockEnd(e.value),i.body=this.parseUntilBlocks(\"endmacro\"),this.advanceAfterBlockEnd(),i},parseCall:function(){var e=this.peekToken();this.skipSymbol(\"call\")||this.fail(\"expected call\");var t=this.parseSignature(!0)||new r.NodeList,n=this.parsePrimary();this.advanceAfterBlockEnd(e.value);var i=this.parseUntilBlocks(\"endcall\");this.advanceAfterBlockEnd();var s=new r.Symbol(e.lineno,e.colno,\"caller\"),o=new r.Caller(e.lineno,e.colno,s,t,i),a=n.args.children;a[a.length-1]instanceof r.KeywordArgs||a.push(new r.KeywordArgs);var l=a[a.length-1];return l.addChild(new r.Pair(e.lineno,e.colno,s,o)),new r.Output(e.lineno,e.colno,[n])},parseWithContext:function(){var e=this.peekToken(),t=null;return this.skipSymbol(\"with\")?t=!0:this.skipSymbol(\"without\")&&(t=!1),null!==t&&(this.skipSymbol(\"context\")||this.fail(\"parseFrom: expected context after with/without\",e.lineno,e.colno)),t},parseImport:function(){var e=this.peekToken();this.skipSymbol(\"import\")||this.fail(\"parseImport: expected import\",e.lineno,e.colno);var t=this.parseExpression();this.skipSymbol(\"as\")||this.fail('parseImport: expected \"as\" keyword',e.lineno,e.colno);var n=this.parseExpression(),i=this.parseWithContext(),s=new r.Import(e.lineno,e.colno,t,n,i);return this.advanceAfterBlockEnd(e.value),s},parseFrom:function(){var e=this.peekToken();this.skipSymbol(\"from\")||this.fail(\"parseFrom: expected from\");var t=this.parseExpression();this.skipSymbol(\"import\")||this.fail(\"parseFrom: expected import\",e.lineno,e.colno);for(var n,s=new r.NodeList;;){var o=this.peekToken();if(o.type===i.TOKEN_BLOCK_END){s.children.length||this.fail(\"parseFrom: Expected at least one import name\",e.lineno,e.colno),\"-\"===o.value.charAt(0)&&(this.dropLeadingWhitespace=!0),this.nextToken();break}s.children.length>0&&!this.skip(i.TOKEN_COMMA)&&this.fail(\"parseFrom: expected comma\",e.lineno,e.colno);var a=this.parsePrimary();if(\"_\"===a.value.charAt(0)&&this.fail(\"parseFrom: names starting with an underscore cannot be imported\",a.lineno,a.colno),this.skipSymbol(\"as\")){var l=this.parsePrimary();s.addChild(new r.Pair(a.lineno,a.colno,a,l))}else s.addChild(a);n=this.parseWithContext()}return new r.FromImport(e.lineno,e.colno,t,s,n)},parseBlock:function(){var e=this.peekToken();this.skipSymbol(\"block\")||this.fail(\"parseBlock: expected block\",e.lineno,e.colno);var t=new r.Block(e.lineno,e.colno);t.name=this.parsePrimary(),t.name instanceof r.Symbol||this.fail(\"parseBlock: variable name expected\",e.lineno,e.colno),this.advanceAfterBlockEnd(e.value),t.body=this.parseUntilBlocks(\"endblock\"),this.skipSymbol(\"endblock\"),this.skipSymbol(t.name.value);var n=this.peekToken();return n||this.fail(\"parseBlock: expected endblock, got end of file\"),this.advanceAfterBlockEnd(n.value),t},parseExtends:function(){var e=\"extends\",t=this.peekToken();this.skipSymbol(e)||this.fail(\"parseTemplateRef: expected \"+e);var n=new r.Extends(t.lineno,t.colno);return n.template=this.parseExpression(),this.advanceAfterBlockEnd(t.value),n},parseInclude:function(){var e=\"include\",t=this.peekToken();this.skipSymbol(e)||this.fail(\"parseInclude: expected \"+e);var n=new r.Include(t.lineno,t.colno);return n.template=this.parseExpression(),this.skipSymbol(\"ignore\")&&this.skipSymbol(\"missing\")&&(n.ignoreMissing=!0),this.advanceAfterBlockEnd(t.value),n},parseIf:function(){var e,t=this.peekToken();this.skipSymbol(\"if\")||this.skipSymbol(\"elif\")||this.skipSymbol(\"elseif\")?e=new r.If(t.lineno,t.colno):this.skipSymbol(\"ifAsync\")?e=new r.IfAsync(t.lineno,t.colno):this.fail(\"parseIf: expected if, elif, or elseif\",t.lineno,t.colno),e.cond=this.parseExpression(),this.advanceAfterBlockEnd(t.value),e.body=this.parseUntilBlocks(\"elif\",\"elseif\",\"else\",\"endif\");var n=this.peekToken();switch(n&&n.value){case\"elseif\":case\"elif\":e.else_=this.parseIf();break;case\"else\":this.advanceAfterBlockEnd(),e.else_=this.parseUntilBlocks(\"endif\"),this.advanceAfterBlockEnd();break;case\"endif\":e.else_=null,this.advanceAfterBlockEnd();break;default:this.fail(\"parseIf: expected elif, else, or endif, got end of file\")}return e},parseSet:function(){var e=this.peekToken();this.skipSymbol(\"set\")||this.fail(\"parseSet: expected set\",e.lineno,e.colno);for(var t,n=new r.Set(e.lineno,e.colno,[]);(t=this.parsePrimary())&&(n.targets.push(t),this.skip(i.TOKEN_COMMA)););return this.skipValue(i.TOKEN_OPERATOR,\"=\")?(n.value=this.parseExpression(),this.advanceAfterBlockEnd(e.value)):this.skip(i.TOKEN_BLOCK_END)?(n.body=new r.Capture(e.lineno,e.colno,this.parseUntilBlocks(\"endset\")),n.value=null,this.advanceAfterBlockEnd()):this.fail(\"parseSet: expected = or block end in set tag\",e.lineno,e.colno),n},parseStatement:function(){var e,t=this.peekToken();if(t.type!==i.TOKEN_SYMBOL&&this.fail(\"tag name expected\",t.lineno,t.colno),this.breakOnBlocks&&-1!==o.indexOf(this.breakOnBlocks,t.value))return null;switch(t.value){case\"raw\":return this.parseRaw();case\"if\":case\"ifAsync\":return this.parseIf();case\"for\":case\"asyncEach\":case\"asyncAll\":return this.parseFor();case\"block\":return this.parseBlock();case\"extends\":return this.parseExtends();case\"include\":return this.parseInclude();case\"set\":return this.parseSet();case\"macro\":return this.parseMacro();case\"call\":return this.parseCall();case\"import\":return this.parseImport();case\"from\":return this.parseFrom();case\"filter\":return this.parseFilterStatement();default:if(this.extensions.length)for(var n=0;n<this.extensions.length;n++){var s=this.extensions[n];if(-1!==o.indexOf(s.tags||[],t.value))return s.parse(this,r,i)}this.fail(\"unknown block tag: \"+t.value,t.lineno,t.colno)}return e},parseRaw:function(){for(var e=/([\\s\\S]*?){%\\s*(raw|endraw)\\s*(?=%})%}/,t=1,n=\"\",i=null,s=this.advanceAfterBlockEnd();(i=this.tokens._extractRegex(e))&&t>0;){var o=i[0],a=i[1],l=i[2];\"raw\"===l?t+=1:\"endraw\"===l&&(t-=1),0===t?(n+=a,this.tokens.backN(o.length-a.length)):n+=o}return new r.Output(s.lineno,s.colno,[new r.TemplateData(s.lineno,s.colno,n)])},parsePostfix:function(e){for(var t,n=this.peekToken();n;){if(n.type===i.TOKEN_LEFT_PAREN)e=new r.FunCall(n.lineno,n.colno,e,this.parseSignature());else if(n.type===i.TOKEN_LEFT_BRACKET)t=this.parseAggregate(),t.children.length>1&&this.fail(\"invalid index\"),e=new r.LookupVal(n.lineno,n.colno,e,t.children[0]);else{if(n.type!==i.TOKEN_OPERATOR||\".\"!==n.value)break;this.nextToken();var s=this.nextToken();s.type!==i.TOKEN_SYMBOL&&this.fail(\"expected name as lookup value, got \"+s.value,s.lineno,s.colno),t=new r.Literal(s.lineno,s.colno,s.value),e=new r.LookupVal(n.lineno,n.colno,e,t)}n=this.peekToken()}return e},parseExpression:function(){var e=this.parseInlineIf();return e},parseInlineIf:function(){var e=this.parseOr();if(this.skipSymbol(\"if\")){var t=this.parseOr(),n=e;e=new r.InlineIf(e.lineno,e.colno),e.body=n,e.cond=t,this.skipSymbol(\"else\")?e.else_=this.parseOr():e.else_=null}return e},parseOr:function(){for(var e=this.parseAnd();this.skipSymbol(\"or\");){var t=this.parseAnd();e=new r.Or(e.lineno,e.colno,e,t)}return e},parseAnd:function(){for(var e=this.parseNot();this.skipSymbol(\"and\");){var t=this.parseNot();e=new r.And(e.lineno,e.colno,e,t)}return e},parseNot:function(){var e=this.peekToken();return this.skipSymbol(\"not\")?new r.Not(e.lineno,e.colno,this.parseNot()):this.parseIn()},parseIn:function(){for(var e=this.parseCompare();;){var t=this.nextToken();if(!t)break;var n=t.type===i.TOKEN_SYMBOL&&\"not\"===t.value;if(n||this.pushToken(t),!this.skipSymbol(\"in\")){n&&this.pushToken(t);break}var s=this.parseCompare();e=new r.In(e.lineno,e.colno,e,s),n&&(e=new r.Not(e.lineno,e.colno,e))}return e},parseCompare:function(){for(var e=[\"==\",\"===\",\"!=\",\"!==\",\"<\",\">\",\"<=\",\">=\"],t=this.parseConcat(),n=[];;){var i=this.nextToken();if(!i)break;if(-1===o.indexOf(e,i.value)){this.pushToken(i);break}n.push(new r.CompareOperand(i.lineno,i.colno,this.parseConcat(),i.value))}return n.length?new r.Compare(n[0].lineno,n[0].colno,t,n):t},parseConcat:function(){for(var e=this.parseAdd();this.skipValue(i.TOKEN_TILDE,\"~\");){var t=this.parseAdd();e=new r.Concat(e.lineno,e.colno,e,t)}return e},parseAdd:function(){for(var e=this.parseSub();this.skipValue(i.TOKEN_OPERATOR,\"+\");){var t=this.parseSub();e=new r.Add(e.lineno,e.colno,e,t)}return e},parseSub:function(){for(var e=this.parseMul();this.skipValue(i.TOKEN_OPERATOR,\"-\");){var t=this.parseMul();e=new r.Sub(e.lineno,e.colno,e,t)}return e},parseMul:function(){for(var e=this.parseDiv();this.skipValue(i.TOKEN_OPERATOR,\"*\");){var t=this.parseDiv();e=new r.Mul(e.lineno,e.colno,e,t)}return e},parseDiv:function(){for(var e=this.parseFloorDiv();this.skipValue(i.TOKEN_OPERATOR,\"/\");){var t=this.parseFloorDiv();e=new r.Div(e.lineno,e.colno,e,t)}return e},parseFloorDiv:function(){for(var e=this.parseMod();this.skipValue(i.TOKEN_OPERATOR,\"//\");){var t=this.parseMod();e=new r.FloorDiv(e.lineno,e.colno,e,t)}return e},parseMod:function(){for(var e=this.parsePow();this.skipValue(i.TOKEN_OPERATOR,\"%\");){var t=this.parsePow();e=new r.Mod(e.lineno,e.colno,e,t)}return e},parsePow:function(){for(var e=this.parseUnary();this.skipValue(i.TOKEN_OPERATOR,\"**\");){var t=this.parseUnary();e=new r.Pow(e.lineno,e.colno,e,t)}return e},parseUnary:function(e){var t,n=this.peekToken();return t=this.skipValue(i.TOKEN_OPERATOR,\"-\")?new r.Neg(n.lineno,n.colno,this.parseUnary(!0)):this.skipValue(i.TOKEN_OPERATOR,\"+\")?new r.Pos(n.lineno,n.colno,this.parseUnary(!0)):this.parsePrimary(),e||(t=this.parseFilter(t)),t},parsePrimary:function(e){var t,n=this.nextToken(),s=null;return n?n.type===i.TOKEN_STRING?t=n.value:n.type===i.TOKEN_INT?t=parseInt(n.value,10):n.type===i.TOKEN_FLOAT?t=parseFloat(n.value):n.type===i.TOKEN_BOOLEAN?\"true\"===n.value?t=!0:\"false\"===n.value?t=!1:this.fail(\"invalid boolean: \"+n.value,n.lineno,n.colno):n.type===i.TOKEN_NONE?t=null:n.type===i.TOKEN_REGEX&&(t=new RegExp(n.value.body,n.value.flags)):this.fail(\"expected expression, got end of file\"),void 0!==t?s=new r.Literal(n.lineno,n.colno,t):n.type===i.TOKEN_SYMBOL?(s=new r.Symbol(n.lineno,n.colno,n.value),e||(s=this.parsePostfix(s))):(this.pushToken(n),s=this.parseAggregate()),s?s:void this.fail(\"unexpected token: \"+n.value,n.lineno,n.colno)},parseFilterName:function(){for(var e=this.expect(i.TOKEN_SYMBOL),t=e.value;this.skipValue(i.TOKEN_OPERATOR,\".\");)t+=\".\"+this.expect(i.TOKEN_SYMBOL).value;return new r.Symbol(e.lineno,e.colno,t)},parseFilterArgs:function(e){if(this.peekToken().type===i.TOKEN_LEFT_PAREN){var t=this.parsePostfix(e);return t.args.children}return[]},parseFilter:function(e){for(;this.skip(i.TOKEN_PIPE);){var t=this.parseFilterName();e=new r.Filter(t.lineno,t.colno,t,new r.NodeList(t.lineno,t.colno,[e].concat(this.parseFilterArgs(e))))}return e},parseFilterStatement:function(){var e=this.peekToken();this.skipSymbol(\"filter\")||this.fail(\"parseFilterStatement: expected filter\");var t=this.parseFilterName(),n=this.parseFilterArgs(t);this.advanceAfterBlockEnd(e.value);var i=new r.Capture(t.lineno,t.colno,this.parseUntilBlocks(\"endfilter\"));this.advanceAfterBlockEnd();var s=new r.Filter(t.lineno,t.colno,t,new r.NodeList(t.lineno,t.colno,[i].concat(n)));return new r.Output(t.lineno,t.colno,[s])},parseAggregate:function(){var e,t=this.nextToken();switch(t.type){case i.TOKEN_LEFT_PAREN:e=new r.Group(t.lineno,t.colno);break;case i.TOKEN_LEFT_BRACKET:e=new r.Array(t.lineno,t.colno);break;case i.TOKEN_LEFT_CURLY:e=new r.Dict(t.lineno,t.colno);break;default:return null}for(;;){var n=this.peekToken().type;if(n===i.TOKEN_RIGHT_PAREN||n===i.TOKEN_RIGHT_BRACKET||n===i.TOKEN_RIGHT_CURLY){this.nextToken();break}if(e.children.length>0&&(this.skip(i.TOKEN_COMMA)||this.fail(\"parseAggregate: expected comma after expression\",t.lineno,t.colno)),e instanceof r.Dict){var s=this.parsePrimary();this.skip(i.TOKEN_COLON)||this.fail(\"parseAggregate: expected colon after dict key\",t.lineno,t.colno);var o=this.parseExpression();e.addChild(new r.Pair(s.lineno,s.colno,s,o))}else{var a=this.parseExpression();e.addChild(a)}}return e},parseSignature:function(e,t){var n=this.peekToken();if(!t&&n.type!==i.TOKEN_LEFT_PAREN){if(e)return null;this.fail(\"expected arguments\",n.lineno,n.colno)}n.type===i.TOKEN_LEFT_PAREN&&(n=this.nextToken());for(var s=new r.NodeList(n.lineno,n.colno),o=new r.KeywordArgs(n.lineno,n.colno),a=!1;;){if(n=this.peekToken(),!t&&n.type===i.TOKEN_RIGHT_PAREN){this.nextToken();break}if(t&&n.type===i.TOKEN_BLOCK_END)break;if(a&&!this.skip(i.TOKEN_COMMA))this.fail(\"parseSignature: expected comma after expression\",n.lineno,n.colno);else{var l=this.parseExpression();this.skipValue(i.TOKEN_OPERATOR,\"=\")?o.addChild(new r.Pair(l.lineno,l.colno,l,this.parseExpression())):s.addChild(l)}a=!0}return o.children.length&&s.addChild(o),s},parseUntilBlocks:function(){var e=this.breakOnBlocks;this.breakOnBlocks=o.toArray(arguments);var t=this.parse();return this.breakOnBlocks=e,t},parseNodes:function(){for(var e,t=[];e=this.nextToken();)if(e.type===i.TOKEN_DATA){var n=e.value,s=this.peekToken(),o=s&&s.value;this.dropLeadingWhitespace&&(n=n.replace(/^\\s*/,\"\"),this.dropLeadingWhitespace=!1),s&&(s.type===i.TOKEN_BLOCK_START&&\"-\"===o.charAt(o.length-1)||s.type===i.TOKEN_COMMENT&&\"-\"===o.charAt(this.tokens.tags.COMMENT_START.length))&&(n=n.replace(/\\s*$/,\"\")),t.push(new r.Output(e.lineno,e.colno,[new r.TemplateData(e.lineno,e.colno,n)]))}else if(e.type===i.TOKEN_BLOCK_START){this.dropLeadingWhitespace=!1;var a=this.parseStatement();if(!a)break;t.push(a)}else if(e.type===i.TOKEN_VARIABLE_START){var l=this.parseExpression();this.advanceAfterVariableEnd(),this.dropLeadingWhitespace=!1,t.push(new r.Output(e.lineno,e.colno,[l]))}else e.type===i.TOKEN_COMMENT?this.dropLeadingWhitespace=\"-\"===e.value.charAt(e.value.length-this.tokens.tags.COMMENT_END.length-1):this.fail(\"Unexpected token at top-level: \"+e.type,e.lineno,e.colno);return t},parse:function(){return new r.NodeList(0,0,this.parseNodes())},parseAsRoot:function(){return new r.Root(0,0,this.parseNodes())}});e.exports={parse:function(e,t,n){var r=new a(i.lex(e,n));return void 0!==t&&(r.extensions=t),r.parseAsRoot()}}},function(e,t,n){\"use strict\";function i(e,t,n,i){return{type:e,value:t,lineno:n,colno:i}}function r(e,t){this.str=e,this.index=0,this.len=e.length,this.lineno=0,this.colno=0,this.in_code=!1,t=t||{};var n=t.tags||{};this.tags={BLOCK_START:n.blockStart||c,BLOCK_END:n.blockEnd||h,VARIABLE_START:n.variableStart||u,VARIABLE_END:n.variableEnd||p,COMMENT_START:n.commentStart||f,COMMENT_END:n.commentEnd||m},this.trimBlocks=!!t.trimBlocks,this.lstripBlocks=!!t.lstripBlocks}var s=n(1),o=\" \\n\t\\r\",a=\"()[]{}%*-+~/#,:|.<>=!\",l=\"0123456789\",c=\"{%\",h=\"%}\",u=\"{{\",p=\"}}\",f=\"{#\",m=\"#}\",d=\"string\",v=\"whitespace\",g=\"data\",y=\"block-start\",k=\"block-end\",x=\"variable-start\",b=\"variable-end\",E=\"comment\",w=\"left-paren\",T=\"right-paren\",L=\"left-bracket\",O=\"right-bracket\",_=\"left-curly\",A=\"right-curly\",S=\"operator\",N=\"comma\",C=\"colon\",B=\"tilde\",F=\"pipe\",K=\"int\",R=\"float\",I=\"boolean\",M=\"none\",P=\"symbol\",D=\"special\",j=\"regex\";r.prototype.nextToken=function(){var e,t=this.lineno,n=this.colno;if(this.in_code){var r=this.current();if(this.is_finished())return null;if('\"'===r||\"'\"===r)return i(d,this.parseString(r),t,n);if(e=this._extract(o))return i(v,e,t,n);if((e=this._extractString(this.tags.BLOCK_END))||(e=this._extractString(\"-\"+this.tags.BLOCK_END)))return this.in_code=!1,this.trimBlocks&&(r=this.current(),\"\\n\"===r?this.forward():\"\\r\"===r&&(this.forward(),r=this.current(),\"\\n\"===r?this.forward():this.back())),i(k,e,t,n);if(e=this._extractString(this.tags.VARIABLE_END))return this.in_code=!1,i(b,e,t,n);if(\"r\"===r&&\"/\"===this.str.charAt(this.index+1)){this.forwardN(2);for(var c=\"\";!this.is_finished();){if(\"/\"===this.current()&&\"\\\\\"!==this.previous()){this.forward();break}c+=this.current(),this.forward()}for(var h=[\"g\",\"i\",\"m\",\"y\"],u=\"\";!this.is_finished();){var p=-1!==h.indexOf(this.current());if(!p)break;u+=this.current(),this.forward()}return i(j,{body:c,flags:u},t,n)}if(-1!==a.indexOf(r)){this.forward();var f,m=[\"==\",\"===\",\"!=\",\"!==\",\"<=\",\">=\",\"//\",\"**\"],D=r+this.current();switch(-1!==s.indexOf(m,D)&&(this.forward(),r=D,-1!==s.indexOf(m,D+this.current())&&(r=D+this.current(),this.forward())),r){case\"(\":f=w;break;case\")\":f=T;break;case\"[\":f=L;break;case\"]\":f=O;break;case\"{\":f=_;break;case\"}\":f=A;break;case\",\":f=N;break;case\":\":f=C;break;case\"~\":f=B;break;case\"|\":f=F;break;default:f=S}return i(f,r,t,n)}if(e=this._extractUntil(o+a),e.match(/^[-+]?[0-9]+$/)){if(\".\"===this.current()){this.forward();var V=this._extract(l);return i(R,e+\".\"+V,t,n)}return i(K,e,t,n)}if(e.match(/^(true|false)$/))return i(I,e,t,n);if(\"none\"===e)return i(M,e,t,n);if(e)return i(P,e,t,n);throw new Error(\"Unexpected value while parsing: \"+e)}var U=this.tags.BLOCK_START.charAt(0)+this.tags.VARIABLE_START.charAt(0)+this.tags.COMMENT_START.charAt(0)+this.tags.COMMENT_END.charAt(0);if(this.is_finished())return null;if((e=this._extractString(this.tags.BLOCK_START+\"-\"))||(e=this._extractString(this.tags.BLOCK_START)))return this.in_code=!0,i(y,e,t,n);if(e=this._extractString(this.tags.VARIABLE_START))return this.in_code=!0,i(x,e,t,n);e=\"\";var W,G=!1;for(this._matches(this.tags.COMMENT_START)&&(G=!0,e=this._extractString(this.tags.COMMENT_START));null!==(W=this._extractUntil(U));){if(e+=W,(this._matches(this.tags.BLOCK_START)||this._matches(this.tags.VARIABLE_START)||this._matches(this.tags.COMMENT_START))&&!G){if(this.lstripBlocks&&this._matches(this.tags.BLOCK_START)&&this.colno>0&&this.colno<=e.length){var Y=e.slice(-this.colno);if(/^\\s+$/.test(Y)&&(e=e.slice(0,-this.colno),!e.length))return this.nextToken()}break}if(this._matches(this.tags.COMMENT_END)){if(!G)throw new Error(\"unexpected end of comment\");e+=this._extractString(this.tags.COMMENT_END);break}e+=this.current(),this.forward()}if(null===W&&G)throw new Error(\"expected end of comment, got end of file\");return i(G?E:g,e,t,n)},r.prototype.parseString=function(e){this.forward();for(var t=\"\";!this.is_finished()&&this.current()!==e;){var n=this.current();if(\"\\\\\"===n){switch(this.forward(),this.current()){case\"n\":t+=\"\\n\";break;case\"t\":t+=\"\t\";break;case\"r\":t+=\"\\r\";break;default:t+=this.current()}this.forward()}else t+=n,this.forward()}return this.forward(),t},r.prototype._matches=function(e){if(this.index+e.length>this.len)return null;var t=this.str.slice(this.index,this.index+e.length);return t===e},r.prototype._extractString=function(e){return this._matches(e)?(this.index+=e.length,e):null},r.prototype._extractUntil=function(e){return this._extractMatching(!0,e||\"\")},r.prototype._extract=function(e){return this._extractMatching(!1,e)},r.prototype._extractMatching=function(e,t){if(this.is_finished())return null;var n=t.indexOf(this.current());if(e&&-1===n||!e&&-1!==n){var i=this.current();this.forward();for(var r=t.indexOf(this.current());(e&&-1===r||!e&&-1!==r)&&!this.is_finished();)i+=this.current(),this.forward(),r=t.indexOf(this.current());return i}return\"\"},r.prototype._extractRegex=function(e){var t=this.currentStr().match(e);return t?(this.forwardN(t[0].length),t):null},r.prototype.is_finished=function(){return this.index>=this.len},r.prototype.forwardN=function(e){for(var t=0;e>t;t++)this.forward()},r.prototype.forward=function(){this.index++,\"\\n\"===this.previous()?(this.lineno++,this.colno=0):this.colno++},r.prototype.backN=function(e){for(var t=0;e>t;t++)this.back()},r.prototype.back=function(){if(this.index--,\"\\n\"===this.current()){this.lineno--;var e=this.src.lastIndexOf(\"\\n\",this.index-1);-1===e?this.colno=this.index:this.colno=this.index-e}else this.colno--},r.prototype.current=function(){return this.is_finished()?\"\":this.str.charAt(this.index)},r.prototype.currentStr=function(){return this.is_finished()?\"\":this.str.substr(this.index)},r.prototype.previous=function(){return this.str.charAt(this.index-1)},e.exports={lex:function(e,t){return new r(e,t)},TOKEN_STRING:d,TOKEN_WHITESPACE:v,TOKEN_DATA:g,TOKEN_BLOCK_START:y,TOKEN_BLOCK_END:k,TOKEN_VARIABLE_START:x,TOKEN_VARIABLE_END:b,TOKEN_COMMENT:E,TOKEN_LEFT_PAREN:w,TOKEN_RIGHT_PAREN:T,TOKEN_LEFT_BRACKET:L,TOKEN_RIGHT_BRACKET:O,TOKEN_LEFT_CURLY:_,TOKEN_RIGHT_CURLY:A,TOKEN_OPERATOR:S,TOKEN_COMMA:N,TOKEN_COLON:C,TOKEN_TILDE:B,TOKEN_PIPE:F,TOKEN_INT:K,TOKEN_FLOAT:R,TOKEN_BOOLEAN:I,TOKEN_NONE:M,TOKEN_SYMBOL:P,TOKEN_SPECIAL:D,TOKEN_REGEX:j}},function(e,t,n){(function(t){\"use strict\";function i(e,t,n){e instanceof t&&n.push(e),e instanceof a&&e.findAll(t,n)}function r(e,n){function i(e,n,i){for(var r=e.split(\"\\n\"),s=0;s<r.length;s++){if(r[s]&&(i&&s>0||!i))for(var o=0;n>o;o++)t.stdout.write(\" \");s===r.length-1?t.stdout.write(r[s]):t.stdout.write(r[s]+\"\\n\")}}if(n=n||0,i(e.typename+\": \",n),e instanceof c)i(\"\\n\"),s.each(e.children,function(e){r(e,n+2)});else if(e instanceof se)i(e.extName+\".\"+e.prop),i(\"\\n\"),e.args&&r(e.args,n+2),e.contentArgs&&s.each(e.contentArgs,function(e){r(e,n+2)});else{var o=null,l=null;if(e.iterFields(function(e,t){e instanceof a?(o=o||{},o[t]=e):(l=l||{},l[t]=e)}),l?i(JSON.stringify(l,null,2)+\"\\n\",null,!0):i(\"\\n\"),o)for(var h in o)r(o[h],n+2)}}var s=n(1),o=n(6),a=o.extend(\"Node\",{init:function(e,t){this.lineno=e,this.colno=t;for(var n=this.fields,i=0,r=n.length;r>i;i++){var s=n[i],o=arguments[i+2];void 0===o&&(o=null),this[s]=o}},findAll:function(e,t){t=t||[];var n,r;if(this instanceof c){var s=this.children;for(n=0,r=s.length;r>n;n++)i(s[n],e,t)}else{var o=this.fields;for(n=0,r=o.length;r>n;n++)i(this[o[n]],e,t)}return t},iterFields:function(e){s.each(this.fields,function(t){e(this[t],t)},this)}}),l=a.extend(\"Value\",{fields:[\"value\"]}),c=a.extend(\"NodeList\",{fields:[\"children\"],init:function(e,t,n){this.parent(e,t,n||[])},addChild:function(e){this.children.push(e)}}),h=c.extend(\"Root\"),u=l.extend(\"Literal\"),p=l.extend(\"Symbol\"),f=c.extend(\"Group\"),m=c.extend(\"Array\"),d=a.extend(\"Pair\",{fields:[\"key\",\"value\"]}),v=c.extend(\"Dict\"),g=a.extend(\"LookupVal\",{fields:[\"target\",\"val\"]}),y=a.extend(\"If\",{fields:[\"cond\",\"body\",\"else_\"]}),k=y.extend(\"IfAsync\"),x=a.extend(\"InlineIf\",{fields:[\"cond\",\"body\",\"else_\"]}),b=a.extend(\"For\",{fields:[\"arr\",\"name\",\"body\",\"else_\"]}),E=b.extend(\"AsyncEach\"),w=b.extend(\"AsyncAll\"),T=a.extend(\"Macro\",{fields:[\"name\",\"args\",\"body\"]}),L=T.extend(\"Caller\"),O=a.extend(\"Import\",{fields:[\"template\",\"target\",\"withContext\"]}),_=a.extend(\"FromImport\",{fields:[\"template\",\"names\",\"withContext\"],init:function(e,t,n,i,r){this.parent(e,t,n,i||new c,r)}}),A=a.extend(\"FunCall\",{fields:[\"name\",\"args\"]}),S=A.extend(\"Filter\"),N=S.extend(\"FilterAsync\",{fields:[\"name\",\"args\",\"symbol\"]}),C=v.extend(\"KeywordArgs\"),B=a.extend(\"Block\",{fields:[\"name\",\"body\"]}),F=a.extend(\"Super\",{fields:[\"blockName\",\"symbol\"]}),K=a.extend(\"TemplateRef\",{fields:[\"template\"]}),R=K.extend(\"Extends\"),I=a.extend(\"Include\",{fields:[\"template\",\"ignoreMissing\"]}),M=a.extend(\"Set\",{fields:[\"targets\",\"value\"]}),P=c.extend(\"Output\"),D=a.extend(\"Capture\",{fields:[\"body\"]}),j=u.extend(\"TemplateData\"),V=a.extend(\"UnaryOp\",{fields:[\"target\"]}),U=a.extend(\"BinOp\",{fields:[\"left\",\"right\"]}),W=U.extend(\"In\"),G=U.extend(\"Or\"),Y=U.extend(\"And\"),H=V.extend(\"Not\"),$=U.extend(\"Add\"),z=U.extend(\"Concat\"),X=U.extend(\"Sub\"),q=U.extend(\"Mul\"),J=U.extend(\"Div\"),Q=U.extend(\"FloorDiv\"),Z=U.extend(\"Mod\"),ee=U.extend(\"Pow\"),te=V.extend(\"Neg\"),ne=V.extend(\"Pos\"),ie=a.extend(\"Compare\",{fields:[\"expr\",\"ops\"]}),re=a.extend(\"CompareOperand\",{fields:[\"expr\",\"type\"]}),se=a.extend(\"CallExtension\",{fields:[\"extName\",\"prop\",\"args\",\"contentArgs\"],init:function(e,t,n,i){this.extName=e._name||e,this.prop=t,this.args=n||new c,this.contentArgs=i||[],this.autoescape=e.autoescape}}),oe=se.extend(\"CallExtensionAsync\");e.exports={Node:a,Root:h,NodeList:c,Value:l,Literal:u,Symbol:p,Group:f,Array:m,Pair:d,Dict:v,Output:P,Capture:D,TemplateData:j,If:y,IfAsync:k,InlineIf:x,For:b,AsyncEach:E,AsyncAll:w,Macro:T,Caller:L,Import:O,FromImport:_,FunCall:A,Filter:S,FilterAsync:N,KeywordArgs:C,Block:B,Super:F,Extends:R,Include:I,Set:M,LookupVal:g,BinOp:U,In:W,Or:G,And:Y,Not:H,Add:$,Concat:z,Sub:X,Mul:q,Div:J,FloorDiv:Q,Mod:Z,Pow:ee,Neg:te,Pos:ne,Compare:ie,CompareOperand:re,CallExtension:se,CallExtensionAsync:oe,printNodes:r}}).call(t,n(3))},function(e,t,n){\"use strict\";function i(){return\"hole_\"+d++}function r(e,t){for(var n=null,i=0;i<e.length;i++){var r=t(e[i]);r!==e[i]&&(n||(n=e.slice()),n[i]=r)}return n||e}function s(e,t,n){if(!(e instanceof f.Node))return e;if(!n){var i=t(e);if(i&&i!==e)return i}if(e instanceof f.NodeList){var o=r(e.children,function(e){return s(e,t,n)});o!==e.children&&(e=new f[e.typename](e.lineno,e.colno,o))}else if(e instanceof f.CallExtension){var a=s(e.args,t,n),l=r(e.contentArgs,function(e){return s(e,t,n)});(a!==e.args||l!==e.contentArgs)&&(e=new f[e.typename](e.extName,e.prop,a,l))}else{var c=e.fields.map(function(t){return e[t]}),h=r(c,function(e){return s(e,t,n)});h!==c&&(e=new f[e.typename](e.lineno,e.colno),h.forEach(function(t,n){e[e.fields[n]]=t}))}return n?t(e)||e:e}function o(e,t){return s(e,t,!0)}function a(e,t,n){var r=[],s=o(n?e[n]:e,function(e){if(e instanceof f.Block)return e;if(e instanceof f.Filter&&-1!==m.indexOf(t,e.name.value)||e instanceof f.CallExtensionAsync){var n=new f.Symbol(e.lineno,e.colno,i());return r.push(new f.FilterAsync(e.lineno,e.colno,e.name,e.args,n)),n}});return n?e[n]=s:e=s,r.length?(r.push(e),new f.NodeList(e.lineno,e.colno,r)):e}function l(e,t){return o(e,function(e){return e instanceof f.Output?a(e,t):e instanceof f.Set?a(e,t,\"value\"):e instanceof f.For?a(e,t,\"arr\"):e instanceof f.If?a(e,t,\"cond\"):e instanceof f.CallExtension?a(e,t,\"args\"):void 0})}function c(e){return s(e,function(e){if(e instanceof f.Block){var t=!1,n=i();e.body=s(e.body,function(e){return e instanceof f.FunCall&&\"super\"===e.name.value?(t=!0,new f.Symbol(e.lineno,e.colno,n)):void 0}),t&&e.body.children.unshift(new f.Super(0,0,e.name,new f.Symbol(0,0,n)))}})}function h(e){return o(e,function(e){if(e instanceof f.If||e instanceof f.For){var t=!1;if(s(e,function(e){return e instanceof f.FilterAsync||e instanceof f.IfAsync||e instanceof f.AsyncEach||e instanceof f.AsyncAll||e instanceof f.CallExtensionAsync?(t=!0,e):void 0}),t){if(e instanceof f.If)return new f.IfAsync(e.lineno,e.colno,e.cond,e.body,e.else_);if(e instanceof f.For)return new f.AsyncEach(e.lineno,e.colno,e.arr,e.name,e.body,e.else_)}}})}function u(e,t){return h(c(l(e,t)))}function p(e,t){return u(e,t||[])}var f=n(10),m=n(1),d=0;e.exports={transform:p}},function(e,t,n){\"use strict\";function i(e,t,n){return function(){var i,r,a=o(arguments),l=s(arguments);if(a>e.length){i=Array.prototype.slice.call(arguments,0,e.length);var c=Array.prototype.slice.call(arguments,i.length,a);for(r=0;r<c.length;r++)r<t.length&&(l[t[r]]=c[r]);i.push(l)}else if(a<e.length){for(i=Array.prototype.slice.call(arguments,0,a),r=a;r<e.length;r++){var h=e[r];i.push(l[h]),delete l[h]}i.push(l)}else i=arguments;return n.apply(this,i)}}function r(e){return e.__keywords=!0,e}function s(e){var t=e.length;if(t){var n=e[t-1];if(n&&n.hasOwnProperty(\"__keywords\"))return n}return{}}function o(e){var t=e.length;if(0===t)return 0;var n=e[t-1];return n&&n.hasOwnProperty(\"__keywords\")?t-1:t}function a(e){return\"string\"!=typeof e?e:(this.val=e,void(this.length=e.length))}function l(e,t){return e instanceof a?new a(t):t.toString()}function c(e){var t=typeof e;return\"string\"===t?new a(e):\"function\"!==t?e:function(){var t=e.apply(this,arguments);return\"string\"==typeof t?new a(t):t}}function h(e,t){return e=void 0!==e&&null!==e?e:\"\",!t||e instanceof a||(e=y.escape(e.toString())),e}function u(e,t,n){if(null===e||void 0===e)throw new y.TemplateError(\"attempted to output null or undefined value\",t+1,n+1);return e}function p(e,t){return e=e||{},\"function\"==typeof e[t]?function(){return e[t].apply(e,arguments)}:e[t]}function f(e,t,n,i){if(!e)throw new Error(\"Unable to call `\"+t+\"`, which is undefined or falsey\");if(\"function\"!=typeof e)throw new Error(\"Unable to call `\"+t+\"`, which is not a function\");return e.apply(n,i)}function m(e,t,n){var i=t.lookup(n);return void 0!==i&&null!==i?i:e.lookup(n)}function d(e,t,n){return e.lineno?e:new y.TemplateError(e,t,n)}function v(e,t,n,i){if(y.isArray(e)){var r=e.length;y.asyncIter(e,function(e,i,s){switch(t){case 1:n(e,i,r,s);break;case 2:n(e[0],e[1],i,r,s);break;case 3:n(e[0],e[1],e[2],i,r,s);break;default:e.push(i,s),n.apply(this,e)}},i)}else y.asyncFor(e,function(e,t,i,r,s){n(e,t,i,r,s)},i)}function g(e,t,n,i){function r(e,t){l++,a[e]=t,l===s&&i(null,a.join(\"\"))}var s,o,a,l=0;if(y.isArray(e))if(s=e.length,a=new Array(s),0===s)i(null,\"\");else for(o=0;o<e.length;o++){var c=e[o];switch(t){case 1:n(c,o,s,r);break;case 2:n(c[0],c[1],o,s,r);break;case 3:n(c[0],c[1],c[2],o,s,r);break;default:c.push(o,r),n.apply(this,c)}}else{var h=y.keys(e);if(s=h.length,a=new Array(s),0===s)i(null,\"\");else for(o=0;o<h.length;o++){var u=h[o];n(u,e[u],o,s,r)}}}var y=n(1),k=n(6),x=k.extend({init:function(e,t){this.variables={},this.parent=e,this.topLevel=!1,this.isolateWrites=t},set:function(e,t,n){var i=e.split(\".\"),r=this.variables,s=this;if(n&&(s=this.resolve(i[0],!0)))return void s.set(e,t);for(var o=0;o<i.length-1;o++){var a=i[o];r[a]||(r[a]={}),r=r[a]}r[i[i.length-1]]=t},get:function(e){var t=this.variables[e];return void 0!==t&&null!==t?t:null},lookup:function(e){var t=this.parent,n=this.variables[e];return void 0!==n&&null!==n?n:t&&t.lookup(e)},resolve:function(e,t){var n=t&&this.isolateWrites?void 0:this.parent,i=this.variables[e];return void 0!==i&&null!==i?this:n&&n.resolve(e)},push:function(e){return new x(this,e)},pop:function(){return this.parent}});a.prototype=Object.create(String.prototype,{length:{writable:!0,configurable:!0,value:0}}),a.prototype.valueOf=function(){return this.val},a.prototype.toString=function(){return this.val},e.exports={Frame:x,makeMacro:i,makeKeywordArgs:r,numArgs:o,suppressValue:h,ensureDefined:u,memberLookup:p,contextOrFrameLookup:m,callWrap:f,handleError:d,isArray:y.isArray,keys:y.keys,SafeString:a,copySafeness:l,markSafe:c,asyncEach:v,asyncAll:g,inOperator:y.inOperator}},function(e,t,n){\"use strict\";function i(e,t){return null===e||void 0===e||e===!1?t:e}var r=n(1),s=n(12),o={abs:function(e){return Math.abs(e)},batch:function(e,t,n){var i,r=[],s=[];for(i=0;i<e.length;i++)i%t===0&&s.length&&(r.push(s),s=[]),s.push(e[i]);if(s.length){if(n)for(i=s.length;t>i;i++)s.push(n);r.push(s)}return r},capitalize:function(e){e=i(e,\"\");var t=e.toLowerCase();return s.copySafeness(e,t.charAt(0).toUpperCase()+t.slice(1))},center:function(e,t){if(e=i(e,\"\"),t=t||80,e.length>=t)return e;var n=t-e.length,o=r.repeat(\" \",n/2-n%2),a=r.repeat(\" \",n/2);return s.copySafeness(e,o+e+a)},\"default\":function(e,t,n){return n?e?e:t:void 0!==e?e:t},dictsort:function(e,t,n){if(!r.isObject(e))throw new r.TemplateError(\"dictsort filter: val must be an object\");var i=[];for(var s in e)i.push([s,e[s]]);var o;if(void 0===n||\"key\"===n)o=0;else{if(\"value\"!==n)throw new r.TemplateError(\"dictsort filter: You can only sort by either key or value\");o=1}return i.sort(function(e,n){var i=e[o],s=n[o];return t||(r.isString(i)&&(i=i.toUpperCase()),\n-r.isString(s)&&(s=s.toUpperCase())),i>s?1:i===s?0:-1}),i},dump:function(e){return JSON.stringify(e)},escape:function(e){return e instanceof s.SafeString?e:s.markSafe(r.escape(e.toString()))},safe:function(e){return s.markSafe(e)},first:function(e){return e[0]},groupby:function(e,t){return r.groupBy(e,t)},indent:function(e,t,n){if(e=i(e,\"\"),\"\"===e)return\"\";t=t||4;for(var o=\"\",a=e.split(\"\\n\"),l=r.repeat(\" \",t),c=0;c<a.length;c++)o+=0!==c||n?l+a[c]+\"\\n\":a[c]+\"\\n\";return s.copySafeness(e,o)},join:function(e,t,n){return t=t||\"\",n&&(e=r.map(e,function(e){return e[n]})),e.join(t)},last:function(e){return e[e.length-1]},length:function(e){var t=i(e,\"\");return void 0!==t?\"function\"==typeof Map&&t instanceof Map||\"function\"==typeof Set&&t instanceof Set?t.size:!r.isObject(t)||t instanceof s.SafeString?t.length:Object.keys(t).length:0},list:function(e){if(r.isString(e))return e.split(\"\");if(r.isObject(e)){var t=[];if(Object.keys)t=Object.keys(e);else for(var n in e)t.push(n);return r.map(t,function(t){return{key:t,value:e[t]}})}if(r.isArray(e))return e;throw new r.TemplateError(\"list filter: type not iterable\")},lower:function(e){return e=i(e,\"\"),e.toLowerCase()},random:function(e){return e[Math.floor(Math.random()*e.length)]},rejectattr:function(e,t){return e.filter(function(e){return!e[t]})},selectattr:function(e,t){return e.filter(function(e){return!!e[t]})},replace:function(e,t,n,i){var r=e;if(t instanceof RegExp)return e.replace(t,n);\"undefined\"==typeof i&&(i=-1);var o=\"\";if(\"number\"==typeof t)t+=\"\";else if(\"string\"!=typeof t)return e;if(\"number\"==typeof e&&(e+=\"\"),\"string\"!=typeof e&&!(e instanceof s.SafeString))return e;if(\"\"===t)return o=n+e.split(\"\").join(n)+n,s.copySafeness(e,o);var a=e.indexOf(t);if(0===i||-1===a)return e;for(var l=0,c=0;a>-1&&(-1===i||i>c);)o+=e.substring(l,a)+n,l=a+t.length,c++,a=e.indexOf(t,l);return l<e.length&&(o+=e.substring(l)),s.copySafeness(r,o)},reverse:function(e){var t;return t=r.isString(e)?o.list(e):r.map(e,function(e){return e}),t.reverse(),r.isString(e)?s.copySafeness(e,t.join(\"\")):t},round:function(e,t,n){t=t||0;var i,r=Math.pow(10,t);return i=\"ceil\"===n?Math.ceil:\"floor\"===n?Math.floor:Math.round,i(e*r)/r},slice:function(e,t,n){for(var i=Math.floor(e.length/t),r=e.length%t,s=0,o=[],a=0;t>a;a++){var l=s+a*i;r>a&&s++;var c=s+(a+1)*i,h=e.slice(l,c);n&&a>=r&&h.push(n),o.push(h)}return o},sum:function(e,t,n){var i=0;\"number\"==typeof n&&(i+=n),t&&(e=r.map(e,function(e){return e[t]}));for(var s=0;s<e.length;s++)i+=e[s];return i},sort:s.makeMacro([\"value\",\"reverse\",\"case_sensitive\",\"attribute\"],[],function(e,t,n,i){return e=r.map(e,function(e){return e}),e.sort(function(e,s){var o,a;return i?(o=e[i],a=s[i]):(o=e,a=s),!n&&r.isString(o)&&r.isString(a)&&(o=o.toLowerCase(),a=a.toLowerCase()),a>o?t?1:-1:o>a?t?-1:1:0}),e}),string:function(e){return s.copySafeness(e,e)},striptags:function(e,t){e=i(e,\"\"),t=t||!1;var n=/<\\/?([a-z][a-z0-9]*)\\b[^>]*>|<!--[\\s\\S]*?-->/gi,r=o.trim(e.replace(n,\"\")),a=\"\";return a=t?r.replace(/^ +| +$/gm,\"\").replace(/ +/g,\" \").replace(/(\\r\\n)/g,\"\\n\").replace(/\\n\\n\\n+/g,\"\\n\\n\"):r.replace(/\\s+/gi,\" \"),s.copySafeness(e,a)},title:function(e){e=i(e,\"\");for(var t=e.split(\" \"),n=0;n<t.length;n++)t[n]=o.capitalize(t[n]);return s.copySafeness(e,t.join(\" \"))},trim:function(e){return s.copySafeness(e,e.replace(/^\\s*|\\s*$/g,\"\"))},truncate:function(e,t,n,r){var o=e;if(e=i(e,\"\"),t=t||255,e.length<=t)return e;if(n)e=e.substring(0,t);else{var a=e.lastIndexOf(\" \",t);-1===a&&(a=t),e=e.substring(0,a)}return e+=void 0!==r&&null!==r?r:\"...\",s.copySafeness(o,e)},upper:function(e){return e=i(e,\"\"),e.toUpperCase()},urlencode:function(e){var t=encodeURIComponent;if(r.isString(e))return t(e);var n;if(r.isArray(e))n=e.map(function(e){return t(e[0])+\"=\"+t(e[1])});else{n=[];for(var i in e)e.hasOwnProperty(i)&&n.push(t(i)+\"=\"+t(e[i]))}return n.join(\"&\")},urlize:function(e,t,n){isNaN(t)&&(t=1/0);var i=n===!0?' rel=\"nofollow\"':\"\",r=/^(?:\\(|<|&lt;)?(.*?)(?:\\.|,|\\)|\\n|&gt;)?$/,s=/^[\\w.!#$%&'*+\\-\\/=?\\^`{|}~]+@[a-z\\d\\-]+(\\.[a-z\\d\\-]+)+$/i,o=/^https?:\\/\\/.*$/,a=/^www\\./,l=/\\.(?:org|net|com)(?:\\:|\\/|$)/,c=e.split(/(\\s+)/).filter(function(e){return e&&e.length}).map(function(e){var n=e.match(r),c=n&&n[1]||e;return o.test(c)?'<a href=\"'+c+'\"'+i+\">\"+c.substr(0,t)+\"</a>\":a.test(c)?'<a href=\"http://'+c+'\"'+i+\">\"+c.substr(0,t)+\"</a>\":s.test(c)?'<a href=\"mailto:'+c+'\">'+c+\"</a>\":l.test(c)?'<a href=\"http://'+c+'\"'+i+\">\"+c.substr(0,t)+\"</a>\":e});return c.join(\"\")},wordcount:function(e){e=i(e,\"\");var t=e?e.match(/\\w+/g):null;return t?t.length:null},\"float\":function(e,t){var n=parseFloat(e);return isNaN(n)?t:n},\"int\":function(e,t){var n=parseInt(e,10);return isNaN(n)?t:n}};o.d=o[\"default\"],o.e=o.escape,e.exports=o},function(e,t,n){\"use strict\";var i=n(15),r=n(16),s=i.extend({init:function(e,t){this.baseURL=e||\".\",t=t||{},this.useCache=!!t.useCache,this.async=!!t.async},resolve:function(e,t){throw new Error(\"relative templates not support in the browser yet\")},getSource:function(e,t){var n,i=this.useCache;return this.fetch(this.baseURL+\"/\"+e,function(r,s){if(r)if(t)t(r.content);else{if(404!==r.status)throw r.content;n=null}else n={src:s,path:e,noCache:!i},t&&t(null,n)}),n},fetch:function(e,t){var n,i=!0;window.XMLHttpRequest?n=new XMLHttpRequest:window.ActiveXObject&&(n=new ActiveXObject(\"Microsoft.XMLHTTP\")),n.onreadystatechange=function(){4===n.readyState&&i&&(i=!1,0===n.status||200===n.status?t(null,n.responseText):t({status:n.status,content:n.responseText}))},e+=(-1===e.indexOf(\"?\")?\"?\":\"&\")+\"s=\"+(new Date).getTime(),n.open(\"GET\",e,this.async),n.send()}});e.exports={WebLoader:s,PrecompiledLoader:r}},function(e,t,n){\"use strict\";var i=n(3),r=n(6),s=n(1),o=r.extend({on:function(e,t){this.listeners=this.listeners||{},this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(t)},emit:function(e){var t=Array.prototype.slice.call(arguments,1);this.listeners&&this.listeners[e]&&s.each(this.listeners[e],function(e){e.apply(null,t)})},resolve:function(e,t){return i.resolve(i.dirname(e),t)},isRelative:function(e){return 0===e.indexOf(\"./\")||0===e.indexOf(\"../\")}});e.exports=o},function(e,t,n){\"use strict\";var i=n(15),r=i.extend({init:function(e){this.precompiled=e||{}},getSource:function(e){return this.precompiled[e]?{src:{type:\"code\",obj:this.precompiled[e]},path:e}:null}});e.exports=r},function(e,t){\"use strict\";function n(e){var t=-1;return{current:null,reset:function(){t=-1,this.current=null},next:function(){return t++,t>=e.length&&(t=0),this.current=e[t],this.current}}}function i(e){e=e||\",\";var t=!0;return function(){var n=t?\"\":e;return t=!1,n}}function r(){return{range:function(e,t,n){\"undefined\"==typeof t?(t=e,e=0,n=1):n||(n=1);var i,r=[];if(n>0)for(i=e;t>i;i+=n)r.push(i);else for(i=e;i>t;i+=n)r.push(i);return r},cycler:function(){return n(Array.prototype.slice.call(arguments))},joiner:function(e){return i(e)}}}e.exports=r},function(e,t){function n(){\"use strict\";var e=this.runtime,t=this.lib,n=e.contextOrFrameLookup;e.contextOrFrameLookup=function(e,t,i){var r=n.apply(this,arguments);if(void 0===r)switch(i){case\"True\":return!0;case\"False\":return!1;case\"None\":return null}return r};var i=e.memberLookup,r={pop:function(e){if(void 0===e)return this.pop();if(e>=this.length||0>e)throw new Error(\"KeyError\");return this.splice(e,1)},remove:function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return this.splice(t,1);throw new Error(\"ValueError\")},count:function(e){for(var t=0,n=0;n<this.length;n++)this[n]===e&&t++;return t},index:function(e){var t;if(-1===(t=this.indexOf(e)))throw new Error(\"ValueError\");return t},find:function(e){return this.indexOf(e)},insert:function(e,t){return this.splice(e,0,t)}},s={items:function(){var e=[];for(var t in this)e.push([t,this[t]]);return e},values:function(){var e=[];for(var t in this)e.push(this[t]);return e},keys:function(){var e=[];for(var t in this)e.push(t);return e},get:function(e,t){var n=this[e];return void 0===n&&(n=t),n},has_key:function(e){return this.hasOwnProperty(e)},pop:function(e,t){var n=this[e];if(void 0===n&&void 0!==t)n=t;else{if(void 0===n)throw new Error(\"KeyError\");delete this[e]}return n},popitem:function(){for(var e in this){var t=this[e];return delete this[e],[e,t]}throw new Error(\"KeyError\")},setdefault:function(e,t){return e in this?this[e]:(void 0===t&&(t=null),this[e]=t)},update:function(e){for(var t in e)this[t]=e[t];return null}};s.iteritems=s.items,s.itervalues=s.values,s.iterkeys=s.keys,e.memberLookup=function(e,n,o){return e=e||{},t.isArray(e)&&r.hasOwnProperty(n)?function(){return r[n].apply(e,arguments)}:t.isObject(e)&&s.hasOwnProperty(n)?function(){return s[n].apply(e,arguments)}:i.apply(this,arguments)}}e.exports=n}])});\n\\ No newline at end of file\n+/*! For license information please see nunjucks.min.js.LICENSE.txt */\n+!function(t,n){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=n():\"function\"==typeof define&&define.amd?define([],n):\"object\"==typeof exports?exports.nunjucks=n():t.nunjucks=n()}(self,function(){return function(){var t={5:function(){},7:function(t){function n(){this.t=this.t||{},this.i=this.i||void 0}function i(t){return\"function\"==typeof t}function r(t){return\"object\"==typeof t&&null!==t}function e(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype.t=void 0,n.prototype.i=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(\"number\"!=typeof t||t<0||isNaN(t))throw TypeError(\"n must be a positive number\");return this.i=t,this},n.prototype.emit=function(t){var n,s,o,u,h,f;if(this.t||(this.t={}),\"error\"===t&&(!this.t.error||r(this.t.error)&&!this.t.error.length)){if((n=arguments[1])instanceof Error)throw n;var c=new Error('Uncaught, unspecified \"error\" event. ('+n+\")\");throw c.context=n,c}if(e(s=this.t[t]))return!1;if(i(s))switch(arguments.length){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),s.apply(this,u)}else if(r(s))for(u=Array.prototype.slice.call(arguments,1),o=(f=s.slice()).length,h=0;h<o;h++)f[h].apply(this,u);return!0},n.prototype.addListener=function(t,s){var o;if(!i(s))throw TypeError(\"listener must be a function\");return this.t||(this.t={}),this.t.newListener&&this.emit(\"newListener\",t,i(s.listener)?s.listener:s),this.t[t]?r(this.t[t])?this.t[t].push(s):this.t[t]=[this.t[t],s]:this.t[t]=s,r(this.t[t])&&!this.t[t].warned&&(o=e(this.i)?n.defaultMaxListeners:this.i)&&o>0&&this.t[t].length>o&&(this.t[t].warned=!0,console.error(\"(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.\",this.t[t].length),\"function\"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,n){if(!i(n))throw TypeError(\"listener must be a function\");var r=!1;function e(){this.removeListener(t,e),r||(r=!0,n.apply(this,arguments))}return e.listener=n,this.on(t,e),this},n.prototype.removeListener=function(t,n){var e,s,o,u;if(!i(n))throw TypeError(\"listener must be a function\");if(!this.t||!this.t[t])return this;if(o=(e=this.t[t]).length,s=-1,e===n||i(e.listener)&&e.listener===n)delete this.t[t],this.t.removeListener&&this.emit(\"removeListener\",t,n);else if(r(e)){for(u=o;u-- >0;)if(e[u]===n||e[u].listener&&e[u].listener===n){s=u;break}if(s<0)return this;1===e.length?(e.length=0,delete this.t[t]):e.splice(s,1),this.t.removeListener&&this.emit(\"removeListener\",t,n)}return this},n.prototype.removeAllListeners=function(t){var n,r;if(!this.t)return this;if(!this.t.removeListener)return 0===arguments.length?this.t={}:this.t[t]&&delete this.t[t],this;if(0===arguments.length){for(n in this.t)\"removeListener\"!==n&&this.removeAllListeners(n);return this.removeAllListeners(\"removeListener\"),this.t={},this}if(i(r=this.t[t]))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this.t[t],this},n.prototype.listeners=function(t){return this.t&&this.t[t]?i(this.t[t])?[this.t[t]]:this.t[t].slice():[]},n.prototype.listenerCount=function(t){if(this.t){var n=this.t[t];if(i(n))return 1;if(n)return n.length}return 0},n.listenerCount=function(t,n){return t.listenerCount(n)}},153:function(t,n,i){\"use strict\";var r=i(449),e=i(434),s=t.exports={};function o(t,n){return null==t||!1===t?n:t}function u(t){return t!=t}function h(t){var n=(t=o(t,\"\")).toLowerCase();return e.copySafeness(t,n.charAt(0).toUpperCase()+n.slice(1))}function f(t){if(r.isString(t))return t.split(\"\");if(r.isObject(t))return r.o(t||{}).map(function(t){return{key:t[0],value:t[1]}});if(r.isArray(t))return t;throw new r.TemplateError(\"list filter: type not iterable\")}function c(t){return function(n,i,e){void 0===i&&(i=\"truthy\");var s=this,o=s.env.getTest(i);return r.toArray(n).filter(function(n){return o.call(s,n,e)===t})}}function a(t){return e.copySafeness(t,t.replace(/^\\s*|\\s*$/g,\"\"))}s.abs=Math.abs,s.batch=function(t,n,i){var r,e=[],s=[];for(r=0;r<t.length;r++)r%n===0&&s.length&&(e.push(s),s=[]),s.push(t[r]);if(s.length){if(i)for(r=s.length;r<n;r++)s.push(i);e.push(s)}return e},s.capitalize=h,s.center=function(t,n){if(n=n||80,(t=o(t,\"\")).length>=n)return t;var i=n-t.length,s=r.repeat(\" \",i/2-i%2),u=r.repeat(\" \",i/2);return e.copySafeness(t,s+t+u)},s.default=function(t,n,i){return i?t||n:void 0!==t?t:n},s.dictsort=function(t,n,i){if(!r.isObject(t))throw new r.TemplateError(\"dictsort filter: val must be an object\");var e,s=[];for(var o in t)s.push([o,t[o]]);if(void 0===i||\"key\"===i)e=0;else{if(\"value\"!==i)throw new r.TemplateError(\"dictsort filter: You can only sort by either key or value\");e=1}return s.sort(function(t,i){var s=t[e],o=i[e];return n||(r.isString(s)&&(s=s.toUpperCase()),r.isString(o)&&(o=o.toUpperCase())),s>o?1:s===o?0:-1}),s},s.dump=function(t,n){return JSON.stringify(t,null,n)},s.escape=function(t){return t instanceof e.SafeString?t:(t=null==t?\"\":t,e.markSafe(r.escape(t.toString())))},s.safe=function(t){return t instanceof e.SafeString?t:(t=null==t?\"\":t,e.markSafe(t.toString()))},s.first=function(t){return t[0]},s.forceescape=function(t){return t=null==t?\"\":t,e.markSafe(r.escape(t.toString()))},s.groupby=function(t,n){return r.groupBy(t,n,this.env.opts.throwOnUndefined)},s.indent=function(t,n,i){if(\"\"===(t=o(t,\"\")))return\"\";n=n||4;var s=t.split(\"\\n\"),u=r.repeat(\" \",n),h=s.map(function(t,n){return 0!==n||i?\"\"+u+t:t}).join(\"\\n\");return e.copySafeness(t,h)},s.join=function(t,n,i){return n=n||\"\",i&&(t=r.map(t,function(t){return t[i]})),t.join(n)},s.last=function(t){return t[t.length-1]},s.length=function(t){var n=o(t,\"\");return void 0!==n?\"function\"==typeof Map&&n instanceof Map||\"function\"==typeof Set&&n instanceof Set?n.size:!r.isObject(n)||n instanceof e.SafeString?n.length:r.keys(n).length:0},s.list=f,s.lower=function(t){return(t=o(t,\"\")).toLowerCase()},s.nl2br=function(t){return null==t?\"\":e.copySafeness(t,t.replace(/\\r\\n|\\n/g,\"<br />\\n\"))},s.random=function(t){return t[Math.floor(Math.random()*t.length)]},s.reject=c(!1),s.rejectattr=function(t,n){return t.filter(function(t){return!t[n]})},s.select=c(!0),s.selectattr=function(t,n){return t.filter(function(t){return!!t[n]})},s.replace=function(t,n,i,r){var s=t;if(n instanceof RegExp)return t.replace(n,i);void 0===r&&(r=-1);var o=\"\";if(\"number\"==typeof n)n=\"\"+n;else if(\"string\"!=typeof n)return t;if(\"number\"==typeof t&&(t=\"\"+t),\"string\"!=typeof t&&!(t instanceof e.SafeString))return t;if(\"\"===n)return o=i+t.split(\"\").join(i)+i,e.copySafeness(t,o);var u=t.indexOf(n);if(0===r||-1===u)return t;for(var h=0,f=0;u>-1&&(-1===r||f<r);)o+=t.substring(h,u)+i,h=u+n.length,f++,u=t.indexOf(n,h);return h<t.length&&(o+=t.substring(h)),e.copySafeness(s,o)},s.reverse=function(t){var n;return(n=r.isString(t)?f(t):r.map(t,function(t){return t})).reverse(),r.isString(t)?e.copySafeness(t,n.join(\"\")):n},s.round=function(t,n,i){n=n||0;var r=Math.pow(10,n);return(\"ceil\"===i?Math.ceil:\"floor\"===i?Math.floor:Math.round)(t*r)/r},s.slice=function(t,n,i){for(var r=Math.floor(t.length/n),e=t.length%n,s=[],o=0,u=0;u<n;u++){var h=o+u*r;u<e&&o++;var f=o+(u+1)*r,c=t.slice(h,f);i&&u>=e&&c.push(i),s.push(c)}return s},s.sum=function(t,n,i){return void 0===i&&(i=0),n&&(t=r.map(t,function(t){return t[n]})),i+t.reduce(function(t,n){return t+n},0)},s.sort=e.makeMacro([\"value\",\"reverse\",\"case_sensitive\",\"attribute\"],[],function(t,n,i,e){var s=this,o=r.map(t,function(t){return t}),u=r.getAttrGetter(e);return o.sort(function(t,o){var h=e?u(t):t,f=e?u(o):o;if(s.env.opts.throwOnUndefined&&e&&(void 0===h||void 0===f))throw new TypeError('sort: attribute \"'+e+'\" resolved to undefined');return!i&&r.isString(h)&&r.isString(f)&&(h=h.toLowerCase(),f=f.toLowerCase()),h<f?n?1:-1:h>f?n?-1:1:0}),o}),s.string=function(t){return e.copySafeness(t,t)},s.striptags=function(t,n){var i=a((t=o(t,\"\")).replace(/<\\/?([a-z][a-z0-9]*)\\b[^>]*>|<!--[\\s\\S]*?-->/gi,\"\")),r=\"\";return r=n?i.replace(/^ +| +$/gm,\"\").replace(/ +/g,\" \").replace(/(\\r\\n)/g,\"\\n\").replace(/\\n\\n\\n+/g,\"\\n\\n\"):i.replace(/\\s+/gi,\" \"),e.copySafeness(t,r)},s.title=function(t){var n=(t=o(t,\"\")).split(\" \").map(function(t){return h(t)});return e.copySafeness(t,n.join(\" \"))},s.trim=a,s.truncate=function(t,n,i,r){var s=t;if(n=n||255,(t=o(t,\"\")).length<=n)return t;if(i)t=t.substring(0,n);else{var u=t.lastIndexOf(\" \",n);-1===u&&(u=n),t=t.substring(0,u)}return t+=null!=r?r:\"...\",e.copySafeness(s,t)},s.upper=function(t){return(t=o(t,\"\")).toUpperCase()},s.urlencode=function(t){var n=encodeURIComponent;return r.isString(t)?n(t):(r.isArray(t)?t:r.o(t)).map(function(t){var i=t[0],r=t[1];return n(i)+\"=\"+n(r)}).join(\"&\")};var l=/^(?:\\(|<|&lt;)?(.*?)(?:\\.|,|\\)|\\n|&gt;)?$/,v=/^[\\w.!#$%&'*+\\-\\/=?\\^`{|}~]+@[a-z\\d\\-]+(\\.[a-z\\d\\-]+)+$/i,p=/^https?:\\/\\/.*$/,d=/^www\\./,w=/\\.(?:org|net|com)(?:\\:|\\/|$)/;s.urlize=function(t,n,i){u(n)&&(n=1/0);var r=!0===i?' rel=\"nofollow\"':\"\";return t.split(/(\\s+)/).filter(function(t){return t&&t.length}).map(function(t){var i=t.match(l),e=i?i[1]:t,s=e.substr(0,n);return p.test(e)?'<a href=\"'+e+'\"'+r+\">\"+s+\"</a>\":d.test(e)?'<a href=\"http://'+e+'\"'+r+\">\"+s+\"</a>\":v.test(e)?'<a href=\"mailto:'+e+'\">'+e+\"</a>\":w.test(e)?'<a href=\"http://'+e+'\"'+r+\">\"+s+\"</a>\":t}).join(\"\")},s.wordcount=function(t){var n=(t=o(t,\"\"))?t.match(/\\w+/g):null;return n?n.length:null},s.float=function(t,n){var i=parseFloat(t);return u(i)?n:i};var m=e.makeMacro([\"value\",\"default\",\"base\"],[],function(t,n,i){void 0===i&&(i=10);var r=parseInt(t,i);return u(r)?n:r});s.int=m,s.d=s.default,s.e=s.escape},211:function(t,n){var i;!function(){\"use strict\";var r=function(){var t=Array.prototype.slice.call(arguments);\"function\"==typeof t[0]&&t[0].apply(null,t.splice(1))},e=function(t){\"function\"==typeof setImmediate?setImmediate(t):\"undefined\"!=typeof process&&process.nextTick?process.nextTick(t):setTimeout(t,0)},s=Array.isArray||function(t){return\"[object Array]\"===Object.prototype.toString.call(t)},o=function(t,n,i){var o=i?e:r;if(n=n||function(){},!s(t)){var u=new Error(\"First argument to waterfall must be an array of functions\");return n(u)}if(!t.length)return n();var h=function(t){return function(i){if(i)n.apply(null,arguments),n=function(){};else{var r=Array.prototype.slice.call(arguments,1),e=t.next();e?r.push(h(e)):r.push(n),o(function(){t.apply(null,r)})}}};h(function(t){var n=function(i){var r=function(){return t.length&&t[i].apply(null,arguments),r.next()};return r.next=function(){return i<t.length-1?n(i+1):null},r};return n(0)}(t))()};void 0===(i=function(){return o}.apply(n,[]))||(t.exports=i)}()},236:function(t,n,i){\"use strict\";var r=i(795),e=[],s=[],o=r.makeRequestCallFromTimer(function(){if(s.length)throw s.shift()});function u(t){var n;(n=e.length?e.pop():new h).task=t,r(n)}function h(){this.task=null}t.exports=u,h.prototype.call=function(){try{this.task.call()}catch(t){u.onerror?u.onerror(t):(s.push(t),o())}finally{this.task=null,e[e.length]=this}}},333:function(t,n,i){\"use strict\";var r=i(883),e=i(449),s=0;function o(){return\"hole_\"+s++}function u(t,n){for(var i=null,r=0;r<t.length;r++){var e=n(t[r]);e!==t[r]&&(i||(i=t.slice()),i[r]=e)}return i||t}function h(t,n,i){if(!(t instanceof r.Node))return t;if(!i){var e=n(t);if(e&&e!==t)return e}if(t instanceof r.NodeList){var s=u(t.children,function(t){return h(t,n,i)});s!==t.children&&(t=new r[t.typename](t.lineno,t.colno,s))}else if(t instanceof r.CallExtension){var o=h(t.args,n,i),f=u(t.contentArgs,function(t){return h(t,n,i)});o===t.args&&f===t.contentArgs||(t=new r[t.typename](t.extName,t.prop,o,f))}else{var c=t.fields.map(function(n){return t[n]}),a=u(c,function(t){return h(t,n,i)});a!==c&&(t=new r[t.typename](t.lineno,t.colno),a.forEach(function(n,i){t[t.fields[i]]=n}))}return i&&n(t)||t}function f(t,n){return h(t,n,!0)}function c(t,n,i){var s=[],u=f(i?t[i]:t,function(t){var i;return t instanceof r.Block?t:((t instanceof r.Filter&&-1!==e.indexOf(n,t.name.value)||t instanceof r.CallExtensionAsync)&&(i=new r.Symbol(t.lineno,t.colno,o()),s.push(new r.FilterAsync(t.lineno,t.colno,t.name,t.args,i))),i)});return i?t[i]=u:t=u,s.length?(s.push(t),new r.NodeList(t.lineno,t.colno,s)):t}function a(t,n){return function(t){return f(t,function(t){if(t instanceof r.If||t instanceof r.For){var n=!1;if(h(t,function(t){if(t instanceof r.FilterAsync||t instanceof r.IfAsync||t instanceof r.AsyncEach||t instanceof r.AsyncAll||t instanceof r.CallExtensionAsync)return n=!0,t}),n){if(t instanceof r.If)return new r.IfAsync(t.lineno,t.colno,t.cond,t.body,t.else_);if(t instanceof r.For&&!(t instanceof r.AsyncAll))return new r.AsyncEach(t.lineno,t.colno,t.arr,t.name,t.body,t.else_)}}})}(function(t){return h(t,function(t){if(t instanceof r.Block){var n=!1,i=o();t.body=h(t.body,function(t){if(t instanceof r.FunCall&&\"super\"===t.name.value)return n=!0,new r.Symbol(t.lineno,t.colno,i)}),n&&t.body.children.unshift(new r.Super(0,0,t.name,new r.Symbol(0,0,i)))}})}(function(t,n){return f(t,function(t){return t instanceof r.Output?c(t,n):t instanceof r.Set?c(t,n,\"value\"):t instanceof r.For?c(t,n,\"arr\"):t instanceof r.If?c(t,n,\"cond\"):t instanceof r.CallExtension?c(t,n,\"args\"):void 0})}(t,n)))}t.exports={transform:function(t,n){return a(t,n||[])}}},423:function(t,n,i){\"use strict\";var r=i(434).SafeString;n.callable=function(t){return\"function\"==typeof t},n.defined=function(t){return void 0!==t},n.divisibleby=function(t,n){return t%n===0},n.escaped=function(t){return t instanceof r},n.equalto=function(t,n){return t===n},n.eq=n.equalto,n.sameas=n.equalto,n.even=function(t){return t%2==0},n.falsy=function(t){return!t},n.ge=function(t,n){return t>=n},n.greaterthan=function(t,n){return t>n},n.gt=n.greaterthan,n.le=function(t,n){return t<=n},n.lessthan=function(t,n){return t<n},n.lt=n.lessthan,n.lower=function(t){return t.toLowerCase()===t},n.ne=function(t,n){return t!==n},n.null=function(t){return null===t},n.number=function(t){return\"number\"==typeof t},n.odd=function(t){return t%2==1},n.string=function(t){return\"string\"==typeof t},n.truthy=function(t){return!!t},n.undefined=function(t){return void 0===t},n.upper=function(t){return t.toUpperCase()===t},n.iterable=function(t){return\"undefined\"!=typeof Symbol?!!t[Symbol.iterator]:Array.isArray(t)||\"string\"==typeof t},n.mapping=function(t){var n=null!=t&&\"object\"==typeof t&&!Array.isArray(t);return Set?n&&!(t instanceof Set):n}},433:function(t){t.exports=function(){\"use strict\";var t,n,i=this.runtime,r=this.lib,e=this.compiler.Compiler,s=this.parser.Parser,o=this.nodes,u=this.lexer,h=i.contextOrFrameLookup,f=i.memberLookup;function c(t){return{index:t.index,lineno:t.lineno,colno:t.colno}}if(e&&(t=e.prototype.assertType),s&&(n=s.prototype.parseAggregate),i.contextOrFrameLookup=function(t,n,i){var r=h.apply(this,arguments);if(void 0!==r)return r;switch(i){case\"True\":return!0;case\"False\":return!1;case\"None\":return null;default:return}},o&&e&&s){var a=o.Node.extend(\"Slice\",{fields:[\"start\",\"stop\",\"step\"],init:function(t,n,i,r,e){i=i||new o.Literal(t,n,null),r=r||new o.Literal(t,n,null),e=e||new o.Literal(t,n,1),this.parent(t,n,i,r,e)}});e.prototype.assertType=function(n){n instanceof a||t.apply(this,arguments)},e.prototype.compileSlice=function(t,n){this.u(\"(\"),this.h(t.start,n),this.u(\"),(\"),this.h(t.stop,n),this.u(\"),(\"),this.h(t.step,n),this.u(\")\")},s.prototype.parseAggregate=function(){var t=this,i=c(this.tokens);i.colno--,i.index--;try{return n.apply(this)}catch(n){var e=c(this.tokens),s=function(){return r.l(t.tokens,e),n};r.l(this.tokens,i),this.peeked=!1;var h=this.peekToken();if(h.type!==u.TOKEN_LEFT_BRACKET)throw s();this.nextToken();for(var f=new a(h.lineno,h.colno),l=!1,v=0;v<=f.fields.length&&!this.skip(u.TOKEN_RIGHT_BRACKET);v++){if(v===f.fields.length){if(!l)break;this.fail(\"parseSlice: too many slice components\",h.lineno,h.colno)}this.skip(u.TOKEN_COLON)?l=!0:(f[f.fields[v]]=this.parseExpression(),l=this.skip(u.TOKEN_COLON)||l)}if(!l)throw s();return new o.Array(h.lineno,h.colno,[f])}}}function l(t,n,r,e){t=t||[],null===n&&(n=e<0?t.length-1:0),null===r?r=e<0?-1:t.length:r<0&&(r+=t.length),n<0&&(n+=t.length);for(var s=[],o=n;!(o<0||o>t.length)&&!(e>0&&o>=r)&&!(e<0&&o<=r);o+=e)s.push(i.memberLookup(t,o));return s}function v(t,n){return Object.prototype.hasOwnProperty.call(t,n)}var p={pop:function(t){if(void 0===t)return this.pop();if(t>=this.length||t<0)throw new Error(\"KeyError\");return this.splice(t,1)},append:function(t){return this.push(t)},remove:function(t){for(var n=0;n<this.length;n++)if(this[n]===t)return this.splice(n,1);throw new Error(\"ValueError\")},count:function(t){for(var n=0,i=0;i<this.length;i++)this[i]===t&&n++;return n},index:function(t){var n;if(-1===(n=this.indexOf(t)))throw new Error(\"ValueError\");return n},find:function(t){return this.indexOf(t)},insert:function(t,n){return this.splice(t,0,n)}},d={items:function(){return r.o(this)},values:function(){return r.v(this)},keys:function(){return r.keys(this)},get:function(t,n){var i=this[t];return void 0===i&&(i=n),i},has_key:function(t){return v(this,t)},pop:function(t,n){var i=this[t];if(void 0===i&&void 0!==n)i=n;else{if(void 0===i)throw new Error(\"KeyError\");delete this[t]}return i},popitem:function(){var t=r.keys(this);if(!t.length)throw new Error(\"KeyError\");var n=t[0],i=this[n];return delete this[n],[n,i]},setdefault:function(t,n){return void 0===n&&(n=null),t in this||(this[t]=n),this[t]},update:function(t){return r.l(this,t),null}};return d.iteritems=d.items,d.itervalues=d.values,d.iterkeys=d.keys,i.memberLookup=function(t,n,i){return 4===arguments.length?l.apply(this,arguments):(t=t||{},r.isArray(t)&&v(p,n)?p[n].bind(t):r.isObject(t)&&v(d,n)?d[n].bind(t):f.apply(this,arguments))},function(){i.contextOrFrameLookup=h,i.memberLookup=f,e&&(e.prototype.assertType=t),s&&(s.prototype.parseAggregate=n)}}},434:function(t,n,i){\"use strict\";var r=i(449),e=Array.from,s=\"function\"==typeof Symbol&&Symbol.iterator&&\"function\"==typeof e,o=function(){function t(t,n){this.variables=Object.create(null),this.parent=t,this.topLevel=!1,this.isolateWrites=n}var n=t.prototype;return n.set=function(t,n,i){var r=t.split(\".\"),e=this.variables,s=this;if(i&&(s=this.resolve(r[0],!0)))s.set(t,n);else{for(var o=0;o<r.length-1;o++){var u=r[o];e[u]||(e[u]={}),e=e[u]}e[r[r.length-1]]=n}},n.get=function(t){var n=this.variables[t];return void 0!==n?n:null},n.lookup=function(t){var n=this.parent,i=this.variables[t];return void 0!==i?i:n&&n.lookup(t)},n.resolve=function(t,n){var i=n&&this.isolateWrites?void 0:this.parent;return void 0!==this.variables[t]?this:i&&i.resolve(t)},n.push=function(n){return new t(this,n)},n.pop=function(){return this.parent},t}();function u(t){return t&&Object.prototype.hasOwnProperty.call(t,\"__keywords\")}function h(t){var n=t.length;return 0===n?0:u(t[n-1])?n-1:n}function f(t){if(\"string\"!=typeof t)return t;this.val=t,this.length=t.length}f.prototype=Object.create(String.prototype,{length:{writable:!0,configurable:!0,value:0}}),f.prototype.valueOf=function(){return this.val},f.prototype.toString=function(){return this.val},t.exports={Frame:o,makeMacro:function(t,n,i){return function(){for(var r=arguments.length,e=new Array(r),s=0;s<r;s++)e[s]=arguments[s];var o,f=h(e),c=function(t){var n=t.length;if(n){var i=t[n-1];if(u(i))return i}return{}}(e);if(f>t.length)o=e.slice(0,t.length),e.slice(o.length,f).forEach(function(t,i){i<n.length&&(c[n[i]]=t)}),o.push(c);else if(f<t.length){o=e.slice(0,f);for(var a=f;a<t.length;a++){var l=t[a];o.push(c[l]),delete c[l]}o.push(c)}else o=e;return i.apply(this,o)}},makeKeywordArgs:function(t){return t.__keywords=!0,t},numArgs:h,suppressValue:function(t,n){return t=null!=t?t:\"\",!n||t instanceof f||(t=r.escape(t.toString())),t},ensureDefined:function(t,n,i){if(null==t)throw new r.TemplateError(\"attempted to output null or undefined value\",n+1,i+1);return t},memberLookup:function(t,n){if(null!=t)return\"function\"==typeof t[n]?function(){for(var i=arguments.length,r=new Array(i),e=0;e<i;e++)r[e]=arguments[e];return t[n].apply(t,r)}:t[n]},contextOrFrameLookup:function(t,n,i){var r=n.lookup(i);return void 0!==r?r:t.lookup(i)},callWrap:function(t,n,i,r){if(!t)throw new Error(\"Unable to call `\"+n+\"`, which is undefined or falsey\");if(\"function\"!=typeof t)throw new Error(\"Unable to call `\"+n+\"`, which is not a function\");return t.apply(i,r)},handleError:function(t,n,i){return t.lineno?t:new r.TemplateError(t,n,i)},isArray:r.isArray,keys:r.keys,SafeString:f,copySafeness:function(t,n){return t instanceof f?new f(n):n.toString()},markSafe:function(t){var n=typeof t;return\"string\"===n?new f(t):\"function\"!==n?t:function(n){var i=t.apply(this,arguments);return\"string\"==typeof i?new f(i):i}},asyncEach:function(t,n,i,e){if(r.isArray(t)){var s=t.length;r.asyncIter(t,function(t,r,e){switch(n){case 1:i(t,r,s,e);break;case 2:i(t[0],t[1],r,s,e);break;case 3:i(t[0],t[1],t[2],r,s,e);break;default:t.push(r,s,e),i.apply(this,t)}},e)}else r.asyncFor(t,function(t,n,r,e,s){i(t,n,r,e,s)},e)},asyncAll:function(t,n,i,e){var s,o,u=0;function h(t,n){u++,o[t]=n,u===s&&e(null,o.join(\"\"))}if(r.isArray(t))if(s=t.length,o=new Array(s),0===s)e(null,\"\");else for(var f=0;f<t.length;f++){var c=t[f];switch(n){case 1:i(c,f,s,h);break;case 2:i(c[0],c[1],f,s,h);break;case 3:i(c[0],c[1],c[2],f,s,h);break;default:c.push(f,s,h),i.apply(this,c)}}else{var a=r.keys(t||{});if(s=a.length,o=new Array(s),0===s)e(null,\"\");else for(var l=0;l<a.length;l++){var v=a[l];i(v,t[v],l,s,h)}}},inOperator:r.inOperator,fromIterator:function(t){return\"object\"!=typeof t||null===t||r.isArray(t)?t:s&&Symbol.iterator in t?e(t):t}}},449:function(t){\"use strict\";var n=Array.prototype,i=Object.prototype,r={\"&\":\"&amp;\",'\"':\"&quot;\",\"'\":\"&#39;\",\"<\":\"&lt;\",\">\":\"&gt;\",\"\\\\\":\"&#92;\"},e=/[&\"'<>\\\\]/g,s=t.exports={};function o(t,n){return i.hasOwnProperty.call(t,n)}function u(t){return r[t]}function h(t,n,i){var r,e,s;if(t instanceof Error&&(t=(e=t).name+\": \"+e.message),Object.setPrototypeOf?(r=new Error(t),Object.setPrototypeOf(r,h.prototype)):(r=this,Object.defineProperty(r,\"message\",{enumerable:!1,writable:!0,value:t})),Object.defineProperty(r,\"name\",{value:\"Template render error\"}),Error.captureStackTrace&&Error.captureStackTrace(r,this.constructor),e){var o=Object.getOwnPropertyDescriptor(e,\"stack\");(s=o&&(o.get||function(){return o.value}))||(s=function(){return e.stack})}else{var u=new Error(t).stack;s=function(){return u}}return Object.defineProperty(r,\"stack\",{get:function(){return s.call(r)}}),Object.defineProperty(r,\"cause\",{value:e}),r.lineno=n,r.colno=i,r.firstUpdate=!0,r.Update=function(t){var n=\"(\"+(t||\"unknown path\")+\")\";return this.firstUpdate&&(this.lineno&&this.colno?n+=\" [Line \"+this.lineno+\", Column \"+this.colno+\"]\":this.lineno&&(n+=\" [Line \"+this.lineno+\"]\")),n+=\"\\n \",this.firstUpdate&&(n+=\" \"),this.message=n+(this.message||\"\"),this.firstUpdate=!1,this},r}function f(t){return\"[object Function]\"===i.toString.call(t)}function c(t){return\"[object Array]\"===i.toString.call(t)}function a(t){return\"[object String]\"===i.toString.call(t)}function l(t){return\"[object Object]\"===i.toString.call(t)}function v(t){var n,i=(n=t)?\"string\"==typeof n?n.split(\".\"):[n]:[];return function(t){for(var n=t,r=0;r<i.length;r++){var e=i[r];if(!o(n,e))return;n=n[e]}return n}}function p(t){return Array.prototype.slice.call(t)}function d(t,n,i){return Array.prototype.indexOf.call(t||[],n,i)}function w(t){var n=[];for(var i in t)o(t,i)&&n.push(i);return n}s.hasOwnProp=o,s.p=function(t,n,i){if(i.Update||(i=new s.TemplateError(i)),i.Update(t),!n){var r=i;(i=new Error(r.message)).name=r.name}return i},Object.setPrototypeOf?Object.setPrototypeOf(h.prototype,Error.prototype):h.prototype=Object.create(Error.prototype,{constructor:{value:h}}),s.TemplateError=h,s.escape=function(t){return t.replace(e,u)},s.isFunction=f,s.isArray=c,s.isString=a,s.isObject=l,s.getAttrGetter=v,s.groupBy=function(t,n,i){for(var r={},e=f(n)?n:v(n),s=0;s<t.length;s++){var o=t[s],u=e(o,s);if(void 0===u&&!0===i)throw new TypeError('groupby: attribute \"'+n+'\" resolved to undefined');(r[u]||(r[u]=[])).push(o)}return r},s.toArray=p,s.without=function(t){var n=[];if(!t)return n;for(var i=t.length,r=p(arguments).slice(1),e=-1;++e<i;)-1===d(r,t[e])&&n.push(t[e]);return n},s.repeat=function(t,n){for(var i=\"\",r=0;r<n;r++)i+=t;return i},s.each=function(t,i,r){if(null!=t)if(n.forEach&&t.forEach===n.forEach)t.forEach(i,r);else if(t.length===+t.length)for(var e=0,s=t.length;e<s;e++)i.call(r,t[e],e,t)},s.map=function(t,i){var r=[];if(null==t)return r;if(n.map&&t.map===n.map)return t.map(i);for(var e=0;e<t.length;e++)r[r.length]=i(t[e],e);return t.length===+t.length&&(r.length=t.length),r},s.asyncIter=function(t,n,i){var r=-1;!function e(){++r<t.length?n(t[r],r,e,i):i()}()},s.asyncFor=function(t,n,i){var r=w(t||{}),e=r.length,s=-1;!function o(){s++;var u=r[s];s<e?n(u,t[u],s,e,o):i()}()},s.indexOf=d,s.keys=w,s.o=function(t){return w(t).map(function(n){return[n,t[n]]})},s.v=function(t){return w(t).map(function(n){return t[n]})},s.l=s.extend=function(t,n){return t=t||{},w(n).forEach(function(i){t[i]=n[i]}),t},s.inOperator=function(t,n){if(c(n)||a(n))return-1!==n.indexOf(t);if(l(n))return t in n;throw new Error('Cannot use \"in\" operator to search for \"'+t+'\" in unexpected types.')}},470:function(t,n,i){\"use strict\";var r=i(5),e=i(5),s=i(449).p,o=i(933),u=i(887).Environment,h=i(492);function f(t,n){return!!Array.isArray(n)&&n.some(function(n){return t.match(n)})}function c(t,n){(n=n||{}).isString=!0;var i=n.env||new u([]),r=n.wrapper||h;if(!n.name)throw new Error('the \"name\" option is required when compiling a string');return r([a(t,n.name,i)],n)}function a(t,n,i){var r,e=(i=i||new u([])).asyncFilters,h=i.extensionsList;n=n.replace(/\\\\/g,\"/\");try{r=o.compile(t,e,h,n,i.opts)}catch(t){throw s(n,!1,t)}return{name:n,template:r}}t.exports={precompile:function(t,n){var i=(n=n||{}).env||new u([]),s=n.wrapper||h;if(n.isString)return c(t,n);var o=r.existsSync(t)&&r.statSync(t),l=[],v=[];if(o.isFile())l.push(a(r.readFileSync(t,\"utf-8\"),n.name||t,i));else if(o.isDirectory()){!function i(s){r.readdirSync(s).forEach(function(o){var u=e.join(s,o),h=u.substr(e.join(t,\"/\").length),c=r.statSync(u);c&&c.isDirectory()?f(h+=\"/\",n.exclude)||i(u):f(h,n.include)&&v.push(u)})}(t);for(var p=0;p<v.length;p++){var d=v[p].replace(e.join(t,\"/\"),\"\");try{l.push(a(r.readFileSync(v[p],\"utf-8\"),d,i))}catch(t){if(!n.force)throw t;console.error(t)}}}return s(l,n)},precompileString:c}},491:function(t,n,i){\"use strict\";function r(t,n){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},r(t,n)}var e=i(5),s=i(891).EmitterObj;t.exports=function(t){function n(){return t.apply(this,arguments)||this}var i,s;s=t,(i=n).prototype=Object.create(s.prototype),i.prototype.constructor=i,r(i,s);var o=n.prototype;return o.resolve=function(t,n){return e.resolve(e.dirname(t),n)},o.isRelative=function(t){return 0===t.indexOf(\"./\")||0===t.indexOf(\"../\")},n}(s)},492:function(t){\"use strict\";t.exports=function(t,n){var i=\"\";n=n||{};for(var r=0;r<t.length;r++){var e=JSON.stringify(t[r].name);i+=\"(function() {(window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})[\"+e+\"] = (function() {\\n\"+t[r].template+\"\\n})();\\n\",n.asFunction&&(i+=\"return function(ctx, cb) { return nunjucks.render(\"+e+\", ctx, cb); }\\n\"),i+=\"})();\\n\"}return i}},561:function(t,n,i){\"use strict\";function r(t,n){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},r(t,n)}var e=i(491),s=i(742).PrecompiledLoader,o=function(t){function n(n,i){var r;return(r=t.call(this)||this).baseURL=n||\".\",i=i||{},r.useCache=!!i.useCache,r.async=!!i.async,r}var i,e;e=t,(i=n).prototype=Object.create(e.prototype),i.prototype.constructor=i,r(i,e);var s=n.prototype;return s.resolve=function(t,n){throw new Error(\"relative templates not support in the browser yet\")},s.getSource=function(t,n){var i,r=this,e=this.useCache;return this.fetch(this.baseURL+\"/\"+t,function(s,o){if(s)if(n)n(s.content);else{if(404!==s.status)throw s.content;i=null}else i={src:o,path:t,noCache:!e},r.emit(\"load\",t,i),n&&n(null,i)}),i},s.fetch=function(t,n){if(\"undefined\"==typeof window)throw new Error(\"WebLoader can only by used in a browser\");var i=new XMLHttpRequest,r=!0;i.onreadystatechange=function(){4===i.readyState&&r&&(r=!1,0===i.status||200===i.status?n(null,i.responseText):n({status:i.status,content:i.responseText}))},t+=(-1===t.indexOf(\"?\")?\"?\":\"&\")+\"s=\"+(new Date).getTime(),i.open(\"GET\",t,this.async),i.send()},n}(e);t.exports={WebLoader:o,PrecompiledLoader:s}},608:function(t,n,i){\"use strict\";var r=i(449),e=\" \\n\\t\\r\",s=\"()[]{}%*-+~/#,:|.<>=!\",o=\"string\",u=\"whitespace\",h=\"data\",f=\"block-start\",c=\"block-end\",a=\"variable-start\",l=\"variable-end\",v=\"comment\",p=\"left-paren\",d=\"right-paren\",w=\"left-bracket\",m=\"right-bracket\",b=\"left-curly\",y=\"right-curly\",g=\"operator\",k=\"comma\",E=\"colon\",x=\"tilde\",O=\"pipe\",T=\"float\",A=\"boolean\",j=\"none\",N=\"symbol\",S=\"regex\";function _(t,n,i,r){return{type:t,value:n,lineno:i,colno:r}}var L=function(){function t(t,n){this.str=t,this.index=0,this.len=t.length,this.lineno=0,this.colno=0,this.in_code=!1;var i=(n=n||{}).tags||{};this.tags={BLOCK_START:i.blockStart||\"{%\",BLOCK_END:i.blockEnd||\"%}\",VARIABLE_START:i.variableStart||\"{{\",VARIABLE_END:i.variableEnd||\"}}\",COMMENT_START:i.commentStart||\"{#\",COMMENT_END:i.commentEnd||\"#}\"},this.trimBlocks=!!n.trimBlocks,this.lstripBlocks=!!n.lstripBlocks}var n=t.prototype;return n.nextToken=function(){var t,n=this.lineno,i=this.colno;if(this.in_code){var L=this.current();if(this.isFinished())return null;if('\"'===L||\"'\"===L)return _(o,this.m(L),n,i);if(t=this.k(e))return _(u,t,n,i);if((t=this.O(this.tags.BLOCK_END))||(t=this.O(\"-\"+this.tags.BLOCK_END)))return this.in_code=!1,this.trimBlocks&&(\"\\n\"===(L=this.current())?this.forward():\"\\r\"===L&&(this.forward(),\"\\n\"===(L=this.current())?this.forward():this.back())),_(c,t,n,i);if((t=this.O(this.tags.VARIABLE_END))||(t=this.O(\"-\"+this.tags.VARIABLE_END)))return this.in_code=!1,_(l,t,n,i);if(\"r\"===L&&\"/\"===this.str.charAt(this.index+1)){this.forwardN(2);for(var C=\"\";!this.isFinished();){if(\"/\"===this.current()&&\"\\\\\"!==this.previous()){this.forward();break}C+=this.current(),this.forward()}for(var I=[\"g\",\"i\",\"m\",\"y\"],F=\"\";!this.isFinished();){if(!(-1!==I.indexOf(this.current())))break;F+=this.current(),this.forward()}return _(S,{body:C,flags:F},n,i)}if(-1!==s.indexOf(L)){this.forward();var K,R=[\"==\",\"===\",\"!=\",\"!==\",\"<=\",\">=\",\"//\",\"**\"],M=L+this.current();switch(-1!==r.indexOf(R,M)&&(this.forward(),L=M,-1!==r.indexOf(R,M+this.current())&&(L=M+this.current(),this.forward())),L){case\"(\":K=p;break;case\")\":K=d;break;case\"[\":K=w;break;case\"]\":K=m;break;case\"{\":K=b;break;case\"}\":K=y;break;case\",\":K=k;break;case\":\":K=E;break;case\"~\":K=x;break;case\"|\":K=O;break;default:K=g}return _(K,L,n,i)}if((t=this.T(e+s)).match(/^[-+]?[0-9]+$/)){if(\".\"===this.current()){this.forward();var P=this.k(\"0123456789\");return _(T,t+\".\"+P,n,i)}return _(\"int\",t,n,i)}if(t.match(/^(true|false)$/))return _(A,t,n,i);if(\"none\"===t)return _(j,t,n,i);if(\"null\"===t)return _(j,t,n,i);if(t)return _(N,t,n,i);throw new Error(\"Unexpected value while parsing: \"+t)}var B,V=this.tags.BLOCK_START.charAt(0)+this.tags.VARIABLE_START.charAt(0)+this.tags.COMMENT_START.charAt(0)+this.tags.COMMENT_END.charAt(0);if(this.isFinished())return null;if((t=this.O(this.tags.BLOCK_START+\"-\"))||(t=this.O(this.tags.BLOCK_START)))return this.in_code=!0,_(f,t,n,i);if((t=this.O(this.tags.VARIABLE_START+\"-\"))||(t=this.O(this.tags.VARIABLE_START)))return this.in_code=!0,_(a,t,n,i);t=\"\";var D=!1;for(this.A(this.tags.COMMENT_START)&&(D=!0,t=this.O(this.tags.COMMENT_START));null!==(B=this.T(V));){if(t+=B,(this.A(this.tags.BLOCK_START)||this.A(this.tags.VARIABLE_START)||this.A(this.tags.COMMENT_START))&&!D){if(this.lstripBlocks&&this.A(this.tags.BLOCK_START)&&this.colno>0&&this.colno<=t.length){var U=t.slice(-this.colno);if(/^\\s+$/.test(U)&&!(t=t.slice(0,-this.colno)).length)return this.nextToken()}break}if(this.A(this.tags.COMMENT_END)){if(!D)throw new Error(\"unexpected end of comment\");t+=this.O(this.tags.COMMENT_END);break}t+=this.current(),this.forward()}if(null===B&&D)throw new Error(\"expected end of comment, got end of file\");return _(D?v:h,t,n,i)},n.m=function(t){this.forward();for(var n=\"\";!this.isFinished()&&this.current()!==t;){var i=this.current();if(\"\\\\\"===i){switch(this.forward(),this.current()){case\"n\":n+=\"\\n\";break;case\"t\":n+=\"\\t\";break;case\"r\":n+=\"\\r\";break;default:n+=this.current()}this.forward()}else n+=i,this.forward()}return this.forward(),n},n.A=function(t){return this.index+t.length>this.len?null:this.str.slice(this.index,this.index+t.length)===t},n.O=function(t){return this.A(t)?(this.forwardN(t.length),t):null},n.T=function(t){return this.j(!0,t||\"\")},n.k=function(t){return this.j(!1,t)},n.j=function(t,n){if(this.isFinished())return null;var i=n.indexOf(this.current());if(t&&-1===i||!t&&-1!==i){var r=this.current();this.forward();for(var e=n.indexOf(this.current());(t&&-1===e||!t&&-1!==e)&&!this.isFinished();)r+=this.current(),this.forward(),e=n.indexOf(this.current());return r}return\"\"},n.N=function(t){var n=this.currentStr().match(t);return n?(this.forwardN(n[0].length),n):null},n.isFinished=function(){return this.index>=this.len},n.forwardN=function(t){for(var n=0;n<t;n++)this.forward()},n.forward=function(){this.index++,\"\\n\"===this.previous()?(this.lineno++,this.colno=0):this.colno++},n.backN=function(t){for(var n=0;n<t;n++)this.back()},n.back=function(){if(this.index--,\"\\n\"===this.current()){this.lineno--;var t=this.src.lastIndexOf(\"\\n\",this.index-1);this.colno=-1===t?this.index:this.index-t}else this.colno--},n.current=function(){return this.isFinished()?\"\":this.str.charAt(this.index)},n.currentStr=function(){return this.isFinished()?\"\":this.str.substr(this.index)},n.previous=function(){return this.str.charAt(this.index-1)},t}();t.exports={lex:function(t,n){return new L(t,n)},TOKEN_STRING:o,TOKEN_WHITESPACE:u,TOKEN_DATA:h,TOKEN_BLOCK_START:f,TOKEN_BLOCK_END:c,TOKEN_VARIABLE_START:a,TOKEN_VARIABLE_END:l,TOKEN_COMMENT:v,TOKEN_LEFT_PAREN:p,TOKEN_RIGHT_PAREN:d,TOKEN_LEFT_BRACKET:w,TOKEN_RIGHT_BRACKET:m,TOKEN_LEFT_CURLY:b,TOKEN_RIGHT_CURLY:y,TOKEN_OPERATOR:g,TOKEN_COMMA:k,TOKEN_COLON:E,TOKEN_TILDE:x,TOKEN_PIPE:O,TOKEN_INT:\"int\",TOKEN_FLOAT:T,TOKEN_BOOLEAN:A,TOKEN_NONE:j,TOKEN_SYMBOL:N,TOKEN_SPECIAL:\"special\",TOKEN_REGEX:S}},647:function(t,n,i){\"use strict\";var r,e=i(449),s=i(887),o=s.Environment,u=s.Template,h=i(491),f=i(561),c=i(470),a=i(933),l=i(999),v=i(608),p=i(434),d=i(883),w=i(433);function m(t,n){var i;return n=n||{},e.isObject(t)&&(n=t,t=null),f.FileSystemLoader?i=new f.FileSystemLoader(t,{watch:n.watch,noCache:n.noCache}):f.WebLoader&&(i=new f.WebLoader(t,{useCache:n.web&&n.web.useCache,async:n.web&&n.web.async})),r=new o(i,n),n&&n.express&&r.express(n.express),r}t.exports={Environment:o,Template:u,Loader:h,FileSystemLoader:f.FileSystemLoader,NodeResolveLoader:f.NodeResolveLoader,PrecompiledLoader:f.PrecompiledLoader,WebLoader:f.WebLoader,compiler:a,parser:l,lexer:v,runtime:p,lib:e,nodes:d,installJinjaCompat:w,configure:m,reset:function(){r=void 0},compile:function(t,n,i,e){return r||m(),new u(t,n,i,e)},render:function(t,n,i){return r||m(),r.render(t,n,i)},renderString:function(t,n,i){return r||m(),r.renderString(t,n,i)},precompile:c?c.precompile:void 0,precompileString:c?c.precompileString:void 0}},742:function(t,n,i){\"use strict\";function r(t,n){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},r(t,n)}var e=function(t){function n(n){var i;return(i=t.call(this)||this).precompiled=n||{},i}var i,e;return e=t,(i=n).prototype=Object.create(e.prototype),i.prototype.constructor=i,r(i,e),n.prototype.getSource=function(t){return this.precompiled[t]?{src:{type:\"code\",obj:this.precompiled[t]},path:t}:null},n}(i(491));t.exports={PrecompiledLoader:e}},790:function(t){\"use strict\";t.exports=function(){return{range:function(t,n,i){void 0===n?(n=t,t=0,i=1):i||(i=1);var r=[];if(i>0)for(var e=t;e<n;e+=i)r.push(e);else for(var s=t;s>n;s+=i)r.push(s);return r},cycler:function(){return t=Array.prototype.slice.call(arguments),n=-1,{current:null,reset:function(){n=-1,this.current=null},next:function(){return++n>=t.length&&(n=0),this.current=t[n],this.current}};var t,n},joiner:function(t){return function(t){t=t||\",\";var n=!0;return function(){var i=n?\"\":t;return n=!1,i}}(t)}}}},795:function(t,n,i){\"use strict\";function r(t){s.length||(e(),!0),s[s.length]=t}t.exports=r;var e,s=[],o=0;function u(){for(;o<s.length;){var t=o;if(o+=1,s[t].call(),o>1024){for(var n=0,i=s.length-o;n<i;n++)s[n]=s[n+o];s.length-=o,o=0}}s.length=0,o=0}var h,f,c,a=void 0!==i.g?i.g:self,l=a.MutationObserver||a.WebKitMutationObserver;function v(t){return function(){var n=setTimeout(r,0),i=setInterval(r,50);function r(){clearTimeout(n),clearInterval(i),t()}}}\"function\"==typeof l?(h=1,f=new l(u),c=document.createTextNode(\"\"),f.observe(c,{characterData:!0}),e=function(){h=-h,c.data=h}):e=v(u),r.requestFlush=e,r.makeRequestCallFromTimer=v},804:function(t,n,i){var r=i(5);t.exports=function(t,n){function i(t,n){if(this.name=t,this.path=t,this.defaultEngine=n.defaultEngine,this.ext=r.extname(t),!this.ext&&!this.defaultEngine)throw new Error(\"No default engine was specified and no extension was provided.\");this.ext||(this.name+=this.ext=(\".\"!==this.defaultEngine[0]?\".\":\"\")+this.defaultEngine)}return i.prototype.render=function(n,i){t.render(this.name,n,i)},n.set(\"view\",i),n.set(\"nunjucksEnv\",t),t}},883:function(t,n,i){\"use strict\";function r(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function e(t,n,i){return n&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,\"prototype\",{writable:!1}),t}function s(t){var n=function(t,n){if(\"object\"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,n||\"default\");if(\"object\"!=typeof r)return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===n?String:Number)(t)}(t,\"string\");return\"symbol\"==typeof n?n:n+\"\"}function o(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n)}function u(t,n){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},u(t,n)}function h(t,n,i){t instanceof n&&i.push(t),t instanceof f&&t.findAll(n,i)}var f=function(t){function n(){return t.apply(this,arguments)||this}o(n,t);var i=n.prototype;return i.init=function(t,n){for(var i=arguments,r=this,e=arguments.length,s=new Array(e>2?e-2:0),o=2;o<e;o++)s[o-2]=arguments[o];this.lineno=t,this.colno=n,this.fields.forEach(function(t,n){var e=i[n+2];void 0===e&&(e=null),r[t]=e})},i.findAll=function(t,n){var i=this;return n=n||[],this instanceof a?this.children.forEach(function(i){return h(i,t,n)}):this.fields.forEach(function(r){return h(i[r],t,n)}),n},i.iterFields=function(t){var n=this;this.fields.forEach(function(i){t(n[i],i)})},n}(i(891).Obj),c=function(t){function n(){return t.apply(this,arguments)||this}return o(n,t),e(n,[{key:\"typename\",get:function(){return\"Value\"}},{key:\"fields\",get:function(){return[\"value\"]}}])}(f),a=function(t){function n(){return t.apply(this,arguments)||this}o(n,t);var i=n.prototype;return i.init=function(n,i,r){t.prototype.init.call(this,n,i,r||[])},i.addChild=function(t){this.children.push(t)},e(n,[{key:\"typename\",get:function(){return\"NodeList\"}},{key:\"fields\",get:function(){return[\"children\"]}}])}(f),l=a.extend(\"Root\"),v=c.extend(\"Literal\"),p=c.extend(\"Symbol\"),d=a.extend(\"Group\"),w=a.extend(\"Array\"),m=f.extend(\"Pair\",{fields:[\"key\",\"value\"]}),b=a.extend(\"Dict\"),y=f.extend(\"LookupVal\",{fields:[\"target\",\"val\"]}),g=f.extend(\"If\",{fields:[\"cond\",\"body\",\"else_\"]}),k=g.extend(\"IfAsync\"),E=f.extend(\"InlineIf\",{fields:[\"cond\",\"body\",\"else_\"]}),x=f.extend(\"For\",{fields:[\"arr\",\"name\",\"body\",\"else_\"]}),O=x.extend(\"AsyncEach\"),T=x.extend(\"AsyncAll\"),A=f.extend(\"Macro\",{fields:[\"name\",\"args\",\"body\"]}),j=A.extend(\"Caller\"),N=f.extend(\"Import\",{fields:[\"template\",\"target\",\"withContext\"]}),S=function(t){function n(){return t.apply(this,arguments)||this}return o(n,t),n.prototype.init=function(n,i,r,e,s){t.prototype.init.call(this,n,i,r,e||new a,s)},e(n,[{key:\"typename\",get:function(){return\"FromImport\"}},{key:\"fields\",get:function(){return[\"template\",\"names\",\"withContext\"]}}])}(f),_=f.extend(\"FunCall\",{fields:[\"name\",\"args\"]}),L=_.extend(\"Filter\"),C=L.extend(\"FilterAsync\",{fields:[\"name\",\"args\",\"symbol\"]}),I=b.extend(\"KeywordArgs\"),F=f.extend(\"Block\",{fields:[\"name\",\"body\"]}),K=f.extend(\"Super\",{fields:[\"blockName\",\"symbol\"]}),R=f.extend(\"TemplateRef\",{fields:[\"template\"]}).extend(\"Extends\"),M=f.extend(\"Include\",{fields:[\"template\",\"ignoreMissing\"]}),P=f.extend(\"Set\",{fields:[\"targets\",\"value\"]}),B=f.extend(\"Switch\",{fields:[\"expr\",\"cases\",\"default\"]}),V=f.extend(\"Case\",{fields:[\"cond\",\"body\"]}),D=a.extend(\"Output\"),U=f.extend(\"Capture\",{fields:[\"body\"]}),$=v.extend(\"TemplateData\"),G=f.extend(\"UnaryOp\",{fields:[\"target\"]}),W=f.extend(\"BinOp\",{fields:[\"left\",\"right\"]}),H=W.extend(\"In\"),J=W.extend(\"Is\"),z=W.extend(\"Or\"),Y=W.extend(\"And\"),q=G.extend(\"Not\"),X=W.extend(\"Add\"),Q=W.extend(\"Concat\"),Z=W.extend(\"Sub\"),tt=W.extend(\"Mul\"),nt=W.extend(\"Div\"),it=W.extend(\"FloorDiv\"),rt=W.extend(\"Mod\"),et=W.extend(\"Pow\"),st=G.extend(\"Neg\"),ot=G.extend(\"Pos\"),ut=f.extend(\"Compare\",{fields:[\"expr\",\"ops\"]}),ht=f.extend(\"CompareOperand\",{fields:[\"expr\",\"type\"]}),ft=f.extend(\"CallExtension\",{init:function(t,n,i,r){this.parent(),this.extName=t.__name||t,this.prop=n,this.args=i||new a,this.contentArgs=r||[],this.autoescape=t.autoescape},fields:[\"extName\",\"prop\",\"args\",\"contentArgs\"]}),ct=ft.extend(\"CallExtensionAsync\");function at(t,n,i){var r=t.split(\"\\n\");r.forEach(function(t,e){t&&(i&&e>0||!i)&&process.stdout.write(\" \".repeat(n));var s=e===r.length-1?\"\":\"\\n\";process.stdout.write(\"\"+t+s)})}t.exports={Node:f,Root:l,NodeList:a,Value:c,Literal:v,Symbol:p,Group:d,Array:w,Pair:m,Dict:b,Output:D,Capture:U,TemplateData:$,If:g,IfAsync:k,InlineIf:E,For:x,AsyncEach:O,AsyncAll:T,Macro:A,Caller:j,Import:N,FromImport:S,FunCall:_,Filter:L,FilterAsync:C,KeywordArgs:I,Block:F,Super:K,Extends:R,Include:M,Set:P,Switch:B,Case:V,LookupVal:y,BinOp:W,In:H,Is:J,Or:z,And:Y,Not:q,Add:X,Concat:Q,Sub:Z,Mul:tt,Div:nt,FloorDiv:it,Mod:rt,Pow:et,Neg:st,Pos:ot,Compare:ut,CompareOperand:ht,CallExtension:ft,CallExtensionAsync:ct,printNodes:function t(n,i){if(i=i||0,at(n.typename+\": \",i),n instanceof a)at(\"\\n\"),n.children.forEach(function(n){t(n,i+2)});else if(n instanceof ft)at(n.extName+\".\"+n.prop+\"\\n\"),n.args&&t(n.args,i+2),n.contentArgs&&n.contentArgs.forEach(function(n){t(n,i+2)});else{var r=[],e=null;n.iterFields(function(t,n){t instanceof f?r.push([n,t]):(e=e||{})[n]=t}),e?at(JSON.stringify(e,null,2)+\"\\n\",null,!0):at(\"\\n\"),r.forEach(function(n){var r=n[0],e=n[1];at(\"[\"+r+\"] =>\",i+2),t(e,i+4)})}}}},887:function(t,n,i){\"use strict\";function r(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,e(t,n)}function e(t,n){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},e(t,n)}var s=i(236),o=i(211),u=i(449),h=i(933),f=i(153),c=i(561),a=c.FileSystemLoader,l=c.WebLoader,v=c.PrecompiledLoader,p=i(423),d=i(790),w=i(891),m=w.Obj,b=w.EmitterObj,y=i(434),g=y.handleError,k=y.Frame,E=i(804);function x(t,n,i){s(function(){t(n,i)})}var O={type:\"code\",obj:{root:function(t,n,i,r,e){try{e(null,\"\")}catch(t){e(g(t,null,null))}}}},T=function(t){function n(){return t.apply(this,arguments)||this}r(n,t);var i=n.prototype;return i.init=function(t,n){var i=this;n=this.opts=n||{},this.opts.dev=!!n.dev,this.opts.autoescape=null==n.autoescape||n.autoescape,this.opts.throwOnUndefined=!!n.throwOnUndefined,this.opts.trimBlocks=!!n.trimBlocks,this.opts.lstripBlocks=!!n.lstripBlocks,this.loaders=[],t?this.loaders=u.isArray(t)?t:[t]:a?this.loaders=[new a(\"views\")]:l&&(this.loaders=[new l(\"/views\")]),\"undefined\"!=typeof window&&window.nunjucksPrecompiled&&this.loaders.unshift(new v(window.nunjucksPrecompiled)),this.S(),this.globals=d(),this.filters={},this.tests={},this.asyncFilters=[],this.extensions={},this.extensionsList=[],u.o(f).forEach(function(t){var n=t[0],r=t[1];return i.addFilter(n,r)}),u.o(p).forEach(function(t){var n=t[0],r=t[1];return i.addTest(n,r)})},i.S=function(){var t=this;this.loaders.forEach(function(n){n.cache={},\"function\"==typeof n.on&&(n.on(\"update\",function(i,r){n.cache[i]=null,t.emit(\"update\",i,r,n)}),n.on(\"load\",function(i,r){t.emit(\"load\",i,r,n)}))})},i.invalidateCache=function(){this.loaders.forEach(function(t){t.cache={}})},i.addExtension=function(t,n){return n.__name=t,this.extensions[t]=n,this.extensionsList.push(n),this},i.removeExtension=function(t){var n=this.getExtension(t);n&&(this.extensionsList=u.without(this.extensionsList,n),delete this.extensions[t])},i.getExtension=function(t){return this.extensions[t]},i.hasExtension=function(t){return!!this.extensions[t]},i.addGlobal=function(t,n){return this.globals[t]=n,this},i.getGlobal=function(t){if(void 0===this.globals[t])throw new Error(\"global not found: \"+t);return this.globals[t]},i.addFilter=function(t,n,i){var r=n;return i&&this.asyncFilters.push(t),this.filters[t]=r,this},i.getFilter=function(t){if(!this.filters[t])throw new Error(\"filter not found: \"+t);return this.filters[t]},i.addTest=function(t,n){return this.tests[t]=n,this},i.getTest=function(t){if(!this.tests[t])throw new Error(\"test not found: \"+t);return this.tests[t]},i.resolveTemplate=function(t,n,i){return!(!t.isRelative||!n)&&t.isRelative(i)&&t.resolve?t.resolve(n,i):i},i.getTemplate=function(t,n,i,r,e){var s,o=this,h=this,f=null;if(t&&t.raw&&(t=t.raw),u.isFunction(i)&&(e=i,i=null,n=n||!1),u.isFunction(n)&&(e=n,n=!1),t instanceof j)f=t;else{if(\"string\"!=typeof t)throw new Error(\"template names must be a string: \"+t);for(var c=0;c<this.loaders.length;c++){var a=this.loaders[c];if(f=a.cache[this.resolveTemplate(a,i,t)])break}}if(f)return n&&f.compile(),e?void e(null,f):f;return u.asyncIter(this.loaders,function(n,r,e,s){function o(t,i){t?s(t):i?(i.loader=n,s(null,i)):e()}t=h.resolveTemplate(n,i,t),n.async?n.getSource(t,o):o(null,n.getSource(t))},function(i,u){if(u||i||r||(i=new Error(\"template not found: \"+t)),i){if(e)return void e(i);throw i}var h;u?(h=new j(u.src,o,u.path,n),u.noCache||(u.loader.cache[t]=h)):h=new j(O,o,\"\",n),e?e(null,h):s=h}),s},i.express=function(t){return E(this,t)},i.render=function(t,n,i){u.isFunction(n)&&(i=n,n=null);var r=null;return this.getTemplate(t,function(t,e){if(t&&i)x(i,t);else{if(t)throw t;r=e.render(n,i)}}),r},i.renderString=function(t,n,i,r){return u.isFunction(i)&&(r=i,i={}),new j(t,this,(i=i||{}).path).render(n,r)},i.waterfall=function(t,n,i){return o(t,n,i)},n}(b),A=function(t){function n(){return t.apply(this,arguments)||this}r(n,t);var i=n.prototype;return i.init=function(t,n,i){var r=this;this.env=i||new T,this.ctx=u.extend({},t),this.blocks={},this.exported=[],u.keys(n).forEach(function(t){r.addBlock(t,n[t])})},i.lookup=function(t){return t in this.env.globals&&!(t in this.ctx)?this.env.globals[t]:this.ctx[t]},i.setVariable=function(t,n){this.ctx[t]=n},i.getVariables=function(){return this.ctx},i.addBlock=function(t,n){return this.blocks[t]=this.blocks[t]||[],this.blocks[t].push(n),this},i.getBlock=function(t){if(!this.blocks[t])throw new Error('unknown block \"'+t+'\"');return this.blocks[t][0]},i.getSuper=function(t,n,i,r,e,s){var o=u.indexOf(this.blocks[n]||[],i),h=this.blocks[n][o+1];if(-1===o||!h)throw new Error('no super block available for \"'+n+'\"');h(t,this,r,e,s)},i.addExport=function(t){this.exported.push(t)},i.getExported=function(){var t=this,n={};return this.exported.forEach(function(i){n[i]=t.ctx[i]}),n},n}(m),j=function(t){function n(){return t.apply(this,arguments)||this}r(n,t);var i=n.prototype;return i.init=function(t,n,i,r){if(this.env=n||new T,u.isObject(t))switch(t.type){case\"code\":this.tmplProps=t.obj;break;case\"string\":this.tmplStr=t.obj;break;default:throw new Error(\"Unexpected template object type \"+t.type+\"; expected 'code', or 'string'\")}else{if(!u.isString(t))throw new Error(\"src must be a string or an object describing the source\");this.tmplStr=t}if(this.path=i,r)try{this._()}catch(t){throw u.p(this.path,this.env.opts.dev,t)}else this.compiled=!1},i.render=function(t,n,i){var r=this;\"function\"==typeof t?(i=t,t={}):\"function\"==typeof n&&(i=n,n=null);var e=!n;try{this.compile()}catch(t){var s=u.p(this.path,this.env.opts.dev,t);if(i)return x(i,s);throw s}var o=new A(t||{},this.blocks,this.env),h=n?n.push(!0):new k;h.topLevel=!0;var f=null,c=!1;return this.rootRenderFunc(this.env,o,h,y,function(t,n){if(!c||!i||void 0===n)if(t&&(t=u.p(r.path,r.env.opts.dev,t),c=!0),i)e?x(i,t,n):i(t,n);else{if(t)throw t;f=n}}),f},i.getExported=function(t,n,i){\"function\"==typeof t&&(i=t,t={}),\"function\"==typeof n&&(i=n,n=null);try{this.compile()}catch(t){if(i)return i(t);throw t}var r=n?n.push():new k;r.topLevel=!0;var e=new A(t||{},this.blocks,this.env);this.rootRenderFunc(this.env,e,r,y,function(t){t?i(t,null):i(null,e.getExported())})},i.compile=function(){this.compiled||this._()},i._=function(){var t;if(this.tmplProps)t=this.tmplProps;else{var n=h.compile(this.tmplStr,this.env.asyncFilters,this.env.extensionsList,this.path,this.env.opts);t=new Function(n)()}this.blocks=this.L(t),this.rootRenderFunc=t.root,this.compiled=!0},i.L=function(t){var n={};return u.keys(t).forEach(function(i){\"b_\"===i.slice(0,2)&&(n[i.slice(2)]=t[i])}),n},n}(m);t.exports={Environment:T,Template:j}},891:function(t,n,i){\"use strict\";function r(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function e(t,n,i){return n&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,\"prototype\",{writable:!1}),t}function s(t){var n=function(t,n){if(\"object\"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,n||\"default\");if(\"object\"!=typeof r)return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===n?String:Number)(t)}(t,\"string\");return\"symbol\"==typeof n?n:n+\"\"}function o(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n)}function u(t,n){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},u(t,n)}var h=i(7),f=i(449);function c(t,n,i){i=i||{},f.keys(i).forEach(function(n){var r,e;i[n]=(r=t.prototype[n],e=i[n],\"function\"!=typeof r||\"function\"!=typeof e?e:function(){var t=this.parent;this.parent=r;var n=e.apply(this,arguments);return this.parent=t,n})});var r=function(t){function i(){return t.apply(this,arguments)||this}return o(i,t),e(i,[{key:\"typename\",get:function(){return n}}])}(t);return f.l(r.prototype,i),r}var a=function(){function t(){this.init.apply(this,arguments)}return t.prototype.init=function(){},t.extend=function(t,n){return\"object\"==typeof t&&(n=t,t=\"anonymous\"),c(this,t,n)},e(t,[{key:\"typename\",get:function(){return this.constructor.name}}])}(),l=function(t){function n(){var n,i;return(n=i=t.call(this)||this).init.apply(n,arguments),i}return o(n,t),n.prototype.init=function(){},n.extend=function(t,n){return\"object\"==typeof t&&(n=t,t=\"anonymous\"),c(this,t,n)},e(n,[{key:\"typename\",get:function(){return this.constructor.name}}])}(h);t.exports={Obj:a,EmitterObj:l}},933:function(t,n,i){\"use strict\";function r(t,n){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},r(t,n)}var e=i(999),s=i(333),o=i(883),u=i(449).TemplateError,h=i(434).Frame,f=i(891).Obj,c={\"==\":\"==\",\"===\":\"===\",\"!=\":\"!=\",\"!==\":\"!==\",\"<\":\"<\",\">\":\">\",\"<=\":\"<=\",\">=\":\">=\"},a=function(t){function n(){return t.apply(this,arguments)||this}var i,e;e=t,(i=n).prototype=Object.create(e.prototype),i.prototype.constructor=i,r(i,e);var s=n.prototype;return s.init=function(t,n){this.templateName=t,this.codebuf=[],this.lastId=0,this.buffer=null,this.bufferStack=[],this.C=\"\",this.inBlock=!1,this.throwOnUndefined=n},s.fail=function(t,n,i){throw void 0!==n&&(n+=1),void 0!==i&&(i+=1),new u(t,n,i)},s.I=function(){var t=this.F();return this.bufferStack.push(this.buffer),this.buffer=t,this.u(\"var \"+this.buffer+' = \"\";'),t},s.K=function(){this.buffer=this.bufferStack.pop()},s.u=function(t){this.codebuf.push(t)},s.R=function(t){this.u(t+\"\\n\")},s.M=function(){for(var t=this,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];i.forEach(function(n){return t.R(n)})},s.P=function(t,n){this.buffer=\"output\",this.C=\"\",this.R(\"function \"+n+\"(env, context, frame, runtime, cb) {\"),this.R(\"var lineno = \"+t.lineno+\";\"),this.R(\"var colno = \"+t.colno+\";\"),this.R(\"var \"+this.buffer+' = \"\";'),this.R(\"try {\")},s.B=function(t){t||this.R(\"cb(null, \"+this.buffer+\");\"),this.V(),this.R(\"} catch (e) {\"),this.R(\"  cb(runtime.handleError(e, lineno, colno));\"),this.R(\"}\"),this.R(\"}\"),this.buffer=null},s.D=function(){this.C+=\"})\"},s.V=function(){this.R(this.C+\";\"),this.C=\"\"},s.U=function(t){var n=this.C;this.C=\"\",t.call(this),this.V(),this.C=n},s.$=function(t){var n=this.F();return\"function(\"+n+(t?\",\"+t:\"\")+\") {\\nif(\"+n+\") { cb(\"+n+\"); return; }\"},s.F=function(){return this.lastId++,\"t_\"+this.lastId},s.G=function(){return null==this.templateName?\"undefined\":JSON.stringify(this.templateName)},s.W=function(t,n){var i=this;t.children.forEach(function(t){i.compile(t,n)})},s.H=function(t,n,i,r){var e=this;i&&this.u(i),t.children.forEach(function(t,i){i>0&&e.u(\",\"),e.compile(t,n)}),r&&this.u(r)},s.h=function(t,n){this.assertType(t,o.Literal,o.Symbol,o.Group,o.Array,o.Dict,o.FunCall,o.Caller,o.Filter,o.LookupVal,o.Compare,o.InlineIf,o.In,o.Is,o.And,o.Or,o.Not,o.Add,o.Concat,o.Sub,o.Mul,o.Div,o.FloorDiv,o.Mod,o.Pow,o.Neg,o.Pos,o.Compare,o.NodeList),this.compile(t,n)},s.assertType=function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];i.some(function(n){return t instanceof n})||this.fail(\"assertType: invalid type: \"+t.typename,t.lineno,t.colno)},s.compileCallExtension=function(t,n,i){var r=this,e=t.args,s=t.contentArgs,u=\"boolean\"!=typeof t.autoescape||t.autoescape;if(i||this.u(this.buffer+\" += runtime.suppressValue(\"),this.u('env.getExtension(\"'+t.extName+'\")[\"'+t.prop+'\"]('),this.u(\"context\"),(e||s)&&this.u(\",\"),e&&(e instanceof o.NodeList||this.fail(\"compileCallExtension: arguments must be a NodeList, use `parser.parseSignature`\"),e.children.forEach(function(t,i){r.h(t,n),(i!==e.children.length-1||s.length)&&r.u(\",\")})),s.length&&s.forEach(function(t,i){if(i>0&&r.u(\",\"),t){r.R(\"function(cb) {\"),r.R(\"if(!cb) { cb = function(err) { if(err) { throw err; }}}\");var e=r.I();r.U(function(){r.compile(t,n),r.R(\"cb(null, \"+e+\");\")}),r.K(),r.R(\"return \"+e+\";\"),r.R(\"}\")}else r.u(\"null\")}),i){var h=this.F();this.R(\", \"+this.$(h)),this.R(this.buffer+\" += runtime.suppressValue(\"+h+\", \"+u+\" && env.opts.autoescape);\"),this.D()}else this.u(\")\"),this.u(\", \"+u+\" && env.opts.autoescape);\\n\")},s.compileCallExtensionAsync=function(t,n){this.compileCallExtension(t,n,!0)},s.compileNodeList=function(t,n){this.W(t,n)},s.compileLiteral=function(t){if(\"string\"==typeof t.value){var n=t.value.replace(/\\\\/g,\"\\\\\\\\\");n=(n=(n=(n=(n=n.replace(/\"/g,'\\\\\"')).replace(/\\n/g,\"\\\\n\")).replace(/\\r/g,\"\\\\r\")).replace(/\\t/g,\"\\\\t\")).replace(/\\u2028/g,\"\\\\u2028\"),this.u('\"'+n+'\"')}else null===t.value?this.u(\"null\"):this.u(t.value.toString())},s.compileSymbol=function(t,n){var i=t.value,r=n.lookup(i);r?this.u(r):this.u('runtime.contextOrFrameLookup(context, frame, \"'+i+'\")')},s.compileGroup=function(t,n){this.H(t,n,\"(\",\")\")},s.compileArray=function(t,n){this.H(t,n,\"[\",\"]\")},s.compileDict=function(t,n){this.H(t,n,\"{\",\"}\")},s.compilePair=function(t,n){var i=t.key,r=t.value;i instanceof o.Symbol?i=new o.Literal(i.lineno,i.colno,i.value):i instanceof o.Literal&&\"string\"==typeof i.value||this.fail(\"compilePair: Dict keys must be strings or names\",i.lineno,i.colno),this.compile(i,n),this.u(\": \"),this.h(r,n)},s.compileInlineIf=function(t,n){this.u(\"(\"),this.compile(t.cond,n),this.u(\"?\"),this.compile(t.body,n),this.u(\":\"),null!==t.else_?this.compile(t.else_,n):this.u('\"\"'),this.u(\")\")},s.compileIn=function(t,n){this.u(\"runtime.inOperator(\"),this.compile(t.left,n),this.u(\",\"),this.compile(t.right,n),this.u(\")\")},s.compileIs=function(t,n){var i=t.right.name?t.right.name.value:t.right.value;this.u('env.getTest(\"'+i+'\").call(context, '),this.compile(t.left,n),t.right.args&&(this.u(\",\"),this.compile(t.right.args,n)),this.u(\") === true\")},s.J=function(t,n,i){this.compile(t.left,n),this.u(i),this.compile(t.right,n)},s.compileOr=function(t,n){return this.J(t,n,\" || \")},s.compileAnd=function(t,n){return this.J(t,n,\" && \")},s.compileAdd=function(t,n){return this.J(t,n,\" + \")},s.compileConcat=function(t,n){return this.J(t,n,' + \"\" + ')},s.compileSub=function(t,n){return this.J(t,n,\" - \")},s.compileMul=function(t,n){return this.J(t,n,\" * \")},s.compileDiv=function(t,n){return this.J(t,n,\" / \")},s.compileMod=function(t,n){return this.J(t,n,\" % \")},s.compileNot=function(t,n){this.u(\"!\"),this.compile(t.target,n)},s.compileFloorDiv=function(t,n){this.u(\"Math.floor(\"),this.compile(t.left,n),this.u(\" / \"),this.compile(t.right,n),this.u(\")\")},s.compilePow=function(t,n){this.u(\"Math.pow(\"),this.compile(t.left,n),this.u(\", \"),this.compile(t.right,n),this.u(\")\")},s.compileNeg=function(t,n){this.u(\"-\"),this.compile(t.target,n)},s.compilePos=function(t,n){this.u(\"+\"),this.compile(t.target,n)},s.compileCompare=function(t,n){var i=this;this.compile(t.expr,n),t.ops.forEach(function(t){i.u(\" \"+c[t.type]+\" \"),i.compile(t.expr,n)})},s.compileLookupVal=function(t,n){this.u(\"runtime.memberLookup((\"),this.h(t.target,n),this.u(\"),\"),this.h(t.val,n),this.u(\")\")},s.Y=function(t){switch(t.typename){case\"Symbol\":return t.value;case\"FunCall\":return\"the return value of (\"+this.Y(t.name)+\")\";case\"LookupVal\":return this.Y(t.target)+'[\"'+this.Y(t.val)+'\"]';case\"Literal\":return t.value.toString();default:return\"--expression--\"}},s.compileFunCall=function(t,n){this.u(\"(lineno = \"+t.lineno+\", colno = \"+t.colno+\", \"),this.u(\"runtime.callWrap(\"),this.h(t.name,n),this.u(', \"'+this.Y(t.name).replace(/\"/g,'\\\\\"')+'\", context, '),this.H(t.args,n,\"[\",\"])\"),this.u(\")\")},s.compileFilter=function(t,n){var i=t.name;this.assertType(i,o.Symbol),this.u('env.getFilter(\"'+i.value+'\").call(context, '),this.H(t.args,n),this.u(\")\")},s.compileFilterAsync=function(t,n){var i=t.name,r=t.symbol.value;this.assertType(i,o.Symbol),n.set(r,r),this.u('env.getFilter(\"'+i.value+'\").call(context, '),this.H(t.args,n),this.R(\", \"+this.$(r)),this.D()},s.compileKeywordArgs=function(t,n){this.u(\"runtime.makeKeywordArgs(\"),this.compileDict(t,n),this.u(\")\")},s.compileSet=function(t,n){var i=this,r=[];t.targets.forEach(function(t){var e=t.value,s=n.lookup(e);null==s&&(s=i.F(),i.R(\"var \"+s+\";\")),r.push(s)}),t.value?(this.u(r.join(\" = \")+\" = \"),this.h(t.value,n),this.R(\";\")):(this.u(r.join(\" = \")+\" = \"),this.compile(t.body,n),this.R(\";\")),t.targets.forEach(function(t,n){var e=r[n],s=t.value;i.R('frame.set(\"'+s+'\", '+e+\", true);\"),i.R(\"if(frame.topLevel) {\"),i.R('context.setVariable(\"'+s+'\", '+e+\");\"),i.R(\"}\"),\"_\"!==s.charAt(0)&&(i.R(\"if(frame.topLevel) {\"),i.R('context.addExport(\"'+s+'\", '+e+\");\"),i.R(\"}\"))})},s.compileSwitch=function(t,n){var i=this;this.u(\"switch (\"),this.compile(t.expr,n),this.u(\") {\"),t.cases.forEach(function(t,r){i.u(\"case \"),i.compile(t.cond,n),i.u(\": \"),i.compile(t.body,n),t.body.children.length&&i.R(\"break;\")}),t.default&&(this.u(\"default:\"),this.compile(t.default,n)),this.u(\"}\")},s.compileIf=function(t,n,i){var r=this;this.u(\"if(\"),this.h(t.cond,n),this.R(\") {\"),this.U(function(){r.compile(t.body,n),i&&r.u(\"cb()\")}),t.else_?(this.R(\"}\\nelse {\"),this.U(function(){r.compile(t.else_,n),i&&r.u(\"cb()\")})):i&&(this.R(\"}\\nelse {\"),this.u(\"cb()\")),this.R(\"}\")},s.compileIfAsync=function(t,n){this.u(\"(function(cb) {\"),this.compileIf(t,n,!0),this.u(\"})(\"+this.$()),this.D()},s.q=function(t,n,i,r){var e=this;[{name:\"index\",val:i+\" + 1\"},{name:\"index0\",val:i},{name:\"revindex\",val:r+\" - \"+i},{name:\"revindex0\",val:r+\" - \"+i+\" - 1\"},{name:\"first\",val:i+\" === 0\"},{name:\"last\",val:i+\" === \"+r+\" - 1\"},{name:\"length\",val:r}].forEach(function(t){e.R('frame.set(\"loop.'+t.name+'\", '+t.val+\");\")})},s.compileFor=function(t,n){var i=this,r=this.F(),e=this.F(),s=this.F();if(n=n.push(),this.R(\"frame = frame.push();\"),this.u(\"var \"+s+\" = \"),this.h(t.arr,n),this.R(\";\"),this.u(\"if(\"+s+\") {\"),this.R(s+\" = runtime.fromIterator(\"+s+\");\"),t.name instanceof o.Array){this.R(\"var \"+r+\";\"),this.R(\"if(runtime.isArray(\"+s+\")) {\"),this.R(\"var \"+e+\" = \"+s+\".length;\"),this.R(\"for(\"+r+\"=0; \"+r+\" < \"+s+\".length; \"+r+\"++) {\"),t.name.children.forEach(function(e,o){var u=i.F();i.R(\"var \"+u+\" = \"+s+\"[\"+r+\"][\"+o+\"];\"),i.R('frame.set(\"'+e+'\", '+s+\"[\"+r+\"][\"+o+\"]);\"),n.set(t.name.children[o].value,u)}),this.q(t,s,r,e),this.U(function(){i.compile(t.body,n)}),this.R(\"}\"),this.R(\"} else {\");var u=t.name.children,h=u[0],f=u[1],c=this.F(),a=this.F();n.set(h.value,c),n.set(f.value,a),this.R(r+\" = -1;\"),this.R(\"var \"+e+\" = runtime.keys(\"+s+\").length;\"),this.R(\"for(var \"+c+\" in \"+s+\") {\"),this.R(r+\"++;\"),this.R(\"var \"+a+\" = \"+s+\"[\"+c+\"];\"),this.R('frame.set(\"'+h.value+'\", '+c+\");\"),this.R('frame.set(\"'+f.value+'\", '+a+\");\"),this.q(t,s,r,e),this.U(function(){i.compile(t.body,n)}),this.R(\"}\"),this.R(\"}\")}else{var l=this.F();n.set(t.name.value,l),this.R(\"var \"+e+\" = \"+s+\".length;\"),this.R(\"for(var \"+r+\"=0; \"+r+\" < \"+s+\".length; \"+r+\"++) {\"),this.R(\"var \"+l+\" = \"+s+\"[\"+r+\"];\"),this.R('frame.set(\"'+t.name.value+'\", '+l+\");\"),this.q(t,s,r,e),this.U(function(){i.compile(t.body,n)}),this.R(\"}\")}this.R(\"}\"),t.else_&&(this.R(\"if (!\"+e+\") {\"),this.compile(t.else_,n),this.R(\"}\")),this.R(\"frame = frame.pop();\")},s.X=function(t,n,i){var r=this,e=this.F(),s=this.F(),u=this.F(),h=i?\"asyncAll\":\"asyncEach\";if(n=n.push(),this.R(\"frame = frame.push();\"),this.u(\"var \"+u+\" = runtime.fromIterator(\"),this.h(t.arr,n),this.R(\");\"),t.name instanceof o.Array){var f=t.name.children.length;this.u(\"runtime.\"+h+\"(\"+u+\", \"+f+\", function(\"),t.name.children.forEach(function(t){r.u(t.value+\",\")}),this.u(e+\",\"+s+\",next) {\"),t.name.children.forEach(function(t){var i=t.value;n.set(i,i),r.R('frame.set(\"'+i+'\", '+i+\");\")})}else{var c=t.name.value;this.R(\"runtime.\"+h+\"(\"+u+\", 1, function(\"+c+\", \"+e+\", \"+s+\",next) {\"),this.R('frame.set(\"'+c+'\", '+c+\");\"),n.set(c,c)}this.q(t,u,e,s),this.U(function(){var s;i&&(s=r.I()),r.compile(t.body,n),r.R(\"next(\"+e+(s?\",\"+s:\"\")+\");\"),i&&r.K()});var a=this.F();this.R(\"}, \"+this.$(a)),this.D(),i&&this.R(this.buffer+\" += \"+a+\";\"),t.else_&&(this.R(\"if (!\"+u+\".length) {\"),this.compile(t.else_,n),this.R(\"}\")),this.R(\"frame = frame.pop();\")},s.compileAsyncEach=function(t,n){this.X(t,n)},s.compileAsyncAll=function(t,n){this.X(t,n,!0)},s.Z=function(t,n){var i=this,r=[],e=null,s=\"macro_\"+this.F(),u=void 0!==n;t.args.children.forEach(function(n,s){s===t.args.children.length-1&&n instanceof o.Dict?e=n:(i.assertType(n,o.Symbol),r.push(n))});var f,c=[].concat(r.map(function(t){return\"l_\"+t.value}),[\"kwargs\"]),a=r.map(function(t){return'\"'+t.value+'\"'}),l=(e&&e.children||[]).map(function(t){return'\"'+t.key.value+'\"'});f=u?n.push(!0):new h,this.M(\"var \"+s+\" = runtime.makeMacro(\",\"[\"+a.join(\", \")+\"], \",\"[\"+l.join(\", \")+\"], \",\"function (\"+c.join(\", \")+\") {\",\"var callerFrame = frame;\",\"frame = \"+(u?\"frame.push(true);\":\"new runtime.Frame();\"),\"kwargs = kwargs || {};\",'if (Object.prototype.hasOwnProperty.call(kwargs, \"caller\")) {','frame.set(\"caller\", kwargs.caller); }'),r.forEach(function(t){i.R('frame.set(\"'+t.value+'\", l_'+t.value+\");\"),f.set(t.value,\"l_\"+t.value)}),e&&e.children.forEach(function(t){var n=t.key.value;i.u('frame.set(\"'+n+'\", '),i.u('Object.prototype.hasOwnProperty.call(kwargs, \"'+n+'\")'),i.u(' ? kwargs[\"'+n+'\"] : '),i.h(t.value,f),i.u(\");\")});var v=this.I();return this.U(function(){i.compile(t.body,f)}),this.R(\"frame = \"+(u?\"frame.pop();\":\"callerFrame;\")),this.R(\"return new runtime.SafeString(\"+v+\");\"),this.R(\"});\"),this.K(),s},s.compileMacro=function(t,n){var i=this.Z(t),r=t.name.value;n.set(r,i),n.parent?this.R('frame.set(\"'+r+'\", '+i+\");\"):(\"_\"!==t.name.value.charAt(0)&&this.R('context.addExport(\"'+r+'\");'),this.R('context.setVariable(\"'+r+'\", '+i+\");\"))},s.compileCaller=function(t,n){this.u(\"(function (){\");var i=this.Z(t,n);this.u(\"return \"+i+\";})()\")},s.tt=function(t,n,i,r){var e=this.F(),s=this.G(),o=this.$(e),u=i?\"true\":\"false\",h=r?\"true\":\"false\";return this.u(\"env.getTemplate(\"),this.h(t.template,n),this.R(\", \"+u+\", \"+s+\", \"+h+\", \"+o),e},s.compileImport=function(t,n){var i=t.target.value,r=this.tt(t,n,!1,!1);this.D(),this.R(r+\".getExported(\"+(t.withContext?\"context.getVariables(), frame, \":\"\")+this.$(r)),this.D(),n.set(i,r),n.parent?this.R('frame.set(\"'+i+'\", '+r+\");\"):this.R('context.setVariable(\"'+i+'\", '+r+\");\")},s.compileFromImport=function(t,n){var i=this,r=this.tt(t,n,!1,!1);this.D(),this.R(r+\".getExported(\"+(t.withContext?\"context.getVariables(), frame, \":\"\")+this.$(r)),this.D(),t.names.children.forEach(function(t){var e,s,u=i.F();t instanceof o.Pair?(e=t.key.value,s=t.value.value):s=e=t.value,i.R(\"if(Object.prototype.hasOwnProperty.call(\"+r+', \"'+e+'\")) {'),i.R(\"var \"+u+\" = \"+r+\".\"+e+\";\"),i.R(\"} else {\"),i.R(\"cb(new Error(\\\"cannot import '\"+e+\"'\\\")); return;\"),i.R(\"}\"),n.set(s,u),n.parent?i.R('frame.set(\"'+s+'\", '+u+\");\"):i.R('context.setVariable(\"'+s+'\", '+u+\");\")})},s.compileBlock=function(t){var n=this.F();this.inBlock||this.u('(parentTemplate ? function(e, c, f, r, cb) { cb(\"\"); } : '),this.u('context.getBlock(\"'+t.name.value+'\")'),this.inBlock||this.u(\")\"),this.R(\"(env, context, frame, runtime, \"+this.$(n)),this.R(this.buffer+\" += \"+n+\";\"),this.D()},s.compileSuper=function(t,n){var i=t.blockName.value,r=t.symbol.value,e=this.$(r);this.R('context.getSuper(env, \"'+i+'\", b_'+i+\", frame, runtime, \"+e),this.R(r+\" = runtime.markSafe(\"+r+\");\"),this.D(),n.set(r,r)},s.compileExtends=function(t,n){var i=this.F(),r=this.tt(t,n,!0,!1);this.R(\"parentTemplate = \"+r),this.R(\"for(var \"+i+\" in parentTemplate.blocks) {\"),this.R(\"context.addBlock(\"+i+\", parentTemplate.blocks[\"+i+\"]);\"),this.R(\"}\"),this.D()},s.compileInclude=function(t,n){this.R(\"var tasks = [];\"),this.R(\"tasks.push(\"),this.R(\"function(callback) {\");var i=this.tt(t,n,!1,t.ignoreMissing);this.R(\"callback(null,\"+i+\");});\"),this.R(\"});\");var r=this.F();this.R(\"tasks.push(\"),this.R(\"function(template, callback){\"),this.R(\"template.render(context.getVariables(), frame, \"+this.$(r)),this.R(\"callback(null,\"+r+\");});\"),this.R(\"});\"),this.R(\"tasks.push(\"),this.R(\"function(result, callback){\"),this.R(this.buffer+\" += result;\"),this.R(\"callback(null);\"),this.R(\"});\"),this.R(\"env.waterfall(tasks, function(){\"),this.D()},s.compileTemplateData=function(t,n){this.compileLiteral(t,n)},s.compileCapture=function(t,n){var i=this,r=this.buffer;this.buffer=\"output\",this.R(\"(function() {\"),this.R('var output = \"\";'),this.U(function(){i.compile(t.body,n)}),this.R(\"return output;\"),this.R(\"})()\"),this.buffer=r},s.compileOutput=function(t,n){var i=this;t.children.forEach(function(r){r instanceof o.TemplateData?r.value&&(i.u(i.buffer+\" += \"),i.compileLiteral(r,n),i.R(\";\")):(i.u(i.buffer+\" += runtime.suppressValue(\"),i.throwOnUndefined&&i.u(\"runtime.ensureDefined(\"),i.compile(r,n),i.throwOnUndefined&&i.u(\",\"+t.lineno+\",\"+t.colno+\")\"),i.u(\", env.opts.autoescape);\\n\"))})},s.compileRoot=function(t,n){var i=this;n&&this.fail(\"compileRoot: root node can't have frame\"),n=new h,this.P(t,\"root\"),this.R(\"var parentTemplate = null;\"),this.W(t,n),this.R(\"if(parentTemplate) {\"),this.R(\"parentTemplate.rootRenderFunc(env, context, frame, runtime, cb);\"),this.R(\"} else {\"),this.R(\"cb(null, \"+this.buffer+\");\"),this.R(\"}\"),this.B(!0),this.inBlock=!0;var r=[],e=t.findAll(o.Block);e.forEach(function(t,n){var e=t.name.value;if(-1!==r.indexOf(e))throw new Error('Block \"'+e+'\" defined more than once.');r.push(e),i.P(t,\"b_\"+e);var s=new h;i.R(\"var frame = frame.push(true);\"),i.compile(t.body,s),i.B()}),this.R(\"return {\"),e.forEach(function(t,n){var r=\"b_\"+t.name.value;i.R(r+\": \"+r+\",\")}),this.R(\"root: root\\n};\")},s.compile=function(t,n){var i=this[\"compile\"+t.typename];i?i.call(this,t,n):this.fail(\"compile: Cannot compile node: \"+t.typename,t.lineno,t.colno)},s.getCode=function(){return this.codebuf.join(\"\")},n}(f);t.exports={compile:function(t,n,i,r,o){void 0===o&&(o={});var u=new a(r,o.throwOnUndefined),h=(i||[]).map(function(t){return t.preprocess}).filter(function(t){return!!t}).reduce(function(t,n){return n(t)},t);return u.compile(s.transform(e.parse(h,i,o),n,r)),u.getCode()},Compiler:a}},999:function(t,n,i){\"use strict\";function r(t,n){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},r(t,n)}var e=i(608),s=i(883),o=i(891).Obj,u=i(449),h=function(t){function n(){return t.apply(this,arguments)||this}var i,o;o=t,(i=n).prototype=Object.create(o.prototype),i.prototype.constructor=i,r(i,o);var h=n.prototype;return h.init=function(t){this.tokens=t,this.peeked=null,this.breakOnBlocks=null,this.dropLeadingWhitespace=!1,this.extensions=[]},h.nextToken=function(t){var n;if(this.peeked){if(t||this.peeked.type!==e.TOKEN_WHITESPACE)return n=this.peeked,this.peeked=null,n;this.peeked=null}if(n=this.tokens.nextToken(),!t)for(;n&&n.type===e.TOKEN_WHITESPACE;)n=this.tokens.nextToken();return n},h.peekToken=function(){return this.peeked=this.peeked||this.nextToken(),this.peeked},h.pushToken=function(t){if(this.peeked)throw new Error(\"pushToken: can only push one token on between reads\");this.peeked=t},h.error=function(t,n,i){if(void 0===n||void 0===i){var r=this.peekToken()||{};n=r.lineno,i=r.colno}return void 0!==n&&(n+=1),void 0!==i&&(i+=1),new u.TemplateError(t,n,i)},h.fail=function(t,n,i){throw this.error(t,n,i)},h.skip=function(t){var n=this.nextToken();return!(!n||n.type!==t)||(this.pushToken(n),!1)},h.expect=function(t){var n=this.nextToken();return n.type!==t&&this.fail(\"expected \"+t+\", got \"+n.type,n.lineno,n.colno),n},h.skipValue=function(t,n){var i=this.nextToken();return!(!i||i.type!==t||i.value!==n)||(this.pushToken(i),!1)},h.skipSymbol=function(t){return this.skipValue(e.TOKEN_SYMBOL,t)},h.advanceAfterBlockEnd=function(t){var n;return t||((n=this.peekToken())||this.fail(\"unexpected end of file\"),n.type!==e.TOKEN_SYMBOL&&this.fail(\"advanceAfterBlockEnd: expected symbol token or explicit name to be passed\"),t=this.nextToken().value),(n=this.nextToken())&&n.type===e.TOKEN_BLOCK_END?\"-\"===n.value.charAt(0)&&(this.dropLeadingWhitespace=!0):this.fail(\"expected block end in \"+t+\" statement\"),n},h.advanceAfterVariableEnd=function(){var t=this.nextToken();t&&t.type===e.TOKEN_VARIABLE_END?this.dropLeadingWhitespace=\"-\"===t.value.charAt(t.value.length-this.tokens.tags.VARIABLE_END.length-1):(this.pushToken(t),this.fail(\"expected variable end\"))},h.parseFor=function(){var t,n,i=this.peekToken();if(this.skipSymbol(\"for\")?(t=new s.For(i.lineno,i.colno),n=\"endfor\"):this.skipSymbol(\"asyncEach\")?(t=new s.AsyncEach(i.lineno,i.colno),n=\"endeach\"):this.skipSymbol(\"asyncAll\")?(t=new s.AsyncAll(i.lineno,i.colno),n=\"endall\"):this.fail(\"parseFor: expected for{Async}\",i.lineno,i.colno),t.name=this.parsePrimary(),t.name instanceof s.Symbol||this.fail(\"parseFor: variable name expected for loop\"),this.peekToken().type===e.TOKEN_COMMA){var r=t.name;for(t.name=new s.Array(r.lineno,r.colno),t.name.addChild(r);this.skip(e.TOKEN_COMMA);){var o=this.parsePrimary();t.name.addChild(o)}}return this.skipSymbol(\"in\")||this.fail('parseFor: expected \"in\" keyword for loop',i.lineno,i.colno),t.arr=this.parseExpression(),this.advanceAfterBlockEnd(i.value),t.body=this.parseUntilBlocks(n,\"else\"),this.skipSymbol(\"else\")&&(this.advanceAfterBlockEnd(\"else\"),t.else_=this.parseUntilBlocks(n)),this.advanceAfterBlockEnd(),t},h.parseMacro=function(){var t=this.peekToken();this.skipSymbol(\"macro\")||this.fail(\"expected macro\");var n=this.parsePrimary(!0),i=this.parseSignature(),r=new s.Macro(t.lineno,t.colno,n,i);return this.advanceAfterBlockEnd(t.value),r.body=this.parseUntilBlocks(\"endmacro\"),this.advanceAfterBlockEnd(),r},h.parseCall=function(){var t=this.peekToken();this.skipSymbol(\"call\")||this.fail(\"expected call\");var n=this.parseSignature(!0)||new s.NodeList,i=this.parsePrimary();this.advanceAfterBlockEnd(t.value);var r=this.parseUntilBlocks(\"endcall\");this.advanceAfterBlockEnd();var e=new s.Symbol(t.lineno,t.colno,\"caller\"),o=new s.Caller(t.lineno,t.colno,e,n,r),u=i.args.children;return u[u.length-1]instanceof s.KeywordArgs||u.push(new s.KeywordArgs),u[u.length-1].addChild(new s.Pair(t.lineno,t.colno,e,o)),new s.Output(t.lineno,t.colno,[i])},h.parseWithContext=function(){var t=this.peekToken(),n=null;return this.skipSymbol(\"with\")?n=!0:this.skipSymbol(\"without\")&&(n=!1),null!==n&&(this.skipSymbol(\"context\")||this.fail(\"parseFrom: expected context after with/without\",t.lineno,t.colno)),n},h.parseImport=function(){var t=this.peekToken();this.skipSymbol(\"import\")||this.fail(\"parseImport: expected import\",t.lineno,t.colno);var n=this.parseExpression();this.skipSymbol(\"as\")||this.fail('parseImport: expected \"as\" keyword',t.lineno,t.colno);var i=this.parseExpression(),r=this.parseWithContext(),e=new s.Import(t.lineno,t.colno,n,i,r);return this.advanceAfterBlockEnd(t.value),e},h.parseFrom=function(){var t=this.peekToken();this.skipSymbol(\"from\")||this.fail(\"parseFrom: expected from\");var n=this.parseExpression();this.skipSymbol(\"import\")||this.fail(\"parseFrom: expected import\",t.lineno,t.colno);for(var i,r=new s.NodeList;;){var o=this.peekToken();if(o.type===e.TOKEN_BLOCK_END){r.children.length||this.fail(\"parseFrom: Expected at least one import name\",t.lineno,t.colno),\"-\"===o.value.charAt(0)&&(this.dropLeadingWhitespace=!0),this.nextToken();break}r.children.length>0&&!this.skip(e.TOKEN_COMMA)&&this.fail(\"parseFrom: expected comma\",t.lineno,t.colno);var u=this.parsePrimary();if(\"_\"===u.value.charAt(0)&&this.fail(\"parseFrom: names starting with an underscore cannot be imported\",u.lineno,u.colno),this.skipSymbol(\"as\")){var h=this.parsePrimary();r.addChild(new s.Pair(u.lineno,u.colno,u,h))}else r.addChild(u);i=this.parseWithContext()}return new s.FromImport(t.lineno,t.colno,n,r,i)},h.parseBlock=function(){var t=this.peekToken();this.skipSymbol(\"block\")||this.fail(\"parseBlock: expected block\",t.lineno,t.colno);var n=new s.Block(t.lineno,t.colno);n.name=this.parsePrimary(),n.name instanceof s.Symbol||this.fail(\"parseBlock: variable name expected\",t.lineno,t.colno),this.advanceAfterBlockEnd(t.value),n.body=this.parseUntilBlocks(\"endblock\"),this.skipSymbol(\"endblock\"),this.skipSymbol(n.name.value);var i=this.peekToken();return i||this.fail(\"parseBlock: expected endblock, got end of file\"),this.advanceAfterBlockEnd(i.value),n},h.parseExtends=function(){var t=\"extends\",n=this.peekToken();this.skipSymbol(t)||this.fail(\"parseTemplateRef: expected \"+t);var i=new s.Extends(n.lineno,n.colno);return i.template=this.parseExpression(),this.advanceAfterBlockEnd(n.value),i},h.parseInclude=function(){var t=\"include\",n=this.peekToken();this.skipSymbol(t)||this.fail(\"parseInclude: expected \"+t);var i=new s.Include(n.lineno,n.colno);return i.template=this.parseExpression(),this.skipSymbol(\"ignore\")&&this.skipSymbol(\"missing\")&&(i.ignoreMissing=!0),this.advanceAfterBlockEnd(n.value),i},h.parseIf=function(){var t,n=this.peekToken();this.skipSymbol(\"if\")||this.skipSymbol(\"elif\")||this.skipSymbol(\"elseif\")?t=new s.If(n.lineno,n.colno):this.skipSymbol(\"ifAsync\")?t=new s.IfAsync(n.lineno,n.colno):this.fail(\"parseIf: expected if, elif, or elseif\",n.lineno,n.colno),t.cond=this.parseExpression(),this.advanceAfterBlockEnd(n.value),t.body=this.parseUntilBlocks(\"elif\",\"elseif\",\"else\",\"endif\");var i=this.peekToken();switch(i&&i.value){case\"elseif\":case\"elif\":t.else_=this.parseIf();break;case\"else\":this.advanceAfterBlockEnd(),t.else_=this.parseUntilBlocks(\"endif\"),this.advanceAfterBlockEnd();break;case\"endif\":t.else_=null,this.advanceAfterBlockEnd();break;default:this.fail(\"parseIf: expected elif, else, or endif, got end of file\")}return t},h.parseSet=function(){var t=this.peekToken();this.skipSymbol(\"set\")||this.fail(\"parseSet: expected set\",t.lineno,t.colno);for(var n,i=new s.Set(t.lineno,t.colno,[]);(n=this.parsePrimary())&&(i.targets.push(n),this.skip(e.TOKEN_COMMA)););return this.skipValue(e.TOKEN_OPERATOR,\"=\")?(i.value=this.parseExpression(),this.advanceAfterBlockEnd(t.value)):this.skip(e.TOKEN_BLOCK_END)?(i.body=new s.Capture(t.lineno,t.colno,this.parseUntilBlocks(\"endset\")),i.value=null,this.advanceAfterBlockEnd()):this.fail(\"parseSet: expected = or block end in set tag\",t.lineno,t.colno),i},h.parseSwitch=function(){var t=\"switch\",n=\"endswitch\",i=\"case\",r=\"default\",e=this.peekToken();this.skipSymbol(t)||this.skipSymbol(i)||this.skipSymbol(r)||this.fail('parseSwitch: expected \"switch,\" \"case\" or \"default\"',e.lineno,e.colno);var o=this.parseExpression();this.advanceAfterBlockEnd(t),this.parseUntilBlocks(i,r,n);var u,h=this.peekToken(),f=[];do{this.skipSymbol(i);var c=this.parseExpression();this.advanceAfterBlockEnd(t);var a=this.parseUntilBlocks(i,r,n);f.push(new s.Case(h.line,h.col,c,a)),h=this.peekToken()}while(h&&h.value===i);switch(h.value){case r:this.advanceAfterBlockEnd(),u=this.parseUntilBlocks(n),this.advanceAfterBlockEnd();break;case n:this.advanceAfterBlockEnd();break;default:this.fail('parseSwitch: expected \"case,\" \"default\" or \"endswitch,\" got EOF.')}return new s.Switch(e.lineno,e.colno,o,f,u)},h.parseStatement=function(){var t=this.peekToken();if(t.type!==e.TOKEN_SYMBOL&&this.fail(\"tag name expected\",t.lineno,t.colno),this.breakOnBlocks&&-1!==u.indexOf(this.breakOnBlocks,t.value))return null;switch(t.value){case\"raw\":return this.parseRaw();case\"verbatim\":return this.parseRaw(\"verbatim\");case\"if\":case\"ifAsync\":return this.parseIf();case\"for\":case\"asyncEach\":case\"asyncAll\":return this.parseFor();case\"block\":return this.parseBlock();case\"extends\":return this.parseExtends();case\"include\":return this.parseInclude();case\"set\":return this.parseSet();case\"macro\":return this.parseMacro();case\"call\":return this.parseCall();case\"import\":return this.parseImport();case\"from\":return this.parseFrom();case\"filter\":return this.parseFilterStatement();case\"switch\":return this.parseSwitch();default:if(this.extensions.length)for(var n=0;n<this.extensions.length;n++){var i=this.extensions[n];if(-1!==u.indexOf(i.tags||[],t.value))return i.parse(this,s,e)}this.fail(\"unknown block tag: \"+t.value,t.lineno,t.colno)}},h.parseRaw=function(t){for(var n=\"end\"+(t=t||\"raw\"),i=new RegExp(\"([\\\\s\\\\S]*?){%\\\\s*(\"+t+\"|\"+n+\")\\\\s*(?=%})%}\"),r=1,e=\"\",o=null,u=this.advanceAfterBlockEnd();(o=this.tokens.N(i))&&r>0;){var h=o[0],f=o[1],c=o[2];c===t?r+=1:c===n&&(r-=1),0===r?(e+=f,this.tokens.backN(h.length-f.length)):e+=h}return new s.Output(u.lineno,u.colno,[new s.TemplateData(u.lineno,u.colno,e)])},h.parsePostfix=function(t){for(var n,i=this.peekToken();i;){if(i.type===e.TOKEN_LEFT_PAREN)t=new s.FunCall(i.lineno,i.colno,t,this.parseSignature());else if(i.type===e.TOKEN_LEFT_BRACKET)(n=this.parseAggregate()).children.length>1&&this.fail(\"invalid index\"),t=new s.LookupVal(i.lineno,i.colno,t,n.children[0]);else{if(i.type!==e.TOKEN_OPERATOR||\".\"!==i.value)break;this.nextToken();var r=this.nextToken();r.type!==e.TOKEN_SYMBOL&&this.fail(\"expected name as lookup value, got \"+r.value,r.lineno,r.colno),n=new s.Literal(r.lineno,r.colno,r.value),t=new s.LookupVal(i.lineno,i.colno,t,n)}i=this.peekToken()}return t},h.parseExpression=function(){return this.parseInlineIf()},h.parseInlineIf=function(){var t=this.parseOr();if(this.skipSymbol(\"if\")){var n=this.parseOr(),i=t;(t=new s.InlineIf(t.lineno,t.colno)).body=i,t.cond=n,this.skipSymbol(\"else\")?t.else_=this.parseOr():t.else_=null}return t},h.parseOr=function(){for(var t=this.parseAnd();this.skipSymbol(\"or\");){var n=this.parseAnd();t=new s.Or(t.lineno,t.colno,t,n)}return t},h.parseAnd=function(){for(var t=this.parseNot();this.skipSymbol(\"and\");){var n=this.parseNot();t=new s.And(t.lineno,t.colno,t,n)}return t},h.parseNot=function(){var t=this.peekToken();return this.skipSymbol(\"not\")?new s.Not(t.lineno,t.colno,this.parseNot()):this.parseIn()},h.parseIn=function(){for(var t=this.parseIs();;){var n=this.nextToken();if(!n)break;var i=n.type===e.TOKEN_SYMBOL&&\"not\"===n.value;if(i||this.pushToken(n),!this.skipSymbol(\"in\")){i&&this.pushToken(n);break}var r=this.parseIs();t=new s.In(t.lineno,t.colno,t,r),i&&(t=new s.Not(t.lineno,t.colno,t))}return t},h.parseIs=function(){var t=this.parseCompare();if(this.skipSymbol(\"is\")){var n=this.skipSymbol(\"not\"),i=this.parseCompare();t=new s.Is(t.lineno,t.colno,t,i),n&&(t=new s.Not(t.lineno,t.colno,t))}return t},h.parseCompare=function(){for(var t=[\"==\",\"===\",\"!=\",\"!==\",\"<\",\">\",\"<=\",\">=\"],n=this.parseConcat(),i=[];;){var r=this.nextToken();if(!r)break;if(-1===t.indexOf(r.value)){this.pushToken(r);break}i.push(new s.CompareOperand(r.lineno,r.colno,this.parseConcat(),r.value))}return i.length?new s.Compare(i[0].lineno,i[0].colno,n,i):n},h.parseConcat=function(){for(var t=this.parseAdd();this.skipValue(e.TOKEN_TILDE,\"~\");){var n=this.parseAdd();t=new s.Concat(t.lineno,t.colno,t,n)}return t},h.parseAdd=function(){for(var t=this.parseSub();this.skipValue(e.TOKEN_OPERATOR,\"+\");){var n=this.parseSub();t=new s.Add(t.lineno,t.colno,t,n)}return t},h.parseSub=function(){for(var t=this.parseMul();this.skipValue(e.TOKEN_OPERATOR,\"-\");){var n=this.parseMul();t=new s.Sub(t.lineno,t.colno,t,n)}return t},h.parseMul=function(){for(var t=this.parseDiv();this.skipValue(e.TOKEN_OPERATOR,\"*\");){var n=this.parseDiv();t=new s.Mul(t.lineno,t.colno,t,n)}return t},h.parseDiv=function(){for(var t=this.parseFloorDiv();this.skipValue(e.TOKEN_OPERATOR,\"/\");){var n=this.parseFloorDiv();t=new s.Div(t.lineno,t.colno,t,n)}return t},h.parseFloorDiv=function(){for(var t=this.parseMod();this.skipValue(e.TOKEN_OPERATOR,\"//\");){var n=this.parseMod();t=new s.FloorDiv(t.lineno,t.colno,t,n)}return t},h.parseMod=function(){for(var t=this.parsePow();this.skipValue(e.TOKEN_OPERATOR,\"%\");){var n=this.parsePow();t=new s.Mod(t.lineno,t.colno,t,n)}return t},h.parsePow=function(){for(var t=this.parseUnary();this.skipValue(e.TOKEN_OPERATOR,\"**\");){var n=this.parseUnary();t=new s.Pow(t.lineno,t.colno,t,n)}return t},h.parseUnary=function(t){var n,i=this.peekToken();return n=this.skipValue(e.TOKEN_OPERATOR,\"-\")?new s.Neg(i.lineno,i.colno,this.parseUnary(!0)):this.skipValue(e.TOKEN_OPERATOR,\"+\")?new s.Pos(i.lineno,i.colno,this.parseUnary(!0)):this.parsePrimary(),t||(n=this.parseFilter(n)),n},h.parsePrimary=function(t){var n,i=this.nextToken(),r=null;if(i?i.type===e.TOKEN_STRING?n=i.value:i.type===e.TOKEN_INT?n=parseInt(i.value,10):i.type===e.TOKEN_FLOAT?n=parseFloat(i.value):i.type===e.TOKEN_BOOLEAN?\"true\"===i.value?n=!0:\"false\"===i.value?n=!1:this.fail(\"invalid boolean: \"+i.value,i.lineno,i.colno):i.type===e.TOKEN_NONE?n=null:i.type===e.TOKEN_REGEX&&(n=new RegExp(i.value.body,i.value.flags)):this.fail(\"expected expression, got end of file\"),void 0!==n?r=new s.Literal(i.lineno,i.colno,n):i.type===e.TOKEN_SYMBOL?r=new s.Symbol(i.lineno,i.colno,i.value):(this.pushToken(i),r=this.parseAggregate()),t||(r=this.parsePostfix(r)),r)return r;throw this.error(\"unexpected token: \"+i.value,i.lineno,i.colno)},h.parseFilterName=function(){for(var t=this.expect(e.TOKEN_SYMBOL),n=t.value;this.skipValue(e.TOKEN_OPERATOR,\".\");)n+=\".\"+this.expect(e.TOKEN_SYMBOL).value;return new s.Symbol(t.lineno,t.colno,n)},h.parseFilterArgs=function(t){return this.peekToken().type===e.TOKEN_LEFT_PAREN?this.parsePostfix(t).args.children:[]},h.parseFilter=function(t){for(;this.skip(e.TOKEN_PIPE);){var n=this.parseFilterName();t=new s.Filter(n.lineno,n.colno,n,new s.NodeList(n.lineno,n.colno,[t].concat(this.parseFilterArgs(t))))}return t},h.parseFilterStatement=function(){var t=this.peekToken();this.skipSymbol(\"filter\")||this.fail(\"parseFilterStatement: expected filter\");var n=this.parseFilterName(),i=this.parseFilterArgs(n);this.advanceAfterBlockEnd(t.value);var r=new s.Capture(n.lineno,n.colno,this.parseUntilBlocks(\"endfilter\"));this.advanceAfterBlockEnd();var e=new s.Filter(n.lineno,n.colno,n,new s.NodeList(n.lineno,n.colno,[r].concat(i)));return new s.Output(n.lineno,n.colno,[e])},h.parseAggregate=function(){var t,n=this.nextToken();switch(n.type){case e.TOKEN_LEFT_PAREN:t=new s.Group(n.lineno,n.colno);break;case e.TOKEN_LEFT_BRACKET:t=new s.Array(n.lineno,n.colno);break;case e.TOKEN_LEFT_CURLY:t=new s.Dict(n.lineno,n.colno);break;default:return null}for(;;){var i=this.peekToken().type;if(i===e.TOKEN_RIGHT_PAREN||i===e.TOKEN_RIGHT_BRACKET||i===e.TOKEN_RIGHT_CURLY){this.nextToken();break}if(t.children.length>0&&(this.skip(e.TOKEN_COMMA)||this.fail(\"parseAggregate: expected comma after expression\",n.lineno,n.colno)),t instanceof s.Dict){var r=this.parsePrimary();this.skip(e.TOKEN_COLON)||this.fail(\"parseAggregate: expected colon after dict key\",n.lineno,n.colno);var o=this.parseExpression();t.addChild(new s.Pair(r.lineno,r.colno,r,o))}else{var u=this.parseExpression();t.addChild(u)}}return t},h.parseSignature=function(t,n){var i=this.peekToken();if(!n&&i.type!==e.TOKEN_LEFT_PAREN){if(t)return null;this.fail(\"expected arguments\",i.lineno,i.colno)}i.type===e.TOKEN_LEFT_PAREN&&(i=this.nextToken());for(var r=new s.NodeList(i.lineno,i.colno),o=new s.KeywordArgs(i.lineno,i.colno),u=!1;;){if(i=this.peekToken(),!n&&i.type===e.TOKEN_RIGHT_PAREN){this.nextToken();break}if(n&&i.type===e.TOKEN_BLOCK_END)break;if(u&&!this.skip(e.TOKEN_COMMA))this.fail(\"parseSignature: expected comma after expression\",i.lineno,i.colno);else{var h=this.parseExpression();this.skipValue(e.TOKEN_OPERATOR,\"=\")?o.addChild(new s.Pair(h.lineno,h.colno,h,this.parseExpression())):r.addChild(h)}u=!0}return o.children.length&&r.addChild(o),r},h.parseUntilBlocks=function(){for(var t=this.breakOnBlocks,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];this.breakOnBlocks=i;var e=this.parse();return this.breakOnBlocks=t,e},h.parseNodes=function(){for(var t,n=[];t=this.nextToken();)if(t.type===e.TOKEN_DATA){var i=t.value,r=this.peekToken(),o=r&&r.value;this.dropLeadingWhitespace&&(i=i.replace(/^\\s*/,\"\"),this.dropLeadingWhitespace=!1),r&&(r.type===e.TOKEN_BLOCK_START&&\"-\"===o.charAt(o.length-1)||r.type===e.TOKEN_VARIABLE_START&&\"-\"===o.charAt(this.tokens.tags.VARIABLE_START.length)||r.type===e.TOKEN_COMMENT&&\"-\"===o.charAt(this.tokens.tags.COMMENT_START.length))&&(i=i.replace(/\\s*$/,\"\")),n.push(new s.Output(t.lineno,t.colno,[new s.TemplateData(t.lineno,t.colno,i)]))}else if(t.type===e.TOKEN_BLOCK_START){this.dropLeadingWhitespace=!1;var u=this.parseStatement();if(!u)break;n.push(u)}else if(t.type===e.TOKEN_VARIABLE_START){var h=this.parseExpression();this.dropLeadingWhitespace=!1,this.advanceAfterVariableEnd(),n.push(new s.Output(t.lineno,t.colno,[h]))}else t.type===e.TOKEN_COMMENT?this.dropLeadingWhitespace=\"-\"===t.value.charAt(t.value.length-this.tokens.tags.COMMENT_END.length-1):this.fail(\"Unexpected token at top-level: \"+t.type,t.lineno,t.colno);return n},h.parse=function(){return new s.NodeList(0,0,this.parseNodes())},h.parseAsRoot=function(){return new s.Root(0,0,this.parseNodes())},n}(o);t.exports={parse:function(t,n,i){var r=new h(e.lex(t,i));return void 0!==n&&(r.extensions=n),r.parseAsRoot()},Parser:h}}},n={};function i(r){var e=n[r];if(void 0!==e)return e.exports;var s=n[r]={exports:{}};return t[r].call(s.exports,s,s.exports,i),s.exports}return i.g=function(){if(\"object\"==typeof globalThis)return globalThis;try{return this||new Function(\"return this\")()}catch(t){if(\"object\"==typeof window)return window}}(),i(647)}()});\n+//# sourceMappingURL=nunjucks.min.js.map\n\\ No newline at end of file\n",
					"match": false,
					"packageHash": "c0c8973bf6e9290dc81d4a8729bf129581498bd38737fa75571600c29ac130b3",
					"size": 72783,
					"sourceHash": "11880a6b1ad01e4ac26ad868bc5a855cffd615262650be2a976ae384aac566b3",
					"status": "content"
				},
				"contribute.json": {
					"match": false,
					"packageHash": "ca36410ffc13cfb6a4fcb4313b33fcd069ff08c47ee9d0833a6b265c8ad163dc",
					"size": 688,
					"status": "missing-in-source"
				},
				"index.js": {
					"diff": "--- published/index.js\n+++ rebuilt/index.js\n@@ -1,86 +1,82 @@\n 'use strict';\n \n var lib = require('./src/lib');\n-var env = require('./src/environment');\n+var _require = require('./src/environment'),\n+  Environment = _require.Environment,\n+  Template = _require.Template;\n var Loader = require('./src/loader');\n var loaders = require('./src/loaders');\n var precompile = require('./src/precompile');\n-\n-module.exports = {};\n-module.exports.Environment = env.Environment;\n-module.exports.Template = env.Template;\n-\n-module.exports.Loader = Loader;\n-module.exports.FileSystemLoader = loaders.FileSystemLoader;\n-module.exports.PrecompiledLoader = loaders.PrecompiledLoader;\n-module.exports.WebLoader = loaders.WebLoader;\n-\n-module.exports.compiler = require('./src/compiler');\n-module.exports.parser = require('./src/parser');\n-module.exports.lexer = require('./src/lexer');\n-module.exports.runtime = require('./src/runtime');\n-module.exports.lib = lib;\n-module.exports.nodes = require('./src/nodes');\n-\n-module.exports.installJinjaCompat = require('./src/jinja-compat.js');\n+var compiler = require('./src/compiler');\n+var parser = require('./src/parser');\n+var lexer = require('./src/lexer');\n+var runtime = require('./src/runtime');\n+var nodes = require('./src/nodes');\n+var installJinjaCompat = require('./src/jinja-compat');\n \n // A single instance of an environment, since this is so commonly used\n-\n var e;\n-module.exports.configure = function(templatesPath, opts) {\n-    opts = opts || {};\n-    if(lib.isObject(templatesPath)) {\n-        opts = templatesPath;\n-        templatesPath = null;\n-    }\n-\n-    var TemplateLoader;\n-    if(loaders.FileSystemLoader) {\n-        TemplateLoader = new loaders.FileSystemLoader(templatesPath, {\n-            watch: opts.watch,\n-            noCache: opts.noCache\n-        });\n-    }\n-    else if(loaders.WebLoader) {\n-        TemplateLoader = new loaders.WebLoader(templatesPath, {\n-            useCache: opts.web && opts.web.useCache,\n-            async: opts.web && opts.web.async\n-        });\n-    }\n-\n-    e = new env.Environment(TemplateLoader, opts);\n-\n-    if(opts && opts.express) {\n-        e.express(opts.express);\n-    }\n-\n-    return e;\n-};\n-\n-module.exports.compile = function(src, env, path, eagerCompile) {\n-    if(!e) {\n-        module.exports.configure();\n-    }\n-    return new module.exports.Template(src, env, path, eagerCompile);\n-};\n-\n-module.exports.render = function(name, ctx, cb) {\n-    if(!e) {\n-        module.exports.configure();\n+function configure(templatesPath, opts) {\n+  opts = opts || {};\n+  if (lib.isObject(templatesPath)) {\n+    opts = templatesPath;\n+    templatesPath = null;\n+  }\n+  var TemplateLoader;\n+  if (loaders.FileSystemLoader) {\n+    TemplateLoader = new loaders.FileSystemLoader(templatesPath, {\n+      watch: opts.watch,\n+      noCache: opts.noCache\n+    });\n+  } else if (loaders.WebLoader) {\n+    TemplateLoader = new loaders.WebLoader(templatesPath, {\n+      useCache: opts.web && opts.web.useCache,\n+      async: opts.web && opts.web.async\n+    });\n+  }\n+  e = new Environment(TemplateLoader, opts);\n",
					"match": false,
					"packageHash": "045e0b81519fd74e9e3a8e1aa70a843bf78910dcbcb961e0bcc7e29cd73c878c",
					"size": 2339,
					"sourceHash": "1795e76220bcd4757401d5c06c67d6131eb80e2e9be8c4179382be5b6b10a100",
					"status": "content"
				},
				"package.json": {
					"diff": "--- published/package.json\n+++ rebuilt/package.json\n@@ -1,37 +1,101 @@\n {\n   \"name\": \"nunjucks\",\n   \"description\": \"A powerful templating engine with inheritance, asynchronous control, and more (jinja2 inspired)\",\n-  \"version\": \"2.5.0\",\n+  \"version\": \"3.2.4\",\n   \"author\": \"James Long <longster@gmail.com>\",\n   \"dependencies\": {\n+    \"a-sync-waterfall\": \"^1.0.0\",\n     \"asap\": \"^2.0.3\",\n-    \"chokidar\": \"^1.6.0\",\n-    \"yargs\": \"^3.32.0\"\n+    \"commander\": \"^5.1.0\"\n   },\n   \"browser\": \"./browser/nunjucks.js\",\n   \"devDependencies\": {\n+    \"@babel/cli\": \"^7.0.0-beta.38\",\n+    \"@babel/core\": \"^7.0.0-beta.38\",\n+    \"@babel/preset-env\": \"^7.0.0-beta.38\",\n+    \"@babel/register\": \"^7.0.0-beta.38\",\n+    \"@eslint/js\": \"^9.29.0\",\n+    \"babel-loader\": \"^8.4.1\",\n+    \"babel-plugin-istanbul\": \"^7.0.0\",\n+    \"babel-plugin-module-resolver\": \"3.0.0-beta.5\",\n+    \"connect\": \"^3.6.5\",\n+    \"core-js\": \"^2.5.3\",\n+    \"cross-env\": \"^5.1.3\",\n+    \"eslint\": \"^9.29.0\",\n+    \"eslint-config-airbnb-extended\": \"^2.1.0\",\n+    \"eslint-plugin-import\": \"^2.31.0\",\n     \"expect.js\": \"*\",\n     \"express\": \"4.x\",\n-    \"istanbul\": \"0.3.x\",\n-    \"jshint\": \"2.8.x\",\n-    \"mocha\": \"*\",\n-    \"node-libs-browser\": \"^0.4.3\",\n+    \"fs-extra\": \"^5.0.0\",\n+    \"get-port\": \"^3.2.0\",\n+    \"globals\": \"^16.2.0\",\n+    \"mocha\": \"< 8.x\",\n+    \"mocha-phantomjs-core\": \"^2.1.2\",\n+    \"mocha-phantomjs-istanbul\": \"0.0.2\",\n+    \"module-alias\": \"^2.0.3\",\n+    \"node-libs-browser\": \"^0.7.0\",\n+    \"nyc\": \"^15.1.0\",\n+    \"phantomjs-prebuilt\": \"^2.1.16\",\n+    \"serve-static\": \"^1.13.1\",\n     \"supertest\": \"*\",\n-    \"uglify-js\": \"*\",\n-    \"webpack\": \"^1.8.11\"\n+    \"terser-webpack-plugin\": \"^5.3.14\",\n+    \"uglify-js\": \"^2.8.29\",\n+    \"webpack\": \"^5.99.9\"\n   },\n-  \"engines\": {\n-    \"node\": \"*\"\n+  \"buildDependencies\": {\n+    \"@babel/cli\": \"^7.0.0-beta.38\",\n+    \"@babel/core\": \"^7.0.0-beta.38\",\n+    \"@babel/preset-env\": \"^7.0.0-beta.38\",\n+    \"@babel/register\": \"^7.0.0-beta.38\",\n+    \"babel-loader\": \"^8.0.0-beta.0\",\n+    \"babel-plugin-istanbul\": \"^4.1.5\",\n+    \"babel-plugin-module-resolver\": \"3.0.0-beta.5\",\n+    \"core-js\": \"^2.5.3\",\n+    \"module-alias\": \"^2.0.3\",\n+    \"node-libs-browser\": \"^0.7.0\",\n+    \"uglify-js\": \"^2.8.29\",\n+    \"uglifyjs-webpack-plugin\": \"^1.1.6\",\n+    \"webpack\": \"^3.10.0\"\n+  },\n+  \"peerDependencies\": {\n+    \"chokidar\": \"^3.3.0\"\n+  },\n+  \"peerDependenciesMeta\": {\n+    \"chokidar\": {\n+      \"optional\": true\n+    }\n+  },\n+  \"_moduleAliases\": {\n+    \"babel-register\": \"@babel/register\"\n   },\n   \"scripts\": {\n-    \"lint\": \"jshint .\",\n-    \"test\": \"jshint . && istanbul cover ./node_modules/mocha/bin/_mocha -- -b -R tap tests\",\n-    \"browserfiles\": \"./bin/bundle\"\n+    \"build:transpile\": \"babel nunjucks --out-dir .\",\n+    \"build:bundle\": \"node scripts/bundle.js\",\n+    \"build\": \"npm run build:transpile && npm run build:bundle\",\n+    \"codecov\": \"codecov\",\n+    \"mocha\": \"mocha -R spec tests\",\n+    \"lint\": \"eslint --flag unstable_config_lookup_from_file nunjucks scripts tests\",\n+    \"prepare\": \"npm run build\",\n+    \"test:instrument\": \"cross-env NODE_ENV=test scripts/bundle.js\",\n+    \"test:runner\": \"cross-env NODE_ENV=test NODE_PATH=tests/test-node-pkgs scripts/testrunner.js\",\n+    \"test\": \"npm run lint && npm run test:instrument && npm run test:runner\"\n   },\n   \"bin\": {\n",
					"match": false,
					"packageHash": "bdd643f7c04fbd223e419e8152a8c319bd9ddee84269c96d7979dbce0e2e5768",
					"size": 1126,
					"sourceHash": "800a1e4eebfef361647d898e58799a66225dfc81a13a12e4112fd55851daa748",
					"status": "content"
				},
				"src/compiler.js": {
					"diff": "--- published/src/compiler.js\n+++ rebuilt/src/compiler.js\n@@ -1,1181 +1,1027 @@\n 'use strict';\n \n-var lib = require('./lib');\n+function _inheritsLoose(t, o) { t.prototype = Object.create(o.prototype), t.prototype.constructor = t, _setPrototypeOf(t, o); }\n+function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\n var parser = require('./parser');\n var transformer = require('./transformer');\n var nodes = require('./nodes');\n-// jshint -W079\n-var Object = require('./object');\n-var Frame = require('./runtime').Frame;\n+var _require = require('./lib'),\n+  TemplateError = _require.TemplateError;\n+var _require2 = require('./runtime'),\n+  Frame = _require2.Frame;\n+var _require3 = require('./object'),\n+  Obj = _require3.Obj;\n \n // These are all the same for now, but shouldn't be passed straight\n // through\n var compareOps = {\n-    '==': '==',\n-    '===': '===',\n-    '!=': '!=',\n-    '!==': '!==',\n-    '<': '<',\n-    '>': '>',\n-    '<=': '<=',\n-    '>=': '>='\n+  '==': '==',\n+  '===': '===',\n+  '!=': '!=',\n+  '!==': '!==',\n+  '<': '<',\n+  '>': '>',\n+  '<=': '<=',\n+  '>=': '>='\n };\n-\n-// A common pattern is to emit binary operators\n-function binOpEmitter(str) {\n-    return function(node, frame) {\n-        this.compile(node.left, frame);\n-        this.emit(str);\n-        this.compile(node.right, frame);\n-    };\n-}\n-\n-var Compiler = Object.extend({\n-    init: function(templateName, throwOnUndefined) {\n-        this.templateName = templateName;\n-        this.codebuf = [];\n-        this.lastId = 0;\n-        this.buffer = null;\n-        this.bufferStack = [];\n-        this.scopeClosers = '';\n-        this.inBlock = false;\n-        this.throwOnUndefined = throwOnUndefined;\n-    },\n-\n-    fail: function (msg, lineno, colno) {\n-        if (lineno !== undefined) lineno += 1;\n-        if (colno !== undefined) colno += 1;\n-\n-        throw new lib.TemplateError(msg, lineno, colno);\n-    },\n-\n-    pushBufferId: function(id) {\n-        this.bufferStack.push(this.buffer);\n-        this.buffer = id;\n-        this.emit('var ' + this.buffer + ' = \"\";');\n-    },\n-\n-    popBufferId: function() {\n-        this.buffer = this.bufferStack.pop();\n-    },\n-\n-    emit: function(code) {\n-        this.codebuf.push(code);\n-    },\n-\n-    emitLine: function(code) {\n-        this.emit(code + '\\n');\n-    },\n-\n-    emitLines: function() {\n-        lib.each(lib.toArray(arguments), function(line) {\n-            this.emitLine(line);\n-        }, this);\n-    },\n-\n-    emitFuncBegin: function(name) {\n-        this.buffer = 'output';\n-        this.scopeClosers = '';\n-        this.emitLine('function ' + name + '(env, context, frame, runtime, cb) {');\n-        this.emitLine('var lineno = null;');\n-        this.emitLine('var colno = null;');\n",
					"match": false,
					"packageHash": "2f549d8bfd6700c0177d6f123656f8c06b040cb398df8f76f70ebb0a9b0b78a3",
					"size": 37235,
					"sourceHash": "4872d7a1c157b56a9eabc964420390fcff47017dee8fc296deeb51a2912ab358",
					"status": "content"
				},
				"src/environment.js": {
					"diff": "--- published/src/environment.js\n+++ rebuilt/src/environment.js\n@@ -1,590 +1,548 @@\n 'use strict';\n \n-var path = require('path');\n+function _inheritsLoose(t, o) { t.prototype = Object.create(o.prototype), t.prototype.constructor = t, _setPrototypeOf(t, o); }\n+function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\n var asap = require('asap');\n+var _waterfall = require('a-sync-waterfall');\n var lib = require('./lib');\n-var Obj = require('./object');\n var compiler = require('./compiler');\n-var builtin_filters = require('./filters');\n-var builtin_loaders = require('./loaders');\n-var runtime = require('./runtime');\n+var filters = require('./filters');\n+var _require = require('./loaders'),\n+  FileSystemLoader = _require.FileSystemLoader,\n+  WebLoader = _require.WebLoader,\n+  PrecompiledLoader = _require.PrecompiledLoader;\n+var tests = require('./tests');\n var globals = require('./globals');\n-var Frame = runtime.Frame;\n-var Template;\n-\n-// Unconditionally load in this loader, even if no other ones are\n-// included (possible in the slim browser build)\n-builtin_loaders.PrecompiledLoader = require('./precompiled-loader');\n+var _require2 = require('./object'),\n+  Obj = _require2.Obj,\n+  EmitterObj = _require2.EmitterObj;\n+var globalRuntime = require('./runtime');\n+var handleError = globalRuntime.handleError,\n+  Frame = globalRuntime.Frame;\n+var expressApp = require('./express-app');\n \n // If the user is using the async API, *always* call it\n // asynchronously even if the template was synchronous.\n function callbackAsap(cb, err, res) {\n-    asap(function() { cb(err, res); });\n+  asap(function () {\n+    cb(err, res);\n+  });\n }\n \n-var Environment = Obj.extend({\n-    init: function(loaders, opts) {\n-        // The dev flag determines the trace that'll be shown on errors.\n-        // If set to true, returns the full trace from the error point,\n-        // otherwise will return trace starting from Template.render\n-        // (the full trace from within nunjucks may confuse developers using\n-        //  the library)\n-        // defaults to false\n-        opts = this.opts = opts || {};\n-        this.opts.dev = !!opts.dev;\n-\n-        // The autoescape flag sets global autoescaping. If true,\n-        // every string variable will be escaped by default.\n-        // If false, strings can be manually escaped using the `escape` filter.\n-        // defaults to true\n-        this.opts.autoescape = opts.autoescape != null ? opts.autoescape : true;\n-\n-        // If true, this will make the system throw errors if trying\n-        // to output a null or undefined value\n-        this.opts.throwOnUndefined = !!opts.throwOnUndefined;\n-        this.opts.trimBlocks = !!opts.trimBlocks;\n-        this.opts.lstripBlocks = !!opts.lstripBlocks;\n-\n-        this.loaders = [];\n-\n-        if(!loaders) {\n-            // The filesystem loader is only available server-side\n-            if(builtin_loaders.FileSystemLoader) {\n-                this.loaders = [new builtin_loaders.FileSystemLoader('views')];\n-            }\n-            else if(builtin_loaders.WebLoader) {\n-                this.loaders = [new builtin_loaders.WebLoader('/views')];\n-            }\n-        }\n-        else {\n-            this.loaders = lib.isArray(loaders) ? loaders : [loaders];\n-        }\n-\n-        // It's easy to use precompiled templates: just include them\n-        // before you configure nunjucks and this will automatically\n-        // pick it up and use it\n-        if(process.env.IS_BROWSER && window.nunjucksPrecompiled) {\n-            this.loaders.unshift(\n-                new builtin_loaders.PrecompiledLoader(window.nunjucksPrecompiled)\n-            );\n-        }\n-\n-        this.initCache();\n-\n-        this.globals = globals();\n-        this.filters = {};\n-        this.asyncFilters = [];\n-        this.extensions = {};\n-        this.extensionsList = [];\n",
					"match": false,
					"packageHash": "d3e18c0df1187c91b6f3483a38dcc249d4536d8c4ce2e24c9b40230723c9f75d",
					"size": 17095,
					"sourceHash": "12297ade7df1ed523b6f552b4c33fe6582de74193c30f456222db263f8303a6c",
					"status": "content"
				},
				"src/filters.js": {
					"diff": "--- published/src/filters.js\n+++ rebuilt/src/filters.js\n@@ -2,580 +2,543 @@\n \n var lib = require('./lib');\n var r = require('./runtime');\n-\n+var _exports = module.exports = {};\n function normalize(value, defaultValue) {\n-    if(value === null || value === undefined || value === false) {\n-        return defaultValue;\n+  if (value === null || value === undefined || value === false) {\n+    return defaultValue;\n+  }\n+  return value;\n+}\n+_exports.abs = Math.abs;\n+function isNaN(num) {\n+  return num !== num; // eslint-disable-line no-self-compare\n+}\n+function batch(arr, linecount, fillWith) {\n+  var i;\n+  var res = [];\n+  var tmp = [];\n+  for (i = 0; i < arr.length; i++) {\n+    if (i % linecount === 0 && tmp.length) {\n+      res.push(tmp);\n+      tmp = [];\n+    }\n+    tmp.push(arr[i]);\n+  }\n+  if (tmp.length) {\n+    if (fillWith) {\n+      for (i = tmp.length; i < linecount; i++) {\n+        tmp.push(fillWith);\n+      }\n     }\n-    return value;\n+    res.push(tmp);\n+  }\n+  return res;\n }\n+_exports.batch = batch;\n+function capitalize(str) {\n+  str = normalize(str, '');\n+  var ret = str.toLowerCase();\n+  return r.copySafeness(str, ret.charAt(0).toUpperCase() + ret.slice(1));\n+}\n+_exports.capitalize = capitalize;\n+function center(str, width) {\n+  str = normalize(str, '');\n+  width = width || 80;\n+  if (str.length >= width) {\n+    return str;\n+  }\n+  var spaces = width - str.length;\n+  var pre = lib.repeat(' ', spaces / 2 - spaces % 2);\n+  var post = lib.repeat(' ', spaces / 2);\n+  return r.copySafeness(str, pre + str + post);\n+}\n+_exports.center = center;\n+function default_(val, def, bool) {\n+  if (bool) {\n+    return val || def;\n+  } else {\n+    return val !== undefined ? val : def;\n+  }\n+}\n+\n+// TODO: it is confusing to export something called 'default'\n+_exports['default'] = default_; // eslint-disable-line dot-notation\n \n-var filters = {\n-    abs: function(n) {\n-        return Math.abs(n);\n-    },\n-\n-    batch: function(arr, linecount, fill_with) {\n-        var i;\n-        var res = [];\n-        var tmp = [];\n-\n-        for(i = 0; i < arr.length; i++) {\n-            if(i % linecount === 0 && tmp.length) {\n-                res.push(tmp);\n-                tmp = [];\n-            }\n-\n-            tmp.push(arr[i]);\n-        }\n-\n-        if(tmp.length) {\n-            if(fill_with) {\n-                for(i = tmp.length; i < linecount; i++) {\n-                    tmp.push(fill_with);\n-                }\n-            }\n-\n-            res.push(tmp);\n-        }\n",
					"match": false,
					"packageHash": "4ad1fc6fcde5e6fa62af85a5e68733a6c5d9937fe6036f434fc6c51c871ab200",
					"size": 15729,
					"sourceHash": "61c48a4bb30ed3a79126ebf9814311bec94094b2b6e308f4e3bf1947e9dad454",
					"status": "content"
				},
				"src/globals.js": {
					"diff": "--- published/src/globals.js\n+++ rebuilt/src/globals.js\n@@ -1,79 +1,65 @@\n 'use strict';\n \n-function cycler(items) {\n-    var index = -1;\n-\n-    return {\n-        current: null,\n-        reset: function() {\n-            index = -1;\n-            this.current = null;\n-        },\n-\n-        next: function() {\n-            index++;\n-            if(index >= items.length) {\n-                index = 0;\n-            }\n-\n-            this.current = items[index];\n-            return this.current;\n-        },\n-    };\n-\n+function _cycler(items) {\n+  var index = -1;\n+  return {\n+    current: null,\n+    reset: function reset() {\n+      index = -1;\n+      this.current = null;\n+    },\n+    next: function next() {\n+      index++;\n+      if (index >= items.length) {\n+        index = 0;\n+      }\n+      this.current = items[index];\n+      return this.current;\n+    }\n+  };\n }\n-\n-function joiner(sep) {\n-    sep = sep || ',';\n-    var first = true;\n-\n-    return function() {\n-        var val = first ? '' : sep;\n-        first = false;\n-        return val;\n-    };\n+function _joiner(sep) {\n+  sep = sep || ',';\n+  var first = true;\n+  return function () {\n+    var val = first ? '' : sep;\n+    first = false;\n+    return val;\n+  };\n }\n \n // Making this a function instead so it returns a new object\n // each time it's called. That way, if something like an environment\n // uses it, they will each have their own copy.\n function globals() {\n-    return {\n-        range: function(start, stop, step) {\n-            if(typeof stop === 'undefined') {\n-                stop = start;\n-                start = 0;\n-                step = 1;\n-            }\n-            else if(!step) {\n-                step = 1;\n-            }\n-\n-            var arr = [];\n-            var i;\n-            if (step > 0) {\n-                for (i=start; i<stop; i+=step) {\n-                    arr.push(i);\n-                }\n-            } else {\n-                for (i=start; i>stop; i+=step) {\n-                    arr.push(i);\n-                }\n-            }\n-            return arr;\n-        },\n-\n-        // lipsum: function(n, html, min, max) {\n-        // },\n-\n-        cycler: function() {\n-            return cycler(Array.prototype.slice.call(arguments));\n-        },\n-\n",
					"match": false,
					"packageHash": "fd11dbd19187f71262a03b44b87878985d20c533e60a297e4bbb421c29a27bd0",
					"size": 1696,
					"sourceHash": "c83abf8b08c99cbccedb0129662b86f065dd5ef646c4d033a2a93ab2f5abea11",
					"status": "content"
				},
				"src/jinja-compat.js": {
					"diff": "--- published/src/jinja-compat.js\n+++ rebuilt/src/jinja-compat.js\n@@ -1,31 +1,176 @@\n+\"use strict\";\n+\n function installCompat() {\n   'use strict';\n \n+  /* eslint-disable camelcase */\n+\n   // This must be called like `nunjucks.installCompat` so that `this`\n   // references the nunjucks instance\n-  var runtime = this.runtime; // jshint ignore:line\n-  var lib = this.lib; // jshint ignore:line\n-\n+  var runtime = this.runtime;\n+  var lib = this.lib;\n+  // Handle slim case where these 'modules' are excluded from the built source\n+  var Compiler = this.compiler.Compiler;\n+  var Parser = this.parser.Parser;\n+  var nodes = this.nodes;\n+  var lexer = this.lexer;\n   var orig_contextOrFrameLookup = runtime.contextOrFrameLookup;\n-  runtime.contextOrFrameLookup = function(context, frame, key) {\n+  var orig_memberLookup = runtime.memberLookup;\n+  var orig_Compiler_assertType;\n+  var orig_Parser_parseAggregate;\n+  if (Compiler) {\n+    orig_Compiler_assertType = Compiler.prototype.assertType;\n+  }\n+  if (Parser) {\n+    orig_Parser_parseAggregate = Parser.prototype.parseAggregate;\n+  }\n+  function uninstall() {\n+    runtime.contextOrFrameLookup = orig_contextOrFrameLookup;\n+    runtime.memberLookup = orig_memberLookup;\n+    if (Compiler) {\n+      Compiler.prototype.assertType = orig_Compiler_assertType;\n+    }\n+    if (Parser) {\n+      Parser.prototype.parseAggregate = orig_Parser_parseAggregate;\n+    }\n+  }\n+  runtime.contextOrFrameLookup = function contextOrFrameLookup(context, frame, key) {\n     var val = orig_contextOrFrameLookup.apply(this, arguments);\n-    if (val === undefined) {\n-      switch (key) {\n+    if (val !== undefined) {\n+      return val;\n+    }\n+    switch (key) {\n       case 'True':\n         return true;\n       case 'False':\n         return false;\n       case 'None':\n         return null;\n-      }\n+      default:\n+        return undefined;\n     }\n-\n-    return val;\n   };\n+  function getTokensState(tokens) {\n+    return {\n+      index: tokens.index,\n+      lineno: tokens.lineno,\n+      colno: tokens.colno\n+    };\n+  }\n+  if (process.env.BUILD_TYPE !== 'SLIM' && nodes && Compiler && Parser) {\n+    // i.e., not slim mode\n+    var Slice = nodes.Node.extend('Slice', {\n+      fields: ['start', 'stop', 'step'],\n+      init: function init(lineno, colno, start, stop, step) {\n+        start = start || new nodes.Literal(lineno, colno, null);\n+        stop = stop || new nodes.Literal(lineno, colno, null);\n+        step = step || new nodes.Literal(lineno, colno, 1);\n+        this.parent(lineno, colno, start, stop, step);\n+      }\n+    });\n+    Compiler.prototype.assertType = function assertType(node) {\n+      if (node instanceof Slice) {\n+        return;\n+      }\n+      orig_Compiler_assertType.apply(this, arguments);\n+    };\n+    Compiler.prototype.compileSlice = function compileSlice(node, frame) {\n+      this._emit('(');\n+      this._compileExpression(node.start, frame);\n+      this._emit('),(');\n+      this._compileExpression(node.stop, frame);\n+      this._emit('),(');\n+      this._compileExpression(node.step, frame);\n+      this._emit(')');\n+    };\n+    Parser.prototype.parseAggregate = function parseAggregate() {\n+      var _this = this;\n+      var origState = getTokensState(this.tokens);\n",
					"match": false,
					"packageHash": "242e6f970c89cb0093a9aae31ea5f7c1b97b2a4f0525605956211a61081f7954",
					"size": 3938,
					"sourceHash": "ce0f052cad8eb213134be0f1a58a1567c29b7746944f4a60392aecf827d94cd2",
					"status": "content"
				},
				"src/lexer.js": {
					"diff": "--- published/src/lexer.js\n+++ rebuilt/src/lexer.js\n@@ -1,18 +1,15 @@\n 'use strict';\n \n var lib = require('./lib');\n-\n-var whitespaceChars = ' \\n\\t\\r\\u00A0';\n+var whitespaceChars = \" \\n\\t\\r\\xA0\";\n var delimChars = '()[]{}%*-+~/#,:|.<>=!';\n var intChars = '0123456789';\n-\n var BLOCK_START = '{%';\n var BLOCK_END = '%}';\n var VARIABLE_START = '{{';\n var VARIABLE_END = '}}';\n var COMMENT_START = '{#';\n var COMMENT_END = '#}';\n-\n var TOKEN_STRING = 'string';\n var TOKEN_WHITESPACE = 'whitespace';\n var TOKEN_DATA = 'data';\n@@ -39,482 +36,439 @@\n var TOKEN_SYMBOL = 'symbol';\n var TOKEN_SPECIAL = 'special';\n var TOKEN_REGEX = 'regex';\n-\n function token(type, value, lineno, colno) {\n-    return {\n-        type: type,\n-        value: value,\n-        lineno: lineno,\n-        colno: colno\n-    };\n+  return {\n+    type: type,\n+    value: value,\n+    lineno: lineno,\n+    colno: colno\n+  };\n }\n-\n-function Tokenizer(str, opts) {\n+var Tokenizer = /*#__PURE__*/function () {\n+  function Tokenizer(str, opts) {\n     this.str = str;\n     this.index = 0;\n     this.len = str.length;\n     this.lineno = 0;\n     this.colno = 0;\n-\n     this.in_code = false;\n-\n     opts = opts || {};\n-\n     var tags = opts.tags || {};\n     this.tags = {\n-        BLOCK_START: tags.blockStart || BLOCK_START,\n-        BLOCK_END: tags.blockEnd || BLOCK_END,\n-        VARIABLE_START: tags.variableStart || VARIABLE_START,\n-        VARIABLE_END: tags.variableEnd || VARIABLE_END,\n-        COMMENT_START: tags.commentStart || COMMENT_START,\n-        COMMENT_END: tags.commentEnd || COMMENT_END\n+      BLOCK_START: tags.blockStart || BLOCK_START,\n+      BLOCK_END: tags.blockEnd || BLOCK_END,\n+      VARIABLE_START: tags.variableStart || VARIABLE_START,\n+      VARIABLE_END: tags.variableEnd || VARIABLE_END,\n+      COMMENT_START: tags.commentStart || COMMENT_START,\n+      COMMENT_END: tags.commentEnd || COMMENT_END\n     };\n-\n     this.trimBlocks = !!opts.trimBlocks;\n     this.lstripBlocks = !!opts.lstripBlocks;\n-}\n-\n-Tokenizer.prototype.nextToken = function() {\n+  }\n+  var _proto = Tokenizer.prototype;\n+  _proto.nextToken = function nextToken() {\n     var lineno = this.lineno;\n     var colno = this.colno;\n     var tok;\n-\n-    if(this.in_code) {\n-        // Otherwise, if we are in a block parse it as code\n-        var cur = this.current();\n-\n-        if(this.is_finished()) {\n-            // We have nothing else to parse\n-            return null;\n-        }\n-        else if(cur === '\"' || cur === '\\'') {\n-            // We've hit a string\n-            return token(TOKEN_STRING, this.parseString(cur), lineno, colno);\n-        }\n-        else if((tok = this._extract(whitespaceChars))) {\n-            // We hit some whitespace\n-            return token(TOKEN_WHITESPACE, tok, lineno, colno);\n-        }\n-        else if((tok = this._extractString(this.tags.BLOCK_END)) ||\n",
					"match": false,
					"packageHash": "a8becee747a60ce064f75361f28e794138bb12af0063b618b2d7ef1257c46cc5",
					"size": 16531,
					"sourceHash": "910b70f77e9cbf42da3ed8ff46f0fa588dc67fd3b6a9ba12851dd539c6ed5cba",
					"status": "content"
				},
				"src/lib.js": {
					"diff": "--- published/src/lib.js\n+++ rebuilt/src/lib.js\n@@ -2,298 +2,324 @@\n \n var ArrayProto = Array.prototype;\n var ObjProto = Object.prototype;\n-\n var escapeMap = {\n-    '&': '&amp;',\n-    '\"': '&quot;',\n-    '\\'': '&#39;',\n-    '<': '&lt;',\n-    '>': '&gt;'\n-};\n-\n-var escapeRegex = /[&\"'<>]/g;\n-\n-var lookupEscape = function(ch) {\n-    return escapeMap[ch];\n-};\n-\n-var exports = module.exports = {};\n-\n-exports.prettifyError = function(path, withInternals, err) {\n-    // jshint -W022\n-    // http://jslinterrors.com/do-not-assign-to-the-exception-parameter\n-    if (!err.Update) {\n-        // not one of ours, cast it\n-        err = new exports.TemplateError(err);\n-    }\n-    err.Update(path);\n-\n-    // Unless they marked the dev flag, show them a trace from here\n-    if (!withInternals) {\n-        var old = err;\n-        err = new Error(old.message);\n-        err.name = old.name;\n-    }\n-\n-    return err;\n-};\n-\n-exports.TemplateError = function(message, lineno, colno) {\n-    var err = this;\n-\n-    if (message instanceof Error) { // for casting regular js errors\n-        err = message;\n-        message = message.name + ': ' + message.message;\n-\n-        try {\n-            if(err.name = '') {}\n-        }\n-        catch(e) {\n-            // If we can't set the name of the error object in this\n-            // environment, don't use it\n-            err = this;\n-        }\n-    } else {\n-        if(Error.captureStackTrace) {\n-            Error.captureStackTrace(err);\n-        }\n-    }\n-\n-    err.name = 'Template render error';\n-    err.message = message;\n-    err.lineno = lineno;\n-    err.colno = colno;\n-    err.firstUpdate = true;\n-\n-    err.Update = function(path) {\n-        var message = '(' + (path || 'unknown path') + ')';\n-\n-        // only show lineno + colno next to path of template\n-        // where error occurred\n-        if (this.firstUpdate) {\n-            if(this.lineno && this.colno) {\n-                message += ' [Line ' + this.lineno + ', Column ' + this.colno + ']';\n-            }\n-            else if(this.lineno) {\n-                message += ' [Line ' + this.lineno + ']';\n-            }\n-        }\n-\n-        message += '\\n ';\n-        if (this.firstUpdate) {\n-            message += ' ';\n-        }\n-\n-        this.message = message + (this.message || '');\n-        this.firstUpdate = false;\n-        return this;\n+  '&': '&amp;',\n+  '\"': '&quot;',\n+  '\\'': '&#39;',\n+  '<': '&lt;',\n+  '>': '&gt;',\n+  '\\\\': '&#92;'\n+};\n+var escapeRegex = /[&\"'<>\\\\]/g;\n+var _exports = module.exports = {};\n",
					"match": false,
					"packageHash": "ae7e78562fed4ce8b6a44db5bcbbcb10daaf0c7c041d53efea7b3527e58b268b",
					"size": 6872,
					"sourceHash": "9901f841c4054118ba88ec688a8687635ff0cbf54b8077e48900687be849e95f",
					"status": "content"
				},
				"src/loader.js": {
					"diff": "--- published/src/loader.js\n+++ rebuilt/src/loader.js\n@@ -1,33 +1,21 @@\n 'use strict';\n \n+function _inheritsLoose(t, o) { t.prototype = Object.create(o.prototype), t.prototype.constructor = t, _setPrototypeOf(t, o); }\n+function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\n var path = require('path');\n-var Obj = require('./object');\n-var lib = require('./lib');\n-\n-var Loader = Obj.extend({\n-    on: function(name, func) {\n-        this.listeners = this.listeners || {};\n-        this.listeners[name] = this.listeners[name] || [];\n-        this.listeners[name].push(func);\n-    },\n-\n-    emit: function(name /*, arg1, arg2, ...*/) {\n-        var args = Array.prototype.slice.call(arguments, 1);\n-\n-        if(this.listeners && this.listeners[name]) {\n-            lib.each(this.listeners[name], function(listener) {\n-                listener.apply(null, args);\n-            });\n-        }\n-    },\n-\n-    resolve: function(from, to) {\n-        return path.resolve(path.dirname(from), to);\n-    },\n-\n-    isRelative: function(filename) {\n-        return (filename.indexOf('./') === 0 || filename.indexOf('../') === 0);\n-    }\n-});\n-\n-module.exports = Loader;\n+var _require = require('./object'),\n+  EmitterObj = _require.EmitterObj;\n+module.exports = /*#__PURE__*/function (_EmitterObj) {\n+  function Loader() {\n+    return _EmitterObj.apply(this, arguments) || this;\n+  }\n+  _inheritsLoose(Loader, _EmitterObj);\n+  var _proto = Loader.prototype;\n+  _proto.resolve = function resolve(from, to) {\n+    return path.resolve(path.dirname(from), to);\n+  };\n+  _proto.isRelative = function isRelative(filename) {\n+    return filename.indexOf('./') === 0 || filename.indexOf('../') === 0;\n+  };\n+  return Loader;\n+}(EmitterObj);\n\\ No newline at end of file\n",
					"match": false,
					"packageHash": "c1e54cc29529acacb1547fcbe9601422c7ce30eea0c50baacb0617093d3598df",
					"size": 869,
					"sourceHash": "ac08f3520ef7be2d28c444e7328f43f3c1e83a322a9e07730d29a8f88d18219f",
					"status": "content"
				},
				"src/loaders.js": {
					"diff": "--- published/src/loaders.js\n+++ rebuilt/src/loaders.js\n@@ -1,3 +1,5 @@\n+\"use strict\";\n+\n // This file will automatically be rewired to web-loader.js when\n // building for the browser\n-module.exports = require('./node-loaders');\n+module.exports = require('./node-loaders');\n\\ No newline at end of file\n",
					"match": false,
					"packageHash": "edc9b316424a1965eecd3cc24e10d871a6b0af158de09f391f14142f8568bb65",
					"size": 137,
					"sourceHash": "391b2f4e71192f751173d4b2afe3ff532591fbeac52503668d3dc8f64869d2c2",
					"status": "content"
				},
				"src/node-loaders.js": {
					"diff": "--- published/src/node-loaders.js\n+++ rebuilt/src/node-loaders.js\n@@ -1,85 +1,139 @@\n+/* eslint-disable no-console */\n+\n 'use strict';\n \n+function _inheritsLoose(t, o) { t.prototype = Object.create(o.prototype), t.prototype.constructor = t, _setPrototypeOf(t, o); }\n+function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\n var fs = require('fs');\n var path = require('path');\n-var lib = require('./lib');\n var Loader = require('./loader');\n-var chokidar = require('chokidar');\n-var PrecompiledLoader = require('./precompiled-loader.js');\n-\n-// Node <0.7.1 compatibility\n-var existsSync = fs.existsSync || path.existsSync;\n-\n-var FileSystemLoader = Loader.extend({\n-    init: function(searchPaths, opts) {\n-        if(typeof opts === 'boolean') {\n-            console.log(\n-                '[nunjucks] Warning: you passed a boolean as the second ' +\n-                'argument to FileSystemLoader, but it now takes an options ' +\n-                'object. See http://mozilla.github.io/nunjucks/api.html#filesystemloader'\n-            );\n-        }\n-\n-        opts = opts || {};\n-        this.pathsToNames = {};\n-        this.noCache = !!opts.noCache;\n-\n-        if(searchPaths) {\n-            searchPaths = lib.isArray(searchPaths) ? searchPaths : [searchPaths];\n-            // For windows, convert to forward slashes\n-            this.searchPaths = searchPaths.map(path.normalize);\n-        }\n-        else {\n-            this.searchPaths = ['.'];\n-        }\n-\n-        if(opts.watch) {\n-            // Watch all the templates in the paths and fire an event when\n-            // they change\n-            var paths = this.searchPaths.filter(function(p) { return existsSync(p); });\n-            var watcher = chokidar.watch(paths);\n-            var _this = this;\n-            watcher.on('all', function(event, fullname) {\n-                fullname = path.resolve(fullname);\n-                if(event === 'change' && fullname in _this.pathsToNames) {\n-                    _this.emit('update', _this.pathsToNames[fullname]);\n-                }\n-            });\n-            watcher.on('error', function(error) {\n-                console.log('Watcher error: ' + error);\n-            });\n-        }\n-    },\n-\n-    getSource: function(name) {\n-        var fullpath = null;\n-        var paths = this.searchPaths;\n-\n-        for(var i=0; i<paths.length; i++) {\n-            var basePath = path.resolve(paths[i]);\n-            var p = path.resolve(paths[i], name);\n-\n-            // Only allow the current directory and anything\n-            // underneath it to be searched\n-            if(p.indexOf(basePath) === 0 && existsSync(p)) {\n-                fullpath = p;\n-                break;\n-            }\n-        }\n-\n-        if(!fullpath) {\n-            return null;\n-        }\n-\n-        this.pathsToNames[fullpath] = name;\n-\n-        return { src: fs.readFileSync(fullpath, 'utf-8'),\n-                 path: fullpath,\n-                 noCache: this.noCache };\n+var _require = require('./precompiled-loader.js'),\n+  PrecompiledLoader = _require.PrecompiledLoader;\n+var chokidar;\n+var FileSystemLoader = /*#__PURE__*/function (_Loader) {\n+  function FileSystemLoader(searchPaths, opts) {\n+    var _this;\n+    _this = _Loader.call(this) || this;\n+    if (typeof opts === 'boolean') {\n+      console.log('[nunjucks] Warning: you passed a boolean as the second ' + 'argument to FileSystemLoader, but it now takes an options ' + 'object. See http://mozilla.github.io/nunjucks/api.html#filesystemloader');\n     }\n-});\n-\n+    opts = opts || {};\n+    _this.pathsToNames = {};\n+    _this.noCache = !!opts.noCache;\n",
					"match": false,
					"packageHash": "1b416aa8ca68713b58f0e47b957e7243d1017bf3b8110007d92e72c67037dac5",
					"size": 2688,
					"sourceHash": "7f94ac058d31e3f0029621052865ddb6134978c0b1bb38ea177a07d60e8ca72d",
					"status": "content"
				},
				"src/nodes.js": {
					"diff": "--- published/src/nodes.js\n+++ rebuilt/src/nodes.js\n@@ -1,130 +1,205 @@\n 'use strict';\n \n-var lib = require('./lib');\n-// jshint -W079\n-var Object = require('./object');\n-\n+function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\n+function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\n+function _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\n+function _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n+function _inheritsLoose(t, o) { t.prototype = Object.create(o.prototype), t.prototype.constructor = t, _setPrototypeOf(t, o); }\n+function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\n+var _require = require('./object'),\n+  Obj = _require.Obj;\n function traverseAndCheck(obj, type, results) {\n-    if(obj instanceof type) {\n-        results.push(obj);\n+  if (obj instanceof type) {\n+    results.push(obj);\n+  }\n+  if (obj instanceof Node) {\n+    obj.findAll(type, results);\n+  }\n+}\n+var Node = /*#__PURE__*/function (_Obj) {\n+  function Node() {\n+    return _Obj.apply(this, arguments) || this;\n+  }\n+  _inheritsLoose(Node, _Obj);\n+  var _proto = Node.prototype;\n+  _proto.init = function init(lineno, colno) {\n+    var _arguments = arguments,\n+      _this = this;\n+    for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n+      args[_key - 2] = arguments[_key];\n     }\n-\n-    if(obj instanceof Node) {\n-        obj.findAll(type, results);\n+    this.lineno = lineno;\n+    this.colno = colno;\n+    this.fields.forEach(function (field, i) {\n+      // The first two args are line/col numbers, so offset by 2\n+      var val = _arguments[i + 2];\n+\n+      // Fields should never be undefined, but null. It makes\n+      // testing easier to normalize values.\n+      if (val === undefined) {\n+        val = null;\n+      }\n+      _this[field] = val;\n+    });\n+  };\n+  _proto.findAll = function findAll(type, results) {\n+    var _this2 = this;\n+    results = results || [];\n+    if (this instanceof NodeList) {\n+      this.children.forEach(function (child) {\n+        return traverseAndCheck(child, type, results);\n+      });\n+    } else {\n+      this.fields.forEach(function (field) {\n+        return traverseAndCheck(_this2[field], type, results);\n+      });\n     }\n-}\n-\n-var Node = Object.extend('Node', {\n-    init: function(lineno, colno) {\n-        this.lineno = lineno;\n-        this.colno = colno;\n-\n-        var fields = this.fields;\n-        for(var i = 0, l = fields.length; i < l; i++) {\n-            var field = fields[i];\n-\n-            // The first two args are line/col numbers, so offset by 2\n-            var val = arguments[i + 2];\n-\n-            // Fields should never be undefined, but null. It makes\n-            // testing easier to normalize values.\n-            if(val === undefined) {\n-                val = null;\n-            }\n-\n-            this[field] = val;\n-        }\n-    },\n-\n-    findAll: function(type, results) {\n-        results = results || [];\n-\n-        var i, l;\n-        if(this instanceof NodeList) {\n-            var children = this.children;\n-\n-            for(i = 0, l = children.length; i < l; i++) {\n",
					"match": false,
					"packageHash": "562d8d17d69df37eadf62f356aa9e673011be975e6a5323f250942182c4663bf",
					"size": 8446,
					"sourceHash": "8f79459709acfbe3f8df51f977056fe6bc3cedc6afaf41da2b982ab68ad29ee3",
					"status": "content"
				},
				"src/object.js": {
					"diff": "--- published/src/object.js\n+++ rebuilt/src/object.js\n@@ -1,64 +1,97 @@\n 'use strict';\n \n // A simple class system, more documentation to come\n-\n-function extend(cls, name, props) {\n-    // This does that same thing as Object.create, but with support for IE8\n-    var F = function() {};\n-    F.prototype = cls.prototype;\n-    var prototype = new F();\n-\n-    // jshint undef: false\n-    var fnTest = /xyz/.test(function(){ xyz; }) ? /\\bparent\\b/ : /.*/;\n-    props = props || {};\n-\n-    for(var k in props) {\n-        var src = props[k];\n-        var parent = prototype[k];\n-\n-        if(typeof parent === 'function' &&\n-           typeof src === 'function' &&\n-           fnTest.test(src)) {\n-            /*jshint -W083 */\n-            prototype[k] = (function (src, parent) {\n-                return function() {\n-                    // Save the current parent method\n-                    var tmp = this.parent;\n-\n-                    // Set parent to the previous method, call, and restore\n-                    this.parent = parent;\n-                    var res = src.apply(this, arguments);\n-                    this.parent = tmp;\n-\n-                    return res;\n-                };\n-            })(src, parent);\n-        }\n-        else {\n-            prototype[k] = src;\n-        }\n+function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\n+function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\n+function _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\n+function _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n+function _inheritsLoose(t, o) { t.prototype = Object.create(o.prototype), t.prototype.constructor = t, _setPrototypeOf(t, o); }\n+function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\n+var EventEmitter = require('events');\n+var lib = require('./lib');\n+function parentWrap(parent, prop) {\n+  if (typeof parent !== 'function' || typeof prop !== 'function') {\n+    return prop;\n+  }\n+  return function wrap() {\n+    // Save the current parent method\n+    var tmp = this.parent;\n+\n+    // Set parent to the previous method, call, and restore\n+    this.parent = parent;\n+    var res = prop.apply(this, arguments);\n+    this.parent = tmp;\n+    return res;\n+  };\n+}\n+function extendClass(cls, name, props) {\n+  props = props || {};\n+  lib.keys(props).forEach(function (k) {\n+    props[k] = parentWrap(cls.prototype[k], props[k]);\n+  });\n+  var subclass = /*#__PURE__*/function (_cls) {\n+    function subclass() {\n+      return _cls.apply(this, arguments) || this;\n     }\n-\n-    prototype.typename = name;\n-\n-    var new_cls = function() {\n-        if(prototype.init) {\n-            prototype.init.apply(this, arguments);\n-        }\n-    };\n-\n-    new_cls.prototype = prototype;\n-    new_cls.prototype.constructor = new_cls;\n-\n-    new_cls.extend = function(name, props) {\n-        if(typeof name === 'object') {\n-            props = name;\n-            name = 'anonymous';\n-        }\n-        return extend(new_cls, name, props);\n-    };\n-\n-    return new_cls;\n+    _inheritsLoose(subclass, _cls);\n+    return _createClass(subclass, [{\n+      key: \"typename\",\n+      get: function get() {\n+        return name;\n",
					"match": false,
					"packageHash": "293b8231f9b6280a041229271c06da9c5693b74e31daec93e9e3e95d060dfdf2",
					"size": 1703,
					"sourceHash": "8ab86a87f8352cbe728f2165c405abc6efd3cfb0242f0824396d0c40f00de744",
					"status": "content"
				},
				"src/parser.js": {
					"diff": "--- published/src/parser.js\n+++ rebuilt/src/parser.js\n@@ -1,1285 +1,1028 @@\n 'use strict';\n \n+function _inheritsLoose(t, o) { t.prototype = Object.create(o.prototype), t.prototype.constructor = t, _setPrototypeOf(t, o); }\n+function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\n var lexer = require('./lexer');\n var nodes = require('./nodes');\n-// jshint -W079\n-var Object = require('./object');\n+var Obj = require('./object').Obj;\n var lib = require('./lib');\n-\n-var Parser = Object.extend({\n-    init: function (tokens) {\n-        this.tokens = tokens;\n+var Parser = /*#__PURE__*/function (_Obj) {\n+  function Parser() {\n+    return _Obj.apply(this, arguments) || this;\n+  }\n+  _inheritsLoose(Parser, _Obj);\n+  var _proto = Parser.prototype;\n+  _proto.init = function init(tokens) {\n+    this.tokens = tokens;\n+    this.peeked = null;\n+    this.breakOnBlocks = null;\n+    this.dropLeadingWhitespace = false;\n+    this.extensions = [];\n+  };\n+  _proto.nextToken = function nextToken(withWhitespace) {\n+    var tok;\n+    if (this.peeked) {\n+      if (!withWhitespace && this.peeked.type === lexer.TOKEN_WHITESPACE) {\n+        this.peeked = null;\n+      } else {\n+        tok = this.peeked;\n         this.peeked = null;\n-        this.breakOnBlocks = null;\n-        this.dropLeadingWhitespace = false;\n-\n-        this.extensions = [];\n-    },\n-\n-    nextToken: function (withWhitespace) {\n-        var tok;\n-\n-        if(this.peeked) {\n-            if(!withWhitespace && this.peeked.type === lexer.TOKEN_WHITESPACE) {\n-                this.peeked = null;\n-            }\n-            else {\n-                tok = this.peeked;\n-                this.peeked = null;\n-                return tok;\n-            }\n-        }\n-\n-        tok = this.tokens.nextToken();\n-\n-        if(!withWhitespace) {\n-            while(tok && tok.type === lexer.TOKEN_WHITESPACE) {\n-                tok = this.tokens.nextToken();\n-            }\n-        }\n-\n-        return tok;\n-    },\n-\n-    peekToken: function () {\n-        this.peeked = this.peeked || this.nextToken();\n-        return this.peeked;\n-    },\n-\n-    pushToken: function(tok) {\n-        if(this.peeked) {\n-            throw new Error('pushToken: can only push one token on between reads');\n-        }\n-        this.peeked = tok;\n-    },\n-\n-    fail: function (msg, lineno, colno) {\n-        if((lineno === undefined || colno === undefined) && this.peekToken()) {\n-            var tok = this.peekToken();\n-            lineno = tok.lineno;\n-            colno = tok.colno;\n-        }\n-        if (lineno !== undefined) lineno += 1;\n-        if (colno !== undefined) colno += 1;\n-\n-        throw new lib.TemplateError(msg, lineno, colno);\n-    },\n-\n-    skip: function(type) {\n-        var tok = this.nextToken();\n-        if(!tok || tok.type !== type) {\n-            this.pushToken(tok);\n-            return false;\n-        }\n-        return true;\n",
					"match": false,
					"packageHash": "4f91a3725ab507fc299bcb010298377277a1717978839a7a4ca4809d5c4914a1",
					"size": 39575,
					"sourceHash": "e99fa543a0636e3a943273037f326fbaba7008acf824ab71f8eaebca40fbe886",
					"status": "content"
				},
				"src/precompile-global.js": {
					"diff": "--- published/src/precompile-global.js\n+++ rebuilt/src/precompile-global.js\n@@ -1,24 +1,17 @@\n 'use strict';\n \n function precompileGlobal(templates, opts) {\n-    var out = '', name, template;\n-    opts = opts || {};\n-\n-    for ( var i = 0; i < templates.length; i++ ) {\n-        name = JSON.stringify(templates[i].name);\n-        template = templates[i].template;\n-\n-        out += '(function() {' +\n-            '(window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})' +\n-            '[' + name + '] = (function() {\\n' + template + '\\n})();\\n';\n-\n-        if(opts.asFunction) {\n-            out += 'return function(ctx, cb) { return nunjucks.render(' + name + ', ctx, cb); }\\n';\n-        }\n-\n-        out += '})();\\n';\n+  var out = '';\n+  opts = opts || {};\n+  for (var i = 0; i < templates.length; i++) {\n+    var name = JSON.stringify(templates[i].name);\n+    var template = templates[i].template;\n+    out += '(function() {' + '(window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})' + '[' + name + '] = (function() {\\n' + template + '\\n})();\\n';\n+    if (opts.asFunction) {\n+      out += 'return function(ctx, cb) { return nunjucks.render(' + name + ', ctx, cb); }\\n';\n     }\n-    return out;\n+    out += '})();\\n';\n+  }\n+  return out;\n }\n-\n-module.exports = precompileGlobal;\n+module.exports = precompileGlobal;\n\\ No newline at end of file\n",
					"match": false,
					"packageHash": "7bea0730682ff5e267caf12830c635328e33f248ac5822e24abb48eee793efce",
					"size": 676,
					"sourceHash": "bb0297edc7a8d10e89fc81ffb528e4e9c382ca28a26fd5f93e973ee56b4e54a8",
					"status": "content"
				},
				"src/precompile.js": {
					"diff": "--- published/src/precompile.js\n+++ rebuilt/src/precompile.js\n@@ -2,138 +2,107 @@\n \n var fs = require('fs');\n var path = require('path');\n-var lib = require('./lib');\n+var _require = require('./lib'),\n+  _prettifyError = _require._prettifyError;\n var compiler = require('./compiler');\n-var Environment = require('./environment').Environment;\n+var _require2 = require('./environment'),\n+  Environment = _require2.Environment;\n var precompileGlobal = require('./precompile-global');\n-\n function match(filename, patterns) {\n-    if (!Array.isArray(patterns)) return false;\n-    return patterns.some(function (pattern) {\n-        return filename.match(pattern) !== null;\n-    });\n+  if (!Array.isArray(patterns)) {\n+    return false;\n+  }\n+  return patterns.some(function (pattern) {\n+    return filename.match(pattern);\n+  });\n }\n-\n function precompileString(str, opts) {\n-    opts = opts || {};\n-    opts.isString = true;\n-    return precompile(str, opts);\n+  opts = opts || {};\n+  opts.isString = true;\n+  var env = opts.env || new Environment([]);\n+  var wrapper = opts.wrapper || precompileGlobal;\n+  if (!opts.name) {\n+    throw new Error('the \"name\" option is required when compiling a string');\n+  }\n+  return wrapper([_precompile(str, opts.name, env)], opts);\n }\n-\n function precompile(input, opts) {\n-    // The following options are available:\n-    //\n-    // * name: name of the template (auto-generated when compiling a directory)\n-    // * isString: input is a string, not a file path\n-    // * asFunction: generate a callable function\n-    // * force: keep compiling on error\n-    // * env: the Environment to use (gets extensions and async filters from it)\n-    // * include: which file/folders to include (folders are auto-included, files are auto-excluded)\n-    // * exclude: which file/folders to exclude (folders are auto-included, files are auto-excluded)\n-    // * wrapper: function(templates, opts) {...}\n-    //       Customize the output format to store the compiled template.\n-    //       By default, templates are stored in a global variable used by the runtime.\n-    //       A custom loader will be necessary to load your custom wrapper.\n-\n-    opts = opts || {};\n-    var env = opts.env || new Environment([]);\n-    var wrapper = opts.wrapper || precompileGlobal;\n-\n-    var pathStats = fs.existsSync(input) && fs.statSync(input);\n-    var precompiled = [];\n-    var templates = [];\n-\n-    function addTemplates(dir) {\n-        var files = fs.readdirSync(dir);\n-\n-        for(var i=0; i<files.length; i++) {\n-            var filepath = path.join(dir, files[i]);\n-            var subpath = filepath.substr(path.join(input, '/').length);\n-            var stat = fs.statSync(filepath);\n-\n-            if(stat && stat.isDirectory()) {\n-                subpath += '/';\n-                if (!match(subpath, opts.exclude)) {\n-                    addTemplates(filepath);\n-                }\n-            }\n-            else if(match(subpath, opts.include)) {\n-                templates.push(filepath);\n-            }\n+  // The following options are available:\n+  //\n+  // * name: name of the template (auto-generated when compiling a directory)\n+  // * isString: input is a string, not a file path\n+  // * asFunction: generate a callable function\n+  // * force: keep compiling on error\n+  // * env: the Environment to use (gets extensions and async filters from it)\n+  // * include: which file/folders to include (folders are auto-included, files are auto-excluded)\n+  // * exclude: which file/folders to exclude (folders are auto-included, files are auto-excluded)\n+  // * wrapper: function(templates, opts) {...}\n+  //       Customize the output format to store the compiled template.\n+  //       By default, templates are stored in a global variable used by the runtime.\n+  //       A custom loader will be necessary to load your custom wrapper.\n+\n+  opts = opts || {};\n+  var env = opts.env || new Environment([]);\n+  var wrapper = opts.wrapper || precompileGlobal;\n+  if (opts.isString) {\n",
					"match": false,
					"packageHash": "cfc2eb50bb5853e8794b9c6339bead1dd997fc8bca80e6b01feba192c71a0272",
					"size": 4210,
					"sourceHash": "2110b36c9d0a8823b5fed83363c9caf880ef68bdbf2f6f59bf78b466e2438fcd",
					"status": "content"
				},
				"src/precompiled-loader.js": {
					"diff": "--- published/src/precompiled-loader.js\n+++ rebuilt/src/precompiled-loader.js\n@@ -1,22 +1,31 @@\n 'use strict';\n \n+function _inheritsLoose(t, o) { t.prototype = Object.create(o.prototype), t.prototype.constructor = t, _setPrototypeOf(t, o); }\n+function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\n var Loader = require('./loader');\n-\n-var PrecompiledLoader = Loader.extend({\n-    init: function(compiledTemplates) {\n-        this.precompiled = compiledTemplates || {};\n-    },\n-\n-    getSource: function(name) {\n-        if (this.precompiled[name]) {\n-            return {\n-                src: { type: 'code',\n-                       obj: this.precompiled[name] },\n-                path: name\n-            };\n-        }\n-        return null;\n+var PrecompiledLoader = /*#__PURE__*/function (_Loader) {\n+  function PrecompiledLoader(compiledTemplates) {\n+    var _this;\n+    _this = _Loader.call(this) || this;\n+    _this.precompiled = compiledTemplates || {};\n+    return _this;\n+  }\n+  _inheritsLoose(PrecompiledLoader, _Loader);\n+  var _proto = PrecompiledLoader.prototype;\n+  _proto.getSource = function getSource(name) {\n+    if (this.precompiled[name]) {\n+      return {\n+        src: {\n+          type: 'code',\n+          obj: this.precompiled[name]\n+        },\n+        path: name\n+      };\n     }\n-});\n-\n-module.exports = PrecompiledLoader;\n+    return null;\n+  };\n+  return PrecompiledLoader;\n+}(Loader);\n+module.exports = {\n+  PrecompiledLoader: PrecompiledLoader\n+};\n\\ No newline at end of file\n",
					"match": false,
					"packageHash": "98c3feee0d1efc691dd073d71e9ac733f7539b174665145663181913a0940f2b",
					"size": 492,
					"sourceHash": "4ed46ac11d837d2f06f347971267c234aa4c0b700fbd6a4a359eb7b030a9bf56",
					"status": "content"
				},
				"src/runtime.js": {
					"diff": "--- published/src/runtime.js\n+++ rebuilt/src/runtime.js\n@@ -1,362 +1,333 @@\n 'use strict';\n \n var lib = require('./lib');\n-var Obj = require('./object');\n+var arrayFrom = Array.from;\n+var supportsIterators = typeof Symbol === 'function' && Symbol.iterator && typeof arrayFrom === 'function';\n \n // Frames keep track of scoping both at compile-time and run-time so\n // we know how to access variables. Block tags can introduce special\n // variables, for example.\n-var Frame = Obj.extend({\n-    init: function(parent, isolateWrites) {\n-        this.variables = {};\n-        this.parent = parent;\n-        this.topLevel = false;\n-        // if this is true, writes (set) should never propagate upwards past\n-        // this frame to its parent (though reads may).\n-        this.isolateWrites = isolateWrites;\n-    },\n-\n-    set: function(name, val, resolveUp) {\n-        // Allow variables with dots by automatically creating the\n-        // nested structure\n-        var parts = name.split('.');\n-        var obj = this.variables;\n-        var frame = this;\n-\n-        if(resolveUp) {\n-            if((frame = this.resolve(parts[0], true))) {\n-                frame.set(name, val);\n-                return;\n-            }\n-        }\n-\n-        for(var i=0; i<parts.length - 1; i++) {\n-            var id = parts[i];\n-\n-            if(!obj[id]) {\n-                obj[id] = {};\n-            }\n-            obj = obj[id];\n-        }\n-\n-        obj[parts[parts.length - 1]] = val;\n-    },\n-\n-    get: function(name) {\n-        var val = this.variables[name];\n-        if(val !== undefined && val !== null) {\n-            return val;\n-        }\n-        return null;\n-    },\n-\n-    lookup: function(name) {\n-        var p = this.parent;\n-        var val = this.variables[name];\n-        if(val !== undefined && val !== null) {\n-            return val;\n-        }\n-        return p && p.lookup(name);\n-    },\n-\n-    resolve: function(name, forWrite) {\n-        var p = (forWrite && this.isolateWrites) ? undefined : this.parent;\n-        var val = this.variables[name];\n-        if(val !== undefined && val !== null) {\n-            return this;\n-        }\n-        return p && p.resolve(name);\n-    },\n-\n-    push: function(isolateWrites) {\n-        return new Frame(this, isolateWrites);\n-    },\n-\n-    pop: function() {\n-        return this.parent;\n-    }\n-});\n-\n+var Frame = /*#__PURE__*/function () {\n+  function Frame(parent, isolateWrites) {\n+    this.variables = Object.create(null);\n+    this.parent = parent;\n+    this.topLevel = false;\n+    // if this is true, writes (set) should never propagate upwards past\n+    // this frame to its parent (though reads may).\n+    this.isolateWrites = isolateWrites;\n+  }\n+  var _proto = Frame.prototype;\n+  _proto.set = function set(name, val, resolveUp) {\n+    // Allow variables with dots by automatically creating the\n+    // nested structure\n+    var parts = name.split('.');\n+    var obj = this.variables;\n+    var frame = this;\n",
					"match": false,
					"packageHash": "f9910881bc86bd0a02b8b88f9f1e51109a027b6b6686fe4a82065a6b88667b9d",
					"size": 9069,
					"sourceHash": "ca59e151395c1f5fc25145ebe2ff39a33e37448bdd2a7eca00a4fc328b924890",
					"status": "content"
				},
				"src/transformer.js": {
					"diff": "--- published/src/transformer.js\n+++ rebuilt/src/transformer.js\n@@ -2,231 +2,158 @@\n \n var nodes = require('./nodes');\n var lib = require('./lib');\n-\n var sym = 0;\n function gensym() {\n-    return 'hole_' + sym++;\n+  return 'hole_' + sym++;\n }\n \n // copy-on-write version of map\n function mapCOW(arr, func) {\n-    var res = null;\n-\n-    for(var i=0; i<arr.length; i++) {\n-        var item = func(arr[i]);\n-\n-        if(item !== arr[i]) {\n-            if(!res) {\n-                res = arr.slice();\n-            }\n-\n-            res[i] = item;\n-        }\n+  var res = null;\n+  for (var i = 0; i < arr.length; i++) {\n+    var item = func(arr[i]);\n+    if (item !== arr[i]) {\n+      if (!res) {\n+        res = arr.slice();\n+      }\n+      res[i] = item;\n     }\n-\n-    return res || arr;\n+  }\n+  return res || arr;\n }\n-\n function walk(ast, func, depthFirst) {\n-    if(!(ast instanceof nodes.Node)) {\n-        return ast;\n-    }\n-\n-    if(!depthFirst) {\n-        var astT = func(ast);\n-\n-        if(astT && astT !== ast) {\n-            return astT;\n-        }\n+  if (!(ast instanceof nodes.Node)) {\n+    return ast;\n+  }\n+  if (!depthFirst) {\n+    var astT = func(ast);\n+    if (astT && astT !== ast) {\n+      return astT;\n+    }\n+  }\n+  if (ast instanceof nodes.NodeList) {\n+    var children = mapCOW(ast.children, function (node) {\n+      return walk(node, func, depthFirst);\n+    });\n+    if (children !== ast.children) {\n+      ast = new nodes[ast.typename](ast.lineno, ast.colno, children);\n     }\n-\n-    if(ast instanceof nodes.NodeList) {\n-        var children = mapCOW(ast.children, function(node) {\n-            return walk(node, func, depthFirst);\n-        });\n-\n-        if(children !== ast.children) {\n-            ast = new nodes[ast.typename](ast.lineno, ast.colno, children);\n-        }\n+  } else if (ast instanceof nodes.CallExtension) {\n+    var args = walk(ast.args, func, depthFirst);\n+    var contentArgs = mapCOW(ast.contentArgs, function (node) {\n+      return walk(node, func, depthFirst);\n+    });\n+    if (args !== ast.args || contentArgs !== ast.contentArgs) {\n+      ast = new nodes[ast.typename](ast.extName, ast.prop, args, contentArgs);\n     }\n-    else if(ast instanceof nodes.CallExtension) {\n-        var args = walk(ast.args, func, depthFirst);\n-\n-        var contentArgs = mapCOW(ast.contentArgs, function(node) {\n-            return walk(node, func, depthFirst);\n-        });\n-\n-        if(args !== ast.args || contentArgs !== ast.contentArgs) {\n-            ast = new nodes[ast.typename](ast.extName,\n-                                          ast.prop,\n-                                          args,\n-                                          contentArgs);\n-        }\n-    }\n",
					"match": false,
					"packageHash": "c5f82a0982cc6c7d332b17de8295565d474c738c9fca125e2719c3cbcac765a4",
					"size": 6385,
					"sourceHash": "c6b4eb0d1a7156d1c81948466c063b928c761fea1234ca9dedf8940785b8e319",
					"status": "content"
				},
				"src/web-loaders.js": {
					"diff": "--- published/src/web-loaders.js\n+++ rebuilt/src/web-loaders.js\n@@ -1,96 +1,94 @@\n 'use strict';\n \n+function _inheritsLoose(t, o) { t.prototype = Object.create(o.prototype), t.prototype.constructor = t, _setPrototypeOf(t, o); }\n+function _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\n var Loader = require('./loader');\n-var PrecompiledLoader = require('./precompiled-loader.js');\n-\n-var WebLoader = Loader.extend({\n-    init: function(baseURL, opts) {\n-        this.baseURL = baseURL || '.';\n-        opts = opts || {};\n-\n-        // By default, the cache is turned off because there's no way\n-        // to \"watch\" templates over HTTP, so they are re-downloaded\n-        // and compiled each time. (Remember, PRECOMPILE YOUR\n-        // TEMPLATES in production!)\n-        this.useCache = !!opts.useCache;\n-\n-        // We default `async` to false so that the simple synchronous\n-        // API can be used when you aren't doing anything async in\n-        // your templates (which is most of the time). This performs a\n-        // sync ajax request, but that's ok because it should *only*\n-        // happen in development. PRECOMPILE YOUR TEMPLATES.\n-        this.async = !!opts.async;\n-    },\n-\n-    resolve: function(from, to) { // jshint ignore:line\n-        throw new Error('relative templates not support in the browser yet');\n-    },\n-\n-    getSource: function(name, cb) {\n-        var useCache = this.useCache;\n-        var result;\n-        this.fetch(this.baseURL + '/' + name, function(err, src) {\n-            if(err) {\n-                if(cb) {\n-                    cb(err.content);\n-                } else {\n-                    if (err.status === 404) {\n-                      result = null;\n-                    } else {\n-                      throw err.content;\n-                    }\n-                }\n-            }\n-            else {\n-                result = { src: src,\n-                           path: name,\n-                           noCache: !useCache };\n-                if(cb) {\n-                    cb(null, result);\n-                }\n-            }\n-        });\n-\n-        // if this WebLoader isn't running asynchronously, the\n-        // fetch above would actually run sync and we'll have a\n-        // result here\n-        return result;\n-    },\n-\n-    fetch: function(url, cb) {\n-        // Only in the browser please\n-        var ajax;\n-        var loading = true;\n-\n-        if(window.XMLHttpRequest) { // Mozilla, Safari, ...\n-            ajax = new XMLHttpRequest();\n-        }\n-        else if(window.ActiveXObject) { // IE 8 and older\n-            /* global ActiveXObject */\n-            ajax = new ActiveXObject('Microsoft.XMLHTTP');\n+var _require = require('./precompiled-loader.js'),\n+  PrecompiledLoader = _require.PrecompiledLoader;\n+var WebLoader = /*#__PURE__*/function (_Loader) {\n+  function WebLoader(baseURL, opts) {\n+    var _this;\n+    _this = _Loader.call(this) || this;\n+    _this.baseURL = baseURL || '.';\n+    opts = opts || {};\n+\n+    // By default, the cache is turned off because there's no way\n+    // to \"watch\" templates over HTTP, so they are re-downloaded\n+    // and compiled each time. (Remember, PRECOMPILE YOUR\n+    // TEMPLATES in production!)\n+    _this.useCache = !!opts.useCache;\n+\n+    // We default `async` to false so that the simple synchronous\n+    // API can be used when you aren't doing anything async in\n+    // your templates (which is most of the time). This performs a\n+    // sync ajax request, but that's ok because it should *only*\n+    // happen in development. PRECOMPILE YOUR TEMPLATES.\n+    _this.async = !!opts.async;\n+    return _this;\n+  }\n+  _inheritsLoose(WebLoader, _Loader);\n+  var _proto = WebLoader.prototype;\n",
					"match": false,
					"packageHash": "237aa6dbdcf3d9b391ebc4a029a4193c77d5829638f71114618d92410713e1a7",
					"size": 3023,
					"sourceHash": "9cbe41da5362c1ef6d5c0f747b0d1140be24914405d2848b725d7cc0fb16b44d",
					"status": "content"
				},
				"browser/nunjucks-slim.js.LICENSE.txt": {
					"match": false,
					"status": "missing-in-package"
				},
				"browser/nunjucks-slim.js.map": {
					"match": false,
					"status": "missing-in-package"
				},
				"browser/nunjucks-slim.min.js.LICENSE.txt": {
					"match": false,
					"status": "missing-in-package"
				},
				"browser/nunjucks-slim.min.js.map": {
					"match": false,
					"status": "missing-in-package"
				},
				"browser/nunjucks.js.LICENSE.txt": {
					"match": false,
					"status": "missing-in-package"
				},
				"browser/nunjucks.js.map": {
					"match": false,
					"status": "missing-in-package"
				},
				"browser/nunjucks.min.js.LICENSE.txt": {
					"match": false,
					"status": "missing-in-package"
				},
				"browser/nunjucks.min.js.map": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/express-app.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"src/tests.js": {
					"match": false,
					"status": "missing-in-package"
				}
			},
			"summary": {
				"differentFiles": 27,
				"matchingFiles": 2,
				"missingInPackage": 10,
				"missingInSource": 21,
				"score": 0.03333333333333333,
				"totalFiles": 60
			}
		}
	}
]
