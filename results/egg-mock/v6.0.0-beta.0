[
	{
		"reproduceVersion": "0.0.0-local",
		"timestamp": "2026-01-04T13:23:47.205Z",
		"os": "linux",
		"arch": "x64",
		"strategy": "npm:8.19.4",
		"reproduced": false,
		"attested": false,
		"package": {
			"spec": "egg-mock@6.0.0-beta.0",
			"name": "egg-mock",
			"version": "6.0.0-beta.0",
			"location": "https://registry.npmjs.org/egg-mock/-/egg-mock-6.0.0-beta.0.tgz",
			"integrity": "sha512-FFNfOwe4EJ9MRxY2Otm+UHWC8+tnmeo/zT05mfznrGQqcZAtK0C/BU1ain9Q8VXGmUKFv4PC88SGn9GYbvRgyw==",
			"publishedAt": "2024-12-17T02:18:27.624Z",
			"publishedWith": {
				"node": "16.20.2",
				"npm": "8.19.4"
			}
		},
		"source": {
			"integrity": "sha512-lZgwGD83x6gXeUDfxx/nb8xvG7Q5QmKEYzuUwzHTBJT73nEdcZuuXKjAKT55M4Ng5MALl+dlRk1eTuKJbGT0HA==",
			"location": "git+https://github.com/eggjs/egg-mock.git",
			"spec": "github:eggjs/egg-mock#bb15f3f8642179763842038d7898fa8b4964e75d"
		},
		"comparisonHash": "8a2a8dcbb729bf3ee9216e490c955701f0ddebe1",
		"diff": {
			"files": {
				"README.md": {
					"diff": "--- published/README.md\n+++ rebuilt/README.md\n@@ -4,7 +4,6 @@\n [![Node.js CI](https://github.com/eggjs/egg-mock/actions/workflows/nodejs.yml/badge.svg)](https://github.com/eggjs/egg-mock/actions/workflows/nodejs.yml)\n [![Test coverage][codecov-image]][codecov-url]\n [![npm download][download-image]][download-url]\n-[![Node.js Version](https://img.shields.io/node/v/egg-mock.svg?style=flat)](https://nodejs.org/en/download/)\n \n [npm-image]: https://img.shields.io/npm/v/egg-mock.svg?style=flat-square\n [npm-url]: https://npmjs.org/package/egg-mock\n",
					"match": false,
					"packageHash": "0a121d26e2424084f3a4194666b3fe0389f6fa288edc35ac719ee05dff5efa22",
					"size": 11271,
					"sourceHash": "ae243657ccd5da9162325e927dc12fe35ca197951cd82f84e601899732cd32cd",
					"status": "content"
				},
				"index.d.ts": {
					"diff": "--- published/index.d.ts\n+++ rebuilt/index.d.ts\n@@ -127,16 +127,10 @@\n   clean?: boolean;\n }\n \n-export interface MockClusterOption extends MockOption {\n-  workers?: number;\n-}\n-\n export type EnvType = 'default' | 'test' | 'prod' | 'local' | 'unittest' | string & {};\n export type LogLevel = 'DEBUG' | 'INFO' | 'WARN' | 'ERROR' | 'NONE';\n \n-export interface MockApplication extends BaseMockApplication<Application, Context> {\n-  [key: string]: any;\n-}\n+export interface MockApplication extends BaseMockApplication<Application, Context> { }\n \n export interface EggMock extends MockMate {\n   /**\n@@ -147,7 +141,7 @@\n   /**\n    * Create a mock cluster server, but you can't use API in application, you should test using supertest\n    */\n-  cluster: (option?: MockClusterOption) => MockApplication;\n+  cluster: (option?: MockOption) => MockApplication;\n \n   /**\n    * mock the serverEnv of Egg\n@@ -179,5 +173,4 @@\n }\n \n declare const mm: EggMock;\n-export { mm }\n export default mm;\n",
					"match": false,
					"packageHash": "ece8f44b539b700902ca29e9d627e7ec665f04df68320123d30e2aef67726c6c",
					"size": 4032,
					"sourceHash": "49328e57c9e66f533305342ed685629840aa2d1f94f4d9f0c76e39c8f1530c16",
					"status": "content"
				},
				"index.js": {
					"diff": "--- published/index.js\n+++ rebuilt/index.js\n@@ -17,7 +17,6 @@\n }\n module.exports = mock;\n module.exports.default = mock;\n-module.exports.mm = mock;\n \n // inherit & extends mm\n Object.assign(mock, mm, {\n",
					"match": false,
					"packageHash": "719dddc9c52cf468f3b97a1c69cfa3a28bae7953a87ec3d2a5d8d80032c4528e",
					"size": 2208,
					"sourceHash": "12f593ef9c6bbb1723b8f79c834018482e24c4813eaa23ca3994f47063bc1cbd",
					"status": "content"
				},
				"lib/app.js": {
					"diff": "--- published/lib/app.js\n+++ rebuilt/lib/app.js\n@@ -93,6 +93,7 @@\n \n     // egg-mock plugin need to override egg context\n     Object.assign(app.context, context);\n+    mockCustomLoader(app);\n \n     debug('app instantiate');\n     this[APP_INIT] = true;\n@@ -101,15 +102,13 @@\n     debug('http server instantiate');\n     mockHttpServer(app);\n     yield app.ready();\n-    // work for config ready\n-    mockCustomLoader(app);\n \n     const msg = {\n       action: 'egg-ready',\n       data: this.options,\n     };\n-    app.messenger.onMessage(msg);\n-    agent.messenger.onMessage(msg);\n+    app.messenger._onMessage(msg);\n+    agent.messenger._onMessage(msg);\n     debug('app ready');\n   }\n \n",
					"match": false,
					"packageHash": "ed24eae79006e6572e35aad07a3ed02c106d1427d431e51d1733ee3b83631884",
					"size": 8956,
					"sourceHash": "bf179dbed6bdc8d58de00c9da0a91ce4958ca3a77a6a16343a9829f35a76549d",
					"status": "content"
				},
				"lib/cluster.js": {
					"diff": "--- published/lib/cluster.js\n+++ rebuilt/lib/cluster.js\n@@ -45,11 +45,11 @@\n    * @class\n    * @param {Object} options\n    * - {String} baseDir - The directory of the application\n-   * - {Object} plugins - Custom you plugins\n+   * - {Object} plugins - Tustom you plugins\n    * - {String} framework - The directory of the egg framework\n-   * - {Boolean} [cache=true] - Cache application based on baseDir\n-   * - {Boolean} [coverage=true] - Switch on process coverage, but it'll be slower\n-   * - {Boolean} [clean=true] - Remove $baseDir/logs\n+   * - {Boolean} [cache=true]  - Cache application based on baseDir\n+   * - {Boolean} [coverage=true]  - Swtich on process coverage, but it'll be slower\n+   * - {Boolean} [clean=true]  - Remove $baseDir/logs\n    * - {Object}  [opt] - opt pass to coffee, such as { execArgv: ['--debug'] }\n    * ```\n    */\n@@ -60,9 +60,7 @@\n     // incremental port\n     options.port = options.port || ++masterPort;\n     // Set 1 worker when test\n-    if (!options.workers) {\n-      options.workers = 1;\n-    }\n+    if (!options.workers) options.workers = 1;\n \n     const args = [ JSON.stringify(options) ];\n     debug('fork %s, args: %s, opt: %j', serverBin, args.join(' '), opt);\n",
					"match": false,
					"packageHash": "2467bb123051b923436b6f1db12f4f557e7c94ac65e17c828d8dc3d1f2c4da00",
					"size": 8767,
					"sourceHash": "2cadad641e8bea8bc1ce604d4443de2e1953b394af8b3a92b54bd169886e4384",
					"status": "content"
				},
				"lib/mock_custom_loader.js": {
					"diff": "--- published/lib/mock_custom_loader.js\n+++ rebuilt/lib/mock_custom_loader.js\n@@ -1,3 +1,5 @@\n+'use strict';\n+\n module.exports = app => {\n   const customLoader = app.config.customLoader;\n   if (!customLoader) return;\n",
					"match": false,
					"packageHash": "02d75b688dd2949b25eaa58303125598df3744a213da970fe5ff53ad0edf7fd5",
					"size": 1004,
					"sourceHash": "1a344e362b9fcace7f7f2d8bcf8d50c2df25c94dc36cfbf1c24228cb5ba208f9",
					"status": "content"
				},
				"package.json": {
					"diff": "--- published/package.json\n+++ rebuilt/package.json\n@@ -1,6 +1,6 @@\n {\n   \"name\": \"egg-mock\",\n-  \"version\": \"6.0.0-beta.0\",\n+  \"version\": \"5.15.1\",\n   \"eggPlugin\": {\n     \"name\": \"egg-mock\"\n   },\n@@ -44,9 +44,9 @@\n     \"supertest\": \"^6.2.4\"\n   },\n   \"peerDependencies\": {\n-    \"egg\": \"beta\",\n+    \"egg\": \"^3.12.0\",\n     \"mocha\": \"^10.2.0\",\n-    \"urllib\": \"^4\"\n+    \"urllib\": \"^3 || ^4\"\n   },\n   \"devDependencies\": {\n     \"@eggjs/tegg\": \"^3.2.2\",\n@@ -55,18 +55,18 @@\n     \"@eggjs/tegg-plugin\": \"^3.2.2\",\n     \"@eggjs/tsconfig\": \"^1.1.0\",\n     \"@types/mocha\": \"^10.0.1\",\n-    \"@types/node\": \"22\",\n-    \"egg\": \"beta\",\n+    \"@types/node\": \"20\",\n+    \"egg\": \"^3.12.0\",\n     \"egg-bin\": \"^6.0.0\",\n     \"egg-errors\": \"^2.2.1\",\n     \"egg-tracer\": \"^2.0.0\",\n-    \"eslint\": \"8\",\n-    \"eslint-config-egg\": \"^14\",\n+    \"eslint\": \"^8.24.0\",\n+    \"eslint-config-egg\": \"^12.0.0\",\n     \"mocha\": \"^10.1.0\",\n     \"pedding\": \"^1.1.0\",\n     \"tsd\": \"^0.31.0\",\n     \"typescript\": \"5\",\n-    \"urllib\": \"4\"\n+    \"urllib\": \"3\"\n   },\n   \"homepage\": \"https://github.com/eggjs/egg-mock\",\n   \"repository\": {\n@@ -81,7 +81,7 @@\n     \"mock\"\n   ],\n   \"engines\": {\n-    \"node\": \">= 18.19.0\"\n+    \"node\": \">= 14.18.0\"\n   },\n   \"author\": \"popomore <sakura9515@gmail.com>\"\n }\n",
					"match": false,
					"packageHash": "34c89f5c6c6c9df937961813a28ab9de02a2f99f22d1e993af777bc5aad5f3db",
					"size": 2086,
					"sourceHash": "635ec301c230c6ea38ae26de73ff7cf3cada88fdf8b5a64651be408dc3dc309a",
					"status": "content"
				}
			},
			"summary": {
				"differentFiles": 7,
				"matchingFiles": 28,
				"missingInPackage": 0,
				"missingInSource": 0,
				"score": 0.8,
				"totalFiles": 35
			}
		}
	}
]
