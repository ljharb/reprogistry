[
	{
		"reproduceVersion": "0.0.0-local",
		"timestamp": "2026-01-09T18:21:20.456Z",
		"os": "linux",
		"arch": "x64",
		"strategy": "npm:11.7.0",
		"reproduced": false,
		"attested": false,
		"package": {
			"spec": "markdown-toc@0.5.0",
			"name": "markdown-toc",
			"version": "0.5.0",
			"location": "https://registry.npmjs.org/markdown-toc/-/markdown-toc-0.5.0.tgz",
			"integrity": "sha512-ETTBMka2cU5L53rQ3C5XnyWXnRlGO2x9k1ADEUX1lv0is7Zezr7JYRSEGYbGT5Xyxpew+ju5gY6/JN7gV+PLCg==",
			"publishedAt": "2014-12-21T06:16:40.715Z",
			"publishedWith": {
				"node": null,
				"npm": "1.4.23"
			},
			"dependencies": {
				"extend-shallow": "^0.2.0",
				"gray-matter": "^1.0.2",
				"markdown-utils": "^0.3.0",
				"remarkable": "^1.5.0"
			}
		},
		"source": {
			"integrity": null,
			"location": "https://github.com/jonschlinkert/markdown-toc.git",
			"spec": "github:jonschlinkert/markdown-toc#cb80f86a4c39dadbb0254cdba281192c8d40fe52"
		},
		"comparisonHash": "9ef46a5bd31291e57cbab41e2f17c57bd6da0b5b",
		"diff": {
			"files": {
				"LICENSE-MIT": {
					"match": false,
					"packageHash": "03b96e93525db2acbd88385e070f89ab005084412680e6c64d5c5919da8bf3bc",
					"size": 1086,
					"status": "missing-in-source"
				},
				"README.md": {
					"diff": "--- published/README.md\n+++ rebuilt/README.md\n@@ -1,282 +1,412 @@\n-# marked-toc [![NPM version](https://badge.fury.io/js/marked-toc.png)](http://badge.fury.io/js/marked-toc)\n+# markdown-toc [![NPM version](https://img.shields.io/npm/v/markdown-toc.svg?style=flat)](https://www.npmjs.com/package/markdown-toc) [![NPM monthly downloads](https://img.shields.io/npm/dm/markdown-toc.svg?style=flat)](https://npmjs.org/package/markdown-toc) [![NPM total downloads](https://img.shields.io/npm/dt/markdown-toc.svg?style=flat)](https://npmjs.org/package/markdown-toc)\n \n-> Generate a TOC (table of contents) for markdown files\n+> Generate a markdown TOC (table of contents) with Remarkable.\n \n-_(example)_\n-<!-- toc -->\n-* [Getting Started](#getting-started)\n-* [Usage](#usage)\n-* [Options](#options)\n-  * [template](#template)\n-  * [bullet](#bullet)\n-  * [maxDepth](#maxdepth)\n-  * [firsth1](#firsth1)\n-  * [omit](#omit)\n-  * [clean](#clean)\n-  * [blacklist](#blacklist)\n-  * [allowedChars](#allowedchars)\n-* [API](#api)\n-  * [toc](#toc)\n+Please consider following this project's author, [Jon Schlinkert](https://github.com/jonschlinkert), and consider starring the project to show your :heart: and support.\n+\n+- [Highlights](#highlights)\n+- [Usage](#usage)\n+- [API](#api)\n+  * [toc.plugin](#tocplugin)\n+  * [toc.json](#tocjson)\n   * [toc.insert](#tocinsert)\n-  * [toc.add](#tocadd)\n-  * [toc.raw](#tocraw)\n-* [Contributing](#contributing)\n-* [Author](#author)\n-* [License](#license)\n+  * [Utility functions](#utility-functions)\n+- [Options](#options)\n+  * [options.append](#optionsappend)\n+  * [options.filter](#optionsfilter)\n+  * [options.slugify](#optionsslugify)\n+  * [options.bullets](#optionsbullets)\n+  * [options.maxdepth](#optionsmaxdepth)\n+  * [options.firsth1](#optionsfirsth1)\n+  * [options.stripHeadingTags](#optionsstripheadingtags)\n+- [About](#about)\n \n-<!-- toc stop -->\n+_(TOC generated by [verb](https://github.com/verbose/verb) using [markdown-toc](https://github.com/jonschlinkert/markdown-toc))_\n \n-## Getting Started\n+## Install\n \n-Install the module with [npm](npmjs.org):\n+Install with [npm](https://www.npmjs.com/):\n \n-```bash\n-npm i -g marked-toc --save\n+```sh\n+$ npm install --save markdown-toc\n ```\n \n-In any markdown file, add `<!-- toc -->` where you want to add the TOC. Then in the command line, run:\n+# Sponsors\n \n-```bash\n-toc [filename]\n-```\n+Thanks to the following companies, organizations, and individuals for supporting the ongoing maintenance and development of markdown-toc! [Become a Sponsor](https://github.com/sponsors/jonschlinkert) to add your logo to this README, or any of [my other projects](https://github.com/jonschlinkert?tab=repositories&q=&type=&language=&sort=stargazers)\n \n-If you add the toc to a `README.md`, no need to add `[filename]`, just run `toc`.\n+## Gold Sponsors\n \n+| [<img src=\"https://github.com/jonschlinkert/clone-deep/assets/383994/98036489-2cae-48a2-8d29-7dec58ea05c4\" alt=\"https://jaake.tech/\" width=\"100\"/>](https://jaake.tech/) |\n+|:---:|\n+| [https://jaake.tech/](https://jaake.tech/) |\n \n-## Usage\n+<br />\n+\n+## Quick Start\n+\n+Assuming you want to add a TOC to README.md:\n \n-```javascript\n-var toc = require('marked-toc');\n-var file = fs.readFileSync('README.md', 'utf8');\n+1. `$ npm install -g markdown-toc`\n+2. Edit README.md and insert the following line where you want the TOC inserted:<br />`<!-- toc -->`\n+3. `$ markdown-toc -i README.md`\n+\n+## CLI\n \n-// Generate a TOC\n-toc(file);\n ```\n+Usage: markdown-toc [options] <input>\n \n-## Options\n",
					"match": false,
					"packageHash": "5397e6b9a18d74050f21e1771a2a0f9d60eeff0bb796296eb2735737642c4611",
					"size": 5353,
					"sourceHash": "bd1f9c840574cf3cc4b1caafcc6774648c9c8b3a50fa8e4dd8dd7ff056127fc9",
					"status": "content"
				},
				"index.js": {
					"diff": "--- published/index.js\n+++ rebuilt/index.js\n@@ -1,148 +1,255 @@\n+'use strict';\n+\n /*!\n  * markdown-toc <https://github.com/jonschlinkert/markdown-toc>\n  *\n- * Copyright (c) 2014 Jon Schlinkert, contributors.\n- * Licensed under the MIT license.\n+ * Copyright © 2013-2023, Jon Schlinkert.\n+ * Released under the MIT License.\n  */\n \n-'use strict';\n-\n-var Remarkable = require('remarkable');\n-var extend = require('extend-shallow');\n-var mdu = require('markdown-utils');\n+var utils = require('./lib/utils');\n+var querystring = require('querystring');\n \n /**\n- * Expose `toc`\n+ * expose `toc`\n  */\n \n module.exports = toc;\n \n+/**\n+ * Load `generate` as a remarkable plugin and\n+ * expose the `toc` function.\n+ *\n+ * @param  {String} `str` String of markdown\n+ * @param  {Object} `options`\n+ * @return {String} Markdown-formatted table of contents\n+ */\n \n function toc(str, options) {\n-  return new Remarkable()\n+  return new utils.Remarkable()\n     .use(generate(options))\n     .render(str);\n }\n \n+/**\n+ * Expose `insert` method\n+ */\n+\n+toc.insert = require('./lib/insert');\n \n /**\n- * Generate a markdown table of contents.\n+ * Generate a markdown table of contents. This is the\n+ * function that does all of the main work with Remarkable.\n  *\n  * @param {Object} `options`\n  * @return {String}\n- * @api private\n  */\n \n function generate(options) {\n-  var opts = extend({firsth1: true, maxdepth: 6}, options);\n+  var opts = utils.merge({firsth1: true, maxdepth: 6}, options);\n+  var stripFirst = opts.firsth1 === false;\n+  if (typeof opts.linkify === 'undefined') opts.linkify = true;\n \n   return function(md) {\n-    md.renderer.render = function (tokens) {\n-      var len = tokens.length;\n+    md.renderer.render = function(tokens) {\n+      tokens = tokens.slice();\n+      var seen = {};\n+      var len = tokens.length, i = 0, num = 0;\n       var tocstart = -1;\n-      var res = [];\n-      var i = 0;\n-      var h = 0;\n+      var arr = [];\n+      var res = {};\n \n       while (len--) {\n         var token = tokens[i++];\n-\n         if (/<!--[ \\t]*toc[ \\t]*-->/.test(token.content)) {\n           tocstart = token.lines[1];\n         }\n \n         if (token.type === 'heading_open') {\n-          var lvl = tokens[i].lvl = tokens[i - 1].hLevel;\n+          tokens[i].lvl = tokens[i - 1].hLevel;\n+          tokens[i].i = num++;\n+          arr.push(tokens[i]);\n+        }\n+      }\n+\n+      var result = [];\n+      res.json = [];\n \n-          // Keep the first h1? This is `true` by default\n",
					"match": false,
					"packageHash": "428cd1123bc25778dad6cc139ead50c33bb56681bf5c85acaa85ad7896ad7a08",
					"size": 3156,
					"sourceHash": "8273c2b07058c8e015d6b2ade8a3ce30f3f0634088e2aa3c0c0066796f9480c0",
					"status": "content"
				},
				"lib/insert.js": {
					"diff": "--- published/lib/insert.js\n+++ rebuilt/lib/insert.js\n@@ -1,31 +1,62 @@\n 'use strict';\n \n-var fs = require('fs');\n-var matter = require('gray-matter');\n var toc = require('..');\n+var utils = require('./utils');\n \n-module.exports = function format(str) {\n-  var re = /(?:<!-- toc(?:stop)? -->)/g;\n-\n-  var file = matter(str);\n-  var lines = split(file.content, re);\n+/**\n+ * The basic idea:\n+ *\n+ *  1. when front-matter exists, we need to avoid turning its properties into headings.\n+ *  2. We need to detect toc markers on the page. For now it's a simple HTML code comment\n+ *     to ensure the markdown is compatible with any parser.\n+ *\n+ * @param  {String} `str` Pass a string of markdown\n+ * @param  {Object} `options` Pass options to toc generation\n+ * @return {String} Get the same string back with a TOC inserted\n+ */\n+\n+module.exports = function insert(str, options) {\n+  options = options || {};\n+\n+  var regex = options.regex || /(?:<!-- toc(?:\\s*stop)? -->)/g;\n+  var open = typeof options.open === 'string' ? options.open : '<!-- toc -->\\n\\n';\n+  var close = typeof options.close === 'string' ? options.close : '<!-- tocstop -->';\n+  var obj;\n+\n+  var newlines = '';\n+  var m = /\\n+$/.exec(str);\n+  if (m) newlines = m[0];\n+\n+  // does the file have front-matter?\n+  if (/^---/.test(str)) {\n+    // extract it temporarily so the syntax\n+    // doesn't get mistaken for a heading\n+    obj = utils.matter(str);\n+    str = obj.content;\n+  }\n \n-  if (lines.length === 3) {\n-    lines.splice(2, 0, '<!-- tocstop -->');\n-    lines.splice(1, 0, '<!-- toc -->');\n+  var sections = split(str, regex);\n+  if (sections.length > 3) {\n+    throw new Error('markdown-toc only supports one Table of Contents per file.');\n   }\n \n-  if (lines.length === 2) {\n-    lines.splice(1, 0, '<!-- toc -->');\n+  var last = sections[sections.length - 1];\n+  if (sections.length === 3) {\n+    sections.splice(1, 1, open + (options.toc || toc(last, options).content));\n+    sections.splice(2, 0, close);\n   }\n \n-  var res = lines.join('\\n\\n');\n-  return matter.stringify(res, file.data);\n-}\n+  if (sections.length === 2) {\n+    sections.splice(1, 0, open + toc(last, options).content + '\\n\\n' + close);\n+  }\n \n-function read(fp) {\n-  return fs.readFileSync(fp, 'utf8');\n-}\n+  var resultString = sections.join('\\n\\n') + newlines;\n+  // if front-matter was found, put it back now\n+  if (obj) {\n+    return utils.matter.stringify(resultString, obj.data);\n+  }\n+  return resultString;\n+};\n \n function split(str, re) {\n   return str.split(re).map(trim);\n@@ -34,7 +65,3 @@\n function trim(str) {\n   return str.trim();\n }\n-\n-var str = read('test/expected/insert.md');\n-var res = format(str);\n-console.log(res)\n",
					"match": false,
					"packageHash": "e09e4bd92eb622b789b4da059a9654fda94649b44b7c644938db4ff9366a51d8",
					"size": 770,
					"sourceHash": "b7439e406a05610d49748ca3c175068bc7b0123872fdb2e7c8aaaad59670e2b4",
					"status": "content"
				},
				"package.json": {
					"diff": "--- published/package.json\n+++ rebuilt/package.json\n@@ -1,44 +1,152 @@\n {\n   \"name\": \"markdown-toc\",\n-  \"description\": \"Generate a markdown TOC (table of contents).\",\n-  \"version\": \"0.5.0\",\n+  \"description\": \"Generate a markdown TOC (table of contents) with Remarkable.\",\n+  \"version\": \"1.2.0\",\n   \"homepage\": \"https://github.com/jonschlinkert/markdown-toc\",\n-  \"author\": {\n-    \"name\": \"Jon Schlinkert\",\n-    \"url\": \"https://github.com/jonschlinkert\"\n-  },\n-  \"repository\": {\n-    \"type\": \"git\",\n-    \"url\": \"https://github.com/jonschlinkert/markdown-toc.git\"\n-  },\n+  \"author\": \"Jon Schlinkert (https://github.com/jonschlinkert)\",\n+  \"contributors\": [\n+    \"=^._.^= (http://maxogden.com)\",\n+    \"Andrés (http://angrykoala.github.io)\",\n+    \"Benjamin Schmitz (https://github.com/Vortex375)\",\n+    \"Christian Raunitschka (raunitschka.de)\",\n+    \"Daniel Chen (http://chendaniely.github.io)\",\n+    \"Daniel Mietchen (http://about.me/daniel.mietchen)\",\n+    \"David Mohl (https://dvcrn.github.io)\",\n+    \"Federico Soave (https://github.com/Feder1co5oave)\",\n+    \"Gary Green (https://github.com/garygreen)\",\n+    \"Jon Schlinkert (http://twitter.com/jonschlinkert)\",\n+    \"Josh Duff (https://tehshrike.github.io)\",\n+    \"Matt Ellis (http://sticklebackplastic.com)\",\n+    \"Nicolas Morel (https://github.com/Marsup)\",\n+    \"Rafael Steil (http://rafaelsteil.com)\",\n+    \"Richard Bradley (https://github.com/RichardBradley)\",\n+    \"Seth Vincent (https://sethvincent.com)\",\n+    \"Stefan Walther (http://qliksite.io)\",\n+    \"Tao Wang (https://github.com/twang2218)\",\n+    \"(https://github.com/lu22do)\",\n+    \"Zeke Sikelianos (http://zeke.sikelianos.com)\"\n+  ],\n+  \"repository\": \"jonschlinkert/markdown-toc\",\n   \"bugs\": {\n     \"url\": \"https://github.com/jonschlinkert/markdown-toc/issues\"\n   },\n-  \"license\": {\n-    \"type\": \"MIT\",\n-    \"url\": \"https://github.com/jonschlinkert/markdown-toc/blob/master/LICENSE-MIT\"\n-  },\n+  \"license\": \"MIT\",\n+  \"files\": [\n+    \"cli.js\",\n+    \"index.js\",\n+    \"lib\"\n+  ],\n   \"main\": \"index.js\",\n+  \"bin\": {\n+    \"markdown-toc\": \"cli.js\"\n+  },\n   \"engines\": {\n     \"node\": \">=0.10.0\"\n   },\n   \"scripts\": {\n-    \"test\": \"mocha -R spec\"\n+    \"test\": \"mocha\"\n   },\n   \"dependencies\": {\n-    \"extend-shallow\": \"^0.2.0\",\n-    \"gray-matter\": \"^1.0.2\",\n-    \"markdown-utils\": \"^0.3.0\",\n-    \"remarkable\": \"^1.5.0\"\n+    \"concat-stream\": \"^1.5.2\",\n+    \"diacritics-map\": \"^0.1.0\",\n+    \"gray-matter\": \"^3.1.1\",\n+    \"lazy-cache\": \"^2.0.2\",\n+    \"list-item\": \"^1.1.1\",\n+    \"markdown-link\": \"^0.1.1\",\n+    \"minimist\": \"^1.2.0\",\n+    \"mixin-deep\": \"^1.1.3\",\n+    \"object.pick\": \"^1.2.0\",\n+    \"remarkable\": \"^1.7.1\",\n+    \"repeat-string\": \"^1.6.1\",\n+    \"strip-color\": \"^0.1.0\"\n   },\n   \"devDependencies\": {\n-    \"mocha\": \"*\",\n-    \"should\": \"*\"\n+    \"gulp-format-md\": \"^2.0.0\",\n+    \"mocha\": \"^10.2.0\"\n   },\n   \"keywords\": [\n-    \"readme\",\n+    \"anchor\",\n+    \"API documentation\",\n+    \"code documentation\",\n+    \"commonmark\",\n+    \"content navigation\",\n+    \"content organization\",\n+    \"developer tools\",\n+    \"docs\",\n",
					"match": false,
					"packageHash": "79a0028b81a82b3a0b2164a367ee290fe0dc9585085b72c4c9c26cde5b31bb17",
					"size": 992,
					"sourceHash": "760042cbb8fb24e7dc31fc3ecbf661165c97b989a1ed96f2a49475f18d41ed37",
					"status": "content"
				},
				"LICENSE": {
					"match": false,
					"status": "missing-in-package"
				},
				"cli.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/utils.js": {
					"match": false,
					"status": "missing-in-package"
				}
			},
			"summary": {
				"differentFiles": 4,
				"matchingFiles": 0,
				"missingInPackage": 3,
				"missingInSource": 1,
				"score": 0,
				"totalFiles": 8
			}
		},
		"prodDependencies": [
			{
				"name": "argparse",
				"version": "1.0.10"
			},
			{
				"name": "autolinker",
				"version": "0.28.1"
			},
			{
				"name": "buffer-from",
				"version": "1.1.2"
			},
			{
				"name": "concat-stream",
				"version": "1.6.2"
			},
			{
				"name": "concat-with-sourcemaps",
				"version": "1.1.0"
			},
			{
				"name": "core-util-is",
				"version": "1.0.3"
			},
			{
				"name": "diacritics-map",
				"version": "0.1.0"
			},
			{
				"name": "esprima",
				"version": "4.0.1"
			},
			{
				"name": "expand-range",
				"version": "1.8.2"
			},
			{
				"name": "extend-shallow",
				"version": "2.0.1"
			},
			{
				"name": "fill-range",
				"version": "2.2.4"
			},
			{
				"name": "for-in",
				"version": "1.0.2"
			},
			{
				"name": "gray-matter",
				"version": "3.1.1"
			},
			{
				"name": "gulp-header",
				"version": "1.8.12"
			},
			{
				"name": "inherits",
				"version": "2.0.4"
			},
			{
				"name": "is-buffer",
				"version": "1.1.6"
			},
			{
				"name": "is-extendable",
				"version": "0.1.1"
			},
			{
				"name": "is-number",
				"version": "2.1.0"
			},
			{
				"name": "kind-of",
				"version": "3.2.2"
			},
			{
				"name": "is-plain-object",
				"version": "2.0.4"
			},
			{
				"name": "isobject",
				"version": "3.0.1"
			},
			{
				"name": "isarray",
				"version": "1.0.0"
			},
			{
				"name": "isobject",
				"version": "2.1.0"
			},
			{
				"name": "js-yaml",
				"version": "3.14.2"
			},
			{
				"name": "kind-of",
				"version": "5.1.0"
			},
			{
				"name": "lazy-cache",
				"version": "2.0.2"
			},
			{
				"name": "list-item",
				"version": "1.1.1"
			},
			{
				"name": "lodash._reinterpolate",
				"version": "3.0.0"
			},
			{
				"name": "lodash.template",
				"version": "4.5.0"
			},
			{
				"name": "lodash.templatesettings",
				"version": "4.2.0"
			},
			{
				"name": "markdown-link",
				"version": "0.1.1"
			},
			{
				"name": "math-random",
				"version": "1.0.4"
			},
			{
				"name": "minimist",
				"version": "1.2.8"
			},
			{
				"name": "mixin-deep",
				"version": "1.3.2"
			},
			{
				"name": "is-extendable",
				"version": "1.0.1"
			},
			{
				"name": "object.pick",
				"version": "1.3.0"
			},
			{
				"name": "process-nextick-args",
				"version": "2.0.1"
			},
			{
				"name": "randomatic",
				"version": "3.1.1"
			},
			{
				"name": "is-number",
				"version": "4.0.0"
			},
			{
				"name": "kind-of",
				"version": "6.0.3"
			},
			{
				"name": "readable-stream",
				"version": "2.3.8"
			},
			{
				"name": "remarkable",
				"version": "1.7.4"
			},
			{
				"name": "repeat-element",
				"version": "1.1.4"
			},
			{
				"name": "repeat-string",
				"version": "1.6.1"
			},
			{
				"name": "safe-buffer",
				"version": "5.1.2"
			},
			{
				"name": "set-getter",
				"version": "0.1.1"
			},
			{
				"name": "source-map",
				"version": "0.6.1"
			},
			{
				"name": "sprintf-js",
				"version": "1.0.3"
			},
			{
				"name": "string_decoder",
				"version": "1.1.1"
			},
			{
				"name": "strip-bom-string",
				"version": "1.0.0"
			},
			{
				"name": "strip-color",
				"version": "0.1.0"
			},
			{
				"name": "through2",
				"version": "2.0.5"
			},
			{
				"name": "to-object-path",
				"version": "0.3.0"
			},
			{
				"name": "typedarray",
				"version": "0.0.6"
			},
			{
				"name": "util-deprecate",
				"version": "1.0.2"
			},
			{
				"name": "xtend",
				"version": "4.0.2"
			}
		]
	}
]
