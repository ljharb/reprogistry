[
	{
		"reproduceVersion": "0.0.0-local",
		"timestamp": "2026-01-04T15:53:32.674Z",
		"os": "linux",
		"arch": "x64",
		"strategy": "npm:11.7.0",
		"reproduced": false,
		"attested": false,
		"package": {
			"spec": "flat@0.0.2",
			"name": "flat",
			"version": "0.0.2",
			"location": "https://registry.npmjs.org/flat/-/flat-0.0.2.tgz",
			"integrity": "sha512-ZWolUXRMy8EDDZGfgR1bDMCe7/MaIJOCxMA+48Sp8aQZ4j6yeQq07lnq5vellISfXTDctBRwLbblzxhUAQQgag==",
			"publishedAt": "2012-10-06T02:47:40.724Z",
			"publishedWith": {
				"node": null,
				"npm": null
			}
		},
		"source": {
			"integrity": "sha512-fmX52yn20TqfNSmz/bT1NRhCYlJAheFkQkeOKZ3yRnHCD0r4CrbC/geemDuxwXpDx16ByMvq8WCmo4c5lq0fEw==",
			"location": "git://github.com/hughsk/flat.git",
			"spec": "github:hughsk/flat#HEAD"
		},
		"comparisonHash": "8a2a8dcbb729bf3ee9216e490c955701f0ddebe1",
		"diff": {
			"files": {
				".npmignore": {
					"match": false,
					"packageHash": "16d30e4462189fb14dd611bdb708c510630c576a1f35b9383e89a4352da36c97",
					"size": 13,
					"status": "missing-in-source"
				},
				".travis.yml": {
					"match": false,
					"packageHash": "8bb6fad3a7a7063f32cb25f9269e4097a4986d7315f065acf3f99f0e419bdad0",
					"size": 51,
					"status": "missing-in-source"
				},
				"README.md": {
					"diff": "--- published/README.md\n+++ rebuilt/README.md\n@@ -1,9 +1,9 @@\n-# flat [![Build Status](https://secure.travis-ci.org/hughsk/flat.png?branch=master)](http://travis-ci.org/hughsk/flat)\n+# flat [![Build Status](https://github.com/hughsk/flat/actions/workflows/main.yml/badge.svg)](https://github.com/hughsk/flat/actions/workflows/main.yml)\n \n Take a nested Javascript object and flatten it, or unflatten an object with\n delimited keys.\n \n-## Installion\n+## Installation\n \n ``` bash\n $ npm install flat\n@@ -11,13 +11,13 @@\n \n ## Methods\n \n-### flat.flatten(original, [delimiter='.'])\n+### flatten(original, options)\n \n Flattens the object - it'll return an object one level deep, regardless of how\n nested the original object was:\n \n ``` javascript\n-var flatten = require('flat').flatten\n+import { flatten } from 'flat'\n \n flatten({\n     key1: {\n@@ -36,12 +36,12 @@\n // }\n ```\n \n-### flat.flatten(original, [delimiter='.'])\n+### unflatten(original, options)\n \n-Flattening is reversible too, you can call `flat.unflatten()` on an object:\n+Flattening is reversible too, you can call `unflatten` on an object:\n \n ``` javascript\n-var unflatten = require('flat').unflatten\n+import { unflatten } from 'flat'\n \n unflatten({\n     'three.levels.deep': 42,\n@@ -58,4 +58,177 @@\n //         }\n //     }\n // }\n-```\n\\ No newline at end of file\n+```\n+\n+## Options\n+\n+### delimiter\n+\n+Use a custom delimiter for (un)flattening your objects, instead of `.`.\n+\n+### safe\n+\n+When enabled, both `flat` and `unflatten` will preserve arrays and their\n+contents. This is disabled by default.\n+\n+``` javascript\n+import { flatten } from 'flat'\n+\n+flatten({\n+    this: [\n+        { contains: 'arrays' },\n+        { preserving: {\n+              them: 'for you'\n+        }}\n+    ]\n+}, {\n+    safe: true\n+})\n+\n+// {\n+//     'this': [\n+//         { contains: 'arrays' },\n+//         { preserving: {\n+//             them: 'for you'\n+//         }}\n+//     ]\n+// }\n+```\n+\n+### object\n+\n+When enabled, arrays will not be created automatically when calling unflatten, like so:\n+\n+``` javascript\n+unflatten({\n+    'hello.you.0': 'ipsum',\n+    'hello.you.1': 'lorem',\n+    'hello.other.world': 'foo'\n+}, { object: true })\n+\n",
					"match": false,
					"packageHash": "99791dd2369d2de06d6a5d9e5599516816225b73c84af8e1980e7368e5f295ac",
					"size": 1108,
					"sourceHash": "2f3681fff8528fa925cd3bd1eb95188c473acaa6fbfdfd146ea0236b803d26ea",
					"status": "content"
				},
				"index.js": {
					"diff": "--- published/index.js\n+++ rebuilt/index.js\n@@ -1,54 +1,157 @@\n-var flat = module.exports = {}\n+function isBuffer (obj) {\n+  return obj &&\n+    obj.constructor &&\n+    (typeof obj.constructor.isBuffer === 'function') &&\n+    obj.constructor.isBuffer(obj)\n+}\n+\n+function keyIdentity (key) {\n+  return key\n+}\n+\n+export function flatten (target, opts) {\n+  opts = opts || {}\n+\n+  const delimiter = opts.delimiter || '.'\n+  const maxDepth = opts.maxDepth\n+  const transformKey = opts.transformKey || keyIdentity\n+  const output = {}\n+\n+  function step (object, prev, currentDepth) {\n+    currentDepth = currentDepth || 1\n+    Object.keys(object).forEach(function (key) {\n+      const value = object[key]\n+      const isarray = opts.safe && Array.isArray(value)\n+      const type = Object.prototype.toString.call(value)\n+      const isbuffer = isBuffer(value)\n+      const isobject = (\n+        type === '[object Object]' ||\n+        type === '[object Array]'\n+      )\n+\n+      const newKey = prev\n+        ? prev + delimiter + transformKey(key)\n+        : transformKey(key)\n+\n+      if (!isarray && !isbuffer && isobject && Object.keys(value).length &&\n+        (!opts.maxDepth || currentDepth < maxDepth)) {\n+        return step(value, newKey, currentDepth + 1)\n+      }\n+\n+      output[newKey] = value\n+    })\n+  }\n+\n+  step(target)\n+\n+  return output\n+}\n+\n+export function unflatten (target, opts) {\n+  opts = opts || {}\n+\n+  const delimiter = opts.delimiter || '.'\n+  const overwrite = opts.overwrite || false\n+  const transformKey = opts.transformKey || keyIdentity\n+  const result = {}\n+\n+  const isbuffer = isBuffer(target)\n+  if (isbuffer || Object.prototype.toString.call(target) !== '[object Object]') {\n+    return target\n+  }\n+\n+  // safely ensure that the key is\n+  // an integer.\n+  function getkey (key) {\n+    const parsedKey = Number(key)\n+\n+    return (\n+      isNaN(parsedKey) ||\n+      key.indexOf('.') !== -1 ||\n+      opts.object\n+    )\n+      ? key\n+      : parsedKey\n+  }\n+\n+  function addKeys (keyPrefix, recipient, target) {\n+    return Object.keys(target).reduce(function (result, key) {\n+      result[keyPrefix + delimiter + key] = target[key]\n+\n+      return result\n+    }, recipient)\n+  }\n+\n+  function isEmpty (val) {\n+    const type = Object.prototype.toString.call(val)\n+    const isArray = type === '[object Array]'\n+    const isObject = type === '[object Object]'\n+\n+    if (!val) {\n+      return true\n+    } else if (isArray) {\n+      return !val.length\n+    } else if (isObject) {\n+      return !Object.keys(val).length\n+    }\n",
					"match": false,
					"packageHash": "4a18c2e77954138a71a4de145119bf5bb412e6734719cb355aa3a944f9de4835",
					"size": 1272,
					"sourceHash": "836e4cde4c1fdc9f11bccc15b5ab1f4716ddbeb1e7f06dacbd559ca89ff142e6",
					"status": "content"
				},
				"package.json": {
					"diff": "--- published/package.json\n+++ rebuilt/package.json\n@@ -1,19 +1,33 @@\n {\n   \"name\": \"flat\",\n-  \"version\": \"0.0.2\",\n-  \"main\": \"index.js\",\n+  \"version\": \"6.0.1\",\n+  \"type\": \"module\",\n+  \"bin\": {\n+    \"flat\": \"cli.js\"\n+  },\n+  \"exports\": {\n+    \".\": {\n+      \"types\": \"./index.d.ts\",\n+      \"default\": \"./index.js\"\n+    }\n+  },\n+  \"files\": [\n+    \"cli.js\",\n+    \"index.js\",\n+    \"index.d.ts\"\n+  ],\n+  \"sideEffects\": false,\n+  \"engines\": {\n+    \"node\": \">=18\"\n+  },\n   \"scripts\": {\n-    \"test\": \"node_modules/.bin/mocha -u tdd --reporter spec\"\n+    \"test\": \"node --test && standard cli.js index.js test/test.js\"\n   },\n-  \"license\": \"BSD\",\n+  \"license\": \"BSD-3-Clause\",\n   \"description\": \"Take a nested Javascript object and flatten it, or unflatten an object with delimited keys\",\n   \"devDependencies\": {\n-    \"mocha\": \"~1.6.0\"\n-  },\n-  \"directories\": {\n-    \"test\": \"test\"\n+    \"standard\": \"^17.1.0\"\n   },\n-  \"dependencies\": {},\n   \"repository\": {\n     \"type\": \"git\",\n     \"url\": \"git://github.com/hughsk/flat.git\"\n@@ -27,5 +41,9 @@\n     \"object\",\n     \"nested\"\n   ],\n-  \"author\": \"Hugh Kennedy <hughskennedy@gmail.com> (http://hughskennedy.com)\"\n+  \"author\": \"Hugh Kennedy <hughskennedy@gmail.com> (https://hughsk.io)\",\n+  \"bugs\": {\n+    \"url\": \"https://github.com/hughsk/flat/issues\"\n+  },\n+  \"homepage\": \"https://github.com/hughsk/flat\"\n }\n",
					"match": false,
					"packageHash": "08d812ac5609fb0d301ffcba2276b2c84a65b4618c3831298a31d82aeb600281",
					"size": 676,
					"sourceHash": "631705fa10ede1a6fdfbac40cfc97ccded01d5d7cee38a18aa3836e48b3755a9",
					"status": "content"
				},
				"test/test.js": {
					"match": false,
					"packageHash": "0e6e5b1ea8714bfeab727bfc96124407276de55d362a6310ac3655982fc32ecc",
					"size": 3825,
					"status": "missing-in-source"
				},
				"LICENSE": {
					"match": false,
					"status": "missing-in-package"
				},
				"cli.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"index.d.ts": {
					"match": false,
					"status": "missing-in-package"
				}
			},
			"summary": {
				"differentFiles": 3,
				"matchingFiles": 0,
				"missingInPackage": 3,
				"missingInSource": 3,
				"score": 0,
				"totalFiles": 9
			}
		}
	}
]
