[
	{
		"reproduceVersion": "0.0.0-local",
		"timestamp": "2025-12-31T06:41:38.409Z",
		"os": "linux",
		"arch": "x64",
		"strategy": "npm:11.7.0",
		"reproduced": false,
		"attested": false,
		"package": {
			"spec": "koa@0.0.1",
			"name": "koa",
			"version": "0.0.1",
			"location": "https://registry.npmjs.org/koa/-/koa-0.0.1.tgz",
			"integrity": "sha512-8dRcHLooqNgmsM8a9/PghxV5E6gsy0Y3Q0qeLgfB/MfMTgFidm7Y3w8hSMXNwbsRAMxI02eUdYif6TIFWBo4aA==",
			"publishedAt": "2013-11-06T20:11:52.916Z",
			"publishedWith": {
				"node": null,
				"npm": "1.3.13"
			}
		},
		"source": {
			"integrity": "sha512-KDDuvpfqSK0ZKEO2gCPedNjl5wYpfj+HNiuVRlbhd1A88S3M0ySkdf2V/EJ4NWt5dwh5PXCdcenrKK2IQJAxsg==",
			"location": "git://github.com/koajs/koa",
			"spec": "github:koajs/koa#HEAD"
		},
		"comparisonHash": "8a2a8dcbb729bf3ee9216e490c955701f0ddebe1",
		"diff": {
			"files": {
				".npmignore": {
					"match": false,
					"packageHash": "7c31d1d9c7cd0d98ed695db6119a63fa46db177234d6326b7ed72aadd631e2b5",
					"size": 39,
					"status": "missing-in-source"
				},
				".travis.yml": {
					"match": false,
					"packageHash": "5ca2d63a873a5a57713578abeb6b32c494d7a28e7fde3d3048b7b2d1e4d1d356",
					"size": 39,
					"status": "missing-in-source"
				},
				"LICENSE": {
					"diff": "--- published/LICENSE\n+++ rebuilt/LICENSE\n@@ -1,6 +1,6 @@\n (The MIT License)\n \n-Copyright (c) 2013 TJ Holowaychuk <tj@vision-media.ca>\n+Copyright (c) 2019 Koa contributors\n \n Permission is hereby granted, free of charge, to any person obtaining\n a copy of this software and associated documentation files (the\n@@ -19,4 +19,4 @@\n IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n-SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\\ No newline at end of file\n+SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n",
					"match": false,
					"packageHash": "e4b6199084d1d645715c468d913d9c2b87aa35c8475b14bf77a869b0ac43cbfa",
					"size": 1097,
					"sourceHash": "16943a6ac79711e26289640dcca989be857059b938380b118bca5afc1ea4e7d7",
					"status": "content"
				},
				"Readme.md": {
					"diff": "--- published/Readme.md\n+++ rebuilt/Readme.md\n@@ -1,118 +1,287 @@\n+<img src=\"/docs/logo.png\" alt=\"Koa middleware framework for nodejs\"/>\n \n-![koa middleware framework for nodejs](https://i.cloudup.com/uXIzgVnPWG-150x150.png)\n+  [![gitter][gitter-image]][gitter-url]\n+  [![NPM version][npm-image]][npm-url]\n+  [![build status][github-action-image]][github-action-url]\n+  [![Test coverage][coveralls-image]][coveralls-url]\n+  [![OpenCollective Backers][backers-image]](#backers)\n+  [![OpenCollective Sponsors][sponsors-image]](#sponsors)\n+  [![PR's Welcome][pr-welcoming-image]][pr-welcoming-url]\n \n-  Expressive middleware for node.js using generators via [co](https://github.com/visionmedia/co)\n-  to make writing web applications and REST APIs more enjoyable to write. \n+  Expressive HTTP middleware framework for node.js to make web applications and APIs more enjoyable to write. Koa's middleware stack flows in a stack-like manner, allowing you to perform actions downstream then filter and manipulate the response upstream.\n \n-  Only methods that are common to nearly all HTTP servers are integrated directly into Koa's small ~400 SLOC codebase. This\n-  includes things like content-negotiation, normalization of node inconsistencies, redirection, and a few others.\n+  Only methods that are common to nearly all HTTP servers are integrated directly into Koa's small ~570 SLOC codebase. This\n+  includes things like content negotiation, normalization of node inconsistencies, redirection, and a few others.\n \n-  No middleware are bundled with koa. If you prefer to only define a single dependency for common middleware, much like Connect, you may use\n-  [koa-common](https://github.com/koajs/common).\n+  Koa is not bundled with any middleware.\n \n ## Installation\n \n-```\n-$ npm install koa\n+Koa requires __node v18.0.0__ or higher for ES2015 and async function support.\n+\n+```sh\n+npm install koa\n ```\n \n-  To use Koa you must be running __node 0.11.4__ or higher for generator support, and must run node(1)\n-  with the `--harmony-generators` flag. If you don't like typing this, add an alias to your shell profile:\n+## Hello Koa\n \n-```\n-alias node='node --harmony-generators'\n+```js\n+const Koa = require('koa');\n+const app = new Koa();\n+\n+// response\n+app.use(ctx => {\n+  ctx.body = 'Hello Koa';\n+});\n+\n+app.listen(3000);\n ```\n \n-## Community\n+## Getting started\n \n- - [API](docs/api.md) documentation\n- - [Middleware](https://github.com/koajs/koa/wiki/Koa) list\n- - [Wiki](https://github.com/koajs/koa/wiki)\n- - [G+ Community](https://plus.google.com/communities/101845768320796750641)\n- - [Mailing list](https://groups.google.com/forum/#!forum/koajs)\n- - [Guide](docs/guide.md)\n- - [FAQ](docs/faq.md)\n- - __#koajs__ on freenode\n+ - [Kick-Off-Koa](https://github.com/koajs/kick-off-koa) - An intro to Koa via a set of self-guided workshops.\n+ - [Guide](docs/guide.md) - Go straight to the docs.\n \n-## Example\n+## Middleware\n \n-```js\n-var koa = require('koa');\n-var app = koa();\n+Koa is a middleware framework that can take two different kinds of functions as middleware:\n \n-// logger\n+  * async function\n+  * common function\n \n-app.use(function(next){\n-  return function *(){\n-    var start = new Date;\n-    yield next;\n-    var ms = new Date - start;\n-    console.log('%s %s - %s', this.method, this.url, ms);\n-  }\n-});\n+Here is an example of logger middleware with each of the different functions:\n \n-// response\n+### ___async___ functions (node v7.6+)\n \n-app.use(function(next){\n-  return function *(){\n-    yield next;\n-    this.body = 'Hello World';\n-  }\n+```js\n",
					"match": false,
					"packageHash": "e97a4c48210501b321117ee3313ea4eeb41cdaae7b79bdcc4109ebcdc35e7499",
					"size": 2628,
					"sourceHash": "329c6cc2f798c5cc96a6761fe106583ae78c1c65d3568f27baa3e0a8694f1bfb",
					"status": "content"
				},
				"index.js": {
					"match": false,
					"packageHash": "148f9e44d03de26a39a25dd7077e878bee72e5f0a7309dcc55f681704d1c962d",
					"size": 48,
					"status": "missing-in-source"
				},
				"lib/application.js": {
					"diff": "--- published/lib/application.js\n+++ rebuilt/lib/application.js\n@@ -1,237 +1,333 @@\n+'use strict'\n \n /**\n  * Module dependencies.\n  */\n+const util = require('node:util')\n+const debug = util.debuglog('koa:application')\n+const Emitter = require('node:events')\n+const Stream = require('node:stream')\n+const http = require('node:http')\n+const { AsyncLocalStorage } = require('node:async_hooks')\n+\n+const onFinished = require('on-finished')\n+const compose = require('koa-compose')\n+const statuses = require('statuses')\n+const { HttpError } = require('http-errors')\n+\n+const request = require('./request')\n+const response = require('./response')\n+const context = require('./context')\n+const isStream = require('./is-stream.js')\n+const only = require('./only.js')\n+\n+/** @typedef {typeof import ('./context') & {\n+ *  app: Application\n+ *  req: import('http').IncomingMessage\n+ *  res: import('http').ServerResponse\n+ *  request: KoaRequest\n+ *  response: KoaResponse\n+ *  state: any\n+ *  originalUrl: string\n+ * }} Context */\n+\n+/** @typedef {typeof import('./request')} KoaRequest */\n+\n+/** @typedef {typeof import('./response')} KoaResponse */\n+\n+/**\n+ * Expose `Application` class.\n+ * Inherits from `Emitter.prototype`.\n+ */\n+\n+module.exports = class Application extends Emitter {\n+  /**\n+   * Initialize a new `Application`.\n+   *\n+   * @api public\n+   */\n+\n+  /**\n+   *\n+   * @param {object} [options] Application options\n+   * @param {string} [options.env='development'] Environment\n+   * @param {string[]} [options.keys] Signed cookie keys\n+   * @param {boolean} [options.proxy] Trust proxy headers\n+   * @param {number} [options.subdomainOffset] Subdomain offset\n+   * @param {string} [options.proxyIpHeader] Proxy IP header, defaults to X-Forwarded-For\n+   * @param {number} [options.maxIpsCount] Max IPs read from proxy IP header, default to 0 (means infinity)\n+   * @param {function} [options.compose] Function to handle middleware composition\n+   * @param {boolean} [options.asyncLocalStorage] Enable AsyncLocalStorage, default to false\n+   *\n+   */\n+\n+  constructor (options) {\n+    super()\n+    options = options || {}\n+    this.proxy = options.proxy || false\n+    this.subdomainOffset = options.subdomainOffset || 2\n+    this.proxyIpHeader = options.proxyIpHeader || 'X-Forwarded-For'\n+    this.maxIpsCount = options.maxIpsCount || 0\n+    this.env = options.env || process.env.NODE_ENV || 'development'\n+    this.compose = options.compose || compose\n+    if (options.keys) this.keys = options.keys\n+    this.middleware = []\n+    this.context = Object.create(context)\n+    this.request = Object.create(request)\n+    this.response = Object.create(response)\n+    // util.inspect.custom support for node 6+\n+    /* istanbul ignore else */\n+    if (util.inspect.custom) {\n+      this[util.inspect.custom] = this.inspect\n+    }\n+    if (options.asyncLocalStorage) {\n+      if (options.asyncLocalStorage instanceof AsyncLocalStorage) {\n+        this.ctxStorage = options.asyncLocalStorage\n+      } else {\n+        this.ctxStorage = new AsyncLocalStorage()\n+      }\n+    }\n+  }\n \n-var debug = require('debug')('koa:application');\n-var Emitter = require('events').EventEmitter;\n-var compose = require('koa-compose');\n-var context = require('./context');\n-var Cookies = require('cookies');\n-var Stream = require('stream');\n",
					"match": false,
					"packageHash": "a603610425ac1e8d7e2f1ebf6c30f72f8a6150e4263d633719432905b23f3656",
					"size": 4589,
					"sourceHash": "148c9d70309869d8e8f1256aa2a95b0138974071a1c6aa046e3c5305e0c9d8a6",
					"status": "content"
				},
				"lib/context.js": {
					"diff": "--- published/lib/context.js\n+++ rebuilt/lib/context.js\n@@ -1,650 +1,99 @@\n+'use strict'\n+\n /**\n  * Module dependencies.\n  */\n \n-var debug = require('debug')('koa:context');\n-var Negotiator = require('negotiator');\n-var statuses = require('./status');\n-var qs = require('querystring');\n-var Stream = require('stream');\n-var fresh = require('fresh');\n-var http = require('http');\n-var path = require('path');\n-var mime = require('mime');\n-var basename = path.basename;\n-var extname = path.extname;\n-var url = require('url');\n-var parse = url.parse;\n-var stringify = url.format;\n+const util = require('util')\n+const createError = require('http-errors')\n+const httpAssert = require('http-assert')\n+const delegate = require('delegates')\n+const statuses = require('statuses')\n+const Cookies = require('cookies')\n+\n+const COOKIES = Symbol('context#cookies')\n \n /**\n- * Prototype.\n+ * Context prototype.\n  */\n \n-module.exports = {\n-\n-  /**\n-   * Return request header.\n-   *\n-   * @return {Object}\n-   * @api public\n-   */\n-\n-  get header() {\n-    return this.req.headers;\n-  },\n+const proto = module.exports = {\n \n   /**\n-   * Return response header.\n+   * util.inspect() implementation, which\n+   * just returns the JSON output.\n    *\n    * @return {Object}\n    * @api public\n    */\n \n-  get responseHeader() {\n-    // TODO: wtf\n-    return this.res._headers || {};\n-  },\n-\n-  /**\n-   * Return response status string.\n-   *\n-   * @return {String}\n-   * @api public\n-   */\n-\n-  get statusString() {\n-    return http.STATUS_CODES[this.status];\n-  },\n-\n-  /**\n-   * Get request URL.\n-   *\n-   * @return {String}\n-   * @api public\n-   */\n-\n-  get url() {\n-    return this.req.url;\n-  },\n-\n-  /**\n-   * Set request URL.\n-   *\n-   * @api public\n-   */\n-\n-  set url(val) {\n-    this.req.url = val;\n-  },\n-\n-  /**\n-   * Get request method.\n-   *\n",
					"match": false,
					"packageHash": "8795f1bab147afb94ff7904e7b7dcea333a992a839677b41f927d34dd8906eea",
					"size": 21038,
					"sourceHash": "b45d1961d1cbd7a6460ad4a5e268ac1ecc78a14690696f6942ce3630822032fe",
					"status": "content"
				},
				"lib/status.js": {
					"match": false,
					"packageHash": "9e23eb8594a445442bdd7f2ee7b89ecef8dae7ba50888034be3ed2879d09c630",
					"size": 259,
					"status": "missing-in-source"
				},
				"package.json": {
					"diff": "--- published/package.json\n+++ rebuilt/package.json\n@@ -1,13 +1,28 @@\n {\n   \"name\": \"koa\",\n-  \"version\": \"0.0.1\",\n+  \"version\": \"3.1.1\",\n   \"description\": \"Koa web app framework\",\n-  \"main\": \"index.js\",\n-  \"directories\": {\n-    \"example\": \"examples\"\n+  \"main\": \"lib/application.js\",\n+  \"exports\": {\n+    \".\": {\n+      \"require\": \"./lib/application.js\",\n+      \"import\": \"./dist/koa.mjs\",\n+      \"default\": \"./dist/koa.mjs\"\n+    },\n+    \"./*\": \"./*.js\",\n+    \"./*.js\": \"./*.js\",\n+    \"./package\": \"./package.json\",\n+    \"./package.json\": \"./package.json\"\n   },\n   \"scripts\": {\n-    \"test\": \"make test\"\n+    \"test\": \"node --test\",\n+    \"test:coverage\": \"c8 --reporter=lcov --reporter=text-summary node --test\",\n+    \"lint\": \"standard\",\n+    \"lint:fix\": \"standard --fix\",\n+    \"lint:pretty\": \"standard | snazzy\",\n+    \"authors\": \"git log --format='%aN <%aE>' | sort -u > AUTHORS\",\n+    \"build\": \"gen-esm-wrapper . ./dist/koa.mjs\",\n+    \"prepare\": \"npm run build\"\n   },\n   \"repository\": \"koajs/koa\",\n   \"keywords\": [\n@@ -21,24 +36,38 @@\n   ],\n   \"license\": \"MIT\",\n   \"dependencies\": {\n-    \"co\": \"2.0.0\",\n-    \"debug\": \"*\",\n-    \"mime\": \"1.2.10\",\n-    \"fresh\": \"0.2.0\",\n-    \"negotiator\": \"0.2.7\",\n-    \"koa-compose\": \"1.0.0\",\n-    \"cookies\": \"~0.3.6\"\n+    \"accepts\": \"^1.3.8\",\n+    \"content-disposition\": \"~0.5.4\",\n+    \"content-type\": \"^1.0.5\",\n+    \"cookies\": \"~0.9.1\",\n+    \"delegates\": \"^1.0.0\",\n+    \"destroy\": \"^1.2.0\",\n+    \"encodeurl\": \"^2.0.0\",\n+    \"escape-html\": \"^1.0.3\",\n+    \"fresh\": \"~0.5.2\",\n+    \"http-assert\": \"^1.5.0\",\n+    \"http-errors\": \"^2.0.0\",\n+    \"koa-compose\": \"^4.1.0\",\n+    \"mime-types\": \"^3.0.1\",\n+    \"on-finished\": \"^2.4.1\",\n+    \"parseurl\": \"^1.3.3\",\n+    \"statuses\": \"^2.0.1\",\n+    \"type-is\": \"^2.0.1\",\n+    \"vary\": \"^1.1.2\"\n   },\n   \"devDependencies\": {\n-    \"bytes\": \"*\",\n-    \"should\": \"1.2.2\",\n-    \"mocha\": \"1.12.0\",\n-    \"supertest\": \"0.7.1\",\n-    \"co-fs\": \"~1.0.1\",\n-    \"co-views\": \"0.0.1\",\n-    \"ejs\": \"~0.8.4\"\n+    \"c8\": \"^10.1.3\",\n+    \"gen-esm-wrapper\": \"^1.1.3\",\n+    \"snazzy\": \"^9.0.0\",\n+    \"standard\": \"^17.1.2\",\n+    \"supertest\": \"^7.1.1\"\n   },\n   \"engines\": {\n-    \"node\": \"> 0.11.4\"\n-  }\n+    \"node\": \">= 18\"\n+  },\n+  \"files\": [\n+    \"dist\",\n+    \"lib\"\n+  ],\n+  \"homepage\": \"https://koajs.com\"\n }\n",
					"match": false,
					"packageHash": "59e175a7f12f2a4177235fb5eab09d3b2d4ffcc2b505e11b1b50977aa0eab1f1",
					"size": 783,
					"sourceHash": "39075751293967a94e004c83465d41287733b9d50f877a11ddca1c1cd3631cb1",
					"status": "content"
				},
				"dist/koa.mjs": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/is-stream.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/only.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/request.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/response.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/search-params.js": {
					"match": false,
					"status": "missing-in-package"
				}
			},
			"summary": {
				"differentFiles": 5,
				"matchingFiles": 0,
				"missingInPackage": 6,
				"missingInSource": 4,
				"score": 0,
				"totalFiles": 15
			}
		}
	}
]
