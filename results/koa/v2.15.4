[
	{
		"reproduceVersion": "0.0.0-local",
		"timestamp": "2025-12-31T06:52:13.948Z",
		"os": "linux",
		"arch": "x64",
		"strategy": "npm:11.7.0",
		"reproduced": false,
		"attested": false,
		"package": {
			"spec": "koa@2.15.4",
			"name": "koa",
			"version": "2.15.4",
			"location": "https://registry.npmjs.org/koa/-/koa-2.15.4.tgz",
			"integrity": "sha512-7fNBIdrU2PEgLljXoPWoyY4r1e+ToWCmzS/wwMPbUNs7X+5MMET1ObhJBlUkF5uZG9B6QhM2zS1TsH6adegkiQ==",
			"publishedAt": "2025-02-11T12:58:40.829Z",
			"publishedWith": {
				"node": "22.13.1",
				"npm": "10.9.2"
			}
		},
		"source": {
			"integrity": "sha512-KDDuvpfqSK0ZKEO2gCPedNjl5wYpfj+HNiuVRlbhd1A88S3M0ySkdf2V/EJ4NWt5dwh5PXCdcenrKK2IQJAxsg==",
			"location": "git+https://github.com/koajs/koa.git",
			"spec": "github:koajs/koa#5c2cff7825acd55f2031d831bf9c2f7eafec9192"
		},
		"comparisonHash": "8a2a8dcbb729bf3ee9216e490c955701f0ddebe1",
		"diff": {
			"files": {
				"Readme.md": {
					"diff": "--- published/Readme.md\n+++ rebuilt/Readme.md\n@@ -2,7 +2,7 @@\n \n   [![gitter][gitter-image]][gitter-url]\n   [![NPM version][npm-image]][npm-url]\n-  [![build status][travis-image]][travis-url]\n+  [![build status][github-action-image]][github-action-url]\n   [![Test coverage][coveralls-image]][coveralls-url]\n   [![OpenCollective Backers][backers-image]](#backers)\n   [![OpenCollective Sponsors][sponsors-image]](#sponsors)\n@@ -17,10 +17,10 @@\n \n ## Installation\n \n-Koa requires __node v7.6.0__ or higher for ES2015 and async function support.\n+Koa requires __node v18.0.0__ or higher for ES2015 and async function support.\n \n-```\n-$ npm install koa\n+```sh\n+npm install koa\n ```\n \n ## Hello Koa\n@@ -40,9 +40,7 @@\n ## Getting started\n \n  - [Kick-Off-Koa](https://github.com/koajs/kick-off-koa) - An intro to Koa via a set of self-guided workshops.\n- - [Workshop](https://github.com/koajs/workshop) - A workshop to learn the basics of Koa, Express' spiritual successor.\n- - [Introduction Screencast](https://knowthen.com/episode-3-koajs-quickstart-guide/) - An introduction to installing and getting started with Koa\n-\n+ - [Guide](docs/guide.md) - Go straight to the docs.\n \n ## Middleware\n \n@@ -83,10 +81,9 @@\n \n The middleware signature changed between v1.x and v2.x.  The older signature is deprecated.\n \n-**Old signature middleware support will be removed in v3**\n+**Old signature middleware support has been removed in v3**\n \n-Please see the [Migration Guide](docs/migration.md) for more information on upgrading from v1.x and\n-using v1.x middleware with v2.x.\n+Please see the [Migration Guide from v2.x to v3.x](docs/migration-v2-to-v3.md) for information on upgrading from v2.x to v3.x, and the [Migration Guide from v1.x to v2.x](docs/migration-v1-to-v2.md) for information on upgrading from v1.x to v2.x.\n \n ## Context, Request and Response\n \n@@ -98,7 +95,7 @@\n app.use(async (ctx, next) => { await next(); });\n ```\n \n-Koa provides a `Request` object as the `request` property of the `Context`.  \n+Koa provides a `Request` object as the `request` property of the `Context`.\n Koa's `Request` object provides helpful methods for working with\n http requests which delegate to an [IncomingMessage](https://nodejs.org/api/http.html#http_class_http_incomingmessage)\n from the node `http` module.\n@@ -114,10 +111,10 @@\n });\n ```\n \n-Koa provides a `Response` object as the `response` property of the `Context`.  \n+Koa provides a `Response` object as the `response` property of the `Context`.\n Koa's `Response` object provides helpful methods for working with\n http responses which delegate to a [ServerResponse](https://nodejs.org/api/http.html#http_class_http_serverresponse)\n-.  \n+.\n \n Koa's pattern of delegating to Node's request and response objects rather than extending them\n provides a cleaner interface and reduces conflicts between different middleware and with Node\n@@ -181,6 +178,7 @@\n \n ## Community\n \n+ - [KoaJS Slack Group](https://join.slack.com/t/koa-js/shared_invite/zt-5pjgthmb-1JeKDbByqqcARtlPbtf~vQ)\n  - [Badgeboard](https://koajs.github.io/badgeboard) and list of official modules\n  - [Examples](https://github.com/koajs/examples)\n  - [Middleware](https://github.com/koajs/koa/wiki) list\n@@ -276,8 +274,8 @@\n \n [npm-image]: https://img.shields.io/npm/v/koa.svg?style=flat-square\n [npm-url]: https://www.npmjs.com/package/koa\n-[travis-image]: https://img.shields.io/travis/koajs/koa/master.svg?style=flat-square\n-[travis-url]: https://travis-ci.org/koajs/koa\n+[github-action-image]: https://github.com/koajs/koa/actions/workflows/node.js.yml/badge.svg\n+[github-action-url]: https://github.com/koajs/koa/actions/workflows/node.js.yml\n [coveralls-image]: https://img.shields.io/codecov/c/github/koajs/koa.svg?style=flat-square\n [coveralls-url]: https://codecov.io/github/koajs/koa?branch=master\n [backers-image]: https://opencollective.com/koajs/backers/badge.svg?style=flat-square\n",
					"match": false,
					"packageHash": "f3f3e3b9153b9c3fec020ac0bb9cfe7c50a15f1127b4ffed26d528f617ba977a",
					"size": 17277,
					"sourceHash": "329c6cc2f798c5cc96a6761fe106583ae78c1c65d3568f27baa3e0a8694f1bfb",
					"status": "content"
				},
				"lib/application.js": {
					"diff": "--- published/lib/application.js\n+++ rebuilt/lib/application.js\n@@ -1,27 +1,39 @@\n-\n-'use strict';\n+'use strict'\n \n /**\n  * Module dependencies.\n  */\n+const util = require('node:util')\n+const debug = util.debuglog('koa:application')\n+const Emitter = require('node:events')\n+const Stream = require('node:stream')\n+const http = require('node:http')\n+const { AsyncLocalStorage } = require('node:async_hooks')\n+\n+const onFinished = require('on-finished')\n+const compose = require('koa-compose')\n+const statuses = require('statuses')\n+const { HttpError } = require('http-errors')\n+\n+const request = require('./request')\n+const response = require('./response')\n+const context = require('./context')\n+const isStream = require('./is-stream.js')\n+const only = require('./only.js')\n+\n+/** @typedef {typeof import ('./context') & {\n+ *  app: Application\n+ *  req: import('http').IncomingMessage\n+ *  res: import('http').ServerResponse\n+ *  request: KoaRequest\n+ *  response: KoaResponse\n+ *  state: any\n+ *  originalUrl: string\n+ * }} Context */\n+\n+/** @typedef {typeof import('./request')} KoaRequest */\n \n-const isGeneratorFunction = require('is-generator-function');\n-const debug = require('debug')('koa:application');\n-const onFinished = require('on-finished');\n-const assert = require('assert');\n-const response = require('./response');\n-const compose = require('koa-compose');\n-const context = require('./context');\n-const request = require('./request');\n-const statuses = require('statuses');\n-const Emitter = require('events');\n-const util = require('util');\n-const Stream = require('stream');\n-const http = require('http');\n-const only = require('only');\n-const convert = require('koa-convert');\n-const deprecate = require('depd')('koa');\n-const { HttpError } = require('http-errors');\n+/** @typedef {typeof import('./response')} KoaResponse */\n \n /**\n  * Expose `Application` class.\n@@ -36,39 +48,44 @@\n    */\n \n   /**\n-    *\n-    * @param {object} [options] Application options\n-    * @param {string} [options.env='development'] Environment\n-    * @param {string[]} [options.keys] Signed cookie keys\n-    * @param {boolean} [options.proxy] Trust proxy headers\n-    * @param {number} [options.subdomainOffset] Subdomain offset\n-    * @param {string} [options.proxyIpHeader] Proxy IP header, defaults to X-Forwarded-For\n-    * @param {number} [options.maxIpsCount] Max IPs read from proxy IP header, default to 0 (means infinity)\n-    *\n-    */\n-\n-  constructor(options) {\n-    super();\n-    options = options || {};\n-    this.proxy = options.proxy || false;\n-    this.subdomainOffset = options.subdomainOffset || 2;\n-    this.proxyIpHeader = options.proxyIpHeader || 'X-Forwarded-For';\n-    this.maxIpsCount = options.maxIpsCount || 0;\n-    this.env = options.env || process.env.NODE_ENV || 'development';\n-    if (options.keys) this.keys = options.keys;\n-    this.middleware = [];\n-    this.context = Object.create(context);\n-    this.request = Object.create(request);\n-    this.response = Object.create(response);\n+   *\n+   * @param {object} [options] Application options\n+   * @param {string} [options.env='development'] Environment\n+   * @param {string[]} [options.keys] Signed cookie keys\n+   * @param {boolean} [options.proxy] Trust proxy headers\n+   * @param {number} [options.subdomainOffset] Subdomain offset\n+   * @param {string} [options.proxyIpHeader] Proxy IP header, defaults to X-Forwarded-For\n+   * @param {number} [options.maxIpsCount] Max IPs read from proxy IP header, default to 0 (means infinity)\n+   * @param {function} [options.compose] Function to handle middleware composition\n+   * @param {boolean} [options.asyncLocalStorage] Enable AsyncLocalStorage, default to false\n+   *\n",
					"match": false,
					"packageHash": "3fb0ab67775eb94ef97a7196db986a34b1be69375c2b6340f2e499829f1bc617",
					"size": 8146,
					"sourceHash": "148c9d70309869d8e8f1256aa2a95b0138974071a1c6aa046e3c5305e0c9d8a6",
					"status": "content"
				},
				"lib/context.js": {
					"diff": "--- published/lib/context.js\n+++ rebuilt/lib/context.js\n@@ -1,18 +1,17 @@\n-\n-'use strict';\n+'use strict'\n \n /**\n  * Module dependencies.\n  */\n \n-const util = require('util');\n-const createError = require('http-errors');\n-const httpAssert = require('http-assert');\n-const delegate = require('delegates');\n-const statuses = require('statuses');\n-const Cookies = require('cookies');\n+const util = require('util')\n+const createError = require('http-errors')\n+const httpAssert = require('http-assert')\n+const delegate = require('delegates')\n+const statuses = require('statuses')\n+const Cookies = require('cookies')\n \n-const COOKIES = Symbol('context#cookies');\n+const COOKIES = Symbol('context#cookies')\n \n /**\n  * Context prototype.\n@@ -28,9 +27,9 @@\n    * @api public\n    */\n \n-  inspect() {\n-    if (this === proto) return this;\n-    return this.toJSON();\n+  inspect () {\n+    if (this === proto) return this\n+    return this.toJSON()\n   },\n \n   /**\n@@ -45,7 +44,7 @@\n    * @api public\n    */\n \n-  toJSON() {\n+  toJSON () {\n     return {\n       request: this.request.toJSON(),\n       response: this.response.toJSON(),\n@@ -54,7 +53,7 @@\n       req: '<original node req>',\n       res: '<original node res>',\n       socket: '<original node socket>'\n-    };\n+    }\n   },\n \n   /**\n@@ -93,8 +92,8 @@\n    * @api public\n    */\n \n-  throw(...args) {\n-    throw createError(...args);\n+  throw (...args) {\n+    throw createError(...args)\n   },\n \n   /**\n@@ -104,81 +103,78 @@\n    * @api private\n    */\n \n-  onerror(err) {\n+  onerror (err) {\n     // don't do anything if there is no error.\n     // this allows you to pass `this.onerror`\n     // to node-style callbacks.\n-    if (null == err) return;\n+    if (err == null) return\n \n     // When dealing with cross-globals a normal `instanceof` check doesn't work properly.\n     // See https://github.com/koajs/koa/issues/1466\n     // We can probably remove it once jest fixes https://github.com/facebook/jest/issues/2549.\n     const isNativeError =\n       Object.prototype.toString.call(err) === '[object Error]' ||\n-      err instanceof Error;\n-    if (!isNativeError) err = new Error(util.format('non-error thrown: %j', err));\n+      err instanceof Error\n+    if (!isNativeError) err = new Error(util.format('non-error thrown: %j', err))\n \n-    let headerSent = false;\n+    let headerSent = false\n     if (this.headerSent || !this.writable) {\n-      headerSent = err.headerSent = true;\n+      headerSent = err.headerSent = true\n     }\n \n",
					"match": false,
					"packageHash": "b68b7f4f9537a04361c1e19e43b58b699779528c26444ece630ad77ef9723ea2",
					"size": 5582,
					"sourceHash": "b45d1961d1cbd7a6460ad4a5e268ac1ecc78a14690696f6942ce3630822032fe",
					"status": "content"
				},
				"lib/request.js": {
					"diff": "--- published/lib/request.js\n+++ rebuilt/lib/request.js\n@@ -1,23 +1,23 @@\n-\n-'use strict';\n+'use strict'\n \n /**\n  * Module dependencies.\n  */\n \n-const URL = require('url').URL;\n-const net = require('net');\n-const accepts = require('accepts');\n-const contentType = require('content-type');\n-const stringify = require('url').format;\n-const parse = require('parseurl');\n-const qs = require('querystring');\n-const typeis = require('type-is');\n-const fresh = require('fresh');\n-const only = require('only');\n-const util = require('util');\n+const URL = require('url').URL\n+const net = require('net')\n+const accepts = require('accepts')\n+const contentType = require('content-type')\n+const stringify = require('url').format\n+const parse = require('parseurl')\n+const sp = require('./search-params.js')\n+\n+const typeis = require('type-is')\n+const fresh = require('fresh')\n+const only = require('./only.js')\n+const util = require('util')\n \n-const IP = Symbol('context#ip');\n+const IP = Symbol('context#ip')\n \n /**\n  * Prototype.\n@@ -32,8 +32,8 @@\n    * @api public\n    */\n \n-  get header() {\n-    return this.req.headers;\n+  get header () {\n+    return this.req.headers\n   },\n \n   /**\n@@ -42,8 +42,8 @@\n    * @api public\n    */\n \n-  set header(val) {\n-    this.req.headers = val;\n+  set header (val) {\n+    this.req.headers = val\n   },\n \n   /**\n@@ -53,8 +53,8 @@\n    * @api public\n    */\n \n-  get headers() {\n-    return this.req.headers;\n+  get headers () {\n+    return this.req.headers\n   },\n \n   /**\n@@ -63,8 +63,8 @@\n    * @api public\n    */\n \n-  set headers(val) {\n-    this.req.headers = val;\n+  set headers (val) {\n+    this.req.headers = val\n   },\n \n   /**\n@@ -74,8 +74,8 @@\n    * @api public\n    */\n \n-  get url() {\n-    return this.req.url;\n+  get url () {\n+    return this.req.url\n   },\n \n   /**\n@@ -84,19 +84,19 @@\n    * @api public\n    */\n \n-  set url(val) {\n",
					"match": false,
					"packageHash": "55b0e6f24e931f0b51f3f70e748d0263b1253a4c735278d45f5d925b15deb2df",
					"size": 14960,
					"sourceHash": "0ba20780fb1669544a10525bd7376d50f46f94886c91330a899e2e0187f63ada",
					"status": "content"
				},
				"lib/response.js": {
					"diff": "--- published/lib/response.js\n+++ rebuilt/lib/response.js\n@@ -1,25 +1,25 @@\n-\n-'use strict';\n+'use strict'\n \n /**\n  * Module dependencies.\n  */\n \n-const contentDisposition = require('content-disposition');\n-const getType = require('cache-content-type');\n-const onFinish = require('on-finished');\n-const escape = require('escape-html');\n-const typeis = require('type-is').is;\n-const statuses = require('statuses');\n-const destroy = require('destroy');\n-const assert = require('assert');\n-const extname = require('path').extname;\n-const vary = require('vary');\n-const only = require('only');\n-const util = require('util');\n-const encodeUrl = require('encodeurl');\n-const Stream = require('stream');\n-const URL = require('url').URL;\n+const assert = require('node:assert')\n+const extname = require('node:path').extname\n+const util = require('node:util')\n+\n+const contentDisposition = require('content-disposition')\n+const onFinish = require('on-finished')\n+const escape = require('escape-html')\n+const typeis = require('type-is').is\n+const statuses = require('statuses')\n+const destroy = require('destroy')\n+const encodeUrl = require('encodeurl')\n+const vary = require('vary')\n+const getType = require('mime-types').contentType\n+\n+const isStream = require('./is-stream.js')\n+const only = require('./only.js')\n \n /**\n  * Prototype.\n@@ -34,8 +34,8 @@\n    * @api public\n    */\n \n-  get socket() {\n-    return this.res.socket;\n+  get socket () {\n+    return this.res.socket\n   },\n \n   /**\n@@ -45,11 +45,11 @@\n    * @api public\n    */\n \n-  get header() {\n-    const { res } = this;\n+  get header () {\n+    const { res } = this\n     return typeof res.getHeaders === 'function'\n       ? res.getHeaders()\n-      : res._headers || {}; // Node < 7.7\n+      : res._headers || {} // Node < 7.7\n   },\n \n   /**\n@@ -59,8 +59,8 @@\n    * @api public\n    */\n \n-  get headers() {\n-    return this.header;\n+  get headers () {\n+    return this.header\n   },\n \n   /**\n@@ -70,8 +70,8 @@\n    * @api public\n    */\n \n-  get status() {\n-    return this.res.statusCode;\n+  get status () {\n+    return this.res.statusCode\n   },\n \n   /**\n@@ -81,15 +81,15 @@\n    * @api public\n    */\n \n-  set status(code) {\n-    if (this.headerSent) return;\n+  set status (code) {\n",
					"match": false,
					"packageHash": "f7d42b0f755a2c268a76f455a50d8f969e2a07675b10cfb6e2243b8be03af0e8",
					"size": 12316,
					"sourceHash": "2b03a5d9c80d8c436de16da10fbca36f19b7427fa949b48f7d4f856997bddf85",
					"status": "content"
				},
				"package.json": {
					"diff": "--- published/package.json\n+++ rebuilt/package.json\n@@ -1,29 +1,25 @@\n {\n   \"name\": \"koa\",\n-  \"version\": \"2.15.4\",\n+  \"version\": \"3.1.1\",\n   \"description\": \"Koa web app framework\",\n   \"main\": \"lib/application.js\",\n   \"exports\": {\n     \".\": {\n       \"require\": \"./lib/application.js\",\n-      \"import\": \"./dist/koa.mjs\"\n+      \"import\": \"./dist/koa.mjs\",\n+      \"default\": \"./dist/koa.mjs\"\n     },\n-    \"./lib/request\": \"./lib/request.js\",\n-    \"./lib/request.js\": \"./lib/request.js\",\n-    \"./lib/response\": \"./lib/response.js\",\n-    \"./lib/response.js\": \"./lib/response.js\",\n-    \"./lib/application\": \"./lib/application.js\",\n-    \"./lib/application.js\": \"./lib/application.js\",\n-    \"./lib/context\": \"./lib/context.js\",\n-    \"./lib/context.js\": \"./lib/context.js\",\n     \"./*\": \"./*.js\",\n     \"./*.js\": \"./*.js\",\n     \"./package\": \"./package.json\",\n     \"./package.json\": \"./package.json\"\n   },\n   \"scripts\": {\n-    \"test\": \"jest --forceExit\",\n-    \"lint\": \"eslint --ignore-path .gitignore .\",\n+    \"test\": \"node --test\",\n+    \"test:coverage\": \"c8 --reporter=lcov --reporter=text-summary node --test\",\n+    \"lint\": \"standard\",\n+    \"lint:fix\": \"standard --fix\",\n+    \"lint:pretty\": \"standard | snazzy\",\n     \"authors\": \"git log --format='%aN <%aE>' | sort -u > AUTHORS\",\n     \"build\": \"gen-esm-wrapper . ./dist/koa.mjs\",\n     \"prepare\": \"npm run build\"\n@@ -40,50 +36,38 @@\n   ],\n   \"license\": \"MIT\",\n   \"dependencies\": {\n-    \"accepts\": \"^1.3.5\",\n-    \"cache-content-type\": \"^1.0.0\",\n-    \"content-disposition\": \"~0.5.2\",\n-    \"content-type\": \"^1.0.4\",\n-    \"cookies\": \"~0.9.0\",\n-    \"debug\": \"^4.3.2\",\n+    \"accepts\": \"^1.3.8\",\n+    \"content-disposition\": \"~0.5.4\",\n+    \"content-type\": \"^1.0.5\",\n+    \"cookies\": \"~0.9.1\",\n     \"delegates\": \"^1.0.0\",\n-    \"depd\": \"^2.0.0\",\n-    \"destroy\": \"^1.0.4\",\n-    \"encodeurl\": \"^1.0.2\",\n+    \"destroy\": \"^1.2.0\",\n+    \"encodeurl\": \"^2.0.0\",\n     \"escape-html\": \"^1.0.3\",\n     \"fresh\": \"~0.5.2\",\n-    \"http-assert\": \"^1.3.0\",\n-    \"http-errors\": \"^1.6.3\",\n-    \"is-generator-function\": \"^1.0.7\",\n+    \"http-assert\": \"^1.5.0\",\n+    \"http-errors\": \"^2.0.0\",\n     \"koa-compose\": \"^4.1.0\",\n-    \"koa-convert\": \"^2.0.0\",\n-    \"on-finished\": \"^2.3.0\",\n-    \"only\": \"~0.0.2\",\n-    \"parseurl\": \"^1.3.2\",\n-    \"statuses\": \"^1.5.0\",\n-    \"type-is\": \"^1.6.16\",\n+    \"mime-types\": \"^3.0.1\",\n+    \"on-finished\": \"^2.4.1\",\n+    \"parseurl\": \"^1.3.3\",\n+    \"statuses\": \"^2.0.1\",\n+    \"type-is\": \"^2.0.1\",\n     \"vary\": \"^1.1.2\"\n   },\n   \"devDependencies\": {\n-    \"eslint\": \"^7.32.0\",\n-    \"eslint-config-koa\": \"^2.0.0\",\n-    \"eslint-config-standard\": \"^16.0.3\",\n-    \"eslint-plugin-import\": \"^2.18.2\",\n-    \"eslint-plugin-node\": \"^11.1.0\",\n-    \"eslint-plugin-promise\": \"^5.1.0\",\n-    \"eslint-plugin-standard\": \"^5.0.0\",\n-    \"gen-esm-wrapper\": \"^1.0.6\",\n-    \"jest\": \"^27.0.6\",\n-    \"supertest\": \"^3.1.0\"\n+    \"c8\": \"^10.1.3\",\n+    \"gen-esm-wrapper\": \"^1.1.3\",\n+    \"snazzy\": \"^9.0.0\",\n+    \"standard\": \"^17.1.2\",\n+    \"supertest\": \"^7.1.1\"\n   },\n   \"engines\": {\n-    \"node\": \"^4.8.4 || ^6.10.1 || ^7.10.1 || >= 8.1.4\"\n",
					"match": false,
					"packageHash": "7acc6930642abb04a94cfe862f91763687d1127d8b2faad3c6dc86cf5ccfbdb0",
					"size": 2312,
					"sourceHash": "39075751293967a94e004c83465d41287733b9d50f877a11ddca1c1cd3631cb1",
					"status": "content"
				},
				"lib/is-stream.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/only.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"lib/search-params.js": {
					"match": false,
					"status": "missing-in-package"
				}
			},
			"summary": {
				"differentFiles": 6,
				"matchingFiles": 2,
				"missingInPackage": 3,
				"missingInSource": 0,
				"score": 0.18181818181818182,
				"totalFiles": 11
			}
		}
	}
]
