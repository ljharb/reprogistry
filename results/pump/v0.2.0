[
	{
		"reproduceVersion": "0.0.0-local",
		"timestamp": "2026-01-01T22:07:17.546Z",
		"os": "linux",
		"arch": "x64",
		"strategy": "npm:11.7.0",
		"reproduced": false,
		"attested": false,
		"package": {
			"spec": "pump@0.2.0",
			"name": "pump",
			"version": "0.2.0",
			"location": "https://registry.npmjs.org/pump/-/pump-0.2.0.tgz",
			"integrity": "sha512-bOy3aQ+1GR9P38z7HsHFAbnHKxVXyzpbvFAOUi+uD05sbIjsJmCUY9U4t81VrubHs90tuf4tDkjlG5A5zu+jqw==",
			"publishedAt": "2013-11-27T01:13:58.376Z",
			"publishedWith": {
				"node": null,
				"npm": "1.3.14"
			}
		},
		"source": {
			"integrity": "sha512-0ImRAPzJelMacJi7RIWfmc9y2sXaFxtCR9RHSifrJi/VmK40kN10LOW5rERmhNn3NSMShrDxG/31wQOE/ngn2w==",
			"location": "git://github.com/mafintosh/pump.git",
			"spec": "github:mafintosh/pump#v0.2.0"
		},
		"comparisonHash": "8a2a8dcbb729bf3ee9216e490c955701f0ddebe1",
		"diff": {
			"files": {
				".npmignore": {
					"match": false,
					"packageHash": "16d30e4462189fb14dd611bdb708c510630c576a1f35b9383e89a4352da36c97",
					"size": 13,
					"status": "missing-in-source"
				},
				"index.js": {
					"diff": "--- published/index.js\n+++ rebuilt/index.js\n@@ -1,44 +1,49 @@\n var once = require('once');\n-var eos = require('end-of-stream');\n-var fs = require('fs'); // we only need fs to get the ReadStream and WriteStream prototypes\n-\n var noop = function() {};\n \n-var isFn = function(fn) {\n-\treturn typeof fn === 'function';\n-};\n-\n-var isFS = function(stream) {\n-\treturn (stream instanceof fs.ReadStream || stream instanceof fs.WriteStream) && isFn(stream.close);\n-};\n-\n-var isRequest = function(stream) {\n-\treturn stream.setHeader && typeof isFn(stream.abort);\n+var patch = function(stream, callback) { // patch 0.8 stream since they dont emit finish\n+\tvar end = stream.end;\n+\tstream.end = function() {\n+\t\tcallback();\n+\t\tend.apply(this, arguments);\n+\t};\n };\n \n var destroyer = function(stream, reading, writing, callback) {\n \tcallback = once(callback);\n \n+\tvar destroyed = false;\n \tvar closed = false;\n+\n+\tvar onfinish = function() {\n+\t\twriting = false;\n+\t\tif (!reading) callback();\n+\t};\n+\n+\tstream.on('error', callback);\n+\n+\tstream.on('finish', onfinish);\n+\n+\tstream.on('end', function() {\n+\t\treading = false;\n+\t\tif (!writing) callback();\n+\t});\n+\n \tstream.on('close', function() {\n \t\tclosed = true;\n+\t\tif (!reading && !writing) return;\n+\t\tif (reading && stream._readableState && stream._readableState.ended) return;\n+\t\tcallback(new Error('stream closed'));\n \t});\n \n-\teos(stream, {readable:reading, writable:writing}, callback);\n+\tif (writing && stream.writable && !stream._writableState) patch(stream, onfinish);\n \n-\tvar destroyed = false;\n-\treturn function(err) {\n-\t\tif (closed) return;\n-\t\tif (destroyed) return;\n+\treturn function() {\n+\t\tif (closed || destroyed || (!reading && !writing)) return;\n \t\tdestroyed = true;\n-\n-\t\tif (isFS(stream)) return stream.close(); // use close for fs streams to avoid fd leaks\n-\t\tif (isRequest(stream)) return stream.abort(); // request.destroy just do .end - .abort is what we want\n-\n-\t\tif (isFn(stream.destroy)) return stream.destroy();\n-\t\tif (isFn(stream.close)) return stream.close();\n-\n-\t\tcallback(err || new Error('stream was destroyed'));\n+\t\tif (stream.destroy) return stream.destroy();\n+\t\tif (stream.end) return stream.end();\n+\t\tcallback(new Error('stream was destroyed'));\n \t};\n };\n \n@@ -50,9 +55,13 @@\n \treturn from.pipe(to);\n };\n \n+var functionish = function(fn) {\n+\treturn !fn || typeof fn === 'function';\n+};\n+\n var pump = function() {\n \tvar streams = Array.prototype.slice.call(arguments);\n-\tvar callback = isFn(streams[streams.length-1] || noop) && streams.pop() || noop;\n+\tvar callback = functionish(streams[streams.length-1]) && streams.pop() || noop;\n \n \tif (Array.isArray(streams[0])) streams = streams[0];\n \tif (streams.length < 2) throw new Error('pump requires two streams per minimum');\n",
					"match": false,
					"packageHash": "231f73fc930c822644436edf013c021adaaeba2db02d4e2abc4b76f548a1e683",
					"size": 1967,
					"sourceHash": "d7e5d2ec3d52521ed6aa39fd45c1b66697e2be33f070d7d74fefbaf851199a58",
					"status": "content"
				}
			},
			"summary": {
				"differentFiles": 1,
				"matchingFiles": 3,
				"missingInPackage": 0,
				"missingInSource": 1,
				"score": 0.6,
				"totalFiles": 5
			}
		}
	}
]
