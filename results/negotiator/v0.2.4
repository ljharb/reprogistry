[
	{
		"reproduceVersion": "0.0.0-local",
		"timestamp": "2026-01-07T17:38:58.890Z",
		"os": "linux",
		"arch": "x64",
		"strategy": "npm:11.7.0",
		"reproduced": false,
		"attested": false,
		"package": {
			"spec": "negotiator@0.2.4",
			"name": "negotiator",
			"version": "0.2.4",
			"location": "https://registry.npmjs.org/negotiator/-/negotiator-0.2.4.tgz",
			"integrity": "sha512-NPfe7Xi/X2sXQ1tuQwBKBu8WE8HoBq07vNrMxSHbv5uZ34YWIZRQaZ48voOBEFZ/YH0WdyFdroHHfWGJp1dJaQ==",
			"publishedAt": "2012-06-02T21:48:39.123Z",
			"publishedWith": {
				"node": "v0.6.5",
				"npm": "1.1.0-alpha-6"
			},
			"dependencies": {}
		},
		"source": {
			"integrity": null,
			"location": "git://github.com/federomero/negotiator.git",
			"spec": "github:federomero/negotiator#HEAD"
		},
		"comparisonHash": "9ef46a5bd31291e57cbab41e2f17c57bd6da0b5b",
		"diff": {
			"files": {
				"LICENSE": {
					"diff": "--- published/LICENSE\n+++ rebuilt/LICENSE\n@@ -1,27 +1,24 @@\n-Original \"Negotiator\" program Copyright Federico Romero\n-Port to JavaScript Copyright Isaac Z. Schlueter\n+(The MIT License)\n \n-All rights reserved.\n+Copyright (c) 2012-2014 Federico Romero\n+Copyright (c) 2012-2014 Isaac Z. Schlueter\n+Copyright (c) 2014-2015 Douglas Christopher Wilson\n \n-MIT License\n-\n-Permission is hereby granted, free of charge, to any person\n-obtaining a copy of this software and associated documentation\n-files (the \"Software\"), to deal in the Software without\n-restriction, including without limitation the rights to use,\n-copy, modify, merge, publish, distribute, sublicense, and/or sell\n-copies of the Software, and to permit persons to whom the\n-Software is furnished to do so, subject to the following\n-conditions:\n+Permission is hereby granted, free of charge, to any person obtaining\n+a copy of this software and associated documentation files (the\n+'Software'), to deal in the Software without restriction, including\n+without limitation the rights to use, copy, modify, merge, publish,\n+distribute, sublicense, and/or sell copies of the Software, and to\n+permit persons to whom the Software is furnished to do so, subject to\n+the following conditions:\n \n The above copyright notice and this permission notice shall be\n included in all copies or substantial portions of the Software.\n \n-THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n-EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n-OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n-NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n-HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n-WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n-FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n-OTHER DEALINGS IN THE SOFTWARE.\n+THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,\n+EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n+MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n+IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n+CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n+TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n+SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n",
					"match": false,
					"packageHash": "38af06cefff17a15d0943462afa99d0b3d7814b009847e43484befdfe022166b",
					"size": 1163,
					"sourceHash": "553d4d20029a24e315b428a1a54a9e109eaa340f2e958a4f50a92362c2c4070b",
					"status": "content"
				},
				"examples/accept.js": {
					"match": false,
					"packageHash": "3ce72a519aae2ca9800f550d2350f06ef0235bd5699166bbd8e1cda79421adf1",
					"size": 1255,
					"status": "missing-in-source"
				},
				"examples/charset.js": {
					"match": false,
					"packageHash": "a23ce71c18cdd70e17dc2c249564288548c3de536d4ee9a28e77d862d73e4255",
					"size": 1331,
					"status": "missing-in-source"
				},
				"examples/encoding.js": {
					"match": false,
					"packageHash": "a1e7e4c2cfeb1d83f4c2bca7681ce2820f8dc40d2dc8260c1ce64bc88c94d4f4",
					"size": 1341,
					"status": "missing-in-source"
				},
				"examples/language.js": {
					"match": false,
					"packageHash": "f8613ba3e7d0a97338b64d4be9098254098f97eeabe3033590d7feb4d0ab0d42",
					"size": 1131,
					"status": "missing-in-source"
				},
				"lib/charset.js": {
					"diff": "--- published/lib/charset.js\n+++ rebuilt/lib/charset.js\n@@ -1,24 +1,65 @@\n+/**\n+ * negotiator\n+ * Copyright(c) 2012 Isaac Z. Schlueter\n+ * Copyright(c) 2014 Federico Romero\n+ * Copyright(c) 2014-2015 Douglas Christopher Wilson\n+ * MIT Licensed\n+ */\n+\n+'use strict';\n+\n+/**\n+ * Module exports.\n+ * @public\n+ */\n+\n module.exports = preferredCharsets;\n-preferredCharsets.preferredCharsets = preferredCharsets;\n+module.exports.preferredCharsets = preferredCharsets;\n+\n+/**\n+ * Module variables.\n+ * @private\n+ */\n+\n+var simpleCharsetRegExp = /^\\s*([^\\s;]+)\\s*(?:;(.*))?$/;\n+\n+/**\n+ * Parse the Accept-Charset header.\n+ * @private\n+ */\n \n function parseAcceptCharset(accept) {\n-  return accept.split(',').map(function(e) {\n-    return parseCharset(e.trim());\n-  }).filter(function(e) {\n-    return e && e.q > 0;\n-  });\n+  var accepts = accept.split(',');\n+\n+  for (var i = 0, j = 0; i < accepts.length; i++) {\n+    var charset = parseCharset(accepts[i].trim(), i);\n+\n+    if (charset) {\n+      accepts[j++] = charset;\n+    }\n+  }\n+\n+  // trim accepts\n+  accepts.length = j;\n+\n+  return accepts;\n }\n \n-function parseCharset(s) {\n-  var match = s.match(/^\\s*(\\S+?)\\s*(?:;(.*))?$/);\n+/**\n+ * Parse a charset from the Accept-Charset header.\n+ * @private\n+ */\n+\n+function parseCharset(str, i) {\n+  var match = simpleCharsetRegExp.exec(str);\n   if (!match) return null;\n \n   var charset = match[1];\n   var q = 1;\n   if (match[2]) {\n     var params = match[2].split(';')\n-    for (var i = 0; i < params.length; i ++) {\n-      var p = params[i].trim().split('=');\n+    for (var j = 0; j < params.length; j++) {\n+      var p = params[j].trim().split('=');\n       if (p[0] === 'q') {\n         q = parseFloat(p[1]);\n         break;\n@@ -28,41 +69,101 @@\n \n   return {\n     charset: charset,\n-    q: q\n+    q: q,\n+    i: i\n   };\n }\n \n-function getCharsetPriority(charset, accepted) {\n-  return (accepted.filter(function(a) {\n-    return specify(charset, a);\n-  }).sort(function (a, b) {\n-    // revsort\n-    return a.q === b.q ? 0 : a.q > b.q ? -1 : 1;\n-  })[0] || {q:0}).q;\n+/**\n+ * Get the priority of a charset.\n+ * @private\n+ */\n+\n",
					"match": false,
					"packageHash": "4ebf933da8c3620d10ca2165f241ab89af5678ed60db56c67bc0f527aea6616b",
					"size": 1569,
					"sourceHash": "e6522a2df58f21a6cdf8d146f7e85b9a49bcaf68b813dec15068a8e84fc582c3",
					"status": "content"
				},
				"lib/encoding.js": {
					"diff": "--- published/lib/encoding.js\n+++ rebuilt/lib/encoding.js\n@@ -1,42 +1,81 @@\n+/**\n+ * negotiator\n+ * Copyright(c) 2012 Isaac Z. Schlueter\n+ * Copyright(c) 2014 Federico Romero\n+ * Copyright(c) 2014-2015 Douglas Christopher Wilson\n+ * MIT Licensed\n+ */\n+\n+'use strict';\n+\n+/**\n+ * Module exports.\n+ * @public\n+ */\n+\n module.exports = preferredEncodings;\n-preferredEncodings.preferredEncodings = preferredEncodings;\n+module.exports.preferredEncodings = preferredEncodings;\n \n-function parseAcceptEncoding(accept) {\n-  var acceptableEncodings;\n+/**\n+ * Module variables.\n+ * @private\n+ */\n+\n+var simpleEncodingRegExp = /^\\s*([^\\s;]+)\\s*(?:;(.*))?$/;\n+\n+/**\n+ * Parse the Accept-Encoding header.\n+ * @private\n+ */\n \n-  if (accept) {\n-    acceptableEncodings = accept.split(',').map(function(e) {\n-      return parseEncoding(e.trim());\n-    });\n-  } else {\n-    acceptableEncodings = [];\n+function parseAcceptEncoding(accept) {\n+  var accepts = accept.split(',');\n+  var hasIdentity = false;\n+  var minQuality = 1;\n+\n+  for (var i = 0, j = 0; i < accepts.length; i++) {\n+    var encoding = parseEncoding(accepts[i].trim(), i);\n+\n+    if (encoding) {\n+      accepts[j++] = encoding;\n+      hasIdentity = hasIdentity || specify('identity', encoding);\n+      minQuality = Math.min(minQuality, encoding.q || 1);\n+    }\n   }\n \n-  if (!acceptableEncodings.some(function(e) {\n-    return e.encoding === 'identity';\n-  })) {\n-    acceptableEncodings.push({\n+  if (!hasIdentity) {\n+    /*\n+     * If identity doesn't explicitly appear in the accept-encoding header,\n+     * it's added to the list of acceptable encoding with the lowest q\n+     */\n+    accepts[j++] = {\n       encoding: 'identity',\n-      q: 0.1\n-    });\n+      q: minQuality,\n+      i: i\n+    };\n   }\n \n-  return acceptableEncodings.filter(function(e) {\n-    return e && e.q > 0;\n-  });\n+  // trim accepts\n+  accepts.length = j;\n+\n+  return accepts;\n }\n \n-function parseEncoding(s) {\n-  var match = s.match(/^\\s*(\\S+?)\\s*(?:;(.*))?$/);\n+/**\n+ * Parse an encoding from the Accept-Encoding header.\n+ * @private\n+ */\n \n+function parseEncoding(str, i) {\n+  var match = simpleEncodingRegExp.exec(str);\n   if (!match) return null;\n \n   var encoding = match[1];\n   var q = 1;\n   if (match[2]) {\n     var params = match[2].split(';');\n-    for (var i = 0; i < params.length; i ++) {\n",
					"match": false,
					"packageHash": "010a24daf397a266c6b81d094d003f5d63d30319d1441690c51797b347fe2315",
					"size": 1909,
					"sourceHash": "b1a7d9ac13dd4441361504233bcbb2ddd2ff0545910c3d42edfb5444b5d92437",
					"status": "content"
				},
				"lib/language.js": {
					"diff": "--- published/lib/language.js\n+++ rebuilt/lib/language.js\n@@ -1,29 +1,70 @@\n+/**\n+ * negotiator\n+ * Copyright(c) 2012 Isaac Z. Schlueter\n+ * Copyright(c) 2014 Federico Romero\n+ * Copyright(c) 2014-2015 Douglas Christopher Wilson\n+ * MIT Licensed\n+ */\n+\n+'use strict';\n+\n+/**\n+ * Module exports.\n+ * @public\n+ */\n+\n module.exports = preferredLanguages;\n-preferredLanguages.preferredLanguages = preferredLanguages;\n+module.exports.preferredLanguages = preferredLanguages;\n+\n+/**\n+ * Module variables.\n+ * @private\n+ */\n+\n+var simpleLanguageRegExp = /^\\s*([^\\s\\-;]+)(?:-([^\\s;]+))?\\s*(?:;(.*))?$/;\n+\n+/**\n+ * Parse the Accept-Language header.\n+ * @private\n+ */\n \n function parseAcceptLanguage(accept) {\n-  return accept.split(',').map(function(e) {\n-    return parseLanguage(e.trim());\n-  }).filter(function(e) {\n-    return e && e.q > 0;\n-  });\n+  var accepts = accept.split(',');\n+\n+  for (var i = 0, j = 0; i < accepts.length; i++) {\n+    var language = parseLanguage(accepts[i].trim(), i);\n+\n+    if (language) {\n+      accepts[j++] = language;\n+    }\n+  }\n+\n+  // trim accepts\n+  accepts.length = j;\n+\n+  return accepts;\n }\n \n-function parseLanguage(s) {\n-  var match = s.match(/^\\s*(\\S+?)(?:-(\\S+?))?\\s*(?:;(.*))?$/);\n+/**\n+ * Parse a language from the Accept-Language header.\n+ * @private\n+ */\n+\n+function parseLanguage(str, i) {\n+  var match = simpleLanguageRegExp.exec(str);\n   if (!match) return null;\n \n-  var prefix = match[1],\n-      suffix = match[2],\n-      full = prefix;\n+  var prefix = match[1]\n+  var suffix = match[2]\n+  var full = prefix\n \n   if (suffix) full += \"-\" + suffix;\n \n   var q = 1;\n   if (match[3]) {\n     var params = match[3].split(';')\n-    for (var i = 0; i < params.length; i ++) {\n-      var p = params[i].split('=');\n+    for (var j = 0; j < params.length; j++) {\n+      var p = params[j].split('=');\n       if (p[0] === 'q') q = parseFloat(p[1]);\n     }\n   }\n@@ -32,58 +73,107 @@\n     prefix: prefix,\n     suffix: suffix,\n     q: q,\n+    i: i,\n     full: full\n   };\n }\n \n-function getLanguagePriority(language, accepted) {\n-  var match = getClosestMatch(language, accepted);\n-  return match ? match.q : 0;\n+/**\n+ * Get the priority of a language.\n",
					"match": false,
					"packageHash": "4253c6b98beeb4d29fd4ac808e1c9668a6927ca28b92430b246f901a8342f856",
					"size": 2056,
					"sourceHash": "4aebb44da06094f2d56f0b20b4fbdd542cda00a4c9295e10bbe55203701c9024",
					"status": "content"
				},
				"lib/mediaType.js": {
					"diff": "--- published/lib/mediaType.js\n+++ rebuilt/lib/mediaType.js\n@@ -1,35 +1,84 @@\n+/**\n+ * negotiator\n+ * Copyright(c) 2012 Isaac Z. Schlueter\n+ * Copyright(c) 2014 Federico Romero\n+ * Copyright(c) 2014-2015 Douglas Christopher Wilson\n+ * MIT Licensed\n+ */\n+\n+'use strict';\n+\n+/**\n+ * Module exports.\n+ * @public\n+ */\n+\n module.exports = preferredMediaTypes;\n-preferredMediaTypes.preferredMediaTypes = preferredMediaTypes;\n+module.exports.preferredMediaTypes = preferredMediaTypes;\n+\n+/**\n+ * Module variables.\n+ * @private\n+ */\n+\n+var simpleMediaTypeRegExp = /^\\s*([^\\s\\/;]+)\\/([^;\\s]+)\\s*(?:;(.*))?$/;\n+\n+/**\n+ * Parse the Accept header.\n+ * @private\n+ */\n \n function parseAccept(accept) {\n-  return accept.split(',').map(function(e) {\n-    return parseMediaType(e.trim());\n-  }).filter(function(e) {\n-    return e && e.q > 0;\n-  });\n-};\n+  var accepts = splitMediaTypes(accept);\n+\n+  for (var i = 0, j = 0; i < accepts.length; i++) {\n+    var mediaType = parseMediaType(accepts[i].trim(), i);\n+\n+    if (mediaType) {\n+      accepts[j++] = mediaType;\n+    }\n+  }\n+\n+  // trim accepts\n+  accepts.length = j;\n \n-function parseMediaType(s) {\n-  var match = s.match(/\\s*(\\S+)\\/([^;\\s]+)\\s*(?:;(.*))?/);\n+  return accepts;\n+}\n+\n+/**\n+ * Parse a media type from the Accept header.\n+ * @private\n+ */\n+\n+function parseMediaType(str, i) {\n+  var match = simpleMediaTypeRegExp.exec(str);\n   if (!match) return null;\n \n-  var type = match[1],\n-      subtype = match[2],\n-      full = \"\" + type + \"/\" + subtype,\n-      params = {},\n-      q = 1;\n+  var params = Object.create(null);\n+  var q = 1;\n+  var subtype = match[2];\n+  var type = match[1];\n \n   if (match[3]) {\n-    params = match[3].split(';').map(function(s) {\n-      return s.trim().split('=');\n-    }).reduce(function (set, p) {\n-      set[p[0]] = p[1];\n-      return set\n-    }, params);\n-\n-    if (params.q != null) {\n-      q = parseFloat(params.q);\n-      delete params.q;\n+    var kvps = splitParameters(match[3]).map(splitKeyValuePair);\n+\n+    for (var j = 0; j < kvps.length; j++) {\n+      var pair = kvps[j];\n+      var key = pair[0].toLowerCase();\n+      var val = pair[1];\n+\n+      // get the value, unwrapping quotes\n+      var value = val && val[0] === '\"' && val[val.length - 1] === '\"'\n+        ? val.slice(1, -1)\n+        : val;\n",
					"match": false,
					"packageHash": "ecceef25d52011a622160c0d7503727ba45f88a1efff66aa86ffcc673b861f92",
					"size": 2095,
					"sourceHash": "4ed7ff46904e6d4ccd292c7de5abab119ae39e90ccfe687dfdc243bbb595d580",
					"status": "content"
				},
				"lib/negotiator.js": {
					"match": false,
					"packageHash": "0a5abbf9fb94306f8dab76d96f2e3c6ee2f29f47baa725753db46a898662ca17",
					"size": 815,
					"status": "missing-in-source"
				},
				"package.json": {
					"diff": "--- published/package.json\n+++ rebuilt/package.json\n@@ -1,13 +1,13 @@\n {\n   \"name\": \"negotiator\",\n   \"description\": \"HTTP content negotiation\",\n-  \"version\": \"0.2.4\",\n-  \"author\": \"Federico Romero <federico.romero@outboxlabs.com>\",\n-  \"contributors\": [\"Isaac Z. Schlueter <i@izs.me> (http://blog.izs.me/)\"],\n-  \"repository\": {\n-    \"type\": \"git\",\n-    \"url\": \"git://github.com/federomero/negotiator.git\"\n-  },\n+  \"version\": \"1.0.0\",\n+  \"contributors\": [\n+    \"Douglas Christopher Wilson <doug@somethingdoug.com>\",\n+    \"Federico Romero <federico.romero@outboxlabs.com>\",\n+    \"Isaac Z. Schlueter <i@izs.me> (http://blog.izs.me/)\"\n+  ],\n+  \"license\": \"MIT\",\n   \"keywords\": [\n     \"http\",\n     \"content negotiation\",\n@@ -16,17 +16,32 @@\n     \"accept-encoding\",\n     \"accept-charset\"\n   ],\n-  \"engine\": \"node >= 0.6\",\n-  \"license\": \"MIT\",\n-  \"devDependencies\": {\n-    \"nodeunit\": \"0.6.x\"\n+  \"repository\": \"jshttp/negotiator\",\n+  \"funding\": {\n+    \"type\": \"opencollective\",\n+    \"url\": \"https://opencollective.com/express\"\n   },\n-  \"scripts\": {\n-    \"test\": \"nodeunit test\"\n+  \"devDependencies\": {\n+    \"eslint\": \"7.32.0\",\n+    \"eslint-plugin-markdown\": \"2.2.1\",\n+    \"mocha\": \"^11.7.0\",\n+    \"nyc\": \"^17.1.0\"\n   },\n-  \"optionalDependencies\": {},\n+  \"files\": [\n+    \"lib/\",\n+    \"HISTORY.md\",\n+    \"LICENSE\",\n+    \"index.js\",\n+    \"README.md\"\n+  ],\n   \"engines\": {\n-    \"node\": \"*\"\n+    \"node\": \">=18\"\n   },\n-  \"main\": \"lib/negotiator.js\"\n+  \"scripts\": {\n+    \"lint\": \"eslint .\",\n+    \"test\": \"mocha --reporter spec --check-leaks test/\",\n+    \"test:debug\": \"mocha --reporter spec --check-leaks --inspect --inspect-brk test/\",\n+    \"test-ci\": \"nyc --reporter=lcovonly --reporter=text npm test\",\n+    \"test-cov\": \"nyc --reporter=html --reporter=text npm test\"\n+  }\n }\n",
					"match": false,
					"packageHash": "27b69cb94575869c51f02c8230e22f5168aec4f9f63018623edf09fff8f6a47d",
					"size": 716,
					"sourceHash": "f6a59dcf3bceee253be0da280438f982c27a910289b6feaf3f0b15002c4ec7a4",
					"status": "content"
				},
				"readme.md": {
					"match": false,
					"packageHash": "543d1e48ab37b8005e59102b9e9a0f3394c14b5f61eec60e7a3f80cbb1c37aac",
					"size": 3402,
					"status": "missing-in-source"
				},
				"test/charset.js": {
					"match": false,
					"packageHash": "27b87b15b0e1aba8903e4ea92715e9bdd5c4b7309f5461a8954d0ac59a821976",
					"size": 1708,
					"status": "missing-in-source"
				},
				"test/encoding.js": {
					"match": false,
					"packageHash": "e844bfd1f473e18b25c9020f323493878aca42edb4963201a6d4159180df13f9",
					"size": 1977,
					"status": "missing-in-source"
				},
				"test/language.js": {
					"match": false,
					"packageHash": "c35040e71e181b60f24851a9f8a28e30ab8df1f986c950bc23d5e661527ee1e0",
					"size": 1832,
					"status": "missing-in-source"
				},
				"test/mediaType.js": {
					"match": false,
					"packageHash": "9ce98774334a4fc730e473eec77891cd4cfbd6e2437ac5a086614354ed5f54cf",
					"size": 2060,
					"status": "missing-in-source"
				},
				"HISTORY.md": {
					"match": false,
					"status": "missing-in-package"
				},
				"README.md": {
					"match": false,
					"status": "missing-in-package"
				},
				"index.js": {
					"match": false,
					"status": "missing-in-package"
				}
			},
			"summary": {
				"differentFiles": 6,
				"matchingFiles": 0,
				"missingInPackage": 3,
				"missingInSource": 10,
				"score": 0,
				"totalFiles": 19
			}
		},
		"prodDependencies": []
	}
]
