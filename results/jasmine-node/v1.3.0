[
	{
		"reproduceVersion": "0.0.0-local",
		"timestamp": "2026-01-01T16:37:00.858Z",
		"os": "linux",
		"arch": "x64",
		"strategy": "npm:11.7.0",
		"reproduced": false,
		"attested": false,
		"package": {
			"spec": "jasmine-node@1.3.0",
			"name": "jasmine-node",
			"version": "1.3.0",
			"location": "https://registry.npmjs.org/jasmine-node/-/jasmine-node-1.3.0.tgz",
			"integrity": "sha512-hIidvsSLG+968ZGNTxB/uXtreNWzjbmI2ZvnOK+v6+b6VBQmCUe21ubHWsDIWOrfbD/+UEm/i5o1QbTPOK+muA==",
			"publishedAt": "2013-02-25T22:52:40.693Z",
			"publishedWith": {
				"node": null,
				"npm": "1.2.11"
			}
		},
		"source": {
			"integrity": null,
			"location": "https://github.com/mhevery/jasmine-node.git",
			"spec": "github:mhevery/jasmine-node#HEAD"
		},
		"comparisonHash": "8a2a8dcbb729bf3ee9216e490c955701f0ddebe1",
		"diff": {
			"files": {
				".npmignore": {
					"match": false,
					"packageHash": "4bfa54f6278779d6b98072e17176d67f868d3205699109e2a19ece4a52891182",
					"size": 121,
					"status": "missing-in-source"
				},
				".travis.yml": {
					"diff": "--- published/.travis.yml\n+++ rebuilt/.travis.yml\n@@ -1,6 +1,3 @@\n language: node_js\n node_js:\n-  - 0.6\n-branches:\n-  only:\n-    - travis\n+  - \"0.10\"\n",
					"match": false,
					"packageHash": "a3fc21a2b5f55ff0b5ab5ddc800e06108b132f13763b1149a0cb624a1438d0c1",
					"size": 66,
					"sourceHash": "e36b9b52fccb8114b8b8b13bdfbaa87342b07bda069b517ca34db9f85adaa3e3",
					"status": "content"
				},
				"LICENSE": {
					"diff": "--- published/LICENSE\n+++ rebuilt/LICENSE\n@@ -1,5 +1,6 @@\n The MIT License\n \n+Copyright (c) 2018-present Christopher J. Brody and other contributors\n Copyright (c) 2010 Adam Abrons and Misko Hevery http://getangular.com\n \n Permission is hereby granted, free of charge, to any person obtaining a copy\n",
					"match": false,
					"packageHash": "3faf24dde4ebde9e6ab64bd617bffa9ed7675bd38d396052c342eec7b653be30",
					"size": 1112,
					"sourceHash": "83c22660380f5d75d59733f2e886aeb927950080e723bab7702f3bcd2b713fff",
					"status": "content"
				},
				"README.md": {
					"diff": "--- published/README.md\n+++ rebuilt/README.md\n@@ -1,36 +1,70 @@\n jasmine-node\n ======\n \n-[![Build Status](https://secure.travis-ci.org/spaghetticode/jasmine-node.png)](http://travis-ci.org/spaghetticode/jasmine-node)\n+[![LICENSE](https://img.shields.io/github/license/mhevery/jasmine-node.svg?style=flat-square)](./LICENSE)\n+[![npm](https://img.shields.io/npm/v/jasmine-node.svg?style=flat-square)](https://www.npmjs.com/package/jasmine-node)\n+[![contributors](https://img.shields.io/badge/contributors-many-purple.svg?style=flat-square)](https://github.com/mhevery/jasmine-node/graphs/contributors)\n+\n+This node.js module makes the wonderful [Pivotal Lab's jasmine](http://github.com/pivotal/jasmine)\n+spec framework (version 1) available in node.js.\n+\n+\n+Project status\n+--------------\n+\n+This project is now in maintenance mode. It is recommended to use the `jasmine` or `jasmine-npm`\n+package whenever possible.\n \n-This node.js module makes the wonderful Pivotal Lab's jasmine\n-(http://github.com/pivotal/jasmine) spec framework available in\n-node.js.\n \n jasmine\n -------\n \n-Version 1.3.1 of Jasmine is currently included with node-jasmine.\n+Version `1.3.1` of Jasmine is currently included with node-jasmine. This is a forked version from the\n+[Karma project](https://github.com/karma-runner/karma-jasmine), which allows you to use the\n+`ddescribe` and `iit` functions to run individual suites or specs.\n+\n+NOTICE: BETA `2.0.0` Support in the `Jasmine2.0` branch (with rewrite in CoffeeScript) is now abandoned and no longer supported.\n+\n+Supported Node.js versions\n+--------------------------\n+\n+* Current:\n+  - 10\n+  - 12\n+* Deprecated:\n+  - 8 (EOL in December 2019)\n+  - 6 (already past EOL)\n+  - 4 (already past EOL)\n+\n+Older versions of Node.js are no longer supported. It is *highly* recommended to upgrade to a supported version of Node.js.\n \n what's new\n ----------\n-*  --config flag that allows you to assign variables to process.env\n+*  Growl notifications with the `--growl` flag (requires Growl to be installed)\n+*  Ability to test specs written in Literate CoffeeScript\n+*  Teamcity Reporter reinstated.\n+*  Ability to specify multiple files to test via list in command line\n+*  Ability to suppress stack trace with `--noStack`\n+*  Async tests now run in the expected context instead of the global one\n+*  `--config` flag that allows you to assign variables to process.env\n *  Terminal Reporters are now available in the Jasmine Object #184\n *  Done is now available in all timeout specs #199\n-*  <code>afterEach</code> is available in requirejs #179\n+*  `afterEach` is available in requirejs #179\n *  Editors that replace instead of changing files should work with autotest #198\n *  Jasmine Mock Clock now works!\n *  Autotest now works!\n *  Using the latest Jasmine!\n-*  Verbose mode tabs <code>describe</code> blocks much more accurately!\n-*  Now with more exclamation points!!\n+*  Verbose mode tabs `describe` blocks much more accurately!\n+*  `--coffee` now allows specs written in Literate CoffeeScript (`.litcoffee`)\n \n install\n ------\n \n To install the latest official version, use NPM:\n \n-    npm install jasmine-node -g\n+```sh\n+npm install jasmine-node -g\n+```\n \n To install the latest _bleeding edge_ version, clone this repository and check\n out the `beta` branch.\n@@ -38,69 +72,110 @@\n usage\n ------\n \n-Write the specifications for your code in *.js and *.coffee files in the\n-spec/ directory (note: your specification files must end with either\n-.spec.js or .spec.coffee; otherwise jasmine-node won't find them!). You\n-can use sub-directories to better organise your specs.\n+Write the specifications for your code in `*.js` and `*.coffee` files in the `spec/` directory.\n+You can use sub-directories to better organise your specs. In the specs use `describe()`, `it()` etc. exactly\n+as you would in client-side jasmine specs.\n+\n+**Note**: your specification files must be named as `*spec.js`, `*spec.coffee` or `*spec.litcoffee`,\n+which matches the regular expression `/spec\\.(js|coffee|litcoffee)$/i`;\n+otherwise jasmine-node won't find them!\n+For example, `sampleSpecs.js` is wrong, `sampleSpec.js` is right.\n \n",
					"match": false,
					"packageHash": "2c84b6baa5d92dbe32748de4791cb2338570f6473e1fed49d8f2f9ed2a2705a1",
					"size": 5620,
					"sourceHash": "c581d8bcbc3af0e9472c16e3a620ba441cd633c8a6b58783c9edf3dd941d59e0",
					"status": "content"
				},
				"bin/jasmine-node": {
					"diff": "--- published/bin/jasmine-node\n+++ rebuilt/bin/jasmine-node\n@@ -3,5 +3,4 @@\n if( !process.env.NODE_ENV ) process.env.NODE_ENV = 'test';\n \n var path = require('path');\n-var fs   = require('fs');\n require(path.join(__dirname,'../lib/jasmine-node/cli.js'));\n",
					"match": false,
					"packageHash": "c05ef026e74240c72186e73f65510b73f81a08526a6dd927c3de9346dda8fbec",
					"size": 195,
					"sourceHash": "065fa9eab36541b48e7032b2d8ec9f05786dff68682e2fd38e3dca1bbf92925c",
					"status": "content"
				},
				"lib/jasmine-node/async-callback.js": {
					"diff": "--- published/lib/jasmine-node/async-callback.js\n+++ rebuilt/lib/jasmine-node/async-callback.js\n@@ -1,61 +1,61 @@\n (function() {\n-  var withoutAsync = {};\n+    var withoutAsync = {};\n \n-  [\"it\", \"beforeEach\", \"afterEach\"].forEach(function(jasmineFunction) {\n-    withoutAsync[jasmineFunction] = jasmine.Env.prototype[jasmineFunction];\n-    return jasmine.Env.prototype[jasmineFunction] = function() {\n-      var args = Array.prototype.slice.call(arguments, 0);\n-      var timeout = null;\n-      if (isLastArgumentATimeout(args)) {\n-         timeout = args.pop();\n-      // The changes to the jasmine test runner causes undef to be passed when\n-      // calling all it()'s now. If the last argument isn't a timeout and the\n-      // last argument IS undefined, let's just pop it off. Since out of bounds\n-      // items are undefined anyways, *hopefully* removing an undef item won't\n-      // hurt.\n-      } else if (args[args.length-1] == undefined) {\n-          args.pop();\n-      }\n-      if (isLastArgumentAnAsyncSpecFunction(args))\n-      {\n-        var specFunction = args.pop();\n-        args.push(function() {\n-          return asyncSpec(specFunction, this, timeout);\n-        });\n-      }\n-      return withoutAsync[jasmineFunction].apply(this, args);\n-    };\n-  });\n+    [\"it\", \"beforeEach\", \"afterEach\"].forEach(function(jasmineFunction) {\n+        withoutAsync[jasmineFunction] = jasmine.Env.prototype[jasmineFunction];\n+        return jasmine.Env.prototype[jasmineFunction] = function() {\n+            var args = Array.prototype.slice.call(arguments, 0);\n+            var timeout = null;\n+            if (isLastArgumentATimeout(args)) {\n+                timeout = args.pop();\n+                // The changes to the jasmine test runner causes undef to be passed when\n+                // calling all it()'s now. If the last argument isn't a timeout and the\n+                // last argument IS undefined, let's just pop it off. Since out of bounds\n+                // items are undefined anyways, *hopefully* removing an undef item won't\n+                // hurt.\n+            } else if (args[args.length-1] == undefined) {\n+                args.pop();\n+            }\n+            if (isLastArgumentAnAsyncSpecFunction(args))\n+            {\n+                var specFunction = args.pop();\n+                args.push(function() {\n+                    return asyncSpec(specFunction, this, timeout);\n+                });\n+            }\n+            return withoutAsync[jasmineFunction].apply(this, args);\n+        };\n+    });\n \n-  function isLastArgumentATimeout(args)\n-  {\n-    return args.length > 0 && (typeof args[args.length-1]) === \"number\";\n-  }\n+    function isLastArgumentATimeout(args)\n+    {\n+        return args.length > 0 && (typeof args[args.length-1]) === \"number\";\n+    }\n \n-  function isLastArgumentAnAsyncSpecFunction(args)\n-  {\n-    return args.length > 0 && (typeof args[args.length-1]) === \"function\" && args[args.length-1].length > 0;\n-  }\n+    function isLastArgumentAnAsyncSpecFunction(args)\n+    {\n+        return args.length > 0 && (typeof args[args.length-1]) === \"function\" && args[args.length-1].length > 0;\n+    }\n \n-  function asyncSpec(specFunction, spec, timeout) {\n-    if (timeout == null) timeout = jasmine.DEFAULT_TIMEOUT_INTERVAL || 1000;\n-    var done = false;\n-    spec.runs(function() {\n-      try {\n-        return specFunction(function(error) {\n-          done = true;\n-          if (error != null) return spec.fail(error);\n+    function asyncSpec(specFunction, spec, timeout) {\n+        if (timeout == null) timeout = jasmine.getEnv().defaultTimeoutInterval || 1000;\n+        var done = false;\n+        spec.runs(function() {\n+            try {\n+                return specFunction.call(spec, function(error) {\n+                    done = true;\n+                    if (error != null) return spec.fail(error);\n+                });\n+            } catch (e) {\n+                done = true;\n+                throw e;\n+            }\n         });\n-      } catch (e) {\n-        done = true;\n",
					"match": false,
					"packageHash": "41e5750babf8c7449d222df0c262c256dd9fd33231ff78389a5135601186968b",
					"size": 1949,
					"sourceHash": "e34511e51497b88fa2da7dfa7ff9645bc1502690ebcf9fcf7930bb40de23cbd3",
					"status": "content"
				},
				"lib/jasmine-node/autotest.js": {
					"diff": "--- published/lib/jasmine-node/autotest.js\n+++ rebuilt/lib/jasmine-node/autotest.js\n@@ -27,55 +27,92 @@\n     }\n }\n \n+var last_run_successful = false;\n+\n var run_everything = function() {\n     // run the suite when it starts\n     var argv = [].concat(baseArgv);\n-    run_external(argv.shift(), argv);\n+    run_external(argv.shift(), argv, function (code) {\n+        last_run_successful = code === 0\n+    });\n }\n \n-var last_run_succesful = true;\n+exports.start = function(loadpaths, watchFolders, patterns) {\n+    var watchPatterns;\n \n-exports.start = function(loadpath, pattern) {\n+    loadpaths.forEach(function(loadpath){\n \n-    // If loadpath is just a single file, we should just watch that file\n-    stats = fs.statSync(loadpath);\n-    if (stats.isFile()) {\n-      console.log(loadpath);\n-      pattern = loadpath;\n-    }\n+      // If loadpath is just a single file, we should just watch that file\n+      stats = fs.statSync(loadpath);\n+      if (stats.isFile()) {\n+        watchPatterns = loadpath;\n+      } else {\n+        watchPatterns = patterns.map(function(p) { \n+          return path.join(loadpath, p);\n+        });\n+      }\n+\n+      changedFunc = function(event, file) {\n+        console.log(file + ' was changed');\n+\n+        var match = path.basename(file, path.extname(file)) + \".*\";\n+        match = match.replace(new RegExp(\"spec\", \"i\"), \"\");\n+\n+        var argv = [].concat(baseArgv, [\"--match\", match]);\n+        run_external(argv.shift(), argv, function(code) {\n+            // run everything if we fixed some bugs\n+            if(code == 0) {\n+                if(!last_run_successful) {\n+                    run_everything();\n+                }\n+            } else {\n+                last_run_successful = false;\n+            }\n+        });\n+      }\n+\n+      // Vim seems to change a file multiple times, with non-scientific testing\n+      // the only time we didn't duplicate the call to onChanged was at 2.5s\n+      // Passing true to have onChanged run on the leading edge of the timeout\n+      var onChanged = _.debounce(changedFunc, 2500, true);\n+\n+      gaze(watchPatterns, function(err, watcher) {\n+        // Get all watched files\n+        console.log(\"Watching for changes in \" + loadpath);\n \n-    changedFunc = function(event, file) {\n-      console.log(file + ' was changed');\n+        // On file changed\n+        this.on('all', onChanged);\n+      });\n \n-      var match = path.basename(file, path.extname(file)) + \".*\";\n-      match = match.replace(new RegExp(\"spec\", \"i\"), \"\");\n \n-      var argv = [].concat(baseArgv, [\"--match\", match]);\n-      run_external(argv.shift(), argv, function(code) {\n-          // run everything if we fixed some bugs\n-          if(code == 0) {\n-              if(!last_run_succesful) {\n-                  run_everything();\n-              }\n-              last_run_succesful = true;\n-          } else {\n-              last_run_succesful = false;\n-          }\n-      });\n-    }\n \n-    // Vim seems to change a file multiple times, with non-scientific testing\n-    // the only time we didn't duplicate the call to onChanged was at 2.5s\n-    // Passing true to have onChanged run on the leading edge of the timeout\n-    var onChanged = _.debounce(changedFunc, 2500, true);\n-\n-    gaze(pattern, function(err, watcher) {\n-      // Get all watched files\n-      console.log(\"Watching for changes\");\n+    });\n",
					"match": false,
					"packageHash": "4634e52456f9372d9e2b712d17e9febd3ecd903624733ffe97bb232d0065ea44",
					"size": 2310,
					"sourceHash": "2ed33ccf7b194b0d84b4ee16d90a603b3732cae77ab132549afcff2d30c16cfe",
					"status": "content"
				},
				"lib/jasmine-node/cli.js": {
					"diff": "--- published/lib/jasmine-node/cli.js\n+++ rebuilt/lib/jasmine-node/cli.js\n@@ -13,7 +13,8 @@\n \n var helperCollection = require('./spec-collection');\n \n-var specFolder = null;\n+var specFolders = [];\n+var watchFolders = [];\n \n // The following line keeps the jasmine setTimeout in the proper scope\n jasmine.setTimeout = jasmine.getGlobal().setTimeout;\n@@ -23,15 +24,21 @@\n \n var isVerbose = false;\n var showColors = true;\n+// Disable if we're not on a TTY\n+if (!process.stdout.isTTY) {\n+    showColors = false;\n+}\n var teamcity = process.env.TEAMCITY_PROJECT_NAME || false;\n var useRequireJs = false;\n-var extentions = \"js\";\n+var extensions = \"js\";\n var match = '.';\n var matchall = false;\n var autotest = false;\n var useHelpers = true;\n var forceExit = false;\n var captureExceptions = false;\n+var includeStackTrace = true;\n+var growl = false;\n \n var junitreport = {\n   report: false,\n@@ -48,6 +55,8 @@\n \n   switch(arg)\n   {\n+    case '--version':\n+      printVersion();\n     case '--color':\n       showColors = true;\n       break;\n@@ -59,8 +68,12 @@\n       isVerbose = true;\n       break;\n     case '--coffee':\n-      require('coffee-script');\n-      extentions = \"js|coffee\";\n+      try {\n+        require('coffeescript/register'); // support CoffeeScript >=1.7.0\n+      } catch ( e ) {\n+        require('coffeescript'); // support CoffeeScript <=1.6.3\n+      }\n+      extensions = \"js|coffee|litcoffee\";\n       break;\n     case '-m':\n     case '--match':\n@@ -98,17 +111,36 @@\n         if(!existsSync(dir))\n           throw new Error(\"Test root path '\" + dir + \"' doesn't exist!\");\n \n-        specFolder = dir; // NOTE: Does not look from current working directory.\n+        specFolders.push(dir); // NOTE: Does not look from current working directory.\n         break;\n     case '--autotest':\n         autotest = true;\n         break;\n+    case '--watch':\n+        var nextWatchDir;\n+\n+        // Add the following arguments, until we see another argument starting with '-'\n+        while (args[0] && args[0][0] !== '-') {\n+          nextWatchDir = args.shift();\n+          watchFolders.push(nextWatchDir);\n+\n+          if (!existsSync(nextWatchDir))\n+            throw new Error(\"Watch path '\" + nextWatchDir + \"' doesn't exist!\");\n+        }\n+        break;\n+\n     case '--forceexit':\n         forceExit = true;\n         break;\n     case '--captureExceptions':\n         captureExceptions = true;\n         break;\n+    case '--noStack':\n+        includeStackTrace = false;\n+        break;\n+    case '--growl':\n+        growl = true;\n+        break;\n     case '--config':\n         var configKey = args.shift();\n         var configValue = args.shift();\n@@ -122,27 +154,34 @@\n       }\n       if (arg.match(/^--/)) help();\n",
					"match": false,
					"packageHash": "26af271d21e08636faad1f666408cb8d7844ca0c74f43a728d90ab64f6160455",
					"size": 5898,
					"sourceHash": "88dd00cc19947a9ff13ddd44ab9aad2469d6137b0fc8229cc9a464a50de1f5b6",
					"status": "content"
				},
				"lib/jasmine-node/cs.js": {
					"diff": "--- published/lib/jasmine-node/cs.js\n+++ rebuilt/lib/jasmine-node/cs.js\n@@ -8,7 +8,7 @@\n /*global define, window, XMLHttpRequest, importScripts, Packages, java,\n   ActiveXObject, process, require */\n \n-define(['coffee-script'], function (CoffeeScript) {\n+define(['coffeescript'], function (CoffeeScript) {\n     'use strict';\n     var fs, getXhr,\n         progIds = ['Msxml2.XMLHTTP', 'Microsoft.XMLHTTP', 'Msxml2.XMLHTTP.4.0'],\n",
					"match": false,
					"packageHash": "a795c63023f005bffcee1f16a150a020a1322cbf094f62fc0207b8a8a76b2630",
					"size": 5907,
					"sourceHash": "d7aa9d20aedaff7ad92e857407f343663c54b1fa4a2dc3d1cae87a55247f9afb",
					"status": "content"
				},
				"lib/jasmine-node/index.js": {
					"diff": "--- published/lib/jasmine-node/index.js\n+++ rebuilt/lib/jasmine-node/index.js\n@@ -1,4 +1,5 @@\n var fs = require('fs');\n+var mkdirp = require('mkdirp');\n var util;\n try {\n   util = require('util')\n@@ -33,32 +34,46 @@\n var nodeReporters = require('./reporter').jasmineNode;\n jasmine.TerminalVerboseReporter = nodeReporters.TerminalVerboseReporter;\n jasmine.TerminalReporter = nodeReporters.TerminalReporter;\n+jasmine.TeamcityReporter = nodeReporters.TeamcityReporter;\n+jasmine.GrowlReporter = require('jasmine-growl-reporter');\n \n \n-jasmine.loadHelpersInFolder=function(folder, matcher)\n-{\n+jasmine.loadHelpersInFolder = function(folder, matcher) {\n   // Check to see if the folder is actually a file, if so, back up to the\n   // parent directory and find some helpers\n   folderStats = fs.statSync(folder);\n   if (folderStats.isFile()) {\n     folder = path.dirname(folder);\n   }\n+\n   var helpers = [],\n       helperCollection = require('./spec-collection');\n \n-  helperCollection.load(folder, matcher);\n+  helperCollection.load([folder], matcher);\n   helpers = helperCollection.getSpecs();\n \n-  for (var i = 0, len = helpers.length; i < len; ++i)\n-  {\n+  for (var i = 0, len = helpers.length; i < len; ++i) {\n     var file = helpers[i].path();\n-    var helper= require(file.replace(/\\.*$/, \"\"));\n-    for (var key in helper)\n+\n+    try {\n+      var helper = require(file.replace(/\\.*$/, \"\"));\n+    } catch (e) {\n+      console.log(\"Exception loading helper: \" + file)\n+      console.log(e);\n+      throw e; // If any of the helpers fail to load, fail everything\n+    }\n+\n+    for (var key in helper) {\n       global[key]= helper[key];\n+    }\n   }\n };\n \n function removeJasmineFrames(text) {\n+  if (!text) {\n+    return text;\n+  }\n+\n   var lines = [];\n   text.split(/\\n/).forEach(function(line){\n     if (line.indexOf(filename) == -1) {\n@@ -69,31 +84,39 @@\n }\n \n jasmine.executeSpecsInFolder = function(options){\n-  var folder =       options['specFolder'];\n+  var folders =      options['specFolders'];\n   var done   =       options['onComplete'];\n   var isVerbose =    options['isVerbose'];\n   var showColors =   options['showColors'];\n   var teamcity =     options['teamcity'];\n   var useRequireJs = options['useRequireJs'];\n   var matcher =      options['regExpSpec'];\n-  var junitreport =  options['junitreport'];\n-                                          \n+  var junitreport = options['junitreport'];\n+  var includeStackTrace = options['includeStackTrace'];\n+  var growl = options['growl'];\n+\n   // Overwriting it allows us to handle custom async specs\n   it = function(desc, func, timeout) {\n       return jasmine.getEnv().it(desc, func, timeout);\n   }\n+  beforeEach = function(func, timeout) {\n+      return jasmine.getEnv().beforeEach(func, timeout);\n+  }\n+  afterEach = function(func, timeout) {\n+      return jasmine.getEnv().afterEach(func, timeout);\n+  }\n   var fileMatcher = matcher || new RegExp(\".(js)$\", \"i\"),\n       colors = showColors || false,\n       specs = require('./spec-collection'),\n       jasmineEnv = jasmine.getEnv();\n \n-  specs.load(folder, fileMatcher);\n+  specs.load(folders, fileMatcher);\n \n   if(junitreport && junitreport.report) {\n     var existsSync = fs.existsSync || path.existsSync;\n",
					"match": false,
					"packageHash": "ceb2fa6b8027e8e598bde1ca27817a7c037d8e3242e4b912bf72ebf1ceaaf802",
					"size": 5274,
					"sourceHash": "26931c94e53c49851e0bd3fd709831a43ce2bd3521396900b3e132661e13b3ae",
					"status": "content"
				},
				"lib/jasmine-node/jasmine-1.3.1.js": {
					"diff": "--- published/lib/jasmine-node/jasmine-1.3.1.js\n+++ rebuilt/lib/jasmine-node/jasmine-1.3.1.js\n@@ -305,7 +305,7 @@\n };\n \n /**\n- * Tells a spy to call through to the actual implemenatation.\n+ * Tells a spy to call through to the actual implementation.\n  *\n  * @example\n  * var foo = {\n@@ -501,6 +501,32 @@\n if (isCommonJS) exports.it = it;\n \n /**\n+ * Creates an exclusive Jasmine spec that will be added to the current suite.\n+ *\n+ * If at least one exclusive (iit) spec is registered, only these exclusive specs are run.\n+ * Note, that this behavior works only with the default specFilter.\n+ * Note, that iit has higher priority over ddescribe\n+ *\n+ * @example\n+ * describe('suite', function() {\n+ *   iit('should be true', function() {\n+ *     // only this spec will be run\n+ *   });\n+ *\n+ *   it('should be false', function() {\n+ *     // this won't be run\n+ *   });\n+ * });\n+ *\n+ * @param {String} desc description of this specification\n+ * @param {Function} func defines the preconditions and expectations of the spec\n+ */\n+var iit = function(desc, func) {\n+  return jasmine.getEnv().iit(desc, func);\n+};\n+if (isCommonJS) exports.iit = iit;\n+\n+/**\n  * Creates a <em>disabled</em> Jasmine spec.\n  *\n  * A convenience method that allows existing specs to be disabled temporarily during development.\n@@ -604,6 +630,37 @@\n };\n if (isCommonJS) exports.describe = describe;\n \n+\n+/**\n+ * Defines an exclusive suite of specifications.\n+ *\n+ * If at least one exclusive (ddescribe) suite is registered, only these exclusive suites are run.\n+ * Note, that this behavior works only with the default specFilter.\n+ *\n+ * @example\n+ * ddescribe('exclusive suite', function() {\n+ *   it('should be true', function() {\n+ *     // this spec will be run\n+ *   });\n+ *\n+ *   it('should be false', function() {\n+ *     // this spec will be run as well\n+ *   });\n+ * });\n+ *\n+ * describe('normal suite', function() {\n+ *   // no spec from this suite will be run\n+ * });\n+ *\n+ *\n+ * @param {String} description A string, usually the class under test.\n+ * @param {Function} specDefinitions function that defines several specs.\n+ */\n+var ddescribe = function(description, specDefinitions) {\n+  return jasmine.getEnv().ddescribe(description, specDefinitions);\n+};\n+if (isCommonJS) exports.ddescribe = ddescribe;\n+\n /**\n  * Disables a suite of specifications.  Used to disable some suites in a file, or files, temporarily during development.\n  *\n@@ -725,14 +782,19 @@\n   this.updateInterval = jasmine.DEFAULT_UPDATE_INTERVAL;\n   this.defaultTimeoutInterval = jasmine.DEFAULT_TIMEOUT_INTERVAL;\n   this.lastUpdate = 0;\n-  this.specFilter = function() {\n-    return true;\n+  this.specFilter = function(spec) {\n+    return this.exclusive_ <= spec.exclusive_;\n   };\n \n   this.nextSpecId_ = 0;\n   this.nextSuiteId_ = 0;\n   this.equalityTesters_ = [];\n \n+  // 0 - normal\n+  // 1 - contains some ddescribe\n+  // 2 - contains some iit\n+  this.exclusive_ = 0;\n",
					"match": false,
					"packageHash": "44067ae5f28d8e9668cdc014cbfc26c273297d83a4f862c406c34ea747169c4d",
					"size": 70892,
					"sourceHash": "a2be964e73995f0f3f11cfc4bd707520fded807113f81ee02c4d36e03d9a5738",
					"status": "content"
				},
				"lib/jasmine-node/reporter.js": {
					"diff": "--- published/lib/jasmine-node/reporter.js\n+++ rebuilt/lib/jasmine-node/reporter.js\n@@ -17,7 +17,7 @@\n \n \n   jasmineNode.TerminalReporter = function(config) {\n-    this.print_ = config.print || util.print;\n+    this.print_ = config.print || function (str) { process.stdout.write(util.format(str)); };\n     this.color_ = config.color ? this.ANSIColors : this.NoColors;\n \n     this.started_ = false;\n@@ -28,6 +28,8 @@\n     this.suites_ = [];\n     this.specResults_ = {};\n     this.failures_ = [];\n+    this.includeStackTrace_ = config.includeStackTrace === false ? false : true;\n+    this.stackFilter_ = config.stackFilter || function(t) { return t; };\n   }\n \n \n@@ -45,12 +47,18 @@\n     ANSIColors: {\n         pass:    function() { return '\\033[32m'; }, // Green\n         fail:    function() { return '\\033[31m'; }, // Red\n+        specTiming:  function()  { return '\\033[34m'; }, // Blue\n+        suiteTiming:  function() { return '\\033[33m'; }, // Yelow\n+        ignore:  function() { return '\\033[37m'; }, // Light Gray\n         neutral: function() { return '\\033[0m';  }  // Normal\n     },\n \n     NoColors: {\n         pass:    function() { return ''; },\n         fail:    function() { return ''; },\n+        specTiming:  function() { return ''; },\n+        suiteTiming: function() { return ''; },\n+        ignore:  function() { return ''; },\n         neutral: function() { return ''; }\n     },\n \n@@ -125,8 +133,10 @@\n         this.printLine_('  ' + (i + 1) + ') ' + failure.spec);\n         this.printLine_('   Message:');\n         this.printLine_('     ' + this.stringWithColor_(failure.message, this.color_.fail()));\n-        this.printLine_('   Stacktrace:');\n-        this.print_('     ' + failure.stackTrace);\n+        if (this.includeStackTrace_) {\n+            this.printLine_('   Stacktrace:');\n+            this.print_('     ' + this.stackFilter_(failure.stackTrace));\n+        }\n       }\n     },\n \n@@ -137,10 +147,10 @@\n     reportSpecResults: function(spec) {\n       var result = spec.results();\n       var msg = '';\n-      if (result.passed()) {\n+      if (result.skipped) {\n+        msg = this.stringWithColor_('-', this.color_.ignore());\n+      } else if (result.passed()) {\n         msg = this.stringWithColor_('.', this.color_.pass());\n-        //      } else if (result.skipped) {  TODO: Research why \"result.skipped\" returns false when \"xit\" is called on a spec?\n-        //        msg = (colors) ? (ansi.yellow + '*' + ansi.none) : '*';\n       } else {\n         msg = this.stringWithColor_('F', this.color_.fail());\n         this.addFailureToFailures_(spec);\n@@ -173,9 +183,17 @@\n       var results = runner.results();\n       var specs = runner.specs();\n       var msg = '';\n-      msg += specs.length + ' test' + ((specs.length === 1) ? '' : 's') + ', ';\n+      var skippedCount = 0;\n+      specs.forEach(function(spec) {\n+        if (spec.results().skipped) {\n+          skippedCount++;\n+        }\n+      });\n+      var passedCount = specs.length - skippedCount;\n+      msg += passedCount + ' test' + ((passedCount === 1) ? '' : 's') + ', ';\n       msg += results.totalCount + ' assertion' + ((results.totalCount === 1) ? '' : 's') + ', ';\n-      msg += results.failedCount + ' failure' + ((results.failedCount === 1) ? '' : 's') + '\\n';\n+      msg += results.failedCount + ' failure' + ((results.failedCount === 1) ? '' : 's') + ', ';\n+      msg += skippedCount + ' skipped' + '\\n';\n       return msg;\n     },\n \n@@ -197,21 +215,50 @@\n     jasmineNode.TerminalReporter.call(this, config);\n     // The extra field in this object\n     this.indent_ = 0;\n+    this.specTimes_ = {};\n+    this.suiteTimes_ = {};\n+    this.suiteResults_ = {};\n   }\n \n \n   jasmineNode.TerminalVerboseReporter.prototype = {\n+\n+    reportSpecStarting: function(spec) {\n+        now = new Date().getTime();\n",
					"match": false,
					"packageHash": "ce68ec5ce15aaf011952b8890f99bb12025c170f76128246cf2b626310add827",
					"size": 8207,
					"sourceHash": "b78744686ffa3d6f009fec7fa8077fa6c264e09c9b68fa40f4978d58963d0246",
					"status": "content"
				},
				"lib/jasmine-node/requirejs-runner.js": {
					"diff": "--- published/lib/jasmine-node/requirejs-runner.js\n+++ rebuilt/lib/jasmine-node/requirejs-runner.js\n@@ -4,7 +4,7 @@\n       requirejs = require('requirejs'),\n       vm = require('vm'),\n       fs = require('fs'),\n-      coffeescript = require('coffee-script'),\n+      coffeescript = require('coffeescript'),\n       template = fs.readFileSync(\n         setupFile || (__dirname + '/requirejs-wrapper-template.js'),\n         'utf8'\n@@ -67,20 +67,19 @@\n       };\n \n   specCollection.getSpecs().forEach(function(s){\n-    var script = fs.readFileSync(s.path(), 'utf8'),\n-        wrappedScript;\n+    var script = fs.readFileSync(s.path(), 'utf8');\n \n     if (s.filename().substr(-6).toLowerCase() == 'coffee') {\n       script = coffeescript.compile(script);\n     }\n \n-    wrappedScript = template + script;\n-\n     var newContext = buildNewContext(s);\n     newContext.setTimeout = jasmine.getGlobal().setTimeout;\n     newContext.setInterval = jasmine.getGlobal().setInterval;\n \n-    vm.runInNewContext(wrappedScript, newContext, s.path());\n+    var vmContext = vm.createContext(newContext);\n+    vm.runInContext(template, vmContext);\n+    vm.runInContext(script, vmContext, s.path());\n   });\n \n   specLoader.executeWhenAllSpecsAreComplete(jasmineEnv);\n",
					"match": false,
					"packageHash": "b160499585a26da00a08c27a7792783cf8290319ac13d1b6dc66667ce80a9370",
					"size": 2532,
					"sourceHash": "3d086cc38128b3be1990730b807312178720d3b4483fd2d55effa4afc861a5d3",
					"status": "content"
				},
				"lib/jasmine-node/spec-collection.js": {
					"diff": "--- published/lib/jasmine-node/spec-collection.js\n+++ rebuilt/lib/jasmine-node/spec-collection.js\n@@ -13,23 +13,25 @@\n   };\n };\n \n-exports.load = function(loadpath, matcher) {\n-  var wannaBeSpecs = walkdir.sync(loadpath, { follow_symlinks: true })\n+exports.load = function(loadpaths, matcher) {\n+  var wannaBeSpecs = []\n   specs = [];\n-\n-  for (var i = 0; i < wannaBeSpecs.length; i++) {\n-    var file = wannaBeSpecs[i];\n-    try {\n-      if (fs.statSync(file).isFile()) {\n-        if (!/.*node_modules.*/.test(path.relative(loadpath, file)) &\n-            matcher.test(path.basename(file))) {\n-          specs.push(createSpecObj(file));\n+  loadpaths.forEach(function(loadpath){\n+    wannaBeSpecs = walkdir.sync(loadpath, { follow_symlinks: true });\n+    for (var i = 0; i < wannaBeSpecs.length; i++) {\n+      var file = wannaBeSpecs[i];\n+      try {\n+        if (fs.statSync(file).isFile()) {\n+          if (!/.*node_modules.*/.test(path.relative(loadpath, file)) &\n+              matcher.test(path.basename(file))) {\n+            specs.push(createSpecObj(file));\n+          }\n         }\n+      } catch(e) {\n+        // nothing to do here\n       }\n-    } catch(e) {\n-      // nothing to do here\n     }\n-  }\n+  });\n };\n \n exports.getSpecs = function() {\n",
					"match": false,
					"packageHash": "5e8522a8bb87baadaa12cb9db49332f1593f79b085f8abfa76be83d1b66a19ef",
					"size": 1330,
					"sourceHash": "0bd4974ad0864844227b51ceb474d38b780dd4f70ffeafd9ac167dd8871e2d40",
					"status": "content"
				},
				"package.json": {
					"diff": "--- published/package.json\n+++ rebuilt/package.json\n@@ -1,14 +1,8 @@\n {\n   \"name\": \"jasmine-node\",\n-  \"version\": \"1.3.0\",\n+  \"version\": \"3.0.0\",\n   \"description\": \"DOM-less simple JavaScript BDD testing framework for Node\",\n-  \"contributors\": [\n-    \"Chris Moultrie <chris@moultrie.org>\"\n-  ],\n-  \"homepage\": [\n-    \"http://pivotal.github.com/jasmine\",\n-    \"https://github.com/mhevery/jasmine-node\"\n-  ],\n+  \"homepage\": \"https://github.com/mhevery/jasmine-node\",\n   \"repository\": {\n     \"type\": \"git\",\n     \"url\": \"https://github.com/mhevery/jasmine-node.git\"\n@@ -18,17 +12,16 @@\n     \"bdd\"\n   ],\n   \"author\": \"Misko Hevery <misko@hevery.com>\",\n-  \"maintainers\": \"Martin HÃ¤ger <martin.haeger@gmail.com>\",\n-  \"licenses\": [\n-    \"MIT\"\n-  ],\n+  \"license\": \"MIT\",\n   \"dependencies\": {\n-    \"coffee-script\": \">=1.0.1\",\n-    \"jasmine-reporters\": \">=0.2.0\",\n-    \"requirejs\": \">=0.27.1\",\n-    \"walkdir\": \">= 0.0.1\",\n-    \"underscore\": \">= 1.3.1\",\n-    \"gaze\": \"~0.3.2\"\n+    \"coffeescript\": \"~1.12.7\",\n+    \"gaze\": \"~1.1.2\",\n+    \"jasmine-growl-reporter\": \"~2.0.0\",\n+    \"jasmine-reporters\": \"~1.0.0\",\n+    \"mkdirp\": \"~0.3.5\",\n+    \"requirejs\": \"~2.3.6\",\n+    \"underscore\": \"~1.9.1\",\n+    \"walkdir\": \"~0.0.12\"\n   },\n   \"bin\": \"bin/jasmine-node\",\n   \"preferGlobal\": true,\n",
					"match": false,
					"packageHash": "0a35cb72843f227482787a8ff87b025d6f68da77b22b5412dc4a7ecf018f5da7",
					"size": 963,
					"sourceHash": "e00e45c546dcb56aaa23ce2b65fdc0c83535e72ec137d8d7e326bffafca3b9df",
					"status": "content"
				},
				"spec/TestSpec.js": {
					"diff": "--- published/spec/TestSpec.js\n+++ rebuilt/spec/TestSpec.js\n@@ -1,8 +1,27 @@\n+\n describe('jasmine-node-flat', function(){\n   it('should pass', function(){\n     expect(1+2).toEqual(3);\n   });\n });\n+\n+describe('beforeEach Timeout', function(){\n+  beforeEach(function(done) {\n+      setTimeout(done, 1000);\n+  }, 100);\n+  it('should fail', function(){\n+    expect(1+2).toEqual(3);\n+  });\n+});\n+\n+describe('afterEach Timeout', function(){\n+  afterEach(function(done) {\n+      setTimeout(done, 1000);\n+  }, 100);\n+  it('should pass and then afterEach will fail', function(){\n+    expect(1+2).toEqual(3);\n+  });\n+});\n \n describe('Testing some characters', function()  {\n     var chars = ['&', '\\'', '\"', '<', '>'];\n",
					"match": false,
					"packageHash": "7eb29e939a4888d897d724ee34b835d6b976d765e2c29bdbc4e2278ef68864f2",
					"size": 2037,
					"sourceHash": "96a1c9b4dd8a0b96cf1475a7f38dd96047609b597bf530029d73e2c1038018e0",
					"status": "content"
				},
				"spec/async-callback_spec.js": {
					"diff": "--- published/spec/async-callback_spec.js\n+++ rebuilt/spec/async-callback_spec.js\n@@ -64,7 +64,7 @@\n         expect(firstResult(env.currentRunner()).message).toEqual(\"Failed asynchronously\");\n       });\n     });\n-    \n+\n \n     it(\"should finish after callback is called\", function() {\n       env.describe(\"it\", function() {\n@@ -87,6 +87,30 @@\n       });\n     });\n \n+      it('should run in the context of the current spec', function(){\n+          var actualContext;\n+          var jasmineSpecContext;\n+          env.describe(\"it\", function() {\n+              env.it(\"register context\", function(done) {\n+                  actualContext = this;\n+                  jasmineSpecContext = env.currentSpec;\n+                  env.expect(this).toBe(jasmineSpecContext);\n+                  done();\n+              });\n+          });\n+\n+          env.currentRunner().execute();\n+\n+          waitsFor(function() {\n+              return env.currentRunner().results().totalCount > 0;\n+          }, 'tested jasmine env runner to run the test', 100);\n+\n+          runs(function() {\n+              expect(actualContext).not.toBe(global);\n+              expect(actualContext).toBe(jasmineSpecContext);\n+          });\n+      });\n+\n   });\n \n   describe(\"beforeEach\", function() {\n",
					"match": false,
					"packageHash": "939571a50ac9e289a96bc841bc76be53b94cca04175a5133559d4093052c691e",
					"size": 3947,
					"sourceHash": "a6ac029eb047549a61b848f7b39ba2a87b470c3dc1d1900815141c12333a21c9",
					"status": "content"
				},
				"spec/reporter_spec.js": {
					"diff": "--- published/spec/reporter_spec.js\n+++ rebuilt/spec/reporter_spec.js\n@@ -19,6 +19,12 @@\n       expect(this.reporter.color_).toEqual(jasmineNode.TerminalReporter.prototype.ANSIColors);\n     });\n \n+    it('initializes includeStackTrace_ from config', function () {\n+        var config = {}\n+        this.reporter = new jasmineNode.TerminalReporter(config);\n+        expect(this.reporter.includeStackTrace_).toBeTruthy();\n+    });\n+\n     it('sets the started_ flag to false', function() {\n       var config = {}\n       this.reporter = new jasmineNode.TerminalReporter(config);\n@@ -245,7 +251,15 @@\n         },\n         specs: function() {\n           var _specs = new Array();\n-          _specs.push(1);\n+          spec = {\n+            results: function() {\n+              var _results = {\n+                skipped: false\n+              }\n+              return _results;\n+            }\n+          };\n+          _specs.push(spec);\n           return _specs;\n         }\n       };\n@@ -253,7 +267,7 @@\n \n     it('uses the specs\\'s length, totalCount and failedCount', function() {\n       var message = this.reporter.printRunnerResults_(this.runner);\n-      expect(message).toEqual('1 test, 23 assertions, 52 failures\\n');\n+      expect(message).toEqual('1 test, 23 assertions, 52 failures, 0 skipped\\n');\n     });\n   });\n \n@@ -298,6 +312,38 @@\n       expect(this.printSpy.argsForCall[0]).toEqual(['Failures:']);\n       expect(this.printSpy.argsForCall[1]).toEqual(['     the stackTrace']);\n     });\n+\n+    it('prints the failures without a Stacktrace', function () {\n+        var config = { includeStackTrace: false };\n+        this.reporter = new jasmineNode.TerminalReporter(config);\n+        this.printSpy = spyOn(this.reporter, 'print_');\n+        this.printLineSpy = spyOn(this.reporter, 'printLine_');\n+\n+        var failure = {\n+            spec: 'the spec',\n+            message: 'the message',\n+            stackTrace: 'the stackTrace'\n+        }\n+\n+        this.reporter.failures_ = new Array();\n+        this.reporter.failures_.push(failure);\n+\n+        this.reporter.reportFailures_();\n+\n+        var generatedOutput =\n+                 [ [ '\\n' ],\n+                 [ '\\n' ],\n+                 [ '  1) the spec' ],\n+                 [ '   Message:' ],\n+                 [ '     the message' ] ];\n+\n+        expect(this.printLineSpy).toHaveBeenCalled();\n+        expect(this.printLineSpy.argsForCall).toEqual(generatedOutput);\n+\n+        expect(this.printSpy).toHaveBeenCalled();\n+        expect(this.printSpy.argsForCall[0]).toEqual(['Failures:']);\n+        expect(this.printSpy.argsForCall[1]).toBeUndefined();\n+    });\n   });\n });\n \n@@ -337,6 +383,7 @@\n   describe('#buildMessagesFromResults_', function() {\n     beforeEach(function() {\n       this.suite = {\n+        id: 17,\n         type: 'suite',\n         name: 'a describe block',\n         suiteNestingLevel: 0,\n@@ -352,7 +399,12 @@\n       };\n \n       this.verboseReporter.specResults_['23'] = {\n-        result: 'passed'\n+        result: 'passed',\n+        runtime: 200\n+      };\n+\n+      this.verboseReporter.suiteResults_['17'] = {\n+        runtime: 500\n       };\n",
					"match": false,
					"packageHash": "c9596700bf1e05d2c79bedf5ba587e7acc905860631ec5ec691630abe8c09e20",
					"size": 13205,
					"sourceHash": "ae5dbd40252ebc3e249a274b1c28bd849b49c8b82efbc99543f6b80118210977",
					"status": "content"
				},
				"specs.sh": {
					"diff": "--- published/specs.sh\n+++ rebuilt/specs.sh\n@@ -1,19 +1,19 @@\n #!/usr/bin/env bash\n \n-entry=\"node lib/jasmine-node/cli.js \"\n+entry=\"node lib/jasmine-node/cli.js --noStack \"\n \n echo \"Running all tests located in the spec directory\"\n command=$entry\"spec\"\n echo $command\n time $command #/nested/uber-nested\n-echo -e \"\\033[1;35m--- Should have 54 tests and 93 assertions and 2 Failure. ---\\033[0m\"\n+echo -e \"\\033[1;35m--- Should have 59 tests and 104 assertions and 4 Failure. ---\\033[0m\"\n echo \"\"\n \n echo \"Running all tests located in the spec directory with coffee option\"\n command=$entry\"--coffee spec\"\n echo $command\n time $command #/nested/uber-nested\n-echo -e \"\\033[1;35m--- Should have 58 tests and 97 assertions and 4 Failures. ---\\033[0m\"\n+echo -e \"\\033[1;35m--- Should have 64 tests and 109 assertions and 6 Failures. ---\\033[0m\"\n echo \"\"\n \n echo \"Running all tests located in the spec directory with requirejs option\"\n@@ -21,7 +21,7 @@\n command=$entry\"--runWithRequireJs spec\"\n echo $command\n time $command\n-echo -e \"\\033[1;35m--- Should have 54 tests and 93 assertions and 2 Failure. ---\\033[0m\"\n+echo -e \"\\033[1;35m--- Should have 59 tests and 104 assertions and 4 Failure. ---\\033[0m\"\n echo \"\"\n \n echo \"Running all tests located in the spec-requirejs directory with requirejs, requirejs setup, and coffee option\"\n@@ -29,3 +29,9 @@\n echo $command\n time $command\n echo -e \"\\033[1;35m--- Should have 2 tests and 4 assertions and 0 Failure. ---\\033[0m\"\n+\n+echo \"Running three specs file in the spec directory with coffee option\"\n+command=$entry\"--coffee spec/AsyncSpec.coffee spec/CoffeeSpec.coffee spec/SampleSpecs.js\"\n+echo $command\n+time $command\n+echo -e \"\\033[1;35m--- Should have 3 tests and 3 assertions and 2 Failure. ---\\033[0m\"\n",
					"match": false,
					"packageHash": "c5c619a1aa8120fa27bd8c519f888443a905fc0bdbd35861f8edf0fae1ae1006",
					"size": 1196,
					"sourceHash": "8eef7e2d39a328708d2eb4b1d65f0b9896624eb9243ffbd13c744dd67831301a",
					"status": "content"
				},
				"bower.json": {
					"match": false,
					"status": "missing-in-package"
				},
				"spec/litcoffee/Litcoffee.spec.litcoffee": {
					"match": false,
					"status": "missing-in-package"
				},
				"spec-requirejs/requirejs-setup.js": {
					"match": false,
					"status": "missing-in-package"
				},
				"spec-requirejs/requirejs-wrapper-template.js": {
					"match": false,
					"status": "missing-in-package"
				}
			},
			"summary": {
				"differentFiles": 18,
				"matchingFiles": 20,
				"missingInPackage": 4,
				"missingInSource": 1,
				"score": 0.46511627906976744,
				"totalFiles": 43
			}
		}
	}
]
